var hee=Object.defineProperty;var Yj=n=>{throw TypeError(n)};var fee=(n,e,t)=>e in n?hee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var J=(n,e,t)=>fee(n,typeof e!="symbol"?e+"":e,t),nP=(n,e,t)=>e.has(n)||Yj("Cannot "+t);var f=(n,e,t)=>(nP(n,e,"read from private field"),t?t.call(n):e.get(n)),O=(n,e,t)=>e.has(n)?Yj("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),I=(n,e,t,r)=>(nP(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),D=(n,e,t)=>(nP(n,e,"access private method"),t);var Dn=(n,e,t,r)=>({set _(i){I(n,e,i,t)},get _(){return f(n,e,r)}});function pee(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var g_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Or(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var KB={exports:{}},YE={},YB={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wx=Symbol.for("react.element"),mee=Symbol.for("react.portal"),gee=Symbol.for("react.fragment"),yee=Symbol.for("react.strict_mode"),vee=Symbol.for("react.profiler"),bee=Symbol.for("react.provider"),wee=Symbol.for("react.context"),xee=Symbol.for("react.forward_ref"),_ee=Symbol.for("react.suspense"),Aee=Symbol.for("react.memo"),See=Symbol.for("react.lazy"),Xj=Symbol.iterator;function Eee(n){return n===null||typeof n!="object"?null:(n=Xj&&n[Xj]||n["@@iterator"],typeof n=="function"?n:null)}var XB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QB=Object.assign,JB={};function ty(n,e,t){this.props=n,this.context=e,this.refs=JB,this.updater=t||XB}ty.prototype.isReactComponent={};ty.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ty.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function ZB(){}ZB.prototype=ty.prototype;function hO(n,e,t){this.props=n,this.context=e,this.refs=JB,this.updater=t||XB}var fO=hO.prototype=new ZB;fO.constructor=hO;QB(fO,ty.prototype);fO.isPureReactComponent=!0;var Qj=Array.isArray,ez=Object.prototype.hasOwnProperty,pO={current:null},tz={key:!0,ref:!0,__self:!0,__source:!0};function nz(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ez.call(e,r)&&!tz.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:wx,type:n,key:s,ref:o,props:i,_owner:pO.current}}function Tee(n,e){return{$$typeof:wx,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function mO(n){return typeof n=="object"&&n!==null&&n.$$typeof===wx}function Cee(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Jj=/\/+/g;function rP(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Cee(""+n.key):e.toString(36)}function S1(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case wx:case mee:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+rP(o,0):r,Qj(i)?(t="",n!=null&&(t=n.replace(Jj,"$&/")+"/"),S1(i,e,t,"",function(c){return c})):i!=null&&(mO(i)&&(i=Tee(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Jj,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Qj(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+rP(s,a);o+=S1(s,e,t,l,i)}else if(l=Eee(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+rP(s,a++),o+=S1(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function y_(n,e,t){if(n==null)return n;var r=[],i=0;return S1(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Pee(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Jr={current:null},E1={transition:null},Iee={ReactCurrentDispatcher:Jr,ReactCurrentBatchConfig:E1,ReactCurrentOwner:pO};function rz(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:y_,forEach:function(n,e,t){y_(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return y_(n,function(){e++}),e},toArray:function(n){return y_(n,function(e){return e})||[]},only:function(n){if(!mO(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Fe.Component=ty;Fe.Fragment=gee;Fe.Profiler=vee;Fe.PureComponent=hO;Fe.StrictMode=yee;Fe.Suspense=_ee;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iee;Fe.act=rz;Fe.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=QB({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=pO.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)ez.call(e,l)&&!tz.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:wx,type:n.type,key:i,ref:s,props:r,_owner:o}};Fe.createContext=function(n){return n={$$typeof:wee,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:bee,_context:n},n.Consumer=n};Fe.createElement=nz;Fe.createFactory=function(n){var e=nz.bind(null,n);return e.type=n,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(n){return{$$typeof:xee,render:n}};Fe.isValidElement=mO;Fe.lazy=function(n){return{$$typeof:See,_payload:{_status:-1,_result:n},_init:Pee}};Fe.memo=function(n,e){return{$$typeof:Aee,type:n,compare:e===void 0?null:e}};Fe.startTransition=function(n){var e=E1.transition;E1.transition={};try{n()}finally{E1.transition=e}};Fe.unstable_act=rz;Fe.useCallback=function(n,e){return Jr.current.useCallback(n,e)};Fe.useContext=function(n){return Jr.current.useContext(n)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(n){return Jr.current.useDeferredValue(n)};Fe.useEffect=function(n,e){return Jr.current.useEffect(n,e)};Fe.useId=function(){return Jr.current.useId()};Fe.useImperativeHandle=function(n,e,t){return Jr.current.useImperativeHandle(n,e,t)};Fe.useInsertionEffect=function(n,e){return Jr.current.useInsertionEffect(n,e)};Fe.useLayoutEffect=function(n,e){return Jr.current.useLayoutEffect(n,e)};Fe.useMemo=function(n,e){return Jr.current.useMemo(n,e)};Fe.useReducer=function(n,e,t){return Jr.current.useReducer(n,e,t)};Fe.useRef=function(n){return Jr.current.useRef(n)};Fe.useState=function(n){return Jr.current.useState(n)};Fe.useSyncExternalStore=function(n,e,t){return Jr.current.useSyncExternalStore(n,e,t)};Fe.useTransition=function(){return Jr.current.useTransition()};Fe.version="18.3.1";YB.exports=Fe;var A=YB.exports;const G=Or(A),iz=pee({__proto__:null,default:G},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kee=A,Ree=Symbol.for("react.element"),Nee=Symbol.for("react.fragment"),Oee=Object.prototype.hasOwnProperty,Mee=kee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dee={key:!0,ref:!0,__self:!0,__source:!0};function sz(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Oee.call(e,r)&&!Dee.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Ree,type:n,key:s,ref:o,props:i,_owner:Mee.current}}YE.Fragment=Nee;YE.jsx=sz;YE.jsxs=sz;KB.exports=YE;var p=KB.exports,oz={exports:{}},cs={},az={exports:{}},lz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(V,U){var K=V.length;V.push(U);e:for(;0<K;){var Q=K-1>>>1,B=V[Q];if(0<i(B,U))V[Q]=U,V[K]=B,K=Q;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var U=V[0],K=V.pop();if(K!==U){V[0]=K;e:for(var Q=0,B=V.length,Y=B>>>1;Q<Y;){var re=2*(Q+1)-1,te=V[re],ie=re+1,ae=V[ie];if(0>i(te,K))ie<B&&0>i(ae,te)?(V[Q]=ae,V[ie]=K,Q=ie):(V[Q]=te,V[re]=K,Q=re);else if(ie<B&&0>i(ae,K))V[Q]=ae,V[ie]=K,Q=ie;else break e}}return U}function i(V,U){var K=V.sortIndex-U.sortIndex;return K!==0?K:V.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,m=!1,y=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(V){for(var U=t(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=V)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(c)}}function S(V){if(g=!1,_(V),!y)if(t(l)!==null)y=!0,z(P);else{var U=t(c);U!==null&&W(S,U.startTime-V)}}function P(V,U){y=!1,g&&(g=!1,w(C),C=-1),m=!0;var K=h;try{for(_(U),d=t(l);d!==null&&(!(d.expirationTime>U)||V&&!L());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,h=d.priorityLevel;var B=Q(d.expirationTime<=U);U=n.unstable_now(),typeof B=="function"?d.callback=B:d===t(l)&&r(l),_(U)}else r(l);d=t(l)}if(d!==null)var Y=!0;else{var re=t(c);re!==null&&W(S,re.startTime-U),Y=!1}return Y}finally{d=null,h=K,m=!1}}var N=!1,T=null,C=-1,k=5,M=-1;function L(){return!(n.unstable_now()-M<k)}function F(){if(T!==null){var V=n.unstable_now();M=V;var U=!0;try{U=T(!0,V)}finally{U?j():(N=!1,T=null)}}else N=!1}var j;if(typeof x=="function")j=function(){x(F)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,H=q.port2;q.port1.onmessage=F,j=function(){H.postMessage(null)}}else j=function(){b(F,0)};function z(V){T=V,N||(N=!0,j())}function W(V,U){C=b(function(){V(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,z(P))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(V){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var K=h;h=U;try{return V()}finally{h=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,U){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var K=h;h=V;try{return U()}finally{h=K}},n.unstable_scheduleCallback=function(V,U,K){var Q=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Q+K:Q):K=Q,V){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=K+B,V={id:u++,callback:U,priorityLevel:V,startTime:K,expirationTime:B,sortIndex:-1},K>Q?(V.sortIndex=K,e(c,V),t(l)===null&&V===t(c)&&(g?(w(C),C=-1):g=!0,W(S,K-Q))):(V.sortIndex=B,e(l,V),y||m||(y=!0,z(P))),V},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(V){var U=h;return function(){var K=h;h=U;try{return V.apply(this,arguments)}finally{h=K}}}})(lz);az.exports=lz;var Lee=az.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jee=A,as=Lee;function se(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cz=new Set,Tb={};function Wf(n,e){Ig(n,e),Ig(n+"Capture",e)}function Ig(n,e){for(Tb[n]=e,n=0;n<e.length;n++)cz.add(e[n])}var Kl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),JI=Object.prototype.hasOwnProperty,Fee=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zj={},eF={};function $ee(n){return JI.call(eF,n)?!0:JI.call(Zj,n)?!1:Fee.test(n)?eF[n]=!0:(Zj[n]=!0,!1)}function Vee(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Bee(n,e,t,r){if(e===null||typeof e>"u"||Vee(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zr(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var cr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){cr[n]=new Zr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];cr[e]=new Zr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){cr[n]=new Zr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){cr[n]=new Zr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){cr[n]=new Zr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){cr[n]=new Zr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){cr[n]=new Zr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){cr[n]=new Zr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){cr[n]=new Zr(n,5,!1,n.toLowerCase(),null,!1,!1)});var gO=/[\-:]([a-z])/g;function yO(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(gO,yO);cr[e]=new Zr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(gO,yO);cr[e]=new Zr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(gO,yO);cr[e]=new Zr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){cr[n]=new Zr(n,1,!1,n.toLowerCase(),null,!1,!1)});cr.xlinkHref=new Zr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){cr[n]=new Zr(n,1,!1,n.toLowerCase(),null,!0,!0)});function vO(n,e,t,r){var i=cr.hasOwnProperty(e)?cr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Bee(e,t,i,r)&&(t=null),r||i===null?$ee(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var oc=jee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,v_=Symbol.for("react.element"),Np=Symbol.for("react.portal"),Op=Symbol.for("react.fragment"),bO=Symbol.for("react.strict_mode"),ZI=Symbol.for("react.profiler"),uz=Symbol.for("react.provider"),dz=Symbol.for("react.context"),wO=Symbol.for("react.forward_ref"),e2=Symbol.for("react.suspense"),t2=Symbol.for("react.suspense_list"),xO=Symbol.for("react.memo"),Ic=Symbol.for("react.lazy"),hz=Symbol.for("react.offscreen"),tF=Symbol.iterator;function Hy(n){return n===null||typeof n!="object"?null:(n=tF&&n[tF]||n["@@iterator"],typeof n=="function"?n:null)}var Gt=Object.assign,iP;function pv(n){if(iP===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);iP=e&&e[1]||""}return`
`+iP+n}var sP=!1;function oP(n,e){if(!n||sP)return"";sP=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{sP=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?pv(n):""}function zee(n){switch(n.tag){case 5:return pv(n.type);case 16:return pv("Lazy");case 13:return pv("Suspense");case 19:return pv("SuspenseList");case 0:case 2:case 15:return n=oP(n.type,!1),n;case 11:return n=oP(n.type.render,!1),n;case 1:return n=oP(n.type,!0),n;default:return""}}function n2(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Op:return"Fragment";case Np:return"Portal";case ZI:return"Profiler";case bO:return"StrictMode";case e2:return"Suspense";case t2:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case dz:return(n.displayName||"Context")+".Consumer";case uz:return(n._context.displayName||"Context")+".Provider";case wO:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case xO:return e=n.displayName||null,e!==null?e:n2(n.type)||"Memo";case Ic:e=n._payload,n=n._init;try{return n2(n(e))}catch{}}return null}function Uee(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return n2(e);case 8:return e===bO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yu(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function fz(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Hee(n){var e=fz(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function b_(n){n._valueTracker||(n._valueTracker=Hee(n))}function pz(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=fz(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function DA(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function r2(n,e){var t=e.checked;return Gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function nF(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Yu(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mz(n,e){e=e.checked,e!=null&&vO(n,"checked",e,!1)}function i2(n,e){mz(n,e);var t=Yu(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?s2(n,e.type,t):e.hasOwnProperty("defaultValue")&&s2(n,e.type,Yu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function rF(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function s2(n,e,t){(e!=="number"||DA(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var mv=Array.isArray;function Qp(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Yu(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function o2(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Gt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function iF(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(se(92));if(mv(t)){if(1<t.length)throw Error(se(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Yu(t)}}function gz(n,e){var t=Yu(e.value),r=Yu(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function sF(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function yz(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function a2(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?yz(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var w_,vz=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(w_=w_||document.createElement("div"),w_.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=w_.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Cb(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Qv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wee=["Webkit","ms","Moz","O"];Object.keys(Qv).forEach(function(n){Wee.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Qv[e]=Qv[n]})});function bz(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Qv.hasOwnProperty(n)&&Qv[n]?(""+e).trim():e+"px"}function wz(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=bz(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var Gee=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function l2(n,e){if(e){if(Gee[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function c2(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var u2=null;function _O(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var d2=null,Jp=null,Zp=null;function oF(n){if(n=Ax(n)){if(typeof d2!="function")throw Error(se(280));var e=n.stateNode;e&&(e=eT(e),d2(n.stateNode,n.type,e))}}function xz(n){Jp?Zp?Zp.push(n):Zp=[n]:Jp=n}function _z(){if(Jp){var n=Jp,e=Zp;if(Zp=Jp=null,oF(n),e)for(n=0;n<e.length;n++)oF(e[n])}}function Az(n,e){return n(e)}function Sz(){}var aP=!1;function Ez(n,e,t){if(aP)return n(e,t);aP=!0;try{return Az(n,e,t)}finally{aP=!1,(Jp!==null||Zp!==null)&&(Sz(),_z())}}function Pb(n,e){var t=n.stateNode;if(t===null)return null;var r=eT(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(se(231,e,typeof t));return t}var h2=!1;if(Kl)try{var Wy={};Object.defineProperty(Wy,"passive",{get:function(){h2=!0}}),window.addEventListener("test",Wy,Wy),window.removeEventListener("test",Wy,Wy)}catch{h2=!1}function qee(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Jv=!1,LA=null,jA=!1,f2=null,Kee={onError:function(n){Jv=!0,LA=n}};function Yee(n,e,t,r,i,s,o,a,l){Jv=!1,LA=null,qee.apply(Kee,arguments)}function Xee(n,e,t,r,i,s,o,a,l){if(Yee.apply(this,arguments),Jv){if(Jv){var c=LA;Jv=!1,LA=null}else throw Error(se(198));jA||(jA=!0,f2=c)}}function Gf(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Tz(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function aF(n){if(Gf(n)!==n)throw Error(se(188))}function Qee(n){var e=n.alternate;if(!e){if(e=Gf(n),e===null)throw Error(se(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return aF(i),n;if(s===r)return aF(i),e;s=s.sibling}throw Error(se(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(se(189))}}if(t.alternate!==r)throw Error(se(190))}if(t.tag!==3)throw Error(se(188));return t.stateNode.current===t?n:e}function Cz(n){return n=Qee(n),n!==null?Pz(n):null}function Pz(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Pz(n);if(e!==null)return e;n=n.sibling}return null}var Iz=as.unstable_scheduleCallback,lF=as.unstable_cancelCallback,Jee=as.unstable_shouldYield,Zee=as.unstable_requestPaint,an=as.unstable_now,ete=as.unstable_getCurrentPriorityLevel,AO=as.unstable_ImmediatePriority,kz=as.unstable_UserBlockingPriority,FA=as.unstable_NormalPriority,tte=as.unstable_LowPriority,Rz=as.unstable_IdlePriority,XE=null,wa=null;function nte(n){if(wa&&typeof wa.onCommitFiberRoot=="function")try{wa.onCommitFiberRoot(XE,n,void 0,(n.current.flags&128)===128)}catch{}}var Ao=Math.clz32?Math.clz32:ste,rte=Math.log,ite=Math.LN2;function ste(n){return n>>>=0,n===0?32:31-(rte(n)/ite|0)|0}var x_=64,__=4194304;function gv(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function $A(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=gv(a):(s&=o,s!==0&&(r=gv(s)))}else o=t&~i,o!==0?r=gv(o):s!==0&&(r=gv(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ao(e),i=1<<t,r|=n[t],e&=~i;return r}function ote(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ate(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Ao(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=ote(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function p2(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Nz(){var n=x_;return x_<<=1,!(x_&4194240)&&(x_=64),n}function lP(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function xx(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ao(e),n[e]=t}function lte(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ao(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function SO(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ao(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var lt=0;function Oz(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Mz,EO,Dz,Lz,jz,m2=!1,A_=[],Mu=null,Du=null,Lu=null,Ib=new Map,kb=new Map,Nc=[],cte="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cF(n,e){switch(n){case"focusin":case"focusout":Mu=null;break;case"dragenter":case"dragleave":Du=null;break;case"mouseover":case"mouseout":Lu=null;break;case"pointerover":case"pointerout":Ib.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kb.delete(e.pointerId)}}function Gy(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ax(e),e!==null&&EO(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function ute(n,e,t,r,i){switch(e){case"focusin":return Mu=Gy(Mu,n,e,t,r,i),!0;case"dragenter":return Du=Gy(Du,n,e,t,r,i),!0;case"mouseover":return Lu=Gy(Lu,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Ib.set(s,Gy(Ib.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,kb.set(s,Gy(kb.get(s)||null,n,e,t,r,i)),!0}return!1}function Fz(n){var e=Gd(n.target);if(e!==null){var t=Gf(e);if(t!==null){if(e=t.tag,e===13){if(e=Tz(t),e!==null){n.blockedOn=e,jz(n.priority,function(){Dz(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function T1(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=g2(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);u2=r,t.target.dispatchEvent(r),u2=null}else return e=Ax(t),e!==null&&EO(e),n.blockedOn=t,!1;e.shift()}return!0}function uF(n,e,t){T1(n)&&t.delete(e)}function dte(){m2=!1,Mu!==null&&T1(Mu)&&(Mu=null),Du!==null&&T1(Du)&&(Du=null),Lu!==null&&T1(Lu)&&(Lu=null),Ib.forEach(uF),kb.forEach(uF)}function qy(n,e){n.blockedOn===e&&(n.blockedOn=null,m2||(m2=!0,as.unstable_scheduleCallback(as.unstable_NormalPriority,dte)))}function Rb(n){function e(i){return qy(i,n)}if(0<A_.length){qy(A_[0],n);for(var t=1;t<A_.length;t++){var r=A_[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Mu!==null&&qy(Mu,n),Du!==null&&qy(Du,n),Lu!==null&&qy(Lu,n),Ib.forEach(e),kb.forEach(e),t=0;t<Nc.length;t++)r=Nc[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Nc.length&&(t=Nc[0],t.blockedOn===null);)Fz(t),t.blockedOn===null&&Nc.shift()}var em=oc.ReactCurrentBatchConfig,VA=!0;function hte(n,e,t,r){var i=lt,s=em.transition;em.transition=null;try{lt=1,TO(n,e,t,r)}finally{lt=i,em.transition=s}}function fte(n,e,t,r){var i=lt,s=em.transition;em.transition=null;try{lt=4,TO(n,e,t,r)}finally{lt=i,em.transition=s}}function TO(n,e,t,r){if(VA){var i=g2(n,e,t,r);if(i===null)vP(n,e,r,BA,t),cF(n,r);else if(ute(i,n,e,t,r))r.stopPropagation();else if(cF(n,r),e&4&&-1<cte.indexOf(n)){for(;i!==null;){var s=Ax(i);if(s!==null&&Mz(s),s=g2(n,e,t,r),s===null&&vP(n,e,r,BA,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else vP(n,e,r,null,t)}}var BA=null;function g2(n,e,t,r){if(BA=null,n=_O(r),n=Gd(n),n!==null)if(e=Gf(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Tz(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return BA=n,null}function $z(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ete()){case AO:return 1;case kz:return 4;case FA:case tte:return 16;case Rz:return 536870912;default:return 16}default:return 16}}var Tu=null,CO=null,C1=null;function Vz(){if(C1)return C1;var n,e=CO,t=e.length,r,i="value"in Tu?Tu.value:Tu.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return C1=i.slice(n,1<r?1-r:void 0)}function P1(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function S_(){return!0}function dF(){return!1}function us(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?S_:dF,this.isPropagationStopped=dF,this}return Gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=S_)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=S_)},persist:function(){},isPersistent:S_}),e}var ny={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PO=us(ny),_x=Gt({},ny,{view:0,detail:0}),pte=us(_x),cP,uP,Ky,QE=Gt({},_x,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IO,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ky&&(Ky&&n.type==="mousemove"?(cP=n.screenX-Ky.screenX,uP=n.screenY-Ky.screenY):uP=cP=0,Ky=n),cP)},movementY:function(n){return"movementY"in n?n.movementY:uP}}),hF=us(QE),mte=Gt({},QE,{dataTransfer:0}),gte=us(mte),yte=Gt({},_x,{relatedTarget:0}),dP=us(yte),vte=Gt({},ny,{animationName:0,elapsedTime:0,pseudoElement:0}),bte=us(vte),wte=Gt({},ny,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xte=us(wte),_te=Gt({},ny,{data:0}),fF=us(_te),Ate={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ste={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ete={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tte(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Ete[n])?!!e[n]:!1}function IO(){return Tte}var Cte=Gt({},_x,{key:function(n){if(n.key){var e=Ate[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=P1(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ste[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IO,charCode:function(n){return n.type==="keypress"?P1(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?P1(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Pte=us(Cte),Ite=Gt({},QE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pF=us(Ite),kte=Gt({},_x,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IO}),Rte=us(kte),Nte=Gt({},ny,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ote=us(Nte),Mte=Gt({},QE,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Dte=us(Mte),Lte=[9,13,27,32],kO=Kl&&"CompositionEvent"in window,Zv=null;Kl&&"documentMode"in document&&(Zv=document.documentMode);var jte=Kl&&"TextEvent"in window&&!Zv,Bz=Kl&&(!kO||Zv&&8<Zv&&11>=Zv),mF=" ",gF=!1;function zz(n,e){switch(n){case"keyup":return Lte.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uz(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Mp=!1;function Fte(n,e){switch(n){case"compositionend":return Uz(e);case"keypress":return e.which!==32?null:(gF=!0,mF);case"textInput":return n=e.data,n===mF&&gF?null:n;default:return null}}function $te(n,e){if(Mp)return n==="compositionend"||!kO&&zz(n,e)?(n=Vz(),C1=CO=Tu=null,Mp=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bz&&e.locale!=="ko"?null:e.data;default:return null}}var Vte={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yF(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Vte[n.type]:e==="textarea"}function Hz(n,e,t,r){xz(r),e=zA(e,"onChange"),0<e.length&&(t=new PO("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var eb=null,Nb=null;function Bte(n){tU(n,0)}function JE(n){var e=jp(n);if(pz(e))return n}function zte(n,e){if(n==="change")return e}var Wz=!1;if(Kl){var hP;if(Kl){var fP="oninput"in document;if(!fP){var vF=document.createElement("div");vF.setAttribute("oninput","return;"),fP=typeof vF.oninput=="function"}hP=fP}else hP=!1;Wz=hP&&(!document.documentMode||9<document.documentMode)}function bF(){eb&&(eb.detachEvent("onpropertychange",Gz),Nb=eb=null)}function Gz(n){if(n.propertyName==="value"&&JE(Nb)){var e=[];Hz(e,Nb,n,_O(n)),Ez(Bte,e)}}function Ute(n,e,t){n==="focusin"?(bF(),eb=e,Nb=t,eb.attachEvent("onpropertychange",Gz)):n==="focusout"&&bF()}function Hte(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return JE(Nb)}function Wte(n,e){if(n==="click")return JE(e)}function Gte(n,e){if(n==="input"||n==="change")return JE(e)}function qte(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Eo=typeof Object.is=="function"?Object.is:qte;function Ob(n,e){if(Eo(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!JI.call(e,i)||!Eo(n[i],e[i]))return!1}return!0}function wF(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xF(n,e){var t=wF(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=wF(t)}}function qz(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?qz(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Kz(){for(var n=window,e=DA();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=DA(n.document)}return e}function RO(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Kte(n){var e=Kz(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&qz(t.ownerDocument.documentElement,t)){if(r!==null&&RO(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=xF(t,s);var o=xF(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Yte=Kl&&"documentMode"in document&&11>=document.documentMode,Dp=null,y2=null,tb=null,v2=!1;function _F(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;v2||Dp==null||Dp!==DA(r)||(r=Dp,"selectionStart"in r&&RO(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),tb&&Ob(tb,r)||(tb=r,r=zA(y2,"onSelect"),0<r.length&&(e=new PO("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Dp)))}function E_(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Lp={animationend:E_("Animation","AnimationEnd"),animationiteration:E_("Animation","AnimationIteration"),animationstart:E_("Animation","AnimationStart"),transitionend:E_("Transition","TransitionEnd")},pP={},Yz={};Kl&&(Yz=document.createElement("div").style,"AnimationEvent"in window||(delete Lp.animationend.animation,delete Lp.animationiteration.animation,delete Lp.animationstart.animation),"TransitionEvent"in window||delete Lp.transitionend.transition);function ZE(n){if(pP[n])return pP[n];if(!Lp[n])return n;var e=Lp[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Yz)return pP[n]=e[t];return n}var Xz=ZE("animationend"),Qz=ZE("animationiteration"),Jz=ZE("animationstart"),Zz=ZE("transitionend"),eU=new Map,AF="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pd(n,e){eU.set(n,e),Wf(e,[n])}for(var mP=0;mP<AF.length;mP++){var gP=AF[mP],Xte=gP.toLowerCase(),Qte=gP[0].toUpperCase()+gP.slice(1);pd(Xte,"on"+Qte)}pd(Xz,"onAnimationEnd");pd(Qz,"onAnimationIteration");pd(Jz,"onAnimationStart");pd("dblclick","onDoubleClick");pd("focusin","onFocus");pd("focusout","onBlur");pd(Zz,"onTransitionEnd");Ig("onMouseEnter",["mouseout","mouseover"]);Ig("onMouseLeave",["mouseout","mouseover"]);Ig("onPointerEnter",["pointerout","pointerover"]);Ig("onPointerLeave",["pointerout","pointerover"]);Wf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jte=new Set("cancel close invalid load scroll toggle".split(" ").concat(yv));function SF(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Xee(r,e,void 0,n),n.currentTarget=null}function tU(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;SF(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;SF(i,a,c),s=l}}}if(jA)throw n=f2,jA=!1,f2=null,n}function Ct(n,e){var t=e[A2];t===void 0&&(t=e[A2]=new Set);var r=n+"__bubble";t.has(r)||(nU(e,n,2,!1),t.add(r))}function yP(n,e,t){var r=0;e&&(r|=4),nU(t,n,r,e)}var T_="_reactListening"+Math.random().toString(36).slice(2);function Mb(n){if(!n[T_]){n[T_]=!0,cz.forEach(function(t){t!=="selectionchange"&&(Jte.has(t)||yP(t,!1,n),yP(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[T_]||(e[T_]=!0,yP("selectionchange",!1,e))}}function nU(n,e,t,r){switch($z(e)){case 1:var i=hte;break;case 4:i=fte;break;default:i=TO}t=i.bind(null,e,t,n),i=void 0,!h2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function vP(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Gd(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Ez(function(){var c=s,u=_O(t),d=[];e:{var h=eU.get(n);if(h!==void 0){var m=PO,y=n;switch(n){case"keypress":if(P1(t)===0)break e;case"keydown":case"keyup":m=Pte;break;case"focusin":y="focus",m=dP;break;case"focusout":y="blur",m=dP;break;case"beforeblur":case"afterblur":m=dP;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=hF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=gte;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Rte;break;case Xz:case Qz:case Jz:m=bte;break;case Zz:m=Ote;break;case"scroll":m=pte;break;case"wheel":m=Dte;break;case"copy":case"cut":case"paste":m=xte;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=pF}var g=(e&4)!==0,b=!g&&n==="scroll",w=g?h!==null?h+"Capture":null:h;g=[];for(var x=c,_;x!==null;){_=x;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,w!==null&&(S=Pb(x,w),S!=null&&g.push(Db(x,S,_)))),b)break;x=x.return}0<g.length&&(h=new m(h,y,null,t,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",h&&t!==u2&&(y=t.relatedTarget||t.fromElement)&&(Gd(y)||y[Yl]))break e;if((m||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=c,y=y?Gd(y):null,y!==null&&(b=Gf(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(g=hF,S="onMouseLeave",w="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(g=pF,S="onPointerLeave",w="onPointerEnter",x="pointer"),b=m==null?h:jp(m),_=y==null?h:jp(y),h=new g(S,x+"leave",m,t,u),h.target=b,h.relatedTarget=_,S=null,Gd(u)===c&&(g=new g(w,x+"enter",y,t,u),g.target=_,g.relatedTarget=b,S=g),b=S,m&&y)t:{for(g=m,w=y,x=0,_=g;_;_=hp(_))x++;for(_=0,S=w;S;S=hp(S))_++;for(;0<x-_;)g=hp(g),x--;for(;0<_-x;)w=hp(w),_--;for(;x--;){if(g===w||w!==null&&g===w.alternate)break t;g=hp(g),w=hp(w)}g=null}else g=null;m!==null&&EF(d,h,m,g,!1),y!==null&&b!==null&&EF(d,b,y,g,!0)}}e:{if(h=c?jp(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var P=zte;else if(yF(h))if(Wz)P=Gte;else{P=Hte;var N=Ute}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(P=Wte);if(P&&(P=P(n,c))){Hz(d,P,t,u);break e}N&&N(n,h,c),n==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&s2(h,"number",h.value)}switch(N=c?jp(c):window,n){case"focusin":(yF(N)||N.contentEditable==="true")&&(Dp=N,y2=c,tb=null);break;case"focusout":tb=y2=Dp=null;break;case"mousedown":v2=!0;break;case"contextmenu":case"mouseup":case"dragend":v2=!1,_F(d,t,u);break;case"selectionchange":if(Yte)break;case"keydown":case"keyup":_F(d,t,u)}var T;if(kO)e:{switch(n){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Mp?zz(n,t)&&(C="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(C="onCompositionStart");C&&(Bz&&t.locale!=="ko"&&(Mp||C!=="onCompositionStart"?C==="onCompositionEnd"&&Mp&&(T=Vz()):(Tu=u,CO="value"in Tu?Tu.value:Tu.textContent,Mp=!0)),N=zA(c,C),0<N.length&&(C=new fF(C,n,null,t,u),d.push({event:C,listeners:N}),T?C.data=T:(T=Uz(t),T!==null&&(C.data=T)))),(T=jte?Fte(n,t):$te(n,t))&&(c=zA(c,"onBeforeInput"),0<c.length&&(u=new fF("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=T))}tU(d,e)})}function Db(n,e,t){return{instance:n,listener:e,currentTarget:t}}function zA(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Pb(n,t),s!=null&&r.unshift(Db(n,s,i)),s=Pb(n,e),s!=null&&r.push(Db(n,s,i))),n=n.return}return r}function hp(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function EF(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Pb(t,s),l!=null&&o.unshift(Db(t,l,a))):i||(l=Pb(t,s),l!=null&&o.push(Db(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Zte=/\r\n?/g,ene=/\u0000|\uFFFD/g;function TF(n){return(typeof n=="string"?n:""+n).replace(Zte,`
`).replace(ene,"")}function C_(n,e,t){if(e=TF(e),TF(n)!==e&&t)throw Error(se(425))}function UA(){}var b2=null,w2=null;function x2(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _2=typeof setTimeout=="function"?setTimeout:void 0,tne=typeof clearTimeout=="function"?clearTimeout:void 0,CF=typeof Promise=="function"?Promise:void 0,nne=typeof queueMicrotask=="function"?queueMicrotask:typeof CF<"u"?function(n){return CF.resolve(null).then(n).catch(rne)}:_2;function rne(n){setTimeout(function(){throw n})}function bP(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Rb(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Rb(e)}function ju(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function PF(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ry=Math.random().toString(36).slice(2),pa="__reactFiber$"+ry,Lb="__reactProps$"+ry,Yl="__reactContainer$"+ry,A2="__reactEvents$"+ry,ine="__reactListeners$"+ry,sne="__reactHandles$"+ry;function Gd(n){var e=n[pa];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Yl]||t[pa]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=PF(n);n!==null;){if(t=n[pa])return t;n=PF(n)}return e}n=t,t=n.parentNode}return null}function Ax(n){return n=n[pa]||n[Yl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function jp(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(se(33))}function eT(n){return n[Lb]||null}var S2=[],Fp=-1;function md(n){return{current:n}}function Ot(n){0>Fp||(n.current=S2[Fp],S2[Fp]=null,Fp--)}function xt(n,e){Fp++,S2[Fp]=n.current,n.current=e}var Xu={},kr=md(Xu),_i=md(!1),Af=Xu;function kg(n,e){var t=n.type.contextTypes;if(!t)return Xu;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ai(n){return n=n.childContextTypes,n!=null}function HA(){Ot(_i),Ot(kr)}function IF(n,e,t){if(kr.current!==Xu)throw Error(se(168));xt(kr,e),xt(_i,t)}function rU(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(se(108,Uee(n)||"Unknown",i));return Gt({},t,r)}function WA(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Xu,Af=kr.current,xt(kr,n),xt(_i,_i.current),!0}function kF(n,e,t){var r=n.stateNode;if(!r)throw Error(se(169));t?(n=rU(n,e,Af),r.__reactInternalMemoizedMergedChildContext=n,Ot(_i),Ot(kr),xt(kr,n)):Ot(_i),xt(_i,t)}var nl=null,tT=!1,wP=!1;function iU(n){nl===null?nl=[n]:nl.push(n)}function one(n){tT=!0,iU(n)}function gd(){if(!wP&&nl!==null){wP=!0;var n=0,e=lt;try{var t=nl;for(lt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}nl=null,tT=!1}catch(i){throw nl!==null&&(nl=nl.slice(n+1)),Iz(AO,gd),i}finally{lt=e,wP=!1}}return null}var $p=[],Vp=0,GA=null,qA=0,As=[],Ss=0,Sf=null,Dl=1,Ll="";function Nd(n,e){$p[Vp++]=qA,$p[Vp++]=GA,GA=n,qA=e}function sU(n,e,t){As[Ss++]=Dl,As[Ss++]=Ll,As[Ss++]=Sf,Sf=n;var r=Dl;n=Ll;var i=32-Ao(r)-1;r&=~(1<<i),t+=1;var s=32-Ao(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Dl=1<<32-Ao(e)+i|t<<i|r,Ll=s+n}else Dl=1<<s|t<<i|r,Ll=n}function NO(n){n.return!==null&&(Nd(n,1),sU(n,1,0))}function OO(n){for(;n===GA;)GA=$p[--Vp],$p[Vp]=null,qA=$p[--Vp],$p[Vp]=null;for(;n===Sf;)Sf=As[--Ss],As[Ss]=null,Ll=As[--Ss],As[Ss]=null,Dl=As[--Ss],As[Ss]=null}var rs=null,ts=null,Ft=!1,yo=null;function oU(n,e){var t=ks(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function RF(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,rs=n,ts=ju(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,rs=n,ts=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Sf!==null?{id:Dl,overflow:Ll}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ks(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,rs=n,ts=null,!0):!1;default:return!1}}function E2(n){return(n.mode&1)!==0&&(n.flags&128)===0}function T2(n){if(Ft){var e=ts;if(e){var t=e;if(!RF(n,e)){if(E2(n))throw Error(se(418));e=ju(t.nextSibling);var r=rs;e&&RF(n,e)?oU(r,t):(n.flags=n.flags&-4097|2,Ft=!1,rs=n)}}else{if(E2(n))throw Error(se(418));n.flags=n.flags&-4097|2,Ft=!1,rs=n}}}function NF(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;rs=n}function P_(n){if(n!==rs)return!1;if(!Ft)return NF(n),Ft=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!x2(n.type,n.memoizedProps)),e&&(e=ts)){if(E2(n))throw aU(),Error(se(418));for(;e;)oU(n,e),e=ju(e.nextSibling)}if(NF(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(se(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ts=ju(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ts=null}}else ts=rs?ju(n.stateNode.nextSibling):null;return!0}function aU(){for(var n=ts;n;)n=ju(n.nextSibling)}function Rg(){ts=rs=null,Ft=!1}function MO(n){yo===null?yo=[n]:yo.push(n)}var ane=oc.ReactCurrentBatchConfig;function Yy(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(se(309));var r=t.stateNode}if(!r)throw Error(se(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(se(284));if(!t._owner)throw Error(se(290,n))}return n}function I_(n,e){throw n=Object.prototype.toString.call(e),Error(se(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function OF(n){var e=n._init;return e(n._payload)}function lU(n){function e(w,x){if(n){var _=w.deletions;_===null?(w.deletions=[x],w.flags|=16):_.push(x)}}function t(w,x){if(!n)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function i(w,x){return w=Bu(w,x),w.index=0,w.sibling=null,w}function s(w,x,_){return w.index=_,n?(_=w.alternate,_!==null?(_=_.index,_<x?(w.flags|=2,x):_):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return n&&w.alternate===null&&(w.flags|=2),w}function a(w,x,_,S){return x===null||x.tag!==6?(x=CP(_,w.mode,S),x.return=w,x):(x=i(x,_),x.return=w,x)}function l(w,x,_,S){var P=_.type;return P===Op?u(w,x,_.props.children,S,_.key):x!==null&&(x.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ic&&OF(P)===x.type)?(S=i(x,_.props),S.ref=Yy(w,x,_),S.return=w,S):(S=D1(_.type,_.key,_.props,null,w.mode,S),S.ref=Yy(w,x,_),S.return=w,S)}function c(w,x,_,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=PP(_,w.mode,S),x.return=w,x):(x=i(x,_.children||[]),x.return=w,x)}function u(w,x,_,S,P){return x===null||x.tag!==7?(x=yf(_,w.mode,S,P),x.return=w,x):(x=i(x,_),x.return=w,x)}function d(w,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=CP(""+x,w.mode,_),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case v_:return _=D1(x.type,x.key,x.props,null,w.mode,_),_.ref=Yy(w,null,x),_.return=w,_;case Np:return x=PP(x,w.mode,_),x.return=w,x;case Ic:var S=x._init;return d(w,S(x._payload),_)}if(mv(x)||Hy(x))return x=yf(x,w.mode,_,null),x.return=w,x;I_(w,x)}return null}function h(w,x,_,S){var P=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return P!==null?null:a(w,x,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case v_:return _.key===P?l(w,x,_,S):null;case Np:return _.key===P?c(w,x,_,S):null;case Ic:return P=_._init,h(w,x,P(_._payload),S)}if(mv(_)||Hy(_))return P!==null?null:u(w,x,_,S,null);I_(w,_)}return null}function m(w,x,_,S,P){if(typeof S=="string"&&S!==""||typeof S=="number")return w=w.get(_)||null,a(x,w,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case v_:return w=w.get(S.key===null?_:S.key)||null,l(x,w,S,P);case Np:return w=w.get(S.key===null?_:S.key)||null,c(x,w,S,P);case Ic:var N=S._init;return m(w,x,_,N(S._payload),P)}if(mv(S)||Hy(S))return w=w.get(_)||null,u(x,w,S,P,null);I_(x,S)}return null}function y(w,x,_,S){for(var P=null,N=null,T=x,C=x=0,k=null;T!==null&&C<_.length;C++){T.index>C?(k=T,T=null):k=T.sibling;var M=h(w,T,_[C],S);if(M===null){T===null&&(T=k);break}n&&T&&M.alternate===null&&e(w,T),x=s(M,x,C),N===null?P=M:N.sibling=M,N=M,T=k}if(C===_.length)return t(w,T),Ft&&Nd(w,C),P;if(T===null){for(;C<_.length;C++)T=d(w,_[C],S),T!==null&&(x=s(T,x,C),N===null?P=T:N.sibling=T,N=T);return Ft&&Nd(w,C),P}for(T=r(w,T);C<_.length;C++)k=m(T,w,C,_[C],S),k!==null&&(n&&k.alternate!==null&&T.delete(k.key===null?C:k.key),x=s(k,x,C),N===null?P=k:N.sibling=k,N=k);return n&&T.forEach(function(L){return e(w,L)}),Ft&&Nd(w,C),P}function g(w,x,_,S){var P=Hy(_);if(typeof P!="function")throw Error(se(150));if(_=P.call(_),_==null)throw Error(se(151));for(var N=P=null,T=x,C=x=0,k=null,M=_.next();T!==null&&!M.done;C++,M=_.next()){T.index>C?(k=T,T=null):k=T.sibling;var L=h(w,T,M.value,S);if(L===null){T===null&&(T=k);break}n&&T&&L.alternate===null&&e(w,T),x=s(L,x,C),N===null?P=L:N.sibling=L,N=L,T=k}if(M.done)return t(w,T),Ft&&Nd(w,C),P;if(T===null){for(;!M.done;C++,M=_.next())M=d(w,M.value,S),M!==null&&(x=s(M,x,C),N===null?P=M:N.sibling=M,N=M);return Ft&&Nd(w,C),P}for(T=r(w,T);!M.done;C++,M=_.next())M=m(T,w,C,M.value,S),M!==null&&(n&&M.alternate!==null&&T.delete(M.key===null?C:M.key),x=s(M,x,C),N===null?P=M:N.sibling=M,N=M);return n&&T.forEach(function(F){return e(w,F)}),Ft&&Nd(w,C),P}function b(w,x,_,S){if(typeof _=="object"&&_!==null&&_.type===Op&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case v_:e:{for(var P=_.key,N=x;N!==null;){if(N.key===P){if(P=_.type,P===Op){if(N.tag===7){t(w,N.sibling),x=i(N,_.props.children),x.return=w,w=x;break e}}else if(N.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ic&&OF(P)===N.type){t(w,N.sibling),x=i(N,_.props),x.ref=Yy(w,N,_),x.return=w,w=x;break e}t(w,N);break}else e(w,N);N=N.sibling}_.type===Op?(x=yf(_.props.children,w.mode,S,_.key),x.return=w,w=x):(S=D1(_.type,_.key,_.props,null,w.mode,S),S.ref=Yy(w,x,_),S.return=w,w=S)}return o(w);case Np:e:{for(N=_.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){t(w,x.sibling),x=i(x,_.children||[]),x.return=w,w=x;break e}else{t(w,x);break}else e(w,x);x=x.sibling}x=PP(_,w.mode,S),x.return=w,w=x}return o(w);case Ic:return N=_._init,b(w,x,N(_._payload),S)}if(mv(_))return y(w,x,_,S);if(Hy(_))return g(w,x,_,S);I_(w,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(t(w,x.sibling),x=i(x,_),x.return=w,w=x):(t(w,x),x=CP(_,w.mode,S),x.return=w,w=x),o(w)):t(w,x)}return b}var Ng=lU(!0),cU=lU(!1),KA=md(null),YA=null,Bp=null,DO=null;function LO(){DO=Bp=YA=null}function jO(n){var e=KA.current;Ot(KA),n._currentValue=e}function C2(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function tm(n,e){YA=n,DO=Bp=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(bi=!0),n.firstContext=null)}function Ds(n){var e=n._currentValue;if(DO!==n)if(n={context:n,memoizedValue:e,next:null},Bp===null){if(YA===null)throw Error(se(308));Bp=n,YA.dependencies={lanes:0,firstContext:n}}else Bp=Bp.next=n;return e}var qd=null;function FO(n){qd===null?qd=[n]:qd.push(n)}function uU(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,FO(e)):(t.next=i.next,i.next=t),e.interleaved=t,Xl(n,r)}function Xl(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var kc=!1;function $O(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dU(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function $l(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Fu(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Xl(n,t)}return i=r.interleaved,i===null?(e.next=e,FO(r)):(e.next=i.next,i.next=e),r.interleaved=e,Xl(n,t)}function I1(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,SO(n,t)}}function MF(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function XA(n,e,t,r){var i=n.updateQueue;kc=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,m=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,g=a;switch(h=e,m=t,g.tag){case 1:if(y=g.payload,typeof y=="function"){d=y.call(m,d,h);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,h=typeof y=="function"?y.call(m,d,h):y,h==null)break e;d=Gt({},d,h);break e;case 2:kc=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Tf|=o,n.lanes=o,n.memoizedState=d}}function DF(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(se(191,i));i.call(r)}}}var Sx={},xa=md(Sx),jb=md(Sx),Fb=md(Sx);function Kd(n){if(n===Sx)throw Error(se(174));return n}function VO(n,e){switch(xt(Fb,e),xt(jb,n),xt(xa,Sx),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:a2(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=a2(e,n)}Ot(xa),xt(xa,e)}function Og(){Ot(xa),Ot(jb),Ot(Fb)}function hU(n){Kd(Fb.current);var e=Kd(xa.current),t=a2(e,n.type);e!==t&&(xt(jb,n),xt(xa,t))}function BO(n){jb.current===n&&(Ot(xa),Ot(jb))}var Ut=md(0);function QA(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xP=[];function zO(){for(var n=0;n<xP.length;n++)xP[n]._workInProgressVersionPrimary=null;xP.length=0}var k1=oc.ReactCurrentDispatcher,_P=oc.ReactCurrentBatchConfig,Ef=0,Ht=null,In=null,Wn=null,JA=!1,nb=!1,$b=0,lne=0;function pr(){throw Error(se(321))}function UO(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Eo(n[t],e[t]))return!1;return!0}function HO(n,e,t,r,i,s){if(Ef=s,Ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,k1.current=n===null||n.memoizedState===null?hne:fne,n=t(r,i),nb){s=0;do{if(nb=!1,$b=0,25<=s)throw Error(se(301));s+=1,Wn=In=null,e.updateQueue=null,k1.current=pne,n=t(r,i)}while(nb)}if(k1.current=ZA,e=In!==null&&In.next!==null,Ef=0,Wn=In=Ht=null,JA=!1,e)throw Error(se(300));return n}function WO(){var n=$b!==0;return $b=0,n}function Wo(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?Ht.memoizedState=Wn=n:Wn=Wn.next=n,Wn}function Ls(){if(In===null){var n=Ht.alternate;n=n!==null?n.memoizedState:null}else n=In.next;var e=Wn===null?Ht.memoizedState:Wn.next;if(e!==null)Wn=e,In=n;else{if(n===null)throw Error(se(310));In=n,n={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},Wn===null?Ht.memoizedState=Wn=n:Wn=Wn.next=n}return Wn}function Vb(n,e){return typeof e=="function"?e(n):e}function AP(n){var e=Ls(),t=e.queue;if(t===null)throw Error(se(311));t.lastRenderedReducer=n;var r=In,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ef&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ht.lanes|=u,Tf|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Eo(r,e.memoizedState)||(bi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Ht.lanes|=s,Tf|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function SP(n){var e=Ls(),t=e.queue;if(t===null)throw Error(se(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Eo(s,e.memoizedState)||(bi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function fU(){}function pU(n,e){var t=Ht,r=Ls(),i=e(),s=!Eo(r.memoizedState,i);if(s&&(r.memoizedState=i,bi=!0),r=r.queue,GO(yU.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Wn!==null&&Wn.memoizedState.tag&1){if(t.flags|=2048,Bb(9,gU.bind(null,t,r,i,e),void 0,null),Gn===null)throw Error(se(349));Ef&30||mU(t,e,i)}return i}function mU(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function gU(n,e,t,r){e.value=t,e.getSnapshot=r,vU(e)&&bU(n)}function yU(n,e,t){return t(function(){vU(e)&&bU(n)})}function vU(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Eo(n,t)}catch{return!0}}function bU(n){var e=Xl(n,1);e!==null&&So(e,n,1,-1)}function LF(n){var e=Wo();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vb,lastRenderedState:n},e.queue=n,n=n.dispatch=dne.bind(null,Ht,n),[e.memoizedState,n]}function Bb(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function wU(){return Ls().memoizedState}function R1(n,e,t,r){var i=Wo();Ht.flags|=n,i.memoizedState=Bb(1|e,t,void 0,r===void 0?null:r)}function nT(n,e,t,r){var i=Ls();r=r===void 0?null:r;var s=void 0;if(In!==null){var o=In.memoizedState;if(s=o.destroy,r!==null&&UO(r,o.deps)){i.memoizedState=Bb(e,t,s,r);return}}Ht.flags|=n,i.memoizedState=Bb(1|e,t,s,r)}function jF(n,e){return R1(8390656,8,n,e)}function GO(n,e){return nT(2048,8,n,e)}function xU(n,e){return nT(4,2,n,e)}function _U(n,e){return nT(4,4,n,e)}function AU(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function SU(n,e,t){return t=t!=null?t.concat([n]):null,nT(4,4,AU.bind(null,e,n),t)}function qO(){}function EU(n,e){var t=Ls();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&UO(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function TU(n,e){var t=Ls();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&UO(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function CU(n,e,t){return Ef&21?(Eo(t,e)||(t=Nz(),Ht.lanes|=t,Tf|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,bi=!0),n.memoizedState=t)}function cne(n,e){var t=lt;lt=t!==0&&4>t?t:4,n(!0);var r=_P.transition;_P.transition={};try{n(!1),e()}finally{lt=t,_P.transition=r}}function PU(){return Ls().memoizedState}function une(n,e,t){var r=Vu(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},IU(n))kU(e,t);else if(t=uU(n,e,t,r),t!==null){var i=Xr();So(t,n,r,i),RU(t,e,r)}}function dne(n,e,t){var r=Vu(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(IU(n))kU(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Eo(a,o)){var l=e.interleaved;l===null?(i.next=i,FO(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=uU(n,e,i,r),t!==null&&(i=Xr(),So(t,n,r,i),RU(t,e,r))}}function IU(n){var e=n.alternate;return n===Ht||e!==null&&e===Ht}function kU(n,e){nb=JA=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function RU(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,SO(n,t)}}var ZA={readContext:Ds,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},hne={readContext:Ds,useCallback:function(n,e){return Wo().memoizedState=[n,e===void 0?null:e],n},useContext:Ds,useEffect:jF,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,R1(4194308,4,AU.bind(null,e,n),t)},useLayoutEffect:function(n,e){return R1(4194308,4,n,e)},useInsertionEffect:function(n,e){return R1(4,2,n,e)},useMemo:function(n,e){var t=Wo();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Wo();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=une.bind(null,Ht,n),[r.memoizedState,n]},useRef:function(n){var e=Wo();return n={current:n},e.memoizedState=n},useState:LF,useDebugValue:qO,useDeferredValue:function(n){return Wo().memoizedState=n},useTransition:function(){var n=LF(!1),e=n[0];return n=cne.bind(null,n[1]),Wo().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Ht,i=Wo();if(Ft){if(t===void 0)throw Error(se(407));t=t()}else{if(t=e(),Gn===null)throw Error(se(349));Ef&30||mU(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,jF(yU.bind(null,r,s,n),[n]),r.flags|=2048,Bb(9,gU.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Wo(),e=Gn.identifierPrefix;if(Ft){var t=Ll,r=Dl;t=(r&~(1<<32-Ao(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=$b++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=lne++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},fne={readContext:Ds,useCallback:EU,useContext:Ds,useEffect:GO,useImperativeHandle:SU,useInsertionEffect:xU,useLayoutEffect:_U,useMemo:TU,useReducer:AP,useRef:wU,useState:function(){return AP(Vb)},useDebugValue:qO,useDeferredValue:function(n){var e=Ls();return CU(e,In.memoizedState,n)},useTransition:function(){var n=AP(Vb)[0],e=Ls().memoizedState;return[n,e]},useMutableSource:fU,useSyncExternalStore:pU,useId:PU,unstable_isNewReconciler:!1},pne={readContext:Ds,useCallback:EU,useContext:Ds,useEffect:GO,useImperativeHandle:SU,useInsertionEffect:xU,useLayoutEffect:_U,useMemo:TU,useReducer:SP,useRef:wU,useState:function(){return SP(Vb)},useDebugValue:qO,useDeferredValue:function(n){var e=Ls();return In===null?e.memoizedState=n:CU(e,In.memoizedState,n)},useTransition:function(){var n=SP(Vb)[0],e=Ls().memoizedState;return[n,e]},useMutableSource:fU,useSyncExternalStore:pU,useId:PU,unstable_isNewReconciler:!1};function Zs(n,e){if(n&&n.defaultProps){e=Gt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function P2(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Gt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var rT={isMounted:function(n){return(n=n._reactInternals)?Gf(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Xr(),i=Vu(n),s=$l(r,i);s.payload=e,t!=null&&(s.callback=t),e=Fu(n,s,i),e!==null&&(So(e,n,i,r),I1(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Xr(),i=Vu(n),s=$l(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Fu(n,s,i),e!==null&&(So(e,n,i,r),I1(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Xr(),r=Vu(n),i=$l(t,r);i.tag=2,e!=null&&(i.callback=e),e=Fu(n,i,r),e!==null&&(So(e,n,r,t),I1(e,n,r))}};function FF(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ob(t,r)||!Ob(i,s):!0}function NU(n,e,t){var r=!1,i=Xu,s=e.contextType;return typeof s=="object"&&s!==null?s=Ds(s):(i=Ai(e)?Af:kr.current,r=e.contextTypes,s=(r=r!=null)?kg(n,i):Xu),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rT,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function $F(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&rT.enqueueReplaceState(e,e.state,null)}function I2(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},$O(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ds(s):(s=Ai(e)?Af:kr.current,i.context=kg(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(P2(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&rT.enqueueReplaceState(i,i.state,null),XA(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Mg(n,e){try{var t="",r=e;do t+=zee(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function EP(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function k2(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var mne=typeof WeakMap=="function"?WeakMap:Map;function OU(n,e,t){t=$l(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){tS||(tS=!0,V2=r),k2(n,e)},t}function MU(n,e,t){t=$l(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){k2(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){k2(n,e),typeof r!="function"&&($u===null?$u=new Set([this]):$u.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function VF(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new mne;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Ine.bind(null,n,e,t),e.then(n,n))}function BF(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function zF(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=$l(-1,1),e.tag=2,Fu(t,e,1))),t.lanes|=1),n)}var gne=oc.ReactCurrentOwner,bi=!1;function Hr(n,e,t,r){e.child=n===null?cU(e,null,t,r):Ng(e,n.child,t,r)}function UF(n,e,t,r,i){t=t.render;var s=e.ref;return tm(e,i),r=HO(n,e,t,r,s,i),t=WO(),n!==null&&!bi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ql(n,e,i)):(Ft&&t&&NO(e),e.flags|=1,Hr(n,e,r,i),e.child)}function HF(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!tM(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,DU(n,e,s,r,i)):(n=D1(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Ob,t(o,r)&&n.ref===e.ref)return Ql(n,e,i)}return e.flags|=1,n=Bu(s,r),n.ref=e.ref,n.return=e,e.child=n}function DU(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Ob(s,r)&&n.ref===e.ref)if(bi=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(bi=!0);else return e.lanes=n.lanes,Ql(n,e,i)}return R2(n,e,t,r,i)}function LU(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(Up,Xi),Xi|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,xt(Up,Xi),Xi|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,xt(Up,Xi),Xi|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,xt(Up,Xi),Xi|=r;return Hr(n,e,i,t),e.child}function jU(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function R2(n,e,t,r,i){var s=Ai(t)?Af:kr.current;return s=kg(e,s),tm(e,i),t=HO(n,e,t,r,s,i),r=WO(),n!==null&&!bi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ql(n,e,i)):(Ft&&r&&NO(e),e.flags|=1,Hr(n,e,t,i),e.child)}function WF(n,e,t,r,i){if(Ai(t)){var s=!0;WA(e)}else s=!1;if(tm(e,i),e.stateNode===null)N1(n,e),NU(e,t,r),I2(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Ds(c):(c=Ai(t)?Af:kr.current,c=kg(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&$F(e,o,r,c),kc=!1;var h=e.memoizedState;o.state=h,XA(e,r,o,i),l=e.memoizedState,a!==r||h!==l||_i.current||kc?(typeof u=="function"&&(P2(e,t,u,r),l=e.memoizedState),(a=kc||FF(e,t,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dU(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Zs(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ds(l):(l=Ai(t)?Af:kr.current,l=kg(e,l));var m=t.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&$F(e,o,r,l),kc=!1,h=e.memoizedState,o.state=h,XA(e,r,o,i);var y=e.memoizedState;a!==d||h!==y||_i.current||kc?(typeof m=="function"&&(P2(e,t,m,r),y=e.memoizedState),(c=kc||FF(e,t,c,r,h,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),r=!1)}return N2(n,e,t,r,s,i)}function N2(n,e,t,r,i,s){jU(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&kF(e,t,!1),Ql(n,e,s);r=e.stateNode,gne.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Ng(e,n.child,null,s),e.child=Ng(e,null,a,s)):Hr(n,e,a,s),e.memoizedState=r.state,i&&kF(e,t,!0),e.child}function FU(n){var e=n.stateNode;e.pendingContext?IF(n,e.pendingContext,e.pendingContext!==e.context):e.context&&IF(n,e.context,!1),VO(n,e.containerInfo)}function GF(n,e,t,r,i){return Rg(),MO(i),e.flags|=256,Hr(n,e,t,r),e.child}var O2={dehydrated:null,treeContext:null,retryLane:0};function M2(n){return{baseLanes:n,cachePool:null,transitions:null}}function $U(n,e,t){var r=e.pendingProps,i=Ut.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),xt(Ut,i&1),n===null)return T2(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=oT(o,r,0,null),n=yf(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=M2(t),e.memoizedState=O2,n):KO(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return yne(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Bu(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Bu(a,s):(s=yf(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?M2(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=O2,r}return s=n.child,n=s.sibling,r=Bu(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function KO(n,e){return e=oT({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function k_(n,e,t,r){return r!==null&&MO(r),Ng(e,n.child,null,t),n=KO(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function yne(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=EP(Error(se(422))),k_(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=oT({mode:"visible",children:r.children},i,0,null),s=yf(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ng(e,n.child,null,o),e.child.memoizedState=M2(o),e.memoizedState=O2,s);if(!(e.mode&1))return k_(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(se(419)),r=EP(s,r,void 0),k_(n,e,o,r)}if(a=(o&n.childLanes)!==0,bi||a){if(r=Gn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Xl(n,i),So(r,n,i,-1))}return eM(),r=EP(Error(se(421))),k_(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=kne.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,ts=ju(i.nextSibling),rs=e,Ft=!0,yo=null,n!==null&&(As[Ss++]=Dl,As[Ss++]=Ll,As[Ss++]=Sf,Dl=n.id,Ll=n.overflow,Sf=e),e=KO(e,r.children),e.flags|=4096,e)}function qF(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),C2(n.return,e,t)}function TP(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function VU(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Hr(n,e,r.children,t),r=Ut.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&qF(n,t,e);else if(n.tag===19)qF(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(xt(Ut,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&QA(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),TP(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&QA(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}TP(e,!0,t,null,s);break;case"together":TP(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function N1(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ql(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Tf|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(se(153));if(e.child!==null){for(n=e.child,t=Bu(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Bu(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function vne(n,e,t){switch(e.tag){case 3:FU(e),Rg();break;case 5:hU(e);break;case 1:Ai(e.type)&&WA(e);break;case 4:VO(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xt(KA,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xt(Ut,Ut.current&1),e.flags|=128,null):t&e.child.childLanes?$U(n,e,t):(xt(Ut,Ut.current&1),n=Ql(n,e,t),n!==null?n.sibling:null);xt(Ut,Ut.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return VU(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xt(Ut,Ut.current),r)break;return null;case 22:case 23:return e.lanes=0,LU(n,e,t)}return Ql(n,e,t)}var BU,D2,zU,UU;BU=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};D2=function(){};zU=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Kd(xa.current);var s=null;switch(t){case"input":i=r2(n,i),r=r2(n,r),s=[];break;case"select":i=Gt({},i,{value:void 0}),r=Gt({},r,{value:void 0}),s=[];break;case"textarea":i=o2(n,i),r=o2(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=UA)}l2(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Tb.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Tb.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ct("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};UU=function(n,e,t,r){t!==r&&(e.flags|=4)};function Xy(n,e){if(!Ft)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function mr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function bne(n,e,t){var r=e.pendingProps;switch(OO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(e),null;case 1:return Ai(e.type)&&HA(),mr(e),null;case 3:return r=e.stateNode,Og(),Ot(_i),Ot(kr),zO(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(P_(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yo!==null&&(U2(yo),yo=null))),D2(n,e),mr(e),null;case 5:BO(e);var i=Kd(Fb.current);if(t=e.type,n!==null&&e.stateNode!=null)zU(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(se(166));return mr(e),null}if(n=Kd(xa.current),P_(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[pa]=e,r[Lb]=s,n=(e.mode&1)!==0,t){case"dialog":Ct("cancel",r),Ct("close",r);break;case"iframe":case"object":case"embed":Ct("load",r);break;case"video":case"audio":for(i=0;i<yv.length;i++)Ct(yv[i],r);break;case"source":Ct("error",r);break;case"img":case"image":case"link":Ct("error",r),Ct("load",r);break;case"details":Ct("toggle",r);break;case"input":nF(r,s),Ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ct("invalid",r);break;case"textarea":iF(r,s),Ct("invalid",r)}l2(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&C_(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&C_(r.textContent,a,n),i=["children",""+a]):Tb.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ct("scroll",r)}switch(t){case"input":b_(r),rF(r,s,!0);break;case"textarea":b_(r),sF(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=UA)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=yz(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[pa]=e,n[Lb]=r,BU(n,e,!1,!1),e.stateNode=n;e:{switch(o=c2(t,r),t){case"dialog":Ct("cancel",n),Ct("close",n),i=r;break;case"iframe":case"object":case"embed":Ct("load",n),i=r;break;case"video":case"audio":for(i=0;i<yv.length;i++)Ct(yv[i],n);i=r;break;case"source":Ct("error",n),i=r;break;case"img":case"image":case"link":Ct("error",n),Ct("load",n),i=r;break;case"details":Ct("toggle",n),i=r;break;case"input":nF(n,r),i=r2(n,r),Ct("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Gt({},r,{value:void 0}),Ct("invalid",n);break;case"textarea":iF(n,r),i=o2(n,r),Ct("invalid",n);break;default:i=r}l2(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?wz(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vz(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Cb(n,l):typeof l=="number"&&Cb(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Tb.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ct("scroll",n):l!=null&&vO(n,s,l,o))}switch(t){case"input":b_(n),rF(n,r,!1);break;case"textarea":b_(n),sF(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Yu(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Qp(n,!!r.multiple,s,!1):r.defaultValue!=null&&Qp(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=UA)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mr(e),null;case 6:if(n&&e.stateNode!=null)UU(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(se(166));if(t=Kd(Fb.current),Kd(xa.current),P_(e)){if(r=e.stateNode,t=e.memoizedProps,r[pa]=e,(s=r.nodeValue!==t)&&(n=rs,n!==null))switch(n.tag){case 3:C_(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&C_(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[pa]=e,e.stateNode=r}return mr(e),null;case 13:if(Ot(Ut),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ft&&ts!==null&&e.mode&1&&!(e.flags&128))aU(),Rg(),e.flags|=98560,s=!1;else if(s=P_(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(se(317));s[pa]=e}else Rg(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mr(e),s=!1}else yo!==null&&(U2(yo),yo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Ut.current&1?Nn===0&&(Nn=3):eM())),e.updateQueue!==null&&(e.flags|=4),mr(e),null);case 4:return Og(),D2(n,e),n===null&&Mb(e.stateNode.containerInfo),mr(e),null;case 10:return jO(e.type._context),mr(e),null;case 17:return Ai(e.type)&&HA(),mr(e),null;case 19:if(Ot(Ut),s=e.memoizedState,s===null)return mr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Xy(s,!1);else{if(Nn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=QA(n),o!==null){for(e.flags|=128,Xy(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return xt(Ut,Ut.current&1|2),e.child}n=n.sibling}s.tail!==null&&an()>Dg&&(e.flags|=128,r=!0,Xy(s,!1),e.lanes=4194304)}else{if(!r)if(n=QA(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Xy(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ft)return mr(e),null}else 2*an()-s.renderingStartTime>Dg&&t!==1073741824&&(e.flags|=128,r=!0,Xy(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=an(),e.sibling=null,t=Ut.current,xt(Ut,r?t&1|2:t&1),e):(mr(e),null);case 22:case 23:return ZO(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xi&1073741824&&(mr(e),e.subtreeFlags&6&&(e.flags|=8192)):mr(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function wne(n,e){switch(OO(e),e.tag){case 1:return Ai(e.type)&&HA(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Og(),Ot(_i),Ot(kr),zO(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return BO(e),null;case 13:if(Ot(Ut),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(se(340));Rg()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ot(Ut),null;case 4:return Og(),null;case 10:return jO(e.type._context),null;case 22:case 23:return ZO(),null;case 24:return null;default:return null}}var R_=!1,Tr=!1,xne=typeof WeakSet=="function"?WeakSet:Set,me=null;function zp(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){en(n,e,r)}else t.current=null}function L2(n,e,t){try{t()}catch(r){en(n,e,r)}}var KF=!1;function _ne(n,e){if(b2=VA,n=Kz(),RO(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=n,h=null;t:for(;;){for(var m;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===n)break t;if(h===t&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(w2={focusedElem:n,selectionRange:t},VA=!1,me=e;me!==null;)if(e=me,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,me=n;else for(;me!==null;){e=me;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,b=y.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:Zs(e.type,g),b);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(S){en(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,me=n;break}me=e.return}return y=KF,KF=!1,y}function rb(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&L2(e,t,s)}i=i.next}while(i!==r)}}function iT(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function j2(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function HU(n){var e=n.alternate;e!==null&&(n.alternate=null,HU(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[pa],delete e[Lb],delete e[A2],delete e[ine],delete e[sne])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function WU(n){return n.tag===5||n.tag===3||n.tag===4}function YF(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||WU(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function F2(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=UA));else if(r!==4&&(n=n.child,n!==null))for(F2(n,e,t),n=n.sibling;n!==null;)F2(n,e,t),n=n.sibling}function $2(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for($2(n,e,t),n=n.sibling;n!==null;)$2(n,e,t),n=n.sibling}var tr=null,mo=!1;function wc(n,e,t){for(t=t.child;t!==null;)GU(n,e,t),t=t.sibling}function GU(n,e,t){if(wa&&typeof wa.onCommitFiberUnmount=="function")try{wa.onCommitFiberUnmount(XE,t)}catch{}switch(t.tag){case 5:Tr||zp(t,e);case 6:var r=tr,i=mo;tr=null,wc(n,e,t),tr=r,mo=i,tr!==null&&(mo?(n=tr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):tr.removeChild(t.stateNode));break;case 18:tr!==null&&(mo?(n=tr,t=t.stateNode,n.nodeType===8?bP(n.parentNode,t):n.nodeType===1&&bP(n,t),Rb(n)):bP(tr,t.stateNode));break;case 4:r=tr,i=mo,tr=t.stateNode.containerInfo,mo=!0,wc(n,e,t),tr=r,mo=i;break;case 0:case 11:case 14:case 15:if(!Tr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&L2(t,e,o),i=i.next}while(i!==r)}wc(n,e,t);break;case 1:if(!Tr&&(zp(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){en(t,e,a)}wc(n,e,t);break;case 21:wc(n,e,t);break;case 22:t.mode&1?(Tr=(r=Tr)||t.memoizedState!==null,wc(n,e,t),Tr=r):wc(n,e,t);break;default:wc(n,e,t)}}function XF(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new xne),e.forEach(function(r){var i=Rne.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Xs(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:tr=a.stateNode,mo=!1;break e;case 3:tr=a.stateNode.containerInfo,mo=!0;break e;case 4:tr=a.stateNode.containerInfo,mo=!0;break e}a=a.return}if(tr===null)throw Error(se(160));GU(s,o,i),tr=null,mo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){en(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qU(e,n),e=e.sibling}function qU(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Xs(e,n),$o(n),r&4){try{rb(3,n,n.return),iT(3,n)}catch(g){en(n,n.return,g)}try{rb(5,n,n.return)}catch(g){en(n,n.return,g)}}break;case 1:Xs(e,n),$o(n),r&512&&t!==null&&zp(t,t.return);break;case 5:if(Xs(e,n),$o(n),r&512&&t!==null&&zp(t,t.return),n.flags&32){var i=n.stateNode;try{Cb(i,"")}catch(g){en(n,n.return,g)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&mz(i,s),c2(a,o);var c=c2(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?wz(i,d):u==="dangerouslySetInnerHTML"?vz(i,d):u==="children"?Cb(i,d):vO(i,u,d,c)}switch(a){case"input":i2(i,s);break;case"textarea":gz(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Qp(i,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?Qp(i,!!s.multiple,s.defaultValue,!0):Qp(i,!!s.multiple,s.multiple?[]:"",!1))}i[Lb]=s}catch(g){en(n,n.return,g)}}break;case 6:if(Xs(e,n),$o(n),r&4){if(n.stateNode===null)throw Error(se(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(g){en(n,n.return,g)}}break;case 3:if(Xs(e,n),$o(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Rb(e.containerInfo)}catch(g){en(n,n.return,g)}break;case 4:Xs(e,n),$o(n);break;case 13:Xs(e,n),$o(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(QO=an())),r&4&&XF(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Tr=(c=Tr)||u,Xs(e,n),Tr=c):Xs(e,n),$o(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(me=n,u=n.child;u!==null;){for(d=me=u;me!==null;){switch(h=me,m=h.child,h.tag){case 0:case 11:case 14:case 15:rb(4,h,h.return);break;case 1:zp(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,t=h.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){en(r,t,g)}}break;case 5:zp(h,h.return);break;case 22:if(h.memoizedState!==null){JF(d);continue}}m!==null?(m.return=h,me=m):JF(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=bz("display",o))}catch(g){en(n,n.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){en(n,n.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Xs(e,n),$o(n),r&4&&XF(n);break;case 21:break;default:Xs(e,n),$o(n)}}function $o(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(WU(t)){var r=t;break e}t=t.return}throw Error(se(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Cb(i,""),r.flags&=-33);var s=YF(n);$2(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=YF(n);F2(n,a,o);break;default:throw Error(se(161))}}catch(l){en(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Ane(n,e,t){me=n,KU(n)}function KU(n,e,t){for(var r=(n.mode&1)!==0;me!==null;){var i=me,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||R_;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Tr;a=R_;var c=Tr;if(R_=o,(Tr=l)&&!c)for(me=i;me!==null;)o=me,l=o.child,o.tag===22&&o.memoizedState!==null?ZF(i):l!==null?(l.return=o,me=l):ZF(i);for(;s!==null;)me=s,KU(s),s=s.sibling;me=i,R_=a,Tr=c}QF(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,me=s):QF(n)}}function QF(n){for(;me!==null;){var e=me;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tr||iT(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Zs(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&DF(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}DF(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Rb(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Tr||e.flags&512&&j2(e)}catch(h){en(e,e.return,h)}}if(e===n){me=null;break}if(t=e.sibling,t!==null){t.return=e.return,me=t;break}me=e.return}}function JF(n){for(;me!==null;){var e=me;if(e===n){me=null;break}var t=e.sibling;if(t!==null){t.return=e.return,me=t;break}me=e.return}}function ZF(n){for(;me!==null;){var e=me;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{iT(4,e)}catch(l){en(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){en(e,i,l)}}var s=e.return;try{j2(e)}catch(l){en(e,s,l)}break;case 5:var o=e.return;try{j2(e)}catch(l){en(e,o,l)}}}catch(l){en(e,e.return,l)}if(e===n){me=null;break}var a=e.sibling;if(a!==null){a.return=e.return,me=a;break}me=e.return}}var Sne=Math.ceil,eS=oc.ReactCurrentDispatcher,YO=oc.ReactCurrentOwner,Ns=oc.ReactCurrentBatchConfig,Ge=0,Gn=null,yn=null,ar=0,Xi=0,Up=md(0),Nn=0,zb=null,Tf=0,sT=0,XO=0,ib=null,pi=null,QO=0,Dg=1/0,Ja=null,tS=!1,V2=null,$u=null,N_=!1,Cu=null,nS=0,sb=0,B2=null,O1=-1,M1=0;function Xr(){return Ge&6?an():O1!==-1?O1:O1=an()}function Vu(n){return n.mode&1?Ge&2&&ar!==0?ar&-ar:ane.transition!==null?(M1===0&&(M1=Nz()),M1):(n=lt,n!==0||(n=window.event,n=n===void 0?16:$z(n.type)),n):1}function So(n,e,t,r){if(50<sb)throw sb=0,B2=null,Error(se(185));xx(n,t,r),(!(Ge&2)||n!==Gn)&&(n===Gn&&(!(Ge&2)&&(sT|=t),Nn===4&&Oc(n,ar)),Si(n,r),t===1&&Ge===0&&!(e.mode&1)&&(Dg=an()+500,tT&&gd()))}function Si(n,e){var t=n.callbackNode;ate(n,e);var r=$A(n,n===Gn?ar:0);if(r===0)t!==null&&lF(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&lF(t),e===1)n.tag===0?one(e4.bind(null,n)):iU(e4.bind(null,n)),nne(function(){!(Ge&6)&&gd()}),t=null;else{switch(Oz(r)){case 1:t=AO;break;case 4:t=kz;break;case 16:t=FA;break;case 536870912:t=Rz;break;default:t=FA}t=n8(t,YU.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function YU(n,e){if(O1=-1,M1=0,Ge&6)throw Error(se(327));var t=n.callbackNode;if(nm()&&n.callbackNode!==t)return null;var r=$A(n,n===Gn?ar:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=rS(n,r);else{e=r;var i=Ge;Ge|=2;var s=QU();(Gn!==n||ar!==e)&&(Ja=null,Dg=an()+500,gf(n,e));do try{Cne();break}catch(a){XU(n,a)}while(!0);LO(),eS.current=s,Ge=i,yn!==null?e=0:(Gn=null,ar=0,e=Nn)}if(e!==0){if(e===2&&(i=p2(n),i!==0&&(r=i,e=z2(n,i))),e===1)throw t=zb,gf(n,0),Oc(n,r),Si(n,an()),t;if(e===6)Oc(n,r);else{if(i=n.current.alternate,!(r&30)&&!Ene(i)&&(e=rS(n,r),e===2&&(s=p2(n),s!==0&&(r=s,e=z2(n,s))),e===1))throw t=zb,gf(n,0),Oc(n,r),Si(n,an()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(se(345));case 2:Od(n,pi,Ja);break;case 3:if(Oc(n,r),(r&130023424)===r&&(e=QO+500-an(),10<e)){if($A(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Xr(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=_2(Od.bind(null,n,pi,Ja),e);break}Od(n,pi,Ja);break;case 4:if(Oc(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Ao(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=an()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sne(r/1960))-r,10<r){n.timeoutHandle=_2(Od.bind(null,n,pi,Ja),r);break}Od(n,pi,Ja);break;case 5:Od(n,pi,Ja);break;default:throw Error(se(329))}}}return Si(n,an()),n.callbackNode===t?YU.bind(null,n):null}function z2(n,e){var t=ib;return n.current.memoizedState.isDehydrated&&(gf(n,e).flags|=256),n=rS(n,e),n!==2&&(e=pi,pi=t,e!==null&&U2(e)),n}function U2(n){pi===null?pi=n:pi.push.apply(pi,n)}function Ene(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Eo(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oc(n,e){for(e&=~XO,e&=~sT,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ao(e),r=1<<t;n[t]=-1,e&=~r}}function e4(n){if(Ge&6)throw Error(se(327));nm();var e=$A(n,0);if(!(e&1))return Si(n,an()),null;var t=rS(n,e);if(n.tag!==0&&t===2){var r=p2(n);r!==0&&(e=r,t=z2(n,r))}if(t===1)throw t=zb,gf(n,0),Oc(n,e),Si(n,an()),t;if(t===6)throw Error(se(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Od(n,pi,Ja),Si(n,an()),null}function JO(n,e){var t=Ge;Ge|=1;try{return n(e)}finally{Ge=t,Ge===0&&(Dg=an()+500,tT&&gd())}}function Cf(n){Cu!==null&&Cu.tag===0&&!(Ge&6)&&nm();var e=Ge;Ge|=1;var t=Ns.transition,r=lt;try{if(Ns.transition=null,lt=1,n)return n()}finally{lt=r,Ns.transition=t,Ge=e,!(Ge&6)&&gd()}}function ZO(){Xi=Up.current,Ot(Up)}function gf(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,tne(t)),yn!==null)for(t=yn.return;t!==null;){var r=t;switch(OO(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&HA();break;case 3:Og(),Ot(_i),Ot(kr),zO();break;case 5:BO(r);break;case 4:Og();break;case 13:Ot(Ut);break;case 19:Ot(Ut);break;case 10:jO(r.type._context);break;case 22:case 23:ZO()}t=t.return}if(Gn=n,yn=n=Bu(n.current,null),ar=Xi=e,Nn=0,zb=null,XO=sT=Tf=0,pi=ib=null,qd!==null){for(e=0;e<qd.length;e++)if(t=qd[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}qd=null}return n}function XU(n,e){do{var t=yn;try{if(LO(),k1.current=ZA,JA){for(var r=Ht.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}JA=!1}if(Ef=0,Wn=In=Ht=null,nb=!1,$b=0,YO.current=null,t===null||t.return===null){Nn=1,zb=e,yn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=ar,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=BF(o);if(m!==null){m.flags&=-257,zF(m,o,a,s,e),m.mode&1&&VF(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var g=new Set;g.add(l),e.updateQueue=g}else y.add(l);break e}else{if(!(e&1)){VF(s,c,e),eM();break e}l=Error(se(426))}}else if(Ft&&a.mode&1){var b=BF(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),zF(b,o,a,s,e),MO(Mg(l,a));break e}}s=l=Mg(l,a),Nn!==4&&(Nn=2),ib===null?ib=[s]:ib.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=OU(s,l,e);MF(s,w);break e;case 1:a=l;var x=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&($u===null||!$u.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=MU(s,a,e);MF(s,S);break e}}s=s.return}while(s!==null)}ZU(t)}catch(P){e=P,yn===t&&t!==null&&(yn=t=t.return);continue}break}while(!0)}function QU(){var n=eS.current;return eS.current=ZA,n===null?ZA:n}function eM(){(Nn===0||Nn===3||Nn===2)&&(Nn=4),Gn===null||!(Tf&268435455)&&!(sT&268435455)||Oc(Gn,ar)}function rS(n,e){var t=Ge;Ge|=2;var r=QU();(Gn!==n||ar!==e)&&(Ja=null,gf(n,e));do try{Tne();break}catch(i){XU(n,i)}while(!0);if(LO(),Ge=t,eS.current=r,yn!==null)throw Error(se(261));return Gn=null,ar=0,Nn}function Tne(){for(;yn!==null;)JU(yn)}function Cne(){for(;yn!==null&&!Jee();)JU(yn)}function JU(n){var e=t8(n.alternate,n,Xi);n.memoizedProps=n.pendingProps,e===null?ZU(n):yn=e,YO.current=null}function ZU(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=wne(t,e),t!==null){t.flags&=32767,yn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Nn=6,yn=null;return}}else if(t=bne(t,e,Xi),t!==null){yn=t;return}if(e=e.sibling,e!==null){yn=e;return}yn=e=n}while(e!==null);Nn===0&&(Nn=5)}function Od(n,e,t){var r=lt,i=Ns.transition;try{Ns.transition=null,lt=1,Pne(n,e,t,r)}finally{Ns.transition=i,lt=r}return null}function Pne(n,e,t,r){do nm();while(Cu!==null);if(Ge&6)throw Error(se(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(se(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(lte(n,s),n===Gn&&(yn=Gn=null,ar=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||N_||(N_=!0,n8(FA,function(){return nm(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ns.transition,Ns.transition=null;var o=lt;lt=1;var a=Ge;Ge|=4,YO.current=null,_ne(n,t),qU(t,n),Kte(w2),VA=!!b2,w2=b2=null,n.current=t,Ane(t),Zee(),Ge=a,lt=o,Ns.transition=s}else n.current=t;if(N_&&(N_=!1,Cu=n,nS=i),s=n.pendingLanes,s===0&&($u=null),nte(t.stateNode),Si(n,an()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(tS)throw tS=!1,n=V2,V2=null,n;return nS&1&&n.tag!==0&&nm(),s=n.pendingLanes,s&1?n===B2?sb++:(sb=0,B2=n):sb=0,gd(),null}function nm(){if(Cu!==null){var n=Oz(nS),e=Ns.transition,t=lt;try{if(Ns.transition=null,lt=16>n?16:n,Cu===null)var r=!1;else{if(n=Cu,Cu=null,nS=0,Ge&6)throw Error(se(331));var i=Ge;for(Ge|=4,me=n.current;me!==null;){var s=me,o=s.child;if(me.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(me=c;me!==null;){var u=me;switch(u.tag){case 0:case 11:case 15:rb(8,u,s)}var d=u.child;if(d!==null)d.return=u,me=d;else for(;me!==null;){u=me;var h=u.sibling,m=u.return;if(HU(u),u===c){me=null;break}if(h!==null){h.return=m,me=h;break}me=m}}}var y=s.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}me=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,me=o;else e:for(;me!==null;){if(s=me,s.flags&2048)switch(s.tag){case 0:case 11:case 15:rb(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,me=w;break e}me=s.return}}var x=n.current;for(me=x;me!==null;){o=me;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,me=_;else e:for(o=x;me!==null;){if(a=me,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:iT(9,a)}}catch(P){en(a,a.return,P)}if(a===o){me=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,me=S;break e}me=a.return}}if(Ge=i,gd(),wa&&typeof wa.onPostCommitFiberRoot=="function")try{wa.onPostCommitFiberRoot(XE,n)}catch{}r=!0}return r}finally{lt=t,Ns.transition=e}}return!1}function t4(n,e,t){e=Mg(t,e),e=OU(n,e,1),n=Fu(n,e,1),e=Xr(),n!==null&&(xx(n,1,e),Si(n,e))}function en(n,e,t){if(n.tag===3)t4(n,n,t);else for(;e!==null;){if(e.tag===3){t4(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($u===null||!$u.has(r))){n=Mg(t,n),n=MU(e,n,1),e=Fu(e,n,1),n=Xr(),e!==null&&(xx(e,1,n),Si(e,n));break}}e=e.return}}function Ine(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Xr(),n.pingedLanes|=n.suspendedLanes&t,Gn===n&&(ar&t)===t&&(Nn===4||Nn===3&&(ar&130023424)===ar&&500>an()-QO?gf(n,0):XO|=t),Si(n,e)}function e8(n,e){e===0&&(n.mode&1?(e=__,__<<=1,!(__&130023424)&&(__=4194304)):e=1);var t=Xr();n=Xl(n,e),n!==null&&(xx(n,e,t),Si(n,t))}function kne(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),e8(n,t)}function Rne(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(e),e8(n,t)}var t8;t8=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||_i.current)bi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return bi=!1,vne(n,e,t);bi=!!(n.flags&131072)}else bi=!1,Ft&&e.flags&1048576&&sU(e,qA,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;N1(n,e),n=e.pendingProps;var i=kg(e,kr.current);tm(e,t),i=HO(null,e,r,n,i,t);var s=WO();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ai(r)?(s=!0,WA(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$O(e),i.updater=rT,e.stateNode=i,i._reactInternals=e,I2(e,r,n,t),e=N2(null,e,r,!0,s,t)):(e.tag=0,Ft&&s&&NO(e),Hr(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(N1(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=One(r),n=Zs(r,n),i){case 0:e=R2(null,e,r,n,t);break e;case 1:e=WF(null,e,r,n,t);break e;case 11:e=UF(null,e,r,n,t);break e;case 14:e=HF(null,e,r,Zs(r.type,n),t);break e}throw Error(se(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zs(r,i),R2(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zs(r,i),WF(n,e,r,i,t);case 3:e:{if(FU(e),n===null)throw Error(se(387));r=e.pendingProps,s=e.memoizedState,i=s.element,dU(n,e),XA(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Mg(Error(se(423)),e),e=GF(n,e,r,t,i);break e}else if(r!==i){i=Mg(Error(se(424)),e),e=GF(n,e,r,t,i);break e}else for(ts=ju(e.stateNode.containerInfo.firstChild),rs=e,Ft=!0,yo=null,t=cU(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Rg(),r===i){e=Ql(n,e,t);break e}Hr(n,e,r,t)}e=e.child}return e;case 5:return hU(e),n===null&&T2(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,x2(r,i)?o=null:s!==null&&x2(r,s)&&(e.flags|=32),jU(n,e),Hr(n,e,o,t),e.child;case 6:return n===null&&T2(e),null;case 13:return $U(n,e,t);case 4:return VO(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Ng(e,null,r,t):Hr(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zs(r,i),UF(n,e,r,i,t);case 7:return Hr(n,e,e.pendingProps,t),e.child;case 8:return Hr(n,e,e.pendingProps.children,t),e.child;case 12:return Hr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,xt(KA,r._currentValue),r._currentValue=o,s!==null)if(Eo(s.value,o)){if(s.children===i.children&&!_i.current){e=Ql(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=$l(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),C2(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(se(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),C2(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Hr(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,tm(e,t),i=Ds(i),r=r(i),e.flags|=1,Hr(n,e,r,t),e.child;case 14:return r=e.type,i=Zs(r,e.pendingProps),i=Zs(r.type,i),HF(n,e,r,i,t);case 15:return DU(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zs(r,i),N1(n,e),e.tag=1,Ai(r)?(n=!0,WA(e)):n=!1,tm(e,t),NU(e,r,i),I2(e,r,i,t),N2(null,e,r,!0,n,t);case 19:return VU(n,e,t);case 22:return LU(n,e,t)}throw Error(se(156,e.tag))};function n8(n,e){return Iz(n,e)}function Nne(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(n,e,t,r){return new Nne(n,e,t,r)}function tM(n){return n=n.prototype,!(!n||!n.isReactComponent)}function One(n){if(typeof n=="function")return tM(n)?1:0;if(n!=null){if(n=n.$$typeof,n===wO)return 11;if(n===xO)return 14}return 2}function Bu(n,e){var t=n.alternate;return t===null?(t=ks(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function D1(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")tM(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Op:return yf(t.children,i,s,e);case bO:o=8,i|=8;break;case ZI:return n=ks(12,t,e,i|2),n.elementType=ZI,n.lanes=s,n;case e2:return n=ks(13,t,e,i),n.elementType=e2,n.lanes=s,n;case t2:return n=ks(19,t,e,i),n.elementType=t2,n.lanes=s,n;case hz:return oT(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case uz:o=10;break e;case dz:o=9;break e;case wO:o=11;break e;case xO:o=14;break e;case Ic:o=16,r=null;break e}throw Error(se(130,n==null?n:typeof n,""))}return e=ks(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function yf(n,e,t,r){return n=ks(7,n,r,e),n.lanes=t,n}function oT(n,e,t,r){return n=ks(22,n,r,e),n.elementType=hz,n.lanes=t,n.stateNode={isHidden:!1},n}function CP(n,e,t){return n=ks(6,n,null,e),n.lanes=t,n}function PP(n,e,t){return e=ks(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Mne(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lP(0),this.expirationTimes=lP(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lP(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function nM(n,e,t,r,i,s,o,a,l){return n=new Mne(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ks(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},$O(s),n}function Dne(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Np,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function r8(n){if(!n)return Xu;n=n._reactInternals;e:{if(Gf(n)!==n||n.tag!==1)throw Error(se(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ai(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(n.tag===1){var t=n.type;if(Ai(t))return rU(n,t,e)}return e}function i8(n,e,t,r,i,s,o,a,l){return n=nM(t,r,!0,n,i,s,o,a,l),n.context=r8(null),t=n.current,r=Xr(),i=Vu(t),s=$l(r,i),s.callback=e??null,Fu(t,s,i),n.current.lanes=i,xx(n,i,r),Si(n,r),n}function aT(n,e,t,r){var i=e.current,s=Xr(),o=Vu(i);return t=r8(t),e.context===null?e.context=t:e.pendingContext=t,e=$l(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Fu(i,e,o),n!==null&&(So(n,i,o,s),I1(n,i,o)),o}function iS(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function n4(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function rM(n,e){n4(n,e),(n=n.alternate)&&n4(n,e)}function Lne(){return null}var s8=typeof reportError=="function"?reportError:function(n){console.error(n)};function iM(n){this._internalRoot=n}lT.prototype.render=iM.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(se(409));aT(n,e,null,null)};lT.prototype.unmount=iM.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Cf(function(){aT(null,n,null,null)}),e[Yl]=null}};function lT(n){this._internalRoot=n}lT.prototype.unstable_scheduleHydration=function(n){if(n){var e=Lz();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Nc.length&&e!==0&&e<Nc[t].priority;t++);Nc.splice(t,0,n),t===0&&Fz(n)}};function sM(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function cT(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function r4(){}function jne(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=iS(o);s.call(c)}}var o=i8(e,r,n,0,null,!1,!1,"",r4);return n._reactRootContainer=o,n[Yl]=o.current,Mb(n.nodeType===8?n.parentNode:n),Cf(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=iS(l);a.call(c)}}var l=nM(n,0,!1,null,null,!1,!1,"",r4);return n._reactRootContainer=l,n[Yl]=l.current,Mb(n.nodeType===8?n.parentNode:n),Cf(function(){aT(e,l,t,r)}),l}function uT(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=iS(o);a.call(l)}}aT(e,o,n,i)}else o=jne(t,e,n,i,r);return iS(o)}Mz=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=gv(e.pendingLanes);t!==0&&(SO(e,t|1),Si(e,an()),!(Ge&6)&&(Dg=an()+500,gd()))}break;case 13:Cf(function(){var r=Xl(n,1);if(r!==null){var i=Xr();So(r,n,1,i)}}),rM(n,1)}};EO=function(n){if(n.tag===13){var e=Xl(n,134217728);if(e!==null){var t=Xr();So(e,n,134217728,t)}rM(n,134217728)}};Dz=function(n){if(n.tag===13){var e=Vu(n),t=Xl(n,e);if(t!==null){var r=Xr();So(t,n,e,r)}rM(n,e)}};Lz=function(){return lt};jz=function(n,e){var t=lt;try{return lt=n,e()}finally{lt=t}};d2=function(n,e,t){switch(e){case"input":if(i2(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=eT(r);if(!i)throw Error(se(90));pz(r),i2(r,i)}}}break;case"textarea":gz(n,t);break;case"select":e=t.value,e!=null&&Qp(n,!!t.multiple,e,!1)}};Az=JO;Sz=Cf;var Fne={usingClientEntryPoint:!1,Events:[Ax,jp,eT,xz,_z,JO]},Qy={findFiberByHostInstance:Gd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$ne={bundleType:Qy.bundleType,version:Qy.version,rendererPackageName:Qy.rendererPackageName,rendererConfig:Qy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oc.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Cz(n),n===null?null:n.stateNode},findFiberByHostInstance:Qy.findFiberByHostInstance||Lne,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var O_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!O_.isDisabled&&O_.supportsFiber)try{XE=O_.inject($ne),wa=O_}catch{}}cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fne;cs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sM(e))throw Error(se(200));return Dne(n,e,null,t)};cs.createRoot=function(n,e){if(!sM(n))throw Error(se(299));var t=!1,r="",i=s8;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=nM(n,1,!1,null,null,t,!1,r,i),n[Yl]=e.current,Mb(n.nodeType===8?n.parentNode:n),new iM(e)};cs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(se(188)):(n=Object.keys(n).join(","),Error(se(268,n)));return n=Cz(e),n=n===null?null:n.stateNode,n};cs.flushSync=function(n){return Cf(n)};cs.hydrate=function(n,e,t){if(!cT(e))throw Error(se(200));return uT(null,n,e,!0,t)};cs.hydrateRoot=function(n,e,t){if(!sM(n))throw Error(se(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=s8;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=i8(e,null,n,1,t??null,i,!1,s,o),n[Yl]=e.current,Mb(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new lT(e)};cs.render=function(n,e,t){if(!cT(e))throw Error(se(200));return uT(null,n,e,!1,t)};cs.unmountComponentAtNode=function(n){if(!cT(n))throw Error(se(40));return n._reactRootContainer?(Cf(function(){uT(null,null,n,!1,function(){n._reactRootContainer=null,n[Yl]=null})}),!0):!1};cs.unstable_batchedUpdates=JO;cs.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!cT(t))throw Error(se(200));if(n==null||n._reactInternals===void 0)throw Error(se(38));return uT(n,e,t,!1,r)};cs.version="18.3.1-next-f1338f8080-20240426";function o8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o8)}catch(n){console.error(n)}}o8(),oz.exports=cs;var Ex=oz.exports;const a8=Or(Ex);var l8,i4=Ex;l8=i4.createRoot,i4.hydrateRoot;const Vne=1,Bne=1e6;let IP=0;function zne(){return IP=(IP+1)%Number.MAX_SAFE_INTEGER,IP.toString()}const kP=new Map,s4=n=>{if(kP.has(n))return;const e=setTimeout(()=>{kP.delete(n),ob({type:"REMOVE_TOAST",toastId:n})},Bne);kP.set(n,e)},Une=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,Vne)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?s4(t):n.toasts.forEach(r=>{s4(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},L1=[];let j1={toasts:[]};function ob(n){j1=Une(j1,n),L1.forEach(e=>{e(j1)})}function Hne({...n}){const e=zne(),t=i=>ob({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>ob({type:"DISMISS_TOAST",toastId:e});return ob({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function qf(){const[n,e]=A.useState(j1);return A.useEffect(()=>(L1.push(e),()=>{const t=L1.indexOf(e);t>-1&&L1.splice(t,1)}),[n]),{...n,toast:Hne,dismiss:t=>ob({type:"DISMISS_TOAST",toastId:t})}}function ve(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Wne(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function dT(...n){return e=>n.forEach(t=>Wne(t,e))}function qt(...n){return A.useCallback(dT(...n),n)}function Gne(n,e=[]){let t=[];function r(s,o){const a=A.createContext(o),l=t.length;t=[...t,o];function c(d){const{scope:h,children:m,...y}=d,g=(h==null?void 0:h[n][l])||a,b=A.useMemo(()=>y,Object.values(y));return p.jsx(g.Provider,{value:b,children:m})}function u(d,h){const m=(h==null?void 0:h[n][l])||a,y=A.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,qne(i,...e)]}function qne(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var js=A.forwardRef((n,e)=>{const{children:t,...r}=n,i=A.Children.toArray(t),s=i.find(Kne);if(s){const o=s.props.children,a=i.map(l=>l===s?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:l);return p.jsx(H2,{...r,ref:e,children:A.isValidElement(o)?A.cloneElement(o,void 0,a):null})}return p.jsx(H2,{...r,ref:e,children:t})});js.displayName="Slot";var H2=A.forwardRef((n,e)=>{const{children:t,...r}=n;if(A.isValidElement(t)){const i=Xne(t);return A.cloneElement(t,{...Yne(r,t.props),ref:e?dT(e,i):i})}return A.Children.count(t)>1?A.Children.only(null):null});H2.displayName="SlotClone";var c8=({children:n})=>p.jsx(p.Fragment,{children:n});function Kne(n){return A.isValidElement(n)&&n.type===c8}function Yne(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function Xne(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function hT(n){const e=n+"CollectionProvider",[t,r]=Gne(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:y,children:g}=m,b=G.useRef(null),w=G.useRef(new Map).current;return p.jsx(i,{scope:y,itemMap:w,collectionRef:b,children:g})};o.displayName=e;const a=n+"CollectionSlot",l=G.forwardRef((m,y)=>{const{scope:g,children:b}=m,w=s(a,g),x=qt(y,w.collectionRef);return p.jsx(js,{ref:x,children:b})});l.displayName=a;const c=n+"CollectionItemSlot",u="data-radix-collection-item",d=G.forwardRef((m,y)=>{const{scope:g,children:b,...w}=m,x=G.useRef(null),_=qt(y,x),S=s(c,g);return G.useEffect(()=>(S.itemMap.set(x,{ref:x,...w}),()=>void S.itemMap.delete(x))),p.jsx(js,{[u]:"",ref:_,children:b})});d.displayName=c;function h(m){const y=s(n+"CollectionConsumer",m);return G.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(y.itemMap.values()).sort((S,P)=>w.indexOf(S.ref.current)-w.indexOf(P.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,r]}function Qne(n,e){const t=A.createContext(e),r=s=>{const{children:o,...a}=s,l=A.useMemo(()=>a,Object.values(a));return p.jsx(t.Provider,{value:l,children:o})};r.displayName=n+"Provider";function i(s){const o=A.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function ac(n,e=[]){let t=[];function r(s,o){const a=A.createContext(o),l=t.length;t=[...t,o];const c=d=>{var w;const{scope:h,children:m,...y}=d,g=((w=h==null?void 0:h[n])==null?void 0:w[l])||a,b=A.useMemo(()=>y,Object.values(y));return p.jsx(g.Provider,{value:b,children:m})};c.displayName=s+"Provider";function u(d,h){var g;const m=((g=h==null?void 0:h[n])==null?void 0:g[l])||a,y=A.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,Jne(i,...e)]}function Jne(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var Zne=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Re=Zne.reduce((n,e)=>{const t=A.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?js:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(a,{...o,ref:i})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function oM(n,e){n&&Ex.flushSync(()=>n.dispatchEvent(e))}function Rr(n){const e=A.useRef(n);return A.useEffect(()=>{e.current=n}),A.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function ere(n,e=globalThis==null?void 0:globalThis.document){const t=Rr(n);A.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var tre="DismissableLayer",W2="dismissableLayer.update",nre="dismissableLayer.pointerDownOutside",rre="dismissableLayer.focusOutside",o4,u8=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tx=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=A.useContext(u8),[u,d]=A.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=A.useState({}),y=qt(e,T=>d(T)),g=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(b),x=u?g.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,S=x>=w,P=sre(T=>{const C=T.target,k=[...c.branches].some(M=>M.contains(C));!S||k||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},h),N=ore(T=>{const C=T.target;[...c.branches].some(M=>M.contains(C))||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},h);return ere(T=>{x===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},h),A.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(o4=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),a4(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=o4)}},[u,h,t,c]),A.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),a4())},[u,c]),A.useEffect(()=>{const T=()=>m({});return document.addEventListener(W2,T),()=>document.removeEventListener(W2,T)},[]),p.jsx(Re.div,{...l,ref:y,style:{pointerEvents:_?S?"auto":"none":void 0,...n.style},onFocusCapture:ve(n.onFocusCapture,N.onFocusCapture),onBlurCapture:ve(n.onBlurCapture,N.onBlurCapture),onPointerDownCapture:ve(n.onPointerDownCapture,P.onPointerDownCapture)})});Tx.displayName=tre;var ire="DismissableLayerBranch",d8=A.forwardRef((n,e)=>{const t=A.useContext(u8),r=A.useRef(null),i=qt(e,r);return A.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),p.jsx(Re.div,{...n,ref:i})});d8.displayName=ire;function sre(n,e=globalThis==null?void 0:globalThis.document){const t=Rr(n),r=A.useRef(!1),i=A.useRef(()=>{});return A.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){h8(nre,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function ore(n,e=globalThis==null?void 0:globalThis.document){const t=Rr(n),r=A.useRef(!1);return A.useEffect(()=>{const i=s=>{s.target&&!r.current&&h8(rre,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function a4(){const n=new CustomEvent(W2);document.dispatchEvent(n)}function h8(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?oM(i,s):i.dispatchEvent(s)}var are=Tx,lre=d8,To=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},cre="Portal",fT=A.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=A.useState(!1);To(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?a8.createPortal(p.jsx(Re.div,{...r,ref:e}),o):null});fT.displayName=cre;function ure(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var Us=n=>{const{present:e,children:t}=n,r=dre(e),i=typeof t=="function"?t({present:r.isPresent}):A.Children.only(t),s=qt(r.ref,hre(i));return typeof t=="function"||r.isPresent?A.cloneElement(i,{ref:s}):null};Us.displayName="Presence";function dre(n){const[e,t]=A.useState(),r=A.useRef({}),i=A.useRef(n),s=A.useRef("none"),o=n?"mounted":"unmounted",[a,l]=ure(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=M_(r.current);s.current=a==="mounted"?c:"none"},[a]),To(()=>{const c=r.current,u=i.current;if(u!==n){const h=s.current,m=M_(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),To(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=m=>{const g=M_(r.current).includes(m.animationName);if(m.target===e&&g&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},h=m=>{m.target===e&&(s.current=M_(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function M_(n){return(n==null?void 0:n.animationName)||"none"}function hre(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function lc({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=fre({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=Rr(t),l=A.useCallback(c=>{if(s){const d=typeof c=="function"?c(n):c;d!==n&&a(d)}else i(c)},[s,n,i,a]);return[o,l]}function fre({defaultProp:n,onChange:e}){const t=A.useState(n),[r]=t,i=A.useRef(r),s=Rr(e);return A.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}var pre="VisuallyHidden",pT=A.forwardRef((n,e)=>p.jsx(Re.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));pT.displayName=pre;var mre=pT,aM="ToastProvider",[lM,gre,yre]=hT("Toast"),[f8,WVe]=ac("Toast",[yre]),[vre,mT]=f8(aM),p8=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,l]=A.useState(null),[c,u]=A.useState(0),d=A.useRef(!1),h=A.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${aM}\`. Expected non-empty \`string\`.`),p.jsx(lM.Provider,{scope:e,children:p.jsx(vre,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:A.useCallback(()=>u(m=>m+1),[]),onToastRemove:A.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};p8.displayName=aM;var m8="ToastViewport",bre=["F8"],G2="toast.viewportPause",q2="toast.viewportResume",g8=A.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=bre,label:i="Notifications ({hotkey})",...s}=n,o=mT(m8,t),a=gre(t),l=A.useRef(null),c=A.useRef(null),u=A.useRef(null),d=A.useRef(null),h=qt(e,d,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;A.useEffect(()=>{const b=w=>{var _;r.length!==0&&r.every(S=>w[S]||w.code===S)&&((_=d.current)==null||_.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),A.useEffect(()=>{const b=l.current,w=d.current;if(y&&b&&w){const x=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(G2);w.dispatchEvent(N),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(q2);w.dispatchEvent(N),o.isClosePausedRef.current=!1}},S=N=>{!b.contains(N.relatedTarget)&&_()},P=()=>{b.contains(document.activeElement)||_()};return b.addEventListener("focusin",x),b.addEventListener("focusout",S),b.addEventListener("pointermove",x),b.addEventListener("pointerleave",P),window.addEventListener("blur",x),window.addEventListener("focus",_),()=>{b.removeEventListener("focusin",x),b.removeEventListener("focusout",S),b.removeEventListener("pointermove",x),b.removeEventListener("pointerleave",P),window.removeEventListener("blur",x),window.removeEventListener("focus",_)}}},[y,o.isClosePausedRef]);const g=A.useCallback(({tabbingDirection:b})=>{const x=a().map(_=>{const S=_.ref.current,P=[S,...Nre(S)];return b==="forwards"?P:P.reverse()});return(b==="forwards"?x.reverse():x).flat()},[a]);return A.useEffect(()=>{const b=d.current;if(b){const w=x=>{var P,N,T;const _=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!_){const C=document.activeElement,k=x.shiftKey;if(x.target===b&&k){(P=c.current)==null||P.focus();return}const F=g({tabbingDirection:k?"backwards":"forwards"}),j=F.findIndex(q=>q===C);RP(F.slice(j+1))?x.preventDefault():k?(N=c.current)==null||N.focus():(T=u.current)==null||T.focus()}};return b.addEventListener("keydown",w),()=>b.removeEventListener("keydown",w)}},[a,g]),p.jsxs(lre,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&p.jsx(K2,{ref:c,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});RP(b)}}),p.jsx(lM.Slot,{scope:t,children:p.jsx(Re.ol,{tabIndex:-1,...s,ref:h})}),y&&p.jsx(K2,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});RP(b)}})]})});g8.displayName=m8;var y8="ToastFocusProxy",K2=A.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=mT(y8,t);return p.jsx(pT,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});K2.displayName=y8;var gT="Toast",wre="toast.swipeStart",xre="toast.swipeMove",_re="toast.swipeCancel",Are="toast.swipeEnd",v8=A.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a=!0,l]=lc({prop:r,defaultProp:i,onChange:s});return p.jsx(Us,{present:t||a,children:p.jsx(Tre,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Rr(n.onPause),onResume:Rr(n.onResume),onSwipeStart:ve(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ve(n.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ve(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ve(n.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});v8.displayName=gT;var[Sre,Ere]=f8(gT,{onClose(){}}),Tre=A.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:m,...y}=n,g=mT(gT,t),[b,w]=A.useState(null),x=qt(e,q=>w(q)),_=A.useRef(null),S=A.useRef(null),P=i||g.duration,N=A.useRef(0),T=A.useRef(P),C=A.useRef(0),{onToastAdd:k,onToastRemove:M}=g,L=Rr(()=>{var H;(b==null?void 0:b.contains(document.activeElement))&&((H=g.viewport)==null||H.focus()),o()}),F=A.useCallback(q=>{!q||q===1/0||(window.clearTimeout(C.current),N.current=new Date().getTime(),C.current=window.setTimeout(L,q))},[L]);A.useEffect(()=>{const q=g.viewport;if(q){const H=()=>{F(T.current),c==null||c()},z=()=>{const W=new Date().getTime()-N.current;T.current=T.current-W,window.clearTimeout(C.current),l==null||l()};return q.addEventListener(G2,z),q.addEventListener(q2,H),()=>{q.removeEventListener(G2,z),q.removeEventListener(q2,H)}}},[g.viewport,P,l,c,F]),A.useEffect(()=>{s&&!g.isClosePausedRef.current&&F(P)},[s,P,g.isClosePausedRef,F]),A.useEffect(()=>(k(),()=>M()),[k,M]);const j=A.useMemo(()=>b?E8(b):null,[b]);return g.viewport?p.jsxs(p.Fragment,{children:[j&&p.jsx(Cre,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:j}),p.jsx(Sre,{scope:t,onClose:L,children:Ex.createPortal(p.jsx(lM.ItemSlot,{scope:t,children:p.jsx(are,{asChild:!0,onEscapeKeyDown:ve(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||L(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Re.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:ve(n.onKeyDown,q=>{q.key==="Escape"&&(a==null||a(q.nativeEvent),q.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:ve(n.onPointerDown,q=>{q.button===0&&(_.current={x:q.clientX,y:q.clientY})}),onPointerMove:ve(n.onPointerMove,q=>{if(!_.current)return;const H=q.clientX-_.current.x,z=q.clientY-_.current.y,W=!!S.current,V=["left","right"].includes(g.swipeDirection),U=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,K=V?U(0,H):0,Q=V?0:U(0,z),B=q.pointerType==="touch"?10:2,Y={x:K,y:Q},re={originalEvent:q,delta:Y};W?(S.current=Y,D_(xre,d,re,{discrete:!1})):l4(Y,g.swipeDirection,B)?(S.current=Y,D_(wre,u,re,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs(H)>B||Math.abs(z)>B)&&(_.current=null)}),onPointerUp:ve(n.onPointerUp,q=>{const H=S.current,z=q.target;if(z.hasPointerCapture(q.pointerId)&&z.releasePointerCapture(q.pointerId),S.current=null,_.current=null,H){const W=q.currentTarget,V={originalEvent:q,delta:H};l4(H,g.swipeDirection,g.swipeThreshold)?D_(Are,m,V,{discrete:!0}):D_(_re,h,V,{discrete:!0}),W.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Cre=n=>{const{__scopeToast:e,children:t,...r}=n,i=mT(gT,e),[s,o]=A.useState(!1),[a,l]=A.useState(!1);return kre(()=>o(!0)),A.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:p.jsx(fT,{asChild:!0,children:p.jsx(pT,{...r,children:s&&p.jsxs(p.Fragment,{children:[i.label," ",t]})})})},Pre="ToastTitle",b8=A.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return p.jsx(Re.div,{...r,ref:e})});b8.displayName=Pre;var Ire="ToastDescription",w8=A.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return p.jsx(Re.div,{...r,ref:e})});w8.displayName=Ire;var x8="ToastAction",_8=A.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?p.jsx(S8,{altText:t,asChild:!0,children:p.jsx(cM,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${x8}\`. Expected non-empty \`string\`.`),null)});_8.displayName=x8;var A8="ToastClose",cM=A.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=Ere(A8,t);return p.jsx(S8,{asChild:!0,children:p.jsx(Re.button,{type:"button",...r,ref:e,onClick:ve(n.onClick,i.onClose)})})});cM.displayName=A8;var S8=A.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return p.jsx(Re.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function E8(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Rre(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...E8(r))}}),e}function D_(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?oM(i,s):i.dispatchEvent(s)}var l4=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function kre(n=()=>{}){const e=Rr(n);To(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function Rre(n){return n.nodeType===n.ELEMENT_NODE}function Nre(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function RP(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Ore=p8,T8=g8,C8=v8,P8=b8,I8=w8,k8=_8,R8=cM;function N8(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=N8(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Wt(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=N8(n))&&(r&&(r+=" "),r+=e);return r}const c4=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,u4=Wt,Kf=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return u4(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=t==null?void 0:t[c],d=s==null?void 0:s[c];if(u===null)return null;const h=c4(u)||c4(d);return i[c][h]}),a=t&&Object.entries(t).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...m}=u;return Object.entries(m).every(y=>{let[g,b]=y;return Array.isArray(b)?b.includes({...s,...a}[g]):{...s,...a}[g]===b})?[...c,d,h]:c},[]);return u4(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mre=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),O8=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dre={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lre=A.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>A.createElement("svg",{ref:l,...Dre,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:O8("lucide",i),...a},[...o.map(([c,u])=>A.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(n,e)=>{const t=A.forwardRef(({className:r,...i},s)=>A.createElement(Lre,{ref:s,iconNode:e,className:O8(`lucide-${Mre(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jre=We("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fre=We("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=We("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $re=We("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=We("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vre=We("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bre=We("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=We("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ure=We("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=We("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hre=We("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=We("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wre=We("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gre=We("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=We("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qre=We("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=We("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yre=We("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xre=We("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=We("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qre=We("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=We("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=We("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=We("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jre=We("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=We("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=We("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=We("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eie=We("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tie=We("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=We("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=We("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nie=We("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=We("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),dM="-",rie=n=>{const e=sie(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(dM);return a[0]===""&&a.length!==1&&a.shift(),$8(a,e)||iie(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},$8=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?$8(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(dM);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},f4=/^\[(.+)\]$/,iie=n=>{if(f4.test(n)){const e=f4.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},sie=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return aie(Object.entries(n.classGroups),t).forEach(([s,o])=>{X2(o,r,s,e)}),r},X2=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:p4(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(oie(i)){X2(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{X2(o,p4(e,s),t,r)})})},p4=(n,e)=>{let t=n;return e.split(dM).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},oie=n=>n.isThemeGetter,aie=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,i]}):n,lie=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},V8="!",cie=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,d;for(let b=0;b<a.length;b++){let w=a[b];if(c===0){if(w===i&&(r||a.slice(b,b+s)===e)){l.push(a.slice(u,b)),u=b+s;continue}if(w==="/"){d=b;continue}}w==="["?c++:w==="]"&&c--}const h=l.length===0?a:a.substring(u),m=h.startsWith(V8),y=m?h.substring(1):h,g=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:g}};return t?a=>t({className:a,parseClassName:o}):o},uie=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},die=n=>({cache:lie(n.cacheSize),parseClassName:cie(n),...rie(n)}),hie=/\s+/,fie=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(hie);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:m}=t(c);let y=!!m,g=r(y?h.substring(0,m):h);if(!g){if(!y){a=c+(a.length>0?" "+a:a);continue}if(g=r(h),!g){a=c+(a.length>0?" "+a:a);continue}y=!1}const b=uie(u).join(":"),w=d?b+V8:b,x=w+g;if(s.includes(x))continue;s.push(x);const _=i(g,y);for(let S=0;S<_.length;++S){const P=_[S];s.push(w+P)}a=c+(a.length>0?" "+a:a)}return a};function pie(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=B8(e))&&(r&&(r+=" "),r+=t);return r}const B8=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=B8(n[r]))&&(t&&(t+=" "),t+=e);return t};function mie(n,...e){let t,r,i,s=o;function o(l){const c=e.reduce((u,d)=>d(u),n());return t=die(c),r=t.cache.get,i=t.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=fie(l,t);return i(l,u),u}return function(){return s(pie.apply(null,arguments))}}const Tt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},z8=/^\[(?:([a-z-]+):)?(.+)\]$/i,gie=/^\d+\/\d+$/,yie=new Set(["px","full","screen"]),vie=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,bie=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wie=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,xie=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_ie=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ua=n=>rm(n)||yie.has(n)||gie.test(n),xc=n=>iy(n,"length",kie),rm=n=>!!n&&!Number.isNaN(Number(n)),NP=n=>iy(n,"number",rm),Jy=n=>!!n&&Number.isInteger(Number(n)),Aie=n=>n.endsWith("%")&&rm(n.slice(0,-1)),Oe=n=>z8.test(n),_c=n=>vie.test(n),Sie=new Set(["length","size","percentage"]),Eie=n=>iy(n,Sie,U8),Tie=n=>iy(n,"position",U8),Cie=new Set(["image","url"]),Pie=n=>iy(n,Cie,Nie),Iie=n=>iy(n,"",Rie),Zy=()=>!0,iy=(n,e,t)=>{const r=z8.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},kie=n=>bie.test(n)&&!wie.test(n),U8=()=>!1,Rie=n=>xie.test(n),Nie=n=>_ie.test(n),Oie=()=>{const n=Tt("colors"),e=Tt("spacing"),t=Tt("blur"),r=Tt("brightness"),i=Tt("borderColor"),s=Tt("borderRadius"),o=Tt("borderSpacing"),a=Tt("borderWidth"),l=Tt("contrast"),c=Tt("grayscale"),u=Tt("hueRotate"),d=Tt("invert"),h=Tt("gap"),m=Tt("gradientColorStops"),y=Tt("gradientColorStopPositions"),g=Tt("inset"),b=Tt("margin"),w=Tt("opacity"),x=Tt("padding"),_=Tt("saturate"),S=Tt("scale"),P=Tt("sepia"),N=Tt("skew"),T=Tt("space"),C=Tt("translate"),k=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",Oe,e],F=()=>[Oe,e],j=()=>["",Ua,xc],q=()=>["auto",rm,Oe],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",Oe],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[rm,Oe];return{cacheSize:500,separator:":",theme:{colors:[Zy],spacing:[Ua,xc],blur:["none","",_c,Oe],brightness:Q(),borderColor:[n],borderRadius:["none","","full",_c,Oe],borderSpacing:F(),borderWidth:j(),contrast:Q(),grayscale:U(),hueRotate:Q(),invert:U(),gap:F(),gradientColorStops:[n],gradientColorStopPositions:[Aie,xc],inset:L(),margin:L(),opacity:Q(),padding:F(),saturate:Q(),scale:Q(),sepia:U(),skew:Q(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Oe]}],container:["container"],columns:[{columns:[_c]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),Oe]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jy,Oe]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Oe]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Jy,Oe]}],"grid-cols":[{"grid-cols":[Zy]}],"col-start-end":[{col:["auto",{span:["full",Jy,Oe]},Oe]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[Zy]}],"row-start-end":[{row:["auto",{span:[Jy,Oe]},Oe]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Oe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Oe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Oe,e]}],"min-w":[{"min-w":[Oe,e,"min","max","fit"]}],"max-w":[{"max-w":[Oe,e,"none","full","min","max","fit","prose",{screen:[_c]},_c]}],h:[{h:[Oe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Oe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Oe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Oe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",_c,xc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",NP]}],"font-family":[{font:[Zy]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Oe]}],"line-clamp":[{"line-clamp":["none",rm,NP]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ua,Oe]}],"list-image":[{"list-image":["none",Oe]}],"list-style-type":[{list:["none","disc","decimal",Oe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ua,xc]}],"underline-offset":[{"underline-offset":["auto",Ua,Oe]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),Tie]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Eie]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Pie]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[Ua,Oe]}],"outline-w":[{outline:[Ua,xc]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Ua,xc]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",_c,Iie]}],"shadow-color":[{shadow:[Zy]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...W(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",_c,Oe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[_]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Oe]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",Oe]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Oe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Jy,Oe]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Oe]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Oe]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Oe]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Ua,xc,NP]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Mie=mie(Oie);function ce(...n){return Mie(Wt(n))}const Die=Ore,H8=A.forwardRef(({className:n,...e},t)=>p.jsx(T8,{ref:t,className:ce("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));H8.displayName=T8.displayName;const Lie=Kf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),W8=A.forwardRef(({className:n,variant:e,...t},r)=>p.jsx(C8,{ref:r,className:ce(Lie({variant:e}),n),...t}));W8.displayName=C8.displayName;const jie=A.forwardRef(({className:n,...e},t)=>p.jsx(k8,{ref:t,className:ce("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));jie.displayName=k8.displayName;const G8=A.forwardRef(({className:n,...e},t)=>p.jsx(R8,{ref:t,className:ce("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:p.jsx(uM,{className:"h-4 w-4"})}));G8.displayName=R8.displayName;const q8=A.forwardRef(({className:n,...e},t)=>p.jsx(P8,{ref:t,className:ce("text-sm font-semibold",n),...e}));q8.displayName=P8.displayName;const K8=A.forwardRef(({className:n,...e},t)=>p.jsx(I8,{ref:t,className:ce("text-sm opacity-90",n),...e}));K8.displayName=I8.displayName;function Fie(){const{toasts:n}=qf();return p.jsxs(Die,{children:[n.map(function({id:e,title:t,description:r,action:i,...s}){return p.jsxs(W8,{...s,children:[p.jsxs("div",{className:"grid gap-1",children:[t&&p.jsx(q8,{children:t}),r&&p.jsx(K8,{children:r})]}),i,p.jsx(G8,{})]},e)}),p.jsx(H8,{})]})}var m4=["light","dark"],$ie="(prefers-color-scheme: dark)",Vie=A.createContext(void 0),Bie={setTheme:n=>{},themes:[]},zie=()=>{var n;return(n=A.useContext(Vie))!=null?n:Bie};A.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let c=s==="system",u=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,d=i?m4.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(y,g=!1,b=!0)=>{let w=o?o[y]:y,x=g?y+"|| ''":`'${w}'`,_="";return i&&b&&!g&&m4.includes(y)&&(_+=`d.style.colorScheme = '${y}';`),t==="class"?g||w?_+=`c.add(${x})`:_+="null":w&&(_+=`d[s](n,${x})`),_},m=n?`!function(){${u}${h(n)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${$ie}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${c?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return A.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var Uie=n=>{switch(n){case"success":return Gie;case"info":return Kie;case"warning":return qie;case"error":return Yie;default:return null}},Hie=Array(12).fill(0),Wie=({visible:n})=>G.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},G.createElement("div",{className:"sonner-spinner"},Hie.map((e,t)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),Gie=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),qie=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Kie=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Yie=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Xie=()=>{let[n,e]=G.useState(document.hidden);return G.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},Q2=1,Qie=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Q2++,o=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let i=e instanceof Promise?e:e(),s=r!==void 0;return i.then(async o=>{if(Zie(o)&&!o.ok){s=!1;let a=typeof t.error=="function"?await t.error(`HTTP error! status: ${o.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${o.status}`):t.description;this.create({id:r,type:"error",message:a,description:l})}else if(t.success!==void 0){s=!1;let a=typeof t.success=="function"?await t.success(o):t.success,l=typeof t.description=="function"?await t.description(o):t.description;this.create({id:r,type:"success",message:a,description:l})}}).catch(async o=>{if(t.error!==void 0){s=!1;let a=typeof t.error=="function"?await t.error(o):t.error,l=typeof t.description=="function"?await t.description(o):t.description;this.create({id:r,type:"error",message:a,description:l})}}).finally(()=>{var o;s&&(this.dismiss(r),r=void 0),(o=t.finally)==null||o.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Q2++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Ki=new Qie,Jie=(n,e)=>{let t=(e==null?void 0:e.id)||Q2++;return Ki.addToast({title:n,...e,id:t}),t},Zie=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",ese=Jie,tse=()=>Ki.toasts;Object.assign(ese,{success:Ki.success,info:Ki.info,warning:Ki.warning,error:Ki.error,custom:Ki.custom,message:Ki.message,promise:Ki.promise,dismiss:Ki.dismiss,loading:Ki.loading},{getHistory:tse});function nse(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}nse(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function L_(n){return n.label!==void 0}var rse=3,ise="32px",sse=4e3,ose=356,ase=14,lse=20,cse=200;function use(...n){return n.filter(Boolean).join(" ")}var dse=n=>{var e,t,r,i,s,o,a,l,c,u;let{invert:d,toast:h,unstyled:m,interacting:y,setHeights:g,visibleToasts:b,heights:w,index:x,toasts:_,expanded:S,removeToast:P,defaultRichColors:N,closeButton:T,style:C,cancelButtonStyle:k,actionButtonStyle:M,className:L="",descriptionClassName:F="",duration:j,position:q,gap:H,loadingIcon:z,expandByDefault:W,classNames:V,icons:U,closeButtonAriaLabel:K="Close toast",pauseWhenPageIsHidden:Q,cn:B}=n,[Y,re]=G.useState(!1),[te,ie]=G.useState(!1),[ae,Ne]=G.useState(!1),[Le,nn]=G.useState(!1),[Pi,ri]=G.useState(0),[ii,qs]=G.useState(0),fc=G.useRef(null),Ks=G.useRef(null),Cy=x===0,Py=x+1<=b,un=h.type,jo=h.dismissible!==!1,Zx=h.className||"",BC=h.descriptionClassName||"",pc=G.useMemo(()=>w.findIndex(Ee=>Ee.toastId===h.id)||0,[w,h.id]),Iy=G.useMemo(()=>{var Ee;return(Ee=h.closeButton)!=null?Ee:T},[h.closeButton,T]),ky=G.useMemo(()=>h.duration||j||sse,[h.duration,j]),dn=G.useRef(0),Yt=G.useRef(0),Sd=G.useRef(0),$a=G.useRef(null),[Ry,zC]=q.split("-"),mc=G.useMemo(()=>w.reduce((Ee,ut,it)=>it>=pc?Ee:Ee+ut.height,0),[w,pc]),Ny=Xie(),e_=h.invert||d,Ed=un==="loading";Yt.current=G.useMemo(()=>pc*H+mc,[pc,mc]),G.useEffect(()=>{re(!0)},[]),G.useLayoutEffect(()=>{if(!Y)return;let Ee=Ks.current,ut=Ee.style.height;Ee.style.height="auto";let it=Ee.getBoundingClientRect().height;Ee.style.height=ut,qs(it),g(dr=>dr.find(si=>si.toastId===h.id)?dr.map(si=>si.toastId===h.id?{...si,height:it}:si):[{toastId:h.id,height:it,position:h.position},...dr])},[Y,h.title,h.description,g,h.id]);let Fo=G.useCallback(()=>{ie(!0),ri(Yt.current),g(Ee=>Ee.filter(ut=>ut.toastId!==h.id)),setTimeout(()=>{P(h)},cse)},[h,P,g,Yt]);G.useEffect(()=>{if(h.promise&&un==="loading"||h.duration===1/0||h.type==="loading")return;let Ee,ut=ky;return S||y||Q&&Ny?(()=>{if(Sd.current<dn.current){let it=new Date().getTime()-dn.current;ut=ut-it}Sd.current=new Date().getTime()})():ut!==1/0&&(dn.current=new Date().getTime(),Ee=setTimeout(()=>{var it;(it=h.onAutoClose)==null||it.call(h,h),Fo()},ut)),()=>clearTimeout(Ee)},[S,y,W,h,ky,Fo,h.promise,un,Q,Ny]),G.useEffect(()=>{let Ee=Ks.current;if(Ee){let ut=Ee.getBoundingClientRect().height;return qs(ut),g(it=>[{toastId:h.id,height:ut,position:h.position},...it]),()=>g(it=>it.filter(dr=>dr.toastId!==h.id))}},[g,h.id]),G.useEffect(()=>{h.delete&&Fo()},[Fo,h.delete]);function UC(){return U!=null&&U.loading?G.createElement("div",{className:"sonner-loader","data-visible":un==="loading"},U.loading):z?G.createElement("div",{className:"sonner-loader","data-visible":un==="loading"},z):G.createElement(Wie,{visible:un==="loading"})}return G.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ks,className:B(L,Zx,V==null?void 0:V.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,V==null?void 0:V.default,V==null?void 0:V[un],(t=h==null?void 0:h.classNames)==null?void 0:t[un]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:N,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":Y,"data-promise":!!h.promise,"data-removed":te,"data-visible":Py,"data-y-position":Ry,"data-x-position":zC,"data-index":x,"data-front":Cy,"data-swiping":ae,"data-dismissible":jo,"data-type":un,"data-invert":e_,"data-swipe-out":Le,"data-expanded":!!(S||W&&Y),style:{"--index":x,"--toasts-before":x,"--z-index":_.length-x,"--offset":`${te?Pi:Yt.current}px`,"--initial-height":W?"auto":`${ii}px`,...C,...h.style},onPointerDown:Ee=>{Ed||!jo||(fc.current=new Date,ri(Yt.current),Ee.target.setPointerCapture(Ee.pointerId),Ee.target.tagName!=="BUTTON"&&(Ne(!0),$a.current={x:Ee.clientX,y:Ee.clientY}))},onPointerUp:()=>{var Ee,ut,it,dr;if(Le||!jo)return;$a.current=null;let si=Number(((Ee=Ks.current)==null?void 0:Ee.style.getPropertyValue("--swipe-amount").replace("px",""))||0),gc=new Date().getTime()-((ut=fc.current)==null?void 0:ut.getTime()),Va=Math.abs(si)/gc;if(Math.abs(si)>=lse||Va>.11){ri(Yt.current),(it=h.onDismiss)==null||it.call(h,h),Fo(),nn(!0);return}(dr=Ks.current)==null||dr.style.setProperty("--swipe-amount","0px"),Ne(!1)},onPointerMove:Ee=>{var ut;if(!$a.current||!jo)return;let it=Ee.clientY-$a.current.y,dr=Ee.clientX-$a.current.x,si=(Ry==="top"?Math.min:Math.max)(0,it),gc=Ee.pointerType==="touch"?10:2;Math.abs(si)>gc?(ut=Ks.current)==null||ut.style.setProperty("--swipe-amount",`${it}px`):Math.abs(dr)>gc&&($a.current=null)}},Iy&&!h.jsx?G.createElement("button",{"aria-label":K,"data-disabled":Ed,"data-close-button":!0,onClick:Ed||!jo?()=>{}:()=>{var Ee;Fo(),(Ee=h.onDismiss)==null||Ee.call(h,h)},className:B(V==null?void 0:V.closeButton,(i=h==null?void 0:h.classNames)==null?void 0:i.closeButton)},G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||G.isValidElement(h.title)?h.jsx||h.title:G.createElement(G.Fragment,null,un||h.icon||h.promise?G.createElement("div",{"data-icon":"",className:B(V==null?void 0:V.icon,(s=h==null?void 0:h.classNames)==null?void 0:s.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||UC():null,h.type!=="loading"?h.icon||(U==null?void 0:U[un])||Uie(un):null):null,G.createElement("div",{"data-content":"",className:B(V==null?void 0:V.content,(o=h==null?void 0:h.classNames)==null?void 0:o.content)},G.createElement("div",{"data-title":"",className:B(V==null?void 0:V.title,(a=h==null?void 0:h.classNames)==null?void 0:a.title)},h.title),h.description?G.createElement("div",{"data-description":"",className:B(F,BC,V==null?void 0:V.description,(l=h==null?void 0:h.classNames)==null?void 0:l.description)},h.description):null),G.isValidElement(h.cancel)?h.cancel:h.cancel&&L_(h.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||k,onClick:Ee=>{var ut,it;L_(h.cancel)&&jo&&((it=(ut=h.cancel).onClick)==null||it.call(ut,Ee),Fo())},className:B(V==null?void 0:V.cancelButton,(c=h==null?void 0:h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,G.isValidElement(h.action)?h.action:h.action&&L_(h.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||M,onClick:Ee=>{var ut,it;L_(h.action)&&(Ee.defaultPrevented||((it=(ut=h.action).onClick)==null||it.call(ut,Ee),Fo()))},className:B(V==null?void 0:V.actionButton,(u=h==null?void 0:h.classNames)==null?void 0:u.actionButton)},h.action.label):null))};function g4(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var hse=n=>{let{invert:e,position:t="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:s,className:o,offset:a,theme:l="light",richColors:c,duration:u,style:d,visibleToasts:h=rse,toastOptions:m,dir:y=g4(),gap:g=ase,loadingIcon:b,icons:w,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:_,cn:S=use}=n,[P,N]=G.useState([]),T=G.useMemo(()=>Array.from(new Set([t].concat(P.filter(Q=>Q.position).map(Q=>Q.position)))),[P,t]),[C,k]=G.useState([]),[M,L]=G.useState(!1),[F,j]=G.useState(!1),[q,H]=G.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=G.useRef(null),W=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=G.useRef(null),U=G.useRef(!1),K=G.useCallback(Q=>{var B;(B=P.find(Y=>Y.id===Q.id))!=null&&B.delete||Ki.dismiss(Q.id),N(Y=>Y.filter(({id:re})=>re!==Q.id))},[P]);return G.useEffect(()=>Ki.subscribe(Q=>{if(Q.dismiss){N(B=>B.map(Y=>Y.id===Q.id?{...Y,delete:!0}:Y));return}setTimeout(()=>{a8.flushSync(()=>{N(B=>{let Y=B.findIndex(re=>re.id===Q.id);return Y!==-1?[...B.slice(0,Y),{...B[Y],...Q},...B.slice(Y+1)]:[Q,...B]})})})}),[]),G.useEffect(()=>{if(l!=="system"){H(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:Q})=>{H(Q?"dark":"light")})},[l]),G.useEffect(()=>{P.length<=1&&L(!1)},[P]),G.useEffect(()=>{let Q=B=>{var Y,re;r.every(te=>B[te]||B.code===te)&&(L(!0),(Y=z.current)==null||Y.focus()),B.code==="Escape"&&(document.activeElement===z.current||(re=z.current)!=null&&re.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[r]),G.useEffect(()=>{if(z.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,U.current=!1)}},[z.current]),P.length?G.createElement("section",{"aria-label":`${x} ${W}`,tabIndex:-1},T.map((Q,B)=>{var Y;let[re,te]=Q.split("-");return G.createElement("ol",{key:Q,dir:y==="auto"?g4():y,tabIndex:-1,ref:z,className:o,"data-sonner-toaster":!0,"data-theme":q,"data-y-position":re,"data-x-position":te,style:{"--front-toast-height":`${((Y=C[0])==null?void 0:Y.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||ise,"--width":`${ose}px`,"--gap":`${g}px`,...d},onBlur:ie=>{U.current&&!ie.currentTarget.contains(ie.relatedTarget)&&(U.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||U.current||(U.current=!0,V.current=ie.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{F||L(!1)},onPointerDown:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||j(!0)},onPointerUp:()=>j(!1)},P.filter(ie=>!ie.position&&B===0||ie.position===Q).map((ie,ae)=>{var Ne,Le;return G.createElement(dse,{key:ie.id,icons:w,index:ae,toast:ie,defaultRichColors:c,duration:(Ne=m==null?void 0:m.duration)!=null?Ne:u,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:e,visibleToasts:h,closeButton:(Le=m==null?void 0:m.closeButton)!=null?Le:s,interacting:F,position:Q,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:K,toasts:P.filter(nn=>nn.position==ie.position),heights:C.filter(nn=>nn.position==ie.position),setHeights:k,expandByDefault:i,gap:g,loadingIcon:b,expanded:M,pauseWhenPageIsHidden:_,cn:S})}))})):null};const fse=({...n})=>{const{theme:e="system"}=zie();return p.jsx(hse,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var pse=iz.useId||(()=>{}),mse=0;function Aa(n){const[e,t]=A.useState(pse());return To(()=>{n||t(r=>r??String(mse++))},[n]),n||(e?`radix-${e}`:"")}const gse=["top","right","bottom","left"],Qu=Math.min,Ji=Math.max,oS=Math.round,j_=Math.floor,Ju=n=>({x:n,y:n}),yse={left:"right",right:"left",bottom:"top",top:"bottom"},vse={start:"end",end:"start"};function J2(n,e,t){return Ji(n,Qu(e,t))}function Jl(n,e){return typeof n=="function"?n(e):n}function Zl(n){return n.split("-")[0]}function sy(n){return n.split("-")[1]}function hM(n){return n==="x"?"y":"x"}function fM(n){return n==="y"?"height":"width"}function Zu(n){return["top","bottom"].includes(Zl(n))?"y":"x"}function pM(n){return hM(Zu(n))}function bse(n,e,t){t===void 0&&(t=!1);const r=sy(n),i=pM(n),s=fM(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=aS(o)),[o,aS(o)]}function wse(n){const e=aS(n);return[Z2(n),e,Z2(e)]}function Z2(n){return n.replace(/start|end/g,e=>vse[e])}function xse(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function _se(n,e,t,r){const i=sy(n);let s=xse(Zl(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Z2)))),s}function aS(n){return n.replace(/left|right|bottom|top/g,e=>yse[e])}function Ase(n){return{top:0,right:0,bottom:0,left:0,...n}}function Y8(n){return typeof n!="number"?Ase(n):{top:n,right:n,bottom:n,left:n}}function lS(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function y4(n,e,t){let{reference:r,floating:i}=n;const s=Zu(e),o=pM(e),a=fM(o),l=Zl(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(sy(e)){case"start":m[o]-=h*(t&&c?-1:1);break;case"end":m[o]+=h*(t&&c?-1:1);break}return m}const Sse=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:d}=y4(c,r,l),h=r,m={},y=0;for(let g=0;g<a.length;g++){const{name:b,fn:w}=a[g],{x,y:_,data:S,reset:P}=await w({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});u=x??u,d=_??d,m={...m,[b]:{...m[b],...S}},P&&y<=50&&(y++,typeof P=="object"&&(P.placement&&(h=P.placement),P.rects&&(c=P.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):P.rects),{x:u,y:d}=y4(c,h,l)),g=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:m}};async function Hb(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=Jl(e,n),y=Y8(m),b=a[h?d==="floating"?"reference":"floating":d],w=lS(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(b)))==null||t?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},P=lS(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:_,strategy:l}):x);return{top:(w.top-P.top+y.top)/S.y,bottom:(P.bottom-w.bottom+y.bottom)/S.y,left:(w.left-P.left+y.left)/S.x,right:(P.right-w.right+y.right)/S.x}}const Ese=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Jl(n,e)||{};if(c==null)return{};const d=Y8(u),h={x:t,y:r},m=pM(i),y=fM(m),g=await o.getDimensions(c),b=m==="y",w=b?"top":"left",x=b?"bottom":"right",_=b?"clientHeight":"clientWidth",S=s.reference[y]+s.reference[m]-h[m]-s.floating[y],P=h[m]-s.reference[m],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=N?N[_]:0;(!T||!await(o.isElement==null?void 0:o.isElement(N)))&&(T=a.floating[_]||s.floating[y]);const C=S/2-P/2,k=T/2-g[y]/2-1,M=Qu(d[w],k),L=Qu(d[x],k),F=M,j=T-g[y]-L,q=T/2-g[y]/2+C,H=J2(F,q,j),z=!l.arrow&&sy(i)!=null&&q!==H&&s.reference[y]/2-(q<F?M:L)-g[y]/2<0,W=z?q<F?q-F:q-j:0;return{[m]:h[m]+W,data:{[m]:H,centerOffset:q-H-W,...z&&{alignmentOffset:W}},reset:z}}}),Tse=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...b}=Jl(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const w=Zl(i),x=Zu(a),_=Zl(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),P=h||(_||!g?[aS(a)]:wse(a)),N=y!=="none";!h&&N&&P.push(..._se(a,g,y,S));const T=[a,...P],C=await Hb(e,b),k=[];let M=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&k.push(C[w]),d){const q=bse(i,o,S);k.push(C[q[0]],C[q[1]])}if(M=[...M,{placement:i,overflows:k}],!k.every(q=>q<=0)){var L,F;const q=(((L=s.flip)==null?void 0:L.index)||0)+1,H=T[q];if(H)return{data:{index:q,overflows:M},reset:{placement:H}};let z=(F=M.filter(W=>W.overflows[0]<=0).sort((W,V)=>W.overflows[1]-V.overflows[1])[0])==null?void 0:F.placement;if(!z)switch(m){case"bestFit":{var j;const W=(j=M.filter(V=>{if(N){const U=Zu(V.placement);return U===x||U==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(U=>U>0).reduce((U,K)=>U+K,0)]).sort((V,U)=>V[1]-U[1])[0])==null?void 0:j[0];W&&(z=W);break}case"initialPlacement":z=a;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function v4(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function b4(n){return gse.some(e=>n[e]>=0)}const Cse=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Jl(n,e);switch(r){case"referenceHidden":{const s=await Hb(e,{...i,elementContext:"reference"}),o=v4(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:b4(o)}}}case"escaped":{const s=await Hb(e,{...i,altBoundary:!0}),o=v4(s,t.floating);return{data:{escapedOffsets:o,escaped:b4(o)}}}default:return{}}}}};async function Pse(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Zl(t),a=sy(t),l=Zu(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=Jl(e,n);let{mainAxis:h,crossAxis:m,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*u,y:h*c}:{x:h*c,y:m*u}}const Ise=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await Pse(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},kse=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:w,y:x}=b;return{x:w,y:x}}},...l}=Jl(n,e),c={x:t,y:r},u=await Hb(e,l),d=Zu(Zl(i)),h=hM(d);let m=c[h],y=c[d];if(s){const b=h==="y"?"top":"left",w=h==="y"?"bottom":"right",x=m+u[b],_=m-u[w];m=J2(x,m,_)}if(o){const b=d==="y"?"top":"left",w=d==="y"?"bottom":"right",x=y+u[b],_=y-u[w];y=J2(x,y,_)}const g=a.fn({...e,[h]:m,[d]:y});return{...g,data:{x:g.x-t,y:g.y-r,enabled:{[h]:s,[d]:o}}}}}},Rse=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Jl(n,e),u={x:t,y:r},d=Zu(i),h=hM(d);let m=u[h],y=u[d];const g=Jl(a,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const _=h==="y"?"height":"width",S=s.reference[h]-s.floating[_]+b.mainAxis,P=s.reference[h]+s.reference[_]-b.mainAxis;m<S?m=S:m>P&&(m=P)}if(c){var w,x;const _=h==="y"?"width":"height",S=["top","left"].includes(Zl(i)),P=s.reference[d]-s.floating[_]+(S&&((w=o.offset)==null?void 0:w[d])||0)+(S?0:b.crossAxis),N=s.reference[d]+s.reference[_]+(S?0:((x=o.offset)==null?void 0:x[d])||0)-(S?b.crossAxis:0);y<P?y=P:y>N&&(y=N)}return{[h]:m,[d]:y}}}},Nse=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Jl(n,e),u=await Hb(e,c),d=Zl(i),h=sy(i),m=Zu(i)==="y",{width:y,height:g}=s.floating;let b,w;d==="top"||d==="bottom"?(b=d,w=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=d,b=h==="end"?"top":"bottom");const x=g-u.top-u.bottom,_=y-u.left-u.right,S=Qu(g-u[b],x),P=Qu(y-u[w],_),N=!e.middlewareData.shift;let T=S,C=P;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(C=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=x),N&&!h){const M=Ji(u.left,0),L=Ji(u.right,0),F=Ji(u.top,0),j=Ji(u.bottom,0);m?C=y-2*(M!==0||L!==0?M+L:Ji(u.left,u.right)):T=g-2*(F!==0||j!==0?F+j:Ji(u.top,u.bottom))}await l({...e,availableWidth:C,availableHeight:T});const k=await o.getDimensions(a.floating);return y!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}};function yT(){return typeof window<"u"}function oy(n){return X8(n)?(n.nodeName||"").toLowerCase():"#document"}function is(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ja(n){var e;return(e=(X8(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function X8(n){return yT()?n instanceof Node||n instanceof is(n).Node:!1}function Co(n){return yT()?n instanceof Element||n instanceof is(n).Element:!1}function Na(n){return yT()?n instanceof HTMLElement||n instanceof is(n).HTMLElement:!1}function w4(n){return!yT()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof is(n).ShadowRoot}function Cx(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Po(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function Ose(n){return["table","td","th"].includes(oy(n))}function vT(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function mM(n){const e=gM(),t=Co(n)?Po(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function Mse(n){let e=ed(n);for(;Na(e)&&!Lg(e);){if(mM(e))return e;if(vT(e))return null;e=ed(e)}return null}function gM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Lg(n){return["html","body","#document"].includes(oy(n))}function Po(n){return is(n).getComputedStyle(n)}function bT(n){return Co(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function ed(n){if(oy(n)==="html")return n;const e=n.assignedSlot||n.parentNode||w4(n)&&n.host||ja(n);return w4(e)?e.host:e}function Q8(n){const e=ed(n);return Lg(e)?n.ownerDocument?n.ownerDocument.body:n.body:Na(e)&&Cx(e)?e:Q8(e)}function Wb(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Q8(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=is(i);if(s){const a=ek(o);return e.concat(o,o.visualViewport||[],Cx(i)?i:[],a&&t?Wb(a):[])}return e.concat(i,Wb(i,[],t))}function ek(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function J8(n){const e=Po(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Na(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=oS(t)!==s||oS(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function yM(n){return Co(n)?n:n.contextElement}function im(n){const e=yM(n);if(!Na(e))return Ju(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=J8(e);let o=(s?oS(t.width):t.width)/r,a=(s?oS(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Dse=Ju(0);function Z8(n){const e=is(n);return!gM()||!e.visualViewport?Dse:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Lse(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==is(n)?!1:e}function Pf(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=yM(n);let o=Ju(1);e&&(r?Co(r)&&(o=im(r)):o=im(n));const a=Lse(s,t,r)?Z8(s):Ju(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const h=is(s),m=r&&Co(r)?is(r):r;let y=h,g=ek(y);for(;g&&r&&m!==y;){const b=im(g),w=g.getBoundingClientRect(),x=Po(g),_=w.left+(g.clientLeft+parseFloat(x.paddingLeft))*b.x,S=w.top+(g.clientTop+parseFloat(x.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,d*=b.y,l+=_,c+=S,y=is(g),g=ek(y)}}return lS({width:u,height:d,x:l,y:c})}function jse(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=ja(r),a=e?vT(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=Ju(1);const u=Ju(0),d=Na(r);if((d||!d&&!s)&&((oy(r)!=="body"||Cx(o))&&(l=bT(r)),Na(r))){const h=Pf(r);c=im(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x,y:t.y*c.y-l.scrollTop*c.y+u.y}}function Fse(n){return Array.from(n.getClientRects())}function tk(n,e){const t=bT(n).scrollLeft;return e?e.left+t:Pf(ja(n)).left+t}function $se(n){const e=ja(n),t=bT(n),r=n.ownerDocument.body,i=Ji(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ji(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+tk(n);const a=-t.scrollTop;return Po(r).direction==="rtl"&&(o+=Ji(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Vse(n,e){const t=is(n),r=ja(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=gM();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function Bse(n,e){const t=Pf(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Na(n)?im(n):Ju(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function x4(n,e,t){let r;if(e==="viewport")r=Vse(n,t);else if(e==="document")r=$se(ja(n));else if(Co(e))r=Bse(e,t);else{const i=Z8(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return lS(r)}function e9(n,e){const t=ed(n);return t===e||!Co(t)||Lg(t)?!1:Po(t).position==="fixed"||e9(t,e)}function zse(n,e){const t=e.get(n);if(t)return t;let r=Wb(n,[],!1).filter(a=>Co(a)&&oy(a)!=="body"),i=null;const s=Po(n).position==="fixed";let o=s?ed(n):n;for(;Co(o)&&!Lg(o);){const a=Po(o),l=mM(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Cx(o)&&!l&&e9(n,o))?r=r.filter(u=>u!==o):i=a,o=ed(o)}return e.set(n,r),r}function Use(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?vT(e)?[]:zse(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const d=x4(e,u,i);return c.top=Ji(d.top,c.top),c.right=Qu(d.right,c.right),c.bottom=Qu(d.bottom,c.bottom),c.left=Ji(d.left,c.left),c},x4(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Hse(n){const{width:e,height:t}=J8(n);return{width:e,height:t}}function Wse(n,e,t){const r=Na(e),i=ja(e),s=t==="fixed",o=Pf(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ju(0);if(r||!r&&!s)if((oy(e)!=="body"||Cx(i))&&(a=bT(e)),r){const m=Pf(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&(l.x=tk(i));let c=0,u=0;if(i&&!r&&!s){const m=i.getBoundingClientRect();u=m.top+a.scrollTop,c=m.left+a.scrollLeft-tk(i,m)}const d=o.left+a.scrollLeft-l.x-c,h=o.top+a.scrollTop-l.y-u;return{x:d,y:h,width:o.width,height:o.height}}function OP(n){return Po(n).position==="static"}function _4(n,e){if(!Na(n)||Po(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ja(n)===t&&(t=t.ownerDocument.body),t}function t9(n,e){const t=is(n);if(vT(n))return t;if(!Na(n)){let i=ed(n);for(;i&&!Lg(i);){if(Co(i)&&!OP(i))return i;i=ed(i)}return t}let r=_4(n,e);for(;r&&Ose(r)&&OP(r);)r=_4(r,e);return r&&Lg(r)&&OP(r)&&!mM(r)?t:r||Mse(n)||t}const Gse=async function(n){const e=this.getOffsetParent||t9,t=this.getDimensions,r=await t(n.floating);return{reference:Wse(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function qse(n){return Po(n).direction==="rtl"}const Kse={convertOffsetParentRelativeRectToViewportRelativeRect:jse,getDocumentElement:ja,getClippingRect:Use,getOffsetParent:t9,getElementRects:Gse,getClientRects:Fse,getDimensions:Hse,getScale:im,isElement:Co,isRTL:qse};function Yse(n,e){let t=null,r;const i=ja(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:h}=n.getBoundingClientRect();if(a||e(),!d||!h)return;const m=j_(u),y=j_(i.clientWidth-(c+d)),g=j_(i.clientHeight-(u+h)),b=j_(c),x={rootMargin:-m+"px "+-y+"px "+-g+"px "+-b+"px",threshold:Ji(0,Qu(1,l))||1};let _=!0;function S(P){const N=P[0].intersectionRatio;if(N!==l){if(!_)return o();N?o(!1,N):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{t=new IntersectionObserver(S,{...x,root:i.ownerDocument})}catch{t=new IntersectionObserver(S,x)}t.observe(n)}return o(!0),s}function Xse(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=yM(n),u=i||s?[...c?Wb(c):[],...Wb(e)]:[];u.forEach(w=>{i&&w.addEventListener("scroll",t,{passive:!0}),s&&w.addEventListener("resize",t)});const d=c&&a?Yse(c,t):null;let h=-1,m=null;o&&(m=new ResizeObserver(w=>{let[x]=w;x&&x.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var _;(_=m)==null||_.observe(e)})),t()}),c&&!l&&m.observe(c),m.observe(e));let y,g=l?Pf(n):null;l&&b();function b(){const w=Pf(n);g&&(w.x!==g.x||w.y!==g.y||w.width!==g.width||w.height!==g.height)&&t(),g=w,y=requestAnimationFrame(b)}return t(),()=>{var w;u.forEach(x=>{i&&x.removeEventListener("scroll",t),s&&x.removeEventListener("resize",t)}),d==null||d(),(w=m)==null||w.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const Qse=Ise,Jse=kse,Zse=Tse,eoe=Nse,toe=Cse,A4=Ese,noe=Rse,roe=(n,e,t)=>{const r=new Map,i={platform:Kse,...t},s={...i.platform,_c:r};return Sse(n,e,{...i,platform:s})};var F1=typeof document<"u"?A.useLayoutEffect:A.useEffect;function cS(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!cS(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!cS(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function n9(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function S4(n,e){const t=n9(n);return Math.round(e*t)/t}function MP(n){const e=A.useRef(n);return F1(()=>{e.current=n}),e}function ioe(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,d]=A.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[h,m]=A.useState(r);cS(h,r)||m(r);const[y,g]=A.useState(null),[b,w]=A.useState(null),x=A.useCallback(V=>{V!==N.current&&(N.current=V,g(V))},[]),_=A.useCallback(V=>{V!==T.current&&(T.current=V,w(V))},[]),S=s||y,P=o||b,N=A.useRef(null),T=A.useRef(null),C=A.useRef(u),k=l!=null,M=MP(l),L=MP(i),F=MP(c),j=A.useCallback(()=>{if(!N.current||!T.current)return;const V={placement:e,strategy:t,middleware:h};L.current&&(V.platform=L.current),roe(N.current,T.current,V).then(U=>{const K={...U,isPositioned:F.current!==!1};q.current&&!cS(C.current,K)&&(C.current=K,Ex.flushSync(()=>{d(K)}))})},[h,e,t,L,F]);F1(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(V=>({...V,isPositioned:!1})))},[c]);const q=A.useRef(!1);F1(()=>(q.current=!0,()=>{q.current=!1}),[]),F1(()=>{if(S&&(N.current=S),P&&(T.current=P),S&&P){if(M.current)return M.current(S,P,j);j()}},[S,P,j,M,k]);const H=A.useMemo(()=>({reference:N,floating:T,setReference:x,setFloating:_}),[x,_]),z=A.useMemo(()=>({reference:S,floating:P}),[S,P]),W=A.useMemo(()=>{const V={position:t,left:0,top:0};if(!z.floating)return V;const U=S4(z.floating,u.x),K=S4(z.floating,u.y);return a?{...V,transform:"translate("+U+"px, "+K+"px)",...n9(z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:U,top:K}},[t,a,z.floating,u.x,u.y]);return A.useMemo(()=>({...u,update:j,refs:H,elements:z,floatingStyles:W}),[u,j,H,z,W])}const soe=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?A4({element:r.current,padding:i}).fn(t):{}:r?A4({element:r,padding:i}).fn(t):{}}}},ooe=(n,e)=>({...Qse(n),options:[n,e]}),aoe=(n,e)=>({...Jse(n),options:[n,e]}),loe=(n,e)=>({...noe(n),options:[n,e]}),coe=(n,e)=>({...Zse(n),options:[n,e]}),uoe=(n,e)=>({...eoe(n),options:[n,e]}),doe=(n,e)=>({...toe(n),options:[n,e]}),hoe=(n,e)=>({...soe(n),options:[n,e]});var foe="Arrow",r9=A.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return p.jsx(Re.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});r9.displayName=foe;var poe=r9;function moe(n,e=[]){let t=[];function r(s,o){const a=A.createContext(o),l=t.length;t=[...t,o];function c(d){const{scope:h,children:m,...y}=d,g=(h==null?void 0:h[n][l])||a,b=A.useMemo(()=>y,Object.values(y));return p.jsx(g.Provider,{value:b,children:m})}function u(d,h){const m=(h==null?void 0:h[n][l])||a,y=A.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,goe(i,...e)]}function goe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function yoe(n){const[e,t]=A.useState(void 0);return To(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var vM="Popper",[i9,wT]=moe(vM),[voe,s9]=i9(vM),o9=n=>{const{__scopePopper:e,children:t}=n,[r,i]=A.useState(null);return p.jsx(voe,{scope:e,anchor:r,onAnchorChange:i,children:t})};o9.displayName=vM;var a9="PopperAnchor",l9=A.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=s9(a9,t),o=A.useRef(null),a=qt(e,o);return A.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:p.jsx(Re.div,{...i,ref:a})});l9.displayName=a9;var bM="PopperContent",[boe,woe]=i9(bM),c9=A.forwardRef((n,e)=>{var ae,Ne,Le,nn,Pi,ri;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:y,...g}=n,b=s9(bM,t),[w,x]=A.useState(null),_=qt(e,ii=>x(ii)),[S,P]=A.useState(null),N=yoe(S),T=(N==null?void 0:N.width)??0,C=(N==null?void 0:N.height)??0,k=r+(s!=="center"?"-"+s:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],F=L.length>0,j={padding:M,boundary:L.filter(_oe),altBoundary:F},{refs:q,floatingStyles:H,placement:z,isPositioned:W,middlewareData:V}=ioe({strategy:"fixed",placement:k,whileElementsMounted:(...ii)=>Xse(...ii,{animationFrame:m==="always"}),elements:{reference:b.anchor},middleware:[ooe({mainAxis:i+C,alignmentAxis:o}),l&&aoe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?loe():void 0,...j}),l&&coe({...j}),uoe({...j,apply:({elements:ii,rects:qs,availableWidth:fc,availableHeight:Ks})=>{const{width:Cy,height:Py}=qs.reference,un=ii.floating.style;un.setProperty("--radix-popper-available-width",`${fc}px`),un.setProperty("--radix-popper-available-height",`${Ks}px`),un.setProperty("--radix-popper-anchor-width",`${Cy}px`),un.setProperty("--radix-popper-anchor-height",`${Py}px`)}}),S&&hoe({element:S,padding:a}),Aoe({arrowWidth:T,arrowHeight:C}),h&&doe({strategy:"referenceHidden",...j})]}),[U,K]=h9(z),Q=Rr(y);To(()=>{W&&(Q==null||Q())},[W,Q]);const B=(ae=V.arrow)==null?void 0:ae.x,Y=(Ne=V.arrow)==null?void 0:Ne.y,re=((Le=V.arrow)==null?void 0:Le.centerOffset)!==0,[te,ie]=A.useState();return To(()=>{w&&ie(window.getComputedStyle(w).zIndex)},[w]),p.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:W?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(nn=V.transformOrigin)==null?void 0:nn.x,(Pi=V.transformOrigin)==null?void 0:Pi.y].join(" "),...((ri=V.hide)==null?void 0:ri.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:p.jsx(boe,{scope:t,placedSide:U,onArrowChange:P,arrowX:B,arrowY:Y,shouldHideArrow:re,children:p.jsx(Re.div,{"data-side":U,"data-align":K,...g,ref:_,style:{...g.style,animation:W?void 0:"none"}})})})});c9.displayName=bM;var u9="PopperArrow",xoe={top:"bottom",right:"left",bottom:"top",left:"right"},d9=A.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=woe(u9,r),o=xoe[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(poe,{...i,ref:t,style:{...i.style,display:"block"}})})});d9.displayName=u9;function _oe(n){return n!==null}var Aoe=n=>({name:"transformOrigin",options:n,fn(e){var b,w,x;const{placement:t,rects:r,middlewareData:i}=e,o=((b=i.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=h9(t),d={start:"0%",center:"50%",end:"100%"}[u],h=(((w=i.arrow)==null?void 0:w.x)??0)+a/2,m=(((x=i.arrow)==null?void 0:x.y)??0)+l/2;let y="",g="";return c==="bottom"?(y=o?d:`${h}px`,g=`${-l}px`):c==="top"?(y=o?d:`${h}px`,g=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,g=o?d:`${m}px`):c==="left"&&(y=`${r.floating.width+l}px`,g=o?d:`${m}px`),{data:{x:y,y:g}}}});function h9(n){const[e,t="center"]=n.split("-");return[e,t]}var f9=o9,p9=l9,m9=c9,g9=d9,[xT,qVe]=ac("Tooltip",[wT]),_T=wT(),y9="TooltipProvider",Soe=700,nk="tooltip.open",[Eoe,wM]=xT(y9),v9=n=>{const{__scopeTooltip:e,delayDuration:t=Soe,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,[o,a]=A.useState(!0),l=A.useRef(!1),c=A.useRef(0);return A.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),p.jsx(Eoe,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:A.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:A.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:A.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:s})};v9.displayName=y9;var AT="Tooltip",[Toe,ST]=xT(AT),b9=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=wM(AT,n.__scopeTooltip),c=_T(e),[u,d]=A.useState(null),h=Aa(),m=A.useRef(0),y=o??l.disableHoverableContent,g=a??l.delayDuration,b=A.useRef(!1),[w=!1,x]=lc({prop:r,defaultProp:i,onChange:T=>{T?(l.onOpen(),document.dispatchEvent(new CustomEvent(nk))):l.onClose(),s==null||s(T)}}),_=A.useMemo(()=>w?b.current?"delayed-open":"instant-open":"closed",[w]),S=A.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b.current=!1,x(!0)},[x]),P=A.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x(!1)},[x]),N=A.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{b.current=!0,x(!0),m.current=0},g)},[g,x]);return A.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),p.jsx(f9,{...c,children:p.jsx(Toe,{scope:e,contentId:h,open:w,stateAttribute:_,trigger:u,onTriggerChange:d,onTriggerEnter:A.useCallback(()=>{l.isOpenDelayed?N():S()},[l.isOpenDelayed,N,S]),onTriggerLeave:A.useCallback(()=>{y?P():(window.clearTimeout(m.current),m.current=0)},[P,y]),onOpen:S,onClose:P,disableHoverableContent:y,children:t})})};b9.displayName=AT;var rk="TooltipTrigger",w9=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=ST(rk,t),s=wM(rk,t),o=_T(t),a=A.useRef(null),l=qt(e,a,i.onTriggerChange),c=A.useRef(!1),u=A.useRef(!1),d=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(p9,{asChild:!0,...o,children:p.jsx(Re.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:ve(n.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:ve(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:ve(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:ve(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:ve(n.onBlur,i.onClose),onClick:ve(n.onClick,i.onClose)})})});w9.displayName=rk;var Coe="TooltipPortal",[KVe,Poe]=xT(Coe,{forceMount:void 0}),jg="TooltipContent",x9=A.forwardRef((n,e)=>{const t=Poe(jg,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=ST(jg,n.__scopeTooltip);return p.jsx(Us,{present:r||o.open,children:o.disableHoverableContent?p.jsx(_9,{side:i,...s,ref:e}):p.jsx(Ioe,{side:i,...s,ref:e})})}),Ioe=A.forwardRef((n,e)=>{const t=ST(jg,n.__scopeTooltip),r=wM(jg,n.__scopeTooltip),i=A.useRef(null),s=qt(e,i),[o,a]=A.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:d}=r,h=A.useCallback(()=>{a(null),d(!1)},[d]),m=A.useCallback((y,g)=>{const b=y.currentTarget,w={x:y.clientX,y:y.clientY},x=Ooe(w,b.getBoundingClientRect()),_=Moe(w,x),S=Doe(g.getBoundingClientRect()),P=joe([..._,...S]);a(P),d(!0)},[d]);return A.useEffect(()=>()=>h(),[h]),A.useEffect(()=>{if(l&&u){const y=b=>m(b,u),g=b=>m(b,l);return l.addEventListener("pointerleave",y),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",g)}}},[l,u,m,h]),A.useEffect(()=>{if(o){const y=g=>{const b=g.target,w={x:g.clientX,y:g.clientY},x=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),_=!Loe(w,o);x?h():_&&(h(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,u,o,c,h]),p.jsx(_9,{...n,ref:s})}),[koe,Roe]=xT(AT,{isInside:!1}),_9=A.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=ST(jg,t),c=_T(t),{onClose:u}=l;return A.useEffect(()=>(document.addEventListener(nk,u),()=>document.removeEventListener(nk,u)),[u]),A.useEffect(()=>{if(l.trigger){const d=h=>{const m=h.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),p.jsx(Tx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(m9,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(c8,{children:r}),p.jsx(koe,{scope:t,isInside:!0,children:p.jsx(mre,{id:l.contentId,role:"tooltip",children:i||r})})]})})});x9.displayName=jg;var A9="TooltipArrow",Noe=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=_T(t);return Roe(A9,t).isInside?null:p.jsx(g9,{...i,...r,ref:e})});Noe.displayName=A9;function Ooe(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Moe(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function Doe(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function Loe(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function joe(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),Foe(e)}function Foe(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var $oe=v9,Voe=b9,Boe=w9,S9=x9;const E9=$oe,zoe=Voe,Uoe=Boe,T9=A.forwardRef(({className:n,sideOffset:e=4,...t},r)=>p.jsx(S9,{ref:r,sideOffset:e,className:ce("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));T9.displayName=S9.displayName;var ET=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},TT=typeof window>"u"||"Deno"in globalThis;function eo(){}function Hoe(n,e){return typeof n=="function"?n(e):n}function Woe(n){return typeof n=="number"&&n>=0&&n!==1/0}function Goe(n,e){return Math.max(n+(e||0)-Date.now(),0)}function E4(n,e){return typeof n=="function"?n(e):n}function qoe(n,e){return typeof n=="function"?n(e):n}function T4(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==xM(o,e.options))return!1}else if(!qb(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function C4(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(Gb(e.options.mutationKey)!==Gb(s))return!1}else if(!qb(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function xM(n,e){return((e==null?void 0:e.queryKeyHashFn)||Gb)(n)}function Gb(n){return JSON.stringify(n,(e,t)=>ik(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function qb(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!qb(n[t],e[t])):!1}function C9(n,e){if(n===e)return n;const t=P4(n)&&P4(e);if(t||ik(n)&&ik(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{};let l=0;for(let c=0;c<o;c++){const u=t?c:s[c];(!t&&r.includes(u)||t)&&n[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=C9(n[u],e[u]),a[u]===n[u]&&n[u]!==void 0&&l++)}return i===o&&l===i?n:a}return e}function P4(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function ik(n){if(!I4(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!I4(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function I4(n){return Object.prototype.toString.call(n)==="[object Object]"}function Koe(n){return new Promise(e=>{setTimeout(e,n)})}function Yoe(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?C9(n,e):e}function Xoe(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function Qoe(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var _M=Symbol();function P9(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===_M?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var rh,Fc,mm,$B,Joe=($B=class extends ET{constructor(){super();O(this,rh);O(this,Fc);O(this,mm);I(this,mm,e=>{if(!TT&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){f(this,Fc)||this.setEventListener(f(this,mm))}onUnsubscribe(){var e;this.hasListeners()||((e=f(this,Fc))==null||e.call(this),I(this,Fc,void 0))}setEventListener(e){var t;I(this,mm,e),(t=f(this,Fc))==null||t.call(this),I(this,Fc,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){f(this,rh)!==e&&(I(this,rh,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof f(this,rh)=="boolean"?f(this,rh):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},rh=new WeakMap,Fc=new WeakMap,mm=new WeakMap,$B),I9=new Joe,gm,$c,ym,VB,Zoe=(VB=class extends ET{constructor(){super();O(this,gm,!0);O(this,$c);O(this,ym);I(this,ym,e=>{if(!TT&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){f(this,$c)||this.setEventListener(f(this,ym))}onUnsubscribe(){var e;this.hasListeners()||((e=f(this,$c))==null||e.call(this),I(this,$c,void 0))}setEventListener(e){var t;I(this,ym,e),(t=f(this,$c))==null||t.call(this),I(this,$c,e(this.setOnline.bind(this)))}setOnline(e){f(this,gm)!==e&&(I(this,gm,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return f(this,gm)}},gm=new WeakMap,$c=new WeakMap,ym=new WeakMap,VB),uS=new Zoe;function eae(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function tae(n){return Math.min(1e3*2**n,3e4)}function k9(n){return(n??"online")==="online"?uS.isOnline():!0}var R9=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function DP(n){return n instanceof R9}function N9(n){let e=!1,t=0,r=!1,i;const s=eae(),o=g=>{var b;r||(h(new R9(g)),(b=n.abort)==null||b.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>I9.isFocused()&&(n.networkMode==="always"||uS.isOnline())&&n.canRun(),u=()=>k9(n.networkMode)&&n.canRun(),d=g=>{var b;r||(r=!0,(b=n.onSuccess)==null||b.call(n,g),i==null||i(),s.resolve(g))},h=g=>{var b;r||(r=!0,(b=n.onError)==null||b.call(n,g),i==null||i(),s.reject(g))},m=()=>new Promise(g=>{var b;i=w=>{(r||c())&&g(w)},(b=n.onPause)==null||b.call(n)}).then(()=>{var g;i=void 0,r||(g=n.onContinue)==null||g.call(n)}),y=()=>{if(r)return;let g;const b=t===0?n.initialPromise:void 0;try{g=b??n.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(d).catch(w=>{var N;if(r)return;const x=n.retry??(TT?0:3),_=n.retryDelay??tae,S=typeof _=="function"?_(t,w):_,P=x===!0||typeof x=="number"&&t<x||typeof x=="function"&&x(t,w);if(e||!P){h(w);return}t++,(N=n.onFail)==null||N.call(n,t,w),Koe(S).then(()=>c()?void 0:m()).then(()=>{e?h(w):y()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?y():m().then(y),s)}}function nae(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Gr=nae(),ih,BB,O9=(BB=class{constructor(){O(this,ih)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Woe(this.gcTime)&&I(this,ih,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(TT?1/0:5*60*1e3))}clearGcTimeout(){f(this,ih)&&(clearTimeout(f(this,ih)),I(this,ih,void 0))}},ih=new WeakMap,BB),vm,bm,ms,br,H0,sh,to,Wa,zB,rae=(zB=class extends O9{constructor(t){super();O(this,to);O(this,vm);O(this,bm);O(this,ms);O(this,br);O(this,H0);O(this,sh);I(this,sh,!1),I(this,H0,t.defaultOptions),this.setOptions(t.options),this.observers=[],I(this,ms,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,I(this,vm,sae(this.options)),this.state=t.state??f(this,vm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=f(this,br))==null?void 0:t.promise}setOptions(t){this.options={...f(this,H0),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&f(this,ms).remove(this)}setData(t,r){const i=Yoe(this.state.data,t,this.options);return D(this,to,Wa).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){D(this,to,Wa).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,s;const r=(i=f(this,br))==null?void 0:i.promise;return(s=f(this,br))==null||s.cancel(t),r?r.then(eo).catch(eo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(f(this,vm))}isActive(){return this.observers.some(t=>qoe(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_M||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Goe(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=f(this,br))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=f(this,br))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),f(this,ms).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(f(this,br)&&(f(this,sh)?f(this,br).cancel({revert:!0}):f(this,br).cancelRetry()),this.scheduleGc()),f(this,ms).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||D(this,to,Wa).call(this,{type:"invalidate"})}fetch(t,r){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(f(this,br))return f(this,br).continueRetry(),f(this,br).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const i=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(I(this,sh,!0),i.signal)})},o=()=>{const h=P9(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return s(m),I(this,sh,!1),this.options.persister?this.options.persister(h,m,this):h(m)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};s(a),(c=this.options.behavior)==null||c.onFetch(a,this),I(this,bm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&D(this,to,Wa).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=h=>{var m,y,g,b;DP(h)&&h.silent||D(this,to,Wa).call(this,{type:"error",error:h}),DP(h)||((y=(m=f(this,ms).config).onError)==null||y.call(m,h,this),(b=(g=f(this,ms).config).onSettled)==null||b.call(g,this.state.data,h,this)),this.scheduleGc()};return I(this,br,N9({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:i.abort.bind(i),onSuccess:h=>{var m,y,g,b;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(w){l(w);return}(y=(m=f(this,ms).config).onSuccess)==null||y.call(m,h,this),(b=(g=f(this,ms).config).onSettled)==null||b.call(g,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,m)=>{D(this,to,Wa).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{D(this,to,Wa).call(this,{type:"pause"})},onContinue:()=>{D(this,to,Wa).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),f(this,br).start()}},vm=new WeakMap,bm=new WeakMap,ms=new WeakMap,br=new WeakMap,H0=new WeakMap,sh=new WeakMap,to=new WeakSet,Wa=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...iae(i.data,this.options),fetchMeta:t.meta??null};case"success":return{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return DP(s)&&s.revert&&f(this,bm)?{...f(this,bm),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),Gr.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),f(this,ms).notify({query:this,type:"updated",action:t})})},zB);function iae(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:k9(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function sae(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ko,UB,oae=(UB=class extends ET{constructor(e={}){super();O(this,Ko);this.config=e,I(this,Ko,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??xM(i,t);let o=this.get(s);return o||(o=new rae({cache:this,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){f(this,Ko).has(e.queryHash)||(f(this,Ko).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=f(this,Ko).get(e.queryHash);t&&(e.destroy(),t===e&&f(this,Ko).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Gr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return f(this,Ko).get(e)}getAll(){return[...f(this,Ko).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>T4(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>T4(e,r)):t}notify(e){Gr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Gr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Gr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ko=new WeakMap,UB),Yo,Fr,oh,Xo,Ec,HB,aae=(HB=class extends O9{constructor(t){super();O(this,Xo);O(this,Yo);O(this,Fr);O(this,oh);this.mutationId=t.mutationId,I(this,Fr,t.mutationCache),I(this,Yo,[]),this.state=t.state||lae(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){f(this,Yo).includes(t)||(f(this,Yo).push(t),this.clearGcTimeout(),f(this,Fr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){I(this,Yo,f(this,Yo).filter(r=>r!==t)),this.scheduleGc(),f(this,Fr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){f(this,Yo).length||(this.state.status==="pending"?this.scheduleGc():f(this,Fr).remove(this))}continue(){var t;return((t=f(this,oh))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,a,l,c,u,d,h,m,y,g,b,w,x,_,S,P,N,T,C;I(this,oh,N9({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,M)=>{D(this,Xo,Ec).call(this,{type:"failed",failureCount:k,error:M})},onPause:()=>{D(this,Xo,Ec).call(this,{type:"pause"})},onContinue:()=>{D(this,Xo,Ec).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>f(this,Fr).canRun(this)}));const r=this.state.status==="pending",i=!f(this,oh).canStart();try{if(!r){D(this,Xo,Ec).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(s=f(this,Fr).config).onMutate)==null?void 0:o.call(s,t,this));const M=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));M!==this.state.context&&D(this,Xo,Ec).call(this,{type:"pending",context:M,variables:t,isPaused:i})}const k=await f(this,oh).start();return await((u=(c=f(this,Fr).config).onSuccess)==null?void 0:u.call(c,k,t,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,k,t,this.state.context)),await((y=(m=f(this,Fr).config).onSettled)==null?void 0:y.call(m,k,null,this.state.variables,this.state.context,this)),await((b=(g=this.options).onSettled)==null?void 0:b.call(g,k,null,t,this.state.context)),D(this,Xo,Ec).call(this,{type:"success",data:k}),k}catch(k){try{throw await((x=(w=f(this,Fr).config).onError)==null?void 0:x.call(w,k,t,this.state.context,this)),await((S=(_=this.options).onError)==null?void 0:S.call(_,k,t,this.state.context)),await((N=(P=f(this,Fr).config).onSettled)==null?void 0:N.call(P,void 0,k,this.state.variables,this.state.context,this)),await((C=(T=this.options).onSettled)==null?void 0:C.call(T,void 0,k,t,this.state.context)),k}finally{D(this,Xo,Ec).call(this,{type:"error",error:k})}}finally{f(this,Fr).runNext(this)}}},Yo=new WeakMap,Fr=new WeakMap,oh=new WeakMap,Xo=new WeakSet,Ec=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Gr.batch(()=>{f(this,Yo).forEach(i=>{i.onMutationUpdate(t)}),f(this,Fr).notify({mutation:this,type:"updated",action:t})})},HB);function lae(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Oi,W0,WB,cae=(WB=class extends ET{constructor(e={}){super();O(this,Oi);O(this,W0);this.config=e,I(this,Oi,new Map),I(this,W0,Date.now())}build(e,t,r){const i=new aae({mutationCache:this,mutationId:++Dn(this,W0)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){const t=F_(e),r=f(this,Oi).get(t)??[];r.push(e),f(this,Oi).set(t,r),this.notify({type:"added",mutation:e})}remove(e){var r;const t=F_(e);if(f(this,Oi).has(t)){const i=(r=f(this,Oi).get(t))==null?void 0:r.filter(s=>s!==e);i&&(i.length===0?f(this,Oi).delete(t):f(this,Oi).set(t,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const t=(r=f(this,Oi).get(F_(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!t||t===e}runNext(e){var r;const t=(r=f(this,Oi).get(F_(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){Gr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...f(this,Oi).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(r=>C4(t,r))}findAll(e={}){return this.getAll().filter(t=>C4(e,t))}notify(e){Gr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Gr.batch(()=>Promise.all(e.map(t=>t.continue().catch(eo))))}},Oi=new WeakMap,W0=new WeakMap,WB);function F_(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function k4(n){return{onFetch:(e,t)=>{var u,d,h,m,y;const r=e.options,i=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const b=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=P9(e.options,e.fetchOptions),x=async(_,S,P)=>{if(g)return Promise.reject();if(S==null&&_.pages.length)return Promise.resolve(_);const N={queryKey:e.queryKey,pageParam:S,direction:P?"backward":"forward",meta:e.options.meta};b(N);const T=await w(N),{maxPages:C}=e.options,k=P?Qoe:Xoe;return{pages:k(_.pages,T,C),pageParams:k(_.pageParams,S,C)}};if(i&&s.length){const _=i==="backward",S=_?uae:R4,P={pages:s,pageParams:o},N=S(r,P);a=await x(P,N,_)}else{const _=n??s.length;do{const S=l===0?o[0]??r.initialPageParam:R4(r,a);if(l>0&&S==null)break;a=await x(a,S),l++}while(l<_)}return a};e.options.persister?e.fetchFn=()=>{var g,b;return(b=(g=e.options).persister)==null?void 0:b.call(g,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function R4(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function uae(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Qt,Vc,Bc,wm,xm,zc,_m,Am,GB,dae=(GB=class{constructor(n={}){O(this,Qt);O(this,Vc);O(this,Bc);O(this,wm);O(this,xm);O(this,zc);O(this,_m);O(this,Am);I(this,Qt,n.queryCache||new oae),I(this,Vc,n.mutationCache||new cae),I(this,Bc,n.defaultOptions||{}),I(this,wm,new Map),I(this,xm,new Map),I(this,zc,0)}mount(){Dn(this,zc)._++,f(this,zc)===1&&(I(this,_m,I9.subscribe(async n=>{n&&(await this.resumePausedMutations(),f(this,Qt).onFocus())})),I(this,Am,uS.subscribe(async n=>{n&&(await this.resumePausedMutations(),f(this,Qt).onOnline())})))}unmount(){var n,e;Dn(this,zc)._--,f(this,zc)===0&&((n=f(this,_m))==null||n.call(this),I(this,_m,void 0),(e=f(this,Am))==null||e.call(this),I(this,Am,void 0))}isFetching(n){return f(this,Qt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return f(this,Vc).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=f(this,Qt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),r=f(this,Qt).build(this,t);return n.revalidateIfStale&&r.isStaleByTime(E4(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return f(this,Qt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=f(this,Qt).get(r.queryHash),s=i==null?void 0:i.state.data,o=Hoe(e,s);if(o!==void 0)return f(this,Qt).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Gr.batch(()=>f(this,Qt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=f(this,Qt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=f(this,Qt);Gr.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=f(this,Qt),r={type:"active",...n};return Gr.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},r=Gr.batch(()=>f(this,Qt).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(eo).catch(eo)}invalidateQueries(n={},e={}){return Gr.batch(()=>{if(f(this,Qt).findAll(n).forEach(r=>{r.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Gr.batch(()=>f(this,Qt).findAll(n).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(eo)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(eo)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=f(this,Qt).build(this,e);return t.isStaleByTime(E4(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(eo).catch(eo)}fetchInfiniteQuery(n){return n.behavior=k4(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(eo).catch(eo)}ensureInfiniteQueryData(n){return n.behavior=k4(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return uS.isOnline()?f(this,Vc).resumePausedMutations():Promise.resolve()}getQueryCache(){return f(this,Qt)}getMutationCache(){return f(this,Vc)}getDefaultOptions(){return f(this,Bc)}setDefaultOptions(n){I(this,Bc,n)}setQueryDefaults(n,e){f(this,wm).set(Gb(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...f(this,wm).values()];let t={};return e.forEach(r=>{qb(n,r.queryKey)&&(t={...t,...r.defaultOptions})}),t}setMutationDefaults(n,e){f(this,xm).set(Gb(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...f(this,xm).values()];let t={};return e.forEach(r=>{qb(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...f(this,Bc).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=xM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===_M&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...f(this,Bc).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){f(this,Qt).clear(),f(this,Vc).clear()}},Qt=new WeakMap,Vc=new WeakMap,Bc=new WeakMap,wm=new WeakMap,xm=new WeakMap,zc=new WeakMap,_m=new WeakMap,Am=new WeakMap,GB),hae=A.createContext(void 0),fae=({client:n,children:e})=>(A.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),p.jsx(hae.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kb(){return Kb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kb.apply(this,arguments)}var Iu;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Iu||(Iu={}));const N4="popstate";function pae(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return sk("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:D9(i)}return gae(e,t,null,n)}function xn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function M9(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mae(){return Math.random().toString(36).substr(2,8)}function O4(n,e){return{usr:n.state,key:n.key,idx:e}}function sk(n,e,t,r){return t===void 0&&(t=null),Kb({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ay(e):e,{state:t,key:e&&e.key||r||mae()})}function D9(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ay(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function gae(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Iu.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Kb({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Iu.Pop;let b=u(),w=b==null?null:b-c;c=b,l&&l({action:a,location:g.location,delta:w})}function h(b,w){a=Iu.Push;let x=sk(g.location,b,w);c=u()+1;let _=O4(x,c),S=g.createHref(x);try{o.pushState(_,"",S)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(S)}s&&l&&l({action:a,location:g.location,delta:1})}function m(b,w){a=Iu.Replace;let x=sk(g.location,b,w);c=u();let _=O4(x,c),S=g.createHref(x);o.replaceState(_,"",S),s&&l&&l({action:a,location:g.location,delta:0})}function y(b){let w=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof b=="string"?b:D9(b);return x=x.replace(/ $/,"%20"),xn(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let g={get action(){return a},get location(){return n(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(N4,d),l=b,()=>{i.removeEventListener(N4,d),l=null}},createHref(b){return e(i,b)},createURL:y,encodeLocation(b){let w=y(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:h,replace:m,go(b){return o.go(b)}};return g}var M4;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(M4||(M4={}));function yae(n,e,t){return t===void 0&&(t="/"),vae(n,e,t,!1)}function vae(n,e,t,r){let i=typeof e=="string"?ay(e):e,s=F9(i.pathname||"/",t);if(s==null)return null;let o=L9(n);bae(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=kae(s);a=Pae(o[l],c,r)}return a}function L9(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(xn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=vf([r,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(xn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),L9(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Tae(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of j9(s.path))i(s,o,l)}),e}function j9(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=j9(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function bae(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Cae(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const wae=/^:[\w-]+$/,xae=3,_ae=2,Aae=1,Sae=10,Eae=-2,D4=n=>n==="*";function Tae(n,e){let t=n.split("/"),r=t.length;return t.some(D4)&&(r+=Eae),e&&(r+=_ae),t.filter(i=>!D4(i)).reduce((i,s)=>i+(wae.test(s)?xae:s===""?Aae:Sae),r)}function Cae(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function Pae(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=L4({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&t&&!r[r.length-1].route.index&&(d=L4({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:vf([s,d.pathname]),pathnameBase:Mae(vf([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=vf([s,d.pathnameBase]))}return o}function L4(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Iae(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:m}=u;if(h==="*"){let g=a[d]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const y=a[d];return m&&!y?c[h]=void 0:c[h]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function Iae(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),M9(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function kae(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return M9(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function F9(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Rae(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?ay(n):n;return{pathname:t?t.startsWith("/")?t:Nae(t,e):e,search:Dae(r),hash:Lae(i)}}function Nae(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function LP(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Oae(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $9(n,e){let t=Oae(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function V9(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=ay(n):(i=Kb({},n),xn(!i.pathname||!i.pathname.includes("?"),LP("?","pathname","search",i)),xn(!i.pathname||!i.pathname.includes("#"),LP("#","pathname","hash",i)),xn(!i.search||!i.search.includes("#"),LP("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=Rae(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const vf=n=>n.join("/").replace(/\/\/+/g,"/"),Mae=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Dae=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Lae=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function jae(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const B9=["post","put","patch","delete"];new Set(B9);const Fae=["get",...B9];new Set(Fae);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yb(){return Yb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Yb.apply(this,arguments)}const AM=A.createContext(null),$ae=A.createContext(null),Px=A.createContext(null),CT=A.createContext(null),Yf=A.createContext({outlet:null,matches:[],isDataRoute:!1}),z9=A.createContext(null);function Ix(){return A.useContext(CT)!=null}function ly(){return Ix()||xn(!1),A.useContext(CT).location}function U9(n){A.useContext(Px).static||A.useLayoutEffect(n)}function cc(){let{isDataRoute:n}=A.useContext(Yf);return n?Jae():Vae()}function Vae(){Ix()||xn(!1);let n=A.useContext(AM),{basename:e,future:t,navigator:r}=A.useContext(Px),{matches:i}=A.useContext(Yf),{pathname:s}=ly(),o=JSON.stringify($9(i,t.v7_relativeSplatPath)),a=A.useRef(!1);return U9(()=>{a.current=!0}),A.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=V9(c,JSON.parse(o),s,u.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:vf([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,n])}function Bae(n,e){return zae(n,e)}function zae(n,e,t,r){Ix()||xn(!1);let{navigator:i}=A.useContext(Px),{matches:s}=A.useContext(Yf),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ly(),u;if(e){var d;let b=typeof e=="string"?ay(e):e;l==="/"||(d=b.pathname)!=null&&d.startsWith(l)||xn(!1),u=b}else u=c;let h=u.pathname||"/",m=h;if(l!=="/"){let b=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=yae(n,{pathname:m}),g=qae(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:vf([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:vf([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,t,r);return e&&g?A.createElement(CT.Provider,{value:{location:Yb({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Iu.Pop}},g):g}function Uae(){let n=Qae(),e=jae(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:i},t):null,null)}const Hae=A.createElement(Uae,null);class Wae extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(Yf.Provider,{value:this.props.routeContext},A.createElement(z9.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Gae(n){let{routeContext:e,match:t,children:r}=n,i=A.useContext(AM);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(Yf.Provider,{value:e},r)}function qae(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||xn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:m}=t,y=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let m,y=!1,g=null,b=null;t&&(m=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||Hae,l&&(c<0&&h===0?(y=!0,b=null):c===h&&(y=!0,b=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,h+1)),x=()=>{let _;return m?_=g:y?_=b:d.route.Component?_=A.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=u,A.createElement(Gae,{match:d,routeContext:{outlet:u,matches:w,isDataRoute:t!=null},children:_})};return t&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?A.createElement(Wae,{location:t.location,revalidation:t.revalidation,component:g,error:m,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var H9=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(H9||{}),dS=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(dS||{});function Kae(n){let e=A.useContext(AM);return e||xn(!1),e}function Yae(n){let e=A.useContext($ae);return e||xn(!1),e}function Xae(n){let e=A.useContext(Yf);return e||xn(!1),e}function W9(n){let e=Xae(),t=e.matches[e.matches.length-1];return t.route.id||xn(!1),t.route.id}function Qae(){var n;let e=A.useContext(z9),t=Yae(dS.UseRouteError),r=W9(dS.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Jae(){let{router:n}=Kae(H9.UseNavigateStable),e=W9(dS.UseNavigateStable),t=A.useRef(!1);return U9(()=>{t.current=!0}),A.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Yb({fromRouteId:e},s)))},[n,e])}function j4(n){let{to:e,replace:t,state:r,relative:i}=n;Ix()||xn(!1);let{future:s,static:o}=A.useContext(Px),{matches:a}=A.useContext(Yf),{pathname:l}=ly(),c=cc(),u=V9(e,$9(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return A.useEffect(()=>c(JSON.parse(d),{replace:t,state:r,relative:i}),[c,d,i,t,r]),null}function ki(n){xn(!1)}function Zae(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Iu.Pop,navigator:s,static:o=!1,future:a}=n;Ix()&&xn(!1);let l=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:s,static:o,future:Yb({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ay(r));let{pathname:u="/",search:d="",hash:h="",state:m=null,key:y="default"}=r,g=A.useMemo(()=>{let b=F9(u,l);return b==null?null:{location:{pathname:b,search:d,hash:h,state:m,key:y},navigationType:i}},[l,u,d,h,m,y,i]);return g==null?null:A.createElement(Px.Provider,{value:c},A.createElement(CT.Provider,{children:t,value:g}))}function ele(n){let{children:e,location:t}=n;return Bae(ok(e),t)}new Promise(()=>{});function ok(n,e){e===void 0&&(e=[]);let t=[];return A.Children.forEach(n,(r,i)=>{if(!A.isValidElement(r))return;let s=[...e,i];if(r.type===A.Fragment){t.push.apply(t,ok(r.props.children,s));return}r.type!==ki&&xn(!1),!r.props.index||!r.props.children||xn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ok(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const tle="6";try{window.__reactRouterVersion=tle}catch{}const nle="startTransition",F4=iz[nle];function rle(n){let{basename:e,children:t,future:r,window:i}=n,s=A.useRef();s.current==null&&(s.current=pae({window:i,v5Compat:!0}));let o=s.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=A.useCallback(d=>{c&&F4?F4(()=>l(d)):l(d)},[l,c]);return A.useLayoutEffect(()=>o.listen(u),[o,u]),A.createElement(Zae,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}var $4;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})($4||($4={}));var V4;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(V4||(V4={}));const ile=Kf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ze=A.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?js:"button";return p.jsx(o,{className:ce(ile({variant:e,size:t,className:n})),ref:s,...i})});Ze.displayName="Button";var G9={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},B4=G.createContext&&G.createContext(G9),sle=["attr","size","title"];function ole(n,e){if(n==null)return{};var t=ale(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ale(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function hS(){return hS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hS.apply(this,arguments)}function z4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z4(Object(t),!0).forEach(function(r){lle(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function lle(n,e,t){return e=cle(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cle(n){var e=ule(n,"string");return typeof e=="symbol"?e:e+""}function ule(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function q9(n){return n&&n.map((e,t)=>G.createElement(e.tag,fS({key:t},e.attr),q9(e.child)))}function Hs(n){return e=>G.createElement(dle,hS({attr:fS({},n.attr)},e),q9(n.child))}function dle(n){var e=t=>{var{attr:r,size:i,title:s}=n,o=ole(n,sle),a=i||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),G.createElement("svg",hS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:l,style:fS(fS({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&G.createElement("title",null,s),n.children)};return B4!==void 0?G.createElement(B4.Consumer,null,t=>e(t)):e(G9)}function SM(n){return Hs({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"},child:[]}]})(n)}function PT(n){return Hs({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(n)}function hle(n){return Hs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500 384c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v308h436zM372.7 159.5L288 216l-85.3-113.7c-5.1-6.8-15.5-6.3-19.9 1L96 248v104h384l-89.9-187.8c-3.2-6.5-11.4-8.7-17.4-4.7z"},child:[]}]})(n)}function fle(n){return Hs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(n)}function Xb(n){return Hs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(n)}function ple(n){return Hs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"},child:[]}]})(n)}function mle(n){return Hs({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(n)}function gle(n){return Hs({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M408.781 128.007C386.356 127.578 368 146.36 368 168.79V256h-8V79.79c0-22.43-18.356-41.212-40.781-40.783C297.488 39.423 280 57.169 280 79v177h-8V40.79C272 18.36 253.644-.422 231.219.007 209.488.423 192 18.169 192 40v216h-8V80.79c0-22.43-18.356-41.212-40.781-40.783C121.488 40.423 104 58.169 104 80v235.992l-31.648-43.519c-12.993-17.866-38.009-21.817-55.877-8.823-17.865 12.994-21.815 38.01-8.822 55.877l125.601 172.705A48 48 0 0 0 172.073 512h197.59c22.274 0 41.622-15.324 46.724-37.006l26.508-112.66a192.011 192.011 0 0 0 5.104-43.975V168c.001-21.831-17.487-39.577-39.218-39.993z"},child:[]}]})(n)}function U4(n){return Hs({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(n)}function yle(n){return Hs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}function H4(n){return Hs({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(n)}function pS(n){return Hs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(n)}const vle=()=>{};var W4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ble=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Y9={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(h=64)),r.push(t[u],t[d],t[h],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(K9(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ble(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new wle;const h=s<<2|a>>4;if(r.push(h),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class wle extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xle=function(n){const e=K9(n);return Y9.encodeByteArray(e,!0)},mS=function(n){return xle(n).replace(/\./g,"")},X9=function(n){try{return Y9.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _le(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ale=()=>_le().__FIREBASE_DEFAULTS__,Sle=()=>{if(typeof process>"u"||typeof W4>"u")return;const n=W4.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ele=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&X9(n[1]);return e&&JSON.parse(e)},IT=()=>{try{return vle()||Ale()||Sle()||Ele()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Q9=n=>{var e,t;return(t=(e=IT())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Tle=n=>{const e=Q9(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},J9=()=>{var n;return(n=IT())==null?void 0:n.config},Z9=n=>{var e;return(e=IT())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cle{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eH(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ple(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[mS(JSON.stringify(t)),mS(JSON.stringify(o)),""].join(".")}const ab={};function Ile(){const n={prod:[],emulator:[]};for(const e of Object.keys(ab))ab[e]?n.emulator.push(e):n.prod.push(e);return n}function kle(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let G4=!1;function tH(n,e){if(typeof window>"u"||typeof document>"u"||!cy(window.location.host)||ab[n]===e||ab[n]||G4)return;ab[n]=e;function t(h){return`__firebase__banner__${h}`}const r="__firebase__banner",s=Ile().prod.length>0;function o(){const h=document.getElementById(r);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function l(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function c(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{G4=!0,o()},h}function u(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){const h=kle(r),m=t("text"),y=document.getElementById(m)||document.createElement("span"),g=t("learnmore"),b=document.getElementById(g)||document.createElement("a"),w=t("preprendIcon"),x=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const _=h.element;a(_),u(b,g);const S=c();l(x,w),_.append(x,y,b,S),document.body.appendChild(_)}s?(y.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rle(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nr())}function Nle(){var e;const n=(e=IT())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ole(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nH(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Mle(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Dle(){const n=Nr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Lle(){return!Nle()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EM(){try{return typeof indexedDB=="object"}catch{return!1}}function TM(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}function rH(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jle="FirebaseError";class No extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=jle,Object.setPrototypeOf(this,No.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yd.prototype.create)}}class yd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Fle(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new No(i,a,r)}}function Fle(n,e){return n.replace($le,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const $le=/\{\$([^}]+)}/g;function Vle(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function td(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(q4(s)&&q4(o)){if(!td(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function q4(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vv(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function bv(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Ble(n,e){const t=new zle(n,e);return t.subscribe.bind(t)}class zle{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Ule(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=jP),i.error===void 0&&(i.error=jP),i.complete===void 0&&(i.complete=jP);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ule(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jP(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hle=1e3,Wle=2,Gle=4*60*60*1e3,qle=.5;function K4(n,e=Hle,t=Wle){const r=e*Math.pow(t,n),i=Math.round(qle*r*(Math.random()-.5)*2);return Math.min(Gle,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n){return n&&n._delegate?n._delegate:n}class ls{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kle{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Cle;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xle(e))try{this.getOrInitializeService({instanceIdentifier:Md})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Md){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Md){return this.instances.has(e)}getOptions(e=Md){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Yle(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Md){return this.component?this.component.multipleInstances?e:Md:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yle(n){return n===Md?void 0:n}function Xle(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qle{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Kle(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($e||($e={}));const Jle={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},Zle=$e.INFO,ece={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},tce=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=ece[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kT{constructor(e){this.name=e,this._logLevel=Zle,this._logHandler=tce,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Jle[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const nce=(n,e)=>e.some(t=>n instanceof t);let Y4,X4;function rce(){return Y4||(Y4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ice(){return X4||(X4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iH=new WeakMap,ak=new WeakMap,sH=new WeakMap,FP=new WeakMap,CM=new WeakMap;function sce(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Bl(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&iH.set(t,n)}).catch(()=>{}),CM.set(e,n),e}function oce(n){if(ak.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});ak.set(n,e)}let lk={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ak.get(n);if(e==="objectStoreNames")return n.objectStoreNames||sH.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ace(n){lk=n(lk)}function lce(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call($P(this),e,...t);return sH.set(r,e.sort?e.sort():[e]),Bl(r)}:ice().includes(n)?function(...e){return n.apply($P(this),e),Bl(iH.get(this))}:function(...e){return Bl(n.apply($P(this),e))}}function cce(n){return typeof n=="function"?lce(n):(n instanceof IDBTransaction&&oce(n),nce(n,rce())?new Proxy(n,lk):n)}function Bl(n){if(n instanceof IDBRequest)return sce(n);if(FP.has(n))return FP.get(n);const e=cce(n);return e!==n&&(FP.set(n,e),CM.set(e,n)),e}const $P=n=>CM.get(n);function RT(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Bl(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Bl(o.result),l.oldVersion,l.newVersion,Bl(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function VP(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),Bl(t).then(()=>{})}const uce=["get","getKey","getAll","getAllKeys","count"],dce=["put","add","delete","clear"],BP=new Map;function Q4(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(BP.get(e))return BP.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=dce.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||uce.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return BP.set(e,s),s}ace(n=>({...n,get:(e,t,r)=>Q4(e,t)||n.get(e,t,r),has:(e,t)=>!!Q4(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hce{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fce(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function fce(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ck="@firebase/app",J4="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new kT("@firebase/app"),pce="@firebase/app-compat",mce="@firebase/analytics-compat",gce="@firebase/analytics",yce="@firebase/app-check-compat",vce="@firebase/app-check",bce="@firebase/auth",wce="@firebase/auth-compat",xce="@firebase/database",_ce="@firebase/data-connect",Ace="@firebase/database-compat",Sce="@firebase/functions",Ece="@firebase/functions-compat",Tce="@firebase/installations",Cce="@firebase/installations-compat",Pce="@firebase/messaging",Ice="@firebase/messaging-compat",kce="@firebase/performance",Rce="@firebase/performance-compat",Nce="@firebase/remote-config",Oce="@firebase/remote-config-compat",Mce="@firebase/storage",Dce="@firebase/storage-compat",Lce="@firebase/firestore",jce="@firebase/ai",Fce="@firebase/firestore-compat",$ce="firebase",Vce="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="[DEFAULT]",Bce={[ck]:"fire-core",[pce]:"fire-core-compat",[gce]:"fire-analytics",[mce]:"fire-analytics-compat",[vce]:"fire-app-check",[yce]:"fire-app-check-compat",[bce]:"fire-auth",[wce]:"fire-auth-compat",[xce]:"fire-rtdb",[_ce]:"fire-data-connect",[Ace]:"fire-rtdb-compat",[Sce]:"fire-fn",[Ece]:"fire-fn-compat",[Tce]:"fire-iid",[Cce]:"fire-iid-compat",[Pce]:"fire-fcm",[Ice]:"fire-fcm-compat",[kce]:"fire-perf",[Rce]:"fire-perf-compat",[Nce]:"fire-rc",[Oce]:"fire-rc-compat",[Mce]:"fire-gcs",[Dce]:"fire-gcs-compat",[Lce]:"fire-fst",[Fce]:"fire-fst-compat",[jce]:"fire-vertex","fire-js":"fire-js",[$ce]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=new Map,zce=new Map,dk=new Map;function Z4(n,e){try{n.container.addComponent(e)}catch(t){ec.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fs(n){const e=n.name;if(dk.has(e))return ec.debug(`There were multiple attempts to register component ${e}.`),!1;dk.set(e,n);for(const t of gS.values())Z4(t,n);for(const t of zce.values())Z4(t,n);return!0}function vd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function gi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uce={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zu=new yd("app","Firebase",Uce);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hce{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy=Vce;function oH(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:uk,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw zu.create("bad-app-name",{appName:String(i)});if(t||(t=J9()),!t)throw zu.create("no-options");const s=gS.get(i);if(s){if(td(t,s.options)&&td(r,s.config))return s;throw zu.create("duplicate-app",{appName:i})}const o=new Qle(i);for(const l of dk.values())o.addComponent(l);const a=new Hce(t,r,o);return gS.set(i,a),a}function NT(n=uk){const e=gS.get(n);if(!e&&n===uk&&J9())return oH();if(!e)throw zu.create("no-app",{appName:n});return e}function Ei(n,e,t){let r=Bce[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ec.warn(o.join(" "));return}Fs(new ls(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wce="firebase-heartbeat-database",Gce=1,Qb="firebase-heartbeat-store";let zP=null;function aH(){return zP||(zP=RT(Wce,Gce,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Qb)}catch(t){console.warn(t)}}}}).catch(n=>{throw zu.create("idb-open",{originalErrorMessage:n.message})})),zP}async function qce(n){try{const t=(await aH()).transaction(Qb),r=await t.objectStore(Qb).get(lH(n));return await t.done,r}catch(e){if(e instanceof No)ec.warn(e.message);else{const t=zu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ec.warn(t.message)}}}async function e$(n,e){try{const r=(await aH()).transaction(Qb,"readwrite");await r.objectStore(Qb).put(e,lH(n)),await r.done}catch(t){if(t instanceof No)ec.warn(t.message);else{const r=zu.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ec.warn(r.message)}}}function lH(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kce=1024,Yce=30;class Xce{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Jce(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=t$();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Yce){const o=Zce(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ec.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=t$(),{heartbeatsToSend:r,unsentEntries:i}=Qce(this._heartbeatsCache.heartbeats),s=mS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ec.warn(t),""}}}function t$(){return new Date().toISOString().substring(0,10)}function Qce(n,e=Kce){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),n$(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),n$(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Jce{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EM()?TM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await qce(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return e$(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return e$(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function n$(n){return mS(JSON.stringify({version:2,heartbeats:n})).length}function Zce(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eue(n){Fs(new ls("platform-logger",e=>new hce(e),"PRIVATE")),Fs(new ls("heartbeat",e=>new Xce(e),"PRIVATE")),Ei(ck,J4,n),Ei(ck,J4,"esm2020"),Ei("fire-js","")}eue("");var tue="firebase",nue="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ei(tue,nue,"app");function cH(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rue=cH,uH=new yd("auth","Firebase",cH());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=new kT("@firebase/auth");function iue(n,...e){yS.logLevel<=$e.WARN&&yS.warn(`Auth (${dy}): ${n}`,...e)}function $1(n,...e){yS.logLevel<=$e.ERROR&&yS.error(`Auth (${dy}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(n,...e){throw IM(n,...e)}function Ti(n,...e){return IM(n,...e)}function PM(n,e,t){const r={...rue(),[e]:t};return new yd("auth","Firebase",r).create(e,{appName:n.name})}function Sa(n){return PM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sue(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&$s(n,"argument-error"),PM(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function IM(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return uH.create(n,...e)}function fe(n,e,...t){if(!n)throw IM(e,...t)}function jl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $1(e),new Error(e)}function tc(n,e){n||jl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function dH(){return r$()==="http:"||r$()==="https:"}function r$(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oue(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dH()||nH()||"connection"in navigator)?navigator.onLine:!0}function aue(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,t){this.shortDelay=e,this.longDelay=t,tc(t>e,"Short delay should be less than long delay!"),this.isMobile=Rle()||Mle()}get(){return oue()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(n,e){tc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lue={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cue=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uue=new kx(3e4,6e4);function ei(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ti(n,e,t,r,i={}){return fH(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=uy({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:l,...s};return Ole()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&cy(n.emulatorConfig.host)&&(c.credentials="include"),hH.fetch()(await pH(n,n.config.apiHost,t,a),c)})}async function fH(n,e,t){n._canInitEmulator=!1;const r={...lue,...e};try{const i=new hue(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw wv(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw wv(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw wv(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw wv(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw PM(n,u,c);$s(n,u)}}catch(i){if(i instanceof No)throw i;$s(n,"network-request-failed",{message:String(i)})}}async function bd(n,e,t,r,i={}){const s=await ti(n,e,t,r,i);return"mfaPendingCredential"in s&&$s(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function pH(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?kM(n.config,i):`${n.config.apiScheme}://${i}`;return cue.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function due(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hue{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ti(this.auth,"network-request-failed")),uue.get())})}}function wv(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ti(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$(n){return n!==void 0&&n.getResponse!==void 0}function s$(n){return n!==void 0&&n.enterprise!==void 0}class mH{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return due(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fue(n){return(await ti(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function gH(n,e){return ti(n,"GET","/v2/recaptchaConfig",ei(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pue(n,e){return ti(n,"POST","/v1/accounts:delete",e)}async function vS(n,e){return ti(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mue(n,e=!1){const t=St(n),r=await t.getIdToken(e),i=RM(r);fe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:lb(UP(i.auth_time)),issuedAtTime:lb(UP(i.iat)),expirationTime:lb(UP(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function UP(n){return Number(n)*1e3}function RM(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return $1("JWT malformed, contained fewer than 3 sections"),null;try{const i=X9(t);return i?JSON.parse(i):($1("Failed to decode base64 JWT payload"),null)}catch(i){return $1("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function o$(n){const e=RM(n);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function If(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof No&&gue(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function gue({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yue{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lb(this.lastLoginAt),this.creationTime=lb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(n){var d;const e=n.auth,t=await n.getIdToken(),r=await If(n,vS(e,{idToken:t}));fe(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?yH(i.providerUserInfo):[],o=bue(n.providerData,s),a=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new fk(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(n,u)}async function vue(n){const e=St(n);await bS(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bue(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yH(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wue(n,e){const t=await fH(n,{},async()=>{const r=uy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await pH(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return n.emulatorConfig&&cy(n.emulatorConfig.host)&&(l.credentials="include"),hH.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function xue(n,e){return ti(n,"POST","/v2/accounts:revokeToken",ei(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const t=o$(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await wue(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new sm;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sm,this.toJSON())}_performRefresh(){return jl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(n,e){fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class bo{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new yue(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new fk(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await If(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return mue(this,e)}reload(){return vue(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await bS(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gi(this.auth.app))return Promise.reject(Sa(this.auth));const e=await this.getIdToken();return await If(this,pue(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:m,providerData:y,stsTokenManager:g}=t;fe(d&&g,e,"internal-error");const b=sm.fromJSON(this.name,g);fe(typeof d=="string",e,"internal-error"),Ac(r,e.name),Ac(i,e.name),fe(typeof h=="boolean",e,"internal-error"),fe(typeof m=="boolean",e,"internal-error"),Ac(s,e.name),Ac(o,e.name),Ac(a,e.name),Ac(l,e.name),Ac(c,e.name),Ac(u,e.name);const w=new bo({uid:d,auth:e,email:i,emailVerified:h,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:b,createdAt:c,lastLoginAt:u});return y&&Array.isArray(y)&&(w.providerData=y.map(x=>({...x}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,t,r=!1){const i=new sm;i.updateFromServerResponse(t);const s=new bo({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await bS(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];fe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?yH(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new sm;a.updateFromIdToken(r);const l=new bo({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new fk(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$=new Map;function Fl(n){tc(n instanceof Function,"Expected a class definition");let e=a$.get(n);return e?(tc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,a$.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vH.type="NONE";const l$=vH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(n,e,t){return`firebase:${n}:${e}:${t}`}class om{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=V1(this.userKey,i.apiKey,s),this.fullPersistenceKey=V1("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await vS(this.auth,{idToken:e}).catch(()=>{});return t?bo._fromGetAccountInfoResponse(this.auth,t,e):null}return bo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new om(Fl(l$),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Fl(l$);const o=V1(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=await c._get(o);if(u){let d;if(typeof u=="string"){const h=await vS(e,{idToken:u}).catch(()=>{});if(!h)break;d=await bo._fromGetAccountInfoResponse(e,h,u)}else d=bo._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new om(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new om(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c$(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_H(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SH(e))return"Blackberry";if(EH(e))return"Webos";if(wH(e))return"Safari";if((e.includes("chrome/")||xH(e))&&!e.includes("edge/"))return"Chrome";if(AH(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bH(n=Nr()){return/firefox\//i.test(n)}function wH(n=Nr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xH(n=Nr()){return/crios\//i.test(n)}function _H(n=Nr()){return/iemobile/i.test(n)}function AH(n=Nr()){return/android/i.test(n)}function SH(n=Nr()){return/blackberry/i.test(n)}function EH(n=Nr()){return/webos/i.test(n)}function NM(n=Nr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function _ue(n=Nr()){var e;return NM(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Aue(){return Dle()&&document.documentMode===10}function TH(n=Nr()){return NM(n)||AH(n)||EH(n)||SH(n)||/windows phone/i.test(n)||_H(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CH(n,e=[]){let t;switch(n){case"Browser":t=c$(Nr());break;case"Worker":t=`${c$(Nr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dy}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eue(n,e={}){return ti(n,"GET","/v2/passwordPolicy",ei(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tue=6;class Cue{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Tue,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pue{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u$(this),this.idTokenSubscription=new u$(this),this.beforeStateQueue=new Sue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fl(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await om.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await vS(this,{idToken:e}),r=await bo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(gi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bS(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aue()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gi(this.app))return Promise.reject(Sa(this));const t=e?St(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gi(this.app)?Promise.reject(Sa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gi(this.app)?Promise.reject(Sa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Eue(this),t=new Cue(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await xue(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fl(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=await om.create(this,[Fl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&iue(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ws(n){return St(n)}class u${constructor(e){this.auth=e,this.observer=null,this.addObserver=Ble(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Iue(n){Rx=n}function OM(n){return Rx.loadJS(n)}function kue(){return Rx.recaptchaV2Script}function Rue(){return Rx.recaptchaEnterpriseScript}function Nue(){return Rx.gapiScript}function PH(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oue=500,Mue=6e4,$_=1e12;class Due{constructor(e){this.auth=e,this.counter=$_,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new Fue(e,this.auth.name,t||{})),this.counter++,r}reset(e){var r;const t=e||$_;(r=this._widgets.get(t))==null||r.delete(),this._widgets.delete(t)}getResponse(e){var r;const t=e||$_;return((r=this._widgets.get(t))==null?void 0:r.getResponse())||""}async execute(e){var r;const t=e||$_;return(r=this._widgets.get(t))==null||r.execute(),""}}class Lue{constructor(){this.enterprise=new jue}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class jue{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Fue{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;fe(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=$ue(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},Mue)},Oue))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function $ue(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const Vue="recaptcha-enterprise",cb="NO_RECAPTCHA";class IH{constructor(e){this.type=Vue,this.auth=Ws(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{gH(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new mH(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;s$(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(cb)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Lue().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&s$(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Rue();l.length!==0&&(l+=a),OM(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function ev(n,e,t,r=!1,i=!1){const s=new IH(n);let o;if(i)o=cb;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function bf(n,e,t,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await ev(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await ev(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await ev(n,e,t);return r(n,a).catch(async l=>{var c;if(((c=n._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const u=await ev(n,e,t,!1,!0);return r(n,u)}return Promise.reject(l)})}else{const a=await ev(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")}async function Bue(n){const e=Ws(n),t=await gH(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new mH(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new IH(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zue(n,e){const t=vd(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(td(s,e??{}))return i;$s(i,"already-initialized")}return t.initialize({options:e})}function Uue(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Fl);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Hue(n,e,t){const r=Ws(n);fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=kH(e),{host:o,port:a}=Wue(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),fe(td(c,r.config.emulator)&&td(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,cy(o)?(eH(`${s}//${o}${l}`),tH("Auth",!0)):Gue()}function kH(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Wue(n){const e=kH(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:d$(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:d$(o)}}}function d$(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Gue(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jl("not implemented")}_getIdTokenResponse(e){return jl("not implemented")}_linkToIdToken(e,t){return jl("not implemented")}_getReauthenticationResolver(e){return jl("not implemented")}}async function que(n,e){return ti(n,"POST","/v1/accounts:update",e)}async function Kue(n,e){return ti(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yue(n,e){return bd(n,"POST","/v1/accounts:signInWithPassword",ei(n,e))}async function Xue(n,e){return ti(n,"POST","/v1/accounts:sendOobCode",ei(n,e))}async function Que(n,e){return Xue(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jue(n,e){return bd(n,"POST","/v1/accounts:signInWithEmailLink",ei(n,e))}async function Zue(n,e){return bd(n,"POST","/v1/accounts:signInWithEmailLink",ei(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb extends OT{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Jb(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Jb(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bf(e,t,"signInWithPassword",Yue,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Jue(e,{email:this._email,oobCode:this._password});default:$s(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bf(e,r,"signUpPassword",Kue,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Zue(e,{idToken:t,email:this._email,oobCode:this._password});default:$s(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function am(n,e){return bd(n,"POST","/v1/accounts:signInWithIdp",ei(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ede="http://localhost";class kf extends OT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new kf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$s("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const o=new kf(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return am(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,am(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,am(e,t)}buildRequest(){const e={requestUri:ede,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=uy(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h$(n,e){return ti(n,"POST","/v1/accounts:sendVerificationCode",ei(n,e))}async function tde(n,e){return bd(n,"POST","/v1/accounts:signInWithPhoneNumber",ei(n,e))}async function nde(n,e){const t=await bd(n,"POST","/v1/accounts:signInWithPhoneNumber",ei(n,e));if(t.temporaryProof)throw wv(n,"account-exists-with-different-credential",t);return t}const rde={USER_NOT_FOUND:"user-not-found"};async function ide(n,e){const t={...e,operation:"REAUTH"};return bd(n,"POST","/v1/accounts:signInWithPhoneNumber",ei(n,t),rde)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub extends OT{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ub({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ub({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return tde(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return nde(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return ide(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new ub({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sde(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ode(n){const e=vv(bv(n)).link,t=e?vv(bv(e)).deep_link_id:null,r=vv(bv(n)).deep_link_id;return(r?vv(bv(r)).link:null)||r||t||e||n}class MM{constructor(e){const t=vv(bv(e)),r=t.apiKey??null,i=t.oobCode??null,s=sde(t.mode??null);fe(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=ode(e);try{return new MM(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this.providerId=Xf.PROVIDER_ID}static credential(e,t){return Jb._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=MM.parseLink(t);return fe(r,"argument-error"),Jb._fromEmailAndCode(e,r.code,r.tenantId)}}Xf.PROVIDER_ID="password";Xf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx extends DM{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends Nx{constructor(){super("facebook.com")}static credential(e){return kf._fromParams({providerId:Mc.PROVIDER_ID,signInMethod:Mc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mc.credentialFromTaggedObject(e)}static credentialFromError(e){return Mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mc.credential(e.oauthAccessToken)}catch{return null}}}Mc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends Nx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return kf._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return vo.credential(t,r)}catch{return null}}}vo.GOOGLE_SIGN_IN_METHOD="google.com";vo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends Nx{constructor(){super("github.com")}static credential(e){return kf._fromParams({providerId:Dc.PROVIDER_ID,signInMethod:Dc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dc.credentialFromTaggedObject(e)}static credentialFromError(e){return Dc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dc.credential(e.oauthAccessToken)}catch{return null}}}Dc.GITHUB_SIGN_IN_METHOD="github.com";Dc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends Nx{constructor(){super("twitter.com")}static credential(e,t){return kf._fromParams({providerId:Lc.PROVIDER_ID,signInMethod:Lc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Lc.credentialFromTaggedObject(e)}static credentialFromError(e){return Lc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Lc.credential(t,r)}catch{return null}}}Lc.TWITTER_SIGN_IN_METHOD="twitter.com";Lc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ade(n,e){return bd(n,"POST","/v1/accounts:signUp",ei(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await bo._fromIdTokenResponse(e,r,i),o=f$(r);return new Rf({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=f$(r);return new Rf({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function f$(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS extends No{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,wS.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new wS(e,t,r,i)}}function RH(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wS._fromErrorAndOperation(n,s,e,r):s})}async function lde(n,e,t=!1){const r=await If(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Rf._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NH(n,e,t=!1){const{auth:r}=n;if(gi(r.app))return Promise.reject(Sa(r));const i="reauthenticate";try{const s=await If(n,RH(r,i,e,n),t);fe(s.idToken,r,"internal-error");const o=RM(s.idToken);fe(o,r,"internal-error");const{sub:a}=o;return fe(n.uid===a,r,"user-mismatch"),Rf._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&$s(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OH(n,e,t=!1){if(gi(n.app))return Promise.reject(Sa(n));const r="signIn",i=await RH(n,r,e),s=await Rf._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function MH(n,e){return OH(Ws(n),e)}async function cde(n,e){return NH(St(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DH(n){const e=Ws(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ude(n,e,t){const r=Ws(n);await bf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Que,"EMAIL_PASSWORD_PROVIDER")}async function dde(n,e,t){if(gi(n.app))return Promise.reject(Sa(n));const r=Ws(n),o=await bf(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ade,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&DH(n),l}),a=await Rf._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function hde(n,e,t){return gi(n.app)?Promise.reject(Sa(n)):MH(St(n),Xf.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&DH(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fde(n,e){return ti(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LH(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=St(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await If(r,fde(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function pde(n,e){return mde(St(n),null,e)}async function mde(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(s.password=t);const o=await If(n,que(r,s));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p$(n,e){return St(n).setPersistence(e)}function gde(n,e,t,r){return St(n).onIdTokenChanged(e,t,r)}function yde(n,e,t){return St(n).beforeAuthStateChanged(e,t)}function Ox(n,e,t,r){return St(n).onAuthStateChanged(e,t,r)}function jH(n){return St(n).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(n,e){return ti(n,"POST","/v2/accounts/mfaEnrollment:start",ei(n,e))}const xS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xS,"1"),this.storage.removeItem(xS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vde=1e3,bde=10;class $H extends FH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TH(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Aue()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,bde):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},vde)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$H.type="LOCAL";const pk=$H;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH extends FH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}VH.type="SESSION";const _S=VH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wde(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new MT(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await wde(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}MT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xde{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=LM("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return window}function _de(n){mn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(){return typeof mn().WorkerGlobalScope<"u"&&typeof mn().importScripts=="function"}async function Ade(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Sde(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Ede(){return jM()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH="firebaseLocalStorageDb",Tde=1,AS="firebaseLocalStorage",zH="fbase_key";class Mx{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function DT(n,e){return n.transaction([AS],e?"readwrite":"readonly").objectStore(AS)}function Cde(){const n=indexedDB.deleteDatabase(BH);return new Mx(n).toPromise()}function mk(){const n=indexedDB.open(BH,Tde);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(AS,{keyPath:zH})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(AS)?e(r):(r.close(),await Cde(),e(await mk()))})})}async function g$(n,e,t){const r=DT(n,!0).put({[zH]:e,value:t});return new Mx(r).toPromise()}async function Pde(n,e){const t=DT(n,!1).get(e),r=await new Mx(t).toPromise();return r===void 0?null:r.value}function y$(n,e){const t=DT(n,!0).delete(e);return new Mx(t).toPromise()}const Ide=800,kde=3;class UH{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mk(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>kde)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=MT._getInstance(Ede()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await Ade(),!this.activeServiceWorker)return;this.sender=new xde(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Sde()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mk();return await g$(e,xS,"1"),await y$(e,xS),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>g$(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Pde(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>y$(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=DT(i,!1).getAll();return new Mx(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ide)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UH.type="LOCAL";const Rde=UH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(n,e){return ti(n,"POST","/v2/accounts/mfaSignIn:start",ei(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=PH("rcb"),Nde=new kx(3e4,6e4);class Ode{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=mn().grecaptcha)!=null&&e.render)}load(e,t=""){return fe(Mde(t),e,"argument-error"),this.shouldResolveImmediately(t)&&i$(mn().grecaptcha)?Promise.resolve(mn().grecaptcha):new Promise((r,i)=>{const s=mn().setTimeout(()=>{i(Ti(e,"network-request-failed"))},Nde.get());mn()[HP]=()=>{mn().clearTimeout(s),delete mn()[HP];const a=mn().grecaptcha;if(!a||!i$(a)){i(Ti(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const d=l(c,u);return this.counter++,d},this.hostLanguage=t,r(a)};const o=`${kue()}?${uy({onload:HP,render:"explicit",hl:t})}`;OM(o).catch(()=>{clearTimeout(s),i(Ti(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=mn().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Mde(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class Dde{async load(e){return new Due(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="recaptcha",Lde={theme:"light",type:"image"};class jde{constructor(e,t,r={...Lde}){this.parameters=r,this.type=db,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ws(e),this.isInvisible=this.parameters.size==="invisible",fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;fe(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Dde:new Ode,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=mn()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){fe(dH()&&!jM(),this.auth,"internal-error"),await Fde(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await fue(this.auth);fe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function Fde(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $de{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ub._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Vde(n,e,t){if(gi(n.app))return Promise.reject(Sa(n));const r=Ws(n),i=await Bde(r,e,St(t));return new $de(i,s=>MH(r,s))}async function Bde(n,e,t){var r;if(!n._getRecaptchaConfig())try{await Bue(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){fe(s.type==="enroll",n,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await bf(n,o,"mfaSmsEnrollment",async(u,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===cb){fe((t==null?void 0:t.type)===db,u,"argument-error");const h=await WP(u,d,t);return m$(u,h)}return m$(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneSessionInfo.sessionInfo}else{fe(s.type==="signin",n,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;fe(o,n,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await bf(n,a,"mfaSmsSignIn",async(d,h)=>{if(h.phoneSignInInfo.captchaResponse===cb){fe((t==null?void 0:t.type)===db,d,"argument-error");const m=await WP(d,h,t);return v$(d,m)}return v$(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await bf(n,s,"sendVerificationCode",async(c,u)=>{if(u.captchaResponse===cb){fe((t==null?void 0:t.type)===db,c,"argument-error");const d=await WP(c,u,t);return h$(c,d)}return h$(c,u)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{t==null||t._reset()}}async function WP(n,e,t){fe(t.type===db,n,"argument-error");const r=await t.verify();fe(typeof r=="string",n,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(n,e){return e?Fl(e):(fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM extends OT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return am(e,this._buildIdpRequest())}_linkToIdToken(e,t){return am(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return am(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zde(n){return OH(n.auth,new FM(n),n.bypassAuthState)}function Ude(n){const{auth:e,user:t}=n;return fe(t,e,"internal-error"),NH(t,new FM(n),n.bypassAuthState)}async function Hde(n){const{auth:e,user:t}=n;return fe(t,e,"internal-error"),lde(t,new FM(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zde;case"linkViaPopup":case"linkViaRedirect":return Hde;case"reauthViaPopup":case"reauthViaRedirect":return Ude;default:$s(this.auth,"internal-error")}}resolve(e){tc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wde=new kx(2e3,1e4);async function $M(n,e,t){if(gi(n.app))return Promise.reject(Ti(n,"operation-not-supported-in-this-environment"));const r=Ws(n);sue(n,e,DM);const i=HH(r,t);return new Yd(r,"signInViaPopup",e,i).executeNotNull()}class Yd extends WH{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Yd.currentPopupAction&&Yd.currentPopupAction.cancel(),Yd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){tc(this.filter.length===1,"Popup operations only handle one event");const e=LM();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Wde.get())};e()}}Yd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gde="pendingRedirect",B1=new Map;class qde extends WH{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=B1.get(this.auth._key());if(!e){try{const r=await Kde(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}B1.set(this.auth._key(),e)}return this.bypassAuthState||B1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kde(n,e){const t=Qde(e),r=Xde(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Yde(n,e){B1.set(n._key(),e)}function Xde(n){return Fl(n._redirectPersistence)}function Qde(n){return V1(Gde,n.config.apiKey,n.name)}async function Jde(n,e,t=!1){if(gi(n.app))return Promise.reject(Sa(n));const r=Ws(n),i=HH(r,e),o=await new qde(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zde=10*60*1e3;class ehe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!the(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!GH(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Zde&&this.cachedEventUids.clear(),this.cachedEventUids.has(b$(e))}saveEventToCache(e){this.cachedEventUids.add(b$(e)),this.lastProcessedEventTime=Date.now()}}function b$(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function GH({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function the(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GH(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nhe(n,e={}){return ti(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rhe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ihe=/^https?/;async function she(n){if(n.config.emulator)return;const{authorizedDomains:e}=await nhe(n);for(const t of e)try{if(ohe(t))return}catch{}$s(n,"unauthorized-domain")}function ohe(n){const e=hk(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!ihe.test(t))return!1;if(rhe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ahe=new kx(3e4,6e4);function w$(){const n=mn().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function lhe(n){return new Promise((e,t)=>{var i,s,o;function r(){w$(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{w$(),t(Ti(n,"network-request-failed"))},timeout:ahe.get()})}if((s=(i=mn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=mn().gapi)!=null&&o.load)r();else{const a=PH("iframefcb");return mn()[a]=()=>{gapi.load?r():t(Ti(n,"network-request-failed"))},OM(`${Nue()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw z1=null,e})}let z1=null;function che(n){return z1=z1||lhe(n),z1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uhe=new kx(5e3,15e3),dhe="__/auth/iframe",hhe="emulator/auth/iframe",fhe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},phe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mhe(n){const e=n.config;fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?kM(e,hhe):`https://${n.config.authDomain}/${dhe}`,r={apiKey:e.apiKey,appName:n.name,v:dy},i=phe.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${uy(r).slice(1)}`}async function ghe(n){const e=await che(n),t=mn().gapi;return fe(t,n,"internal-error"),e.open({where:document.body,url:mhe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fhe,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ti(n,"network-request-failed"),a=mn().setTimeout(()=>{s(o)},uhe.get());function l(){mn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yhe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vhe=500,bhe=600,whe="_blank",xhe="http://localhost";class x${constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _he(n,e,t,r=vhe,i=bhe){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...yhe,width:r.toString(),height:i.toString(),top:s,left:o},c=Nr().toLowerCase();t&&(a=xH(c)?whe:t),bH(c)&&(e=e||xhe,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[m,y])=>`${h}${m}=${y},`,"");if(_ue(c)&&a!=="_self")return Ahe(e||"",a),new x$(null);const d=window.open(e||"",a,u);fe(d,n,"popup-blocked");try{d.focus()}catch{}return new x$(d)}function Ahe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const She="__/auth/handler",Ehe="emulator/auth/handler",The=encodeURIComponent("fac");async function _$(n,e,t,r,i,s){fe(n.config.authDomain,n,"auth-domain-config-required"),fe(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:dy,eventId:i};if(e instanceof DM){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Vle(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof Nx){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await n._getAppCheckToken(),c=l?`#${The}=${encodeURIComponent(l)}`:"";return`${Che(n)}?${uy(a).slice(1)}${c}`}function Che({config:n}){return n.emulator?kM(n,Ehe):`https://${n.authDomain}/${She}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="webStorageSupport";class Phe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_S,this._completeRedirectFn=Jde,this._overrideRedirectResult=Yde}async _openPopup(e,t,r,i){var o;tc((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await _$(e,t,r,hk(),i);return _he(e,s,LM())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await _$(e,t,r,hk(),i);return _de(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(tc(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await ghe(e),r=new ehe(e);return t.register("authEvent",i=>(fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(GP,{type:GP},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[GP];s!==void 0&&t(!!s),$s(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=she(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TH()||wH()||NM()}}const Ihe=Phe;var A$="@firebase/auth",S$="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class khe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rhe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nhe(n){Fs(new ls("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CH(n)},c=new Pue(r,i,s,l);return Uue(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Fs(new ls("auth-internal",e=>{const t=Ws(e.getProvider("auth").getImmediate());return(r=>new khe(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ei(A$,S$,Rhe(n)),Ei(A$,S$,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ohe=5*60,Mhe=Z9("authIdTokenMaxAge")||Ohe;let E$=null;const Dhe=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Mhe)return;const i=t==null?void 0:t.token;E$!==i&&(E$=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function qH(n=NT()){const e=vd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=zue(n,{popupRedirectResolver:Ihe,persistence:[Rde,pk,_S]}),r=Z9("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Dhe(s.toString());yde(t,o,()=>o(t.currentUser)),gde(t,a=>o(a))}}const i=Q9("auth");return i&&Hue(t,`http://${i}`),t}function Lhe(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}Iue({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ti("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Lhe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nhe("Browser");const KH="@firebase/installations",VM="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YH=1e4,XH=`w:${VM}`,QH="FIS_v2",jhe="https://firebaseinstallations.googleapis.com/v1",Fhe=60*60*1e3,$he="installations",Vhe="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bhe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Nf=new yd($he,Vhe,Bhe);function JH(n){return n instanceof No&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZH({projectId:n}){return`${jhe}/projects/${n}/installations`}function eW(n){return{token:n.token,requestStatus:2,expiresIn:Uhe(n.expiresIn),creationTime:Date.now()}}async function tW(n,e){const r=(await e.json()).error;return Nf.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function nW({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function zhe(n,{refreshToken:e}){const t=nW(n);return t.append("Authorization",Hhe(e)),t}async function rW(n){const e=await n();return e.status>=500&&e.status<600?n():e}function Uhe(n){return Number(n.replace("s","000"))}function Hhe(n){return`${QH} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Whe({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=ZH(n),i=nW(n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:t,authVersion:QH,appId:n.appId,sdkVersion:XH},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await rW(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:eW(c.authToken)}}else throw await tW("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iW(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ghe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qhe=/^[cdef][\w-]{21}$/,gk="";function Khe(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=Yhe(n);return qhe.test(t)?t:gk}catch{return gk}}function Yhe(n){return Ghe(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sW=new Map;function oW(n,e){const t=LT(n);aW(t,e),Xhe(t,e)}function aW(n,e){const t=sW.get(n);if(t)for(const r of t)r(e)}function Xhe(n,e){const t=Qhe();t&&t.postMessage({key:n,fid:e}),Jhe()}let Xd=null;function Qhe(){return!Xd&&"BroadcastChannel"in self&&(Xd=new BroadcastChannel("[Firebase] FID Change"),Xd.onmessage=n=>{aW(n.data.key,n.data.fid)}),Xd}function Jhe(){sW.size===0&&Xd&&(Xd.close(),Xd=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zhe="firebase-installations-database",efe=1,Of="firebase-installations-store";let qP=null;function BM(){return qP||(qP=RT(Zhe,efe,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Of)}}})),qP}async function SS(n,e){const t=LT(n),i=(await BM()).transaction(Of,"readwrite"),s=i.objectStore(Of),o=await s.get(t);return await s.put(e,t),await i.done,(!o||o.fid!==e.fid)&&oW(n,e.fid),e}async function lW(n){const e=LT(n),r=(await BM()).transaction(Of,"readwrite");await r.objectStore(Of).delete(e),await r.done}async function jT(n,e){const t=LT(n),i=(await BM()).transaction(Of,"readwrite"),s=i.objectStore(Of),o=await s.get(t),a=e(o);return a===void 0?await s.delete(t):await s.put(a,t),await i.done,a&&(!o||o.fid!==a.fid)&&oW(n,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(n){let e;const t=await jT(n.appConfig,r=>{const i=tfe(r),s=nfe(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===gk?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function tfe(n){const e=n||{fid:Khe(),registrationStatus:0};return cW(e)}function nfe(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Nf.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=rfe(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ife(n)}:{installationEntry:e}}async function rfe(n,e){try{const t=await Whe(n,e);return SS(n.appConfig,t)}catch(t){throw JH(t)&&t.customData.serverCode===409?await lW(n.appConfig):await SS(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function ife(n){let e=await T$(n.appConfig);for(;e.registrationStatus===1;)await iW(100),e=await T$(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await zM(n);return r||t}return e}function T$(n){return jT(n,e=>{if(!e)throw Nf.create("installation-not-found");return cW(e)})}function cW(n){return sfe(n)?{fid:n.fid,registrationStatus:0}:n}function sfe(n){return n.registrationStatus===1&&n.registrationTime+YH<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ofe({appConfig:n,heartbeatServiceProvider:e},t){const r=afe(n,t),i=zhe(n,t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:XH,appId:n.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await rW(()=>fetch(r,a));if(l.ok){const c=await l.json();return eW(c)}else throw await tW("Generate Auth Token",l)}function afe(n,{fid:e}){return`${ZH(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UM(n,e=!1){let t;const r=await jT(n.appConfig,s=>{if(!uW(s))throw Nf.create("not-registered");const o=s.authToken;if(!e&&ufe(o))return s;if(o.requestStatus===1)return t=lfe(n,e),s;{if(!navigator.onLine)throw Nf.create("app-offline");const a=hfe(s);return t=cfe(n,a),a}});return t?await t:r.authToken}async function lfe(n,e){let t=await C$(n.appConfig);for(;t.authToken.requestStatus===1;)await iW(100),t=await C$(n.appConfig);const r=t.authToken;return r.requestStatus===0?UM(n,e):r}function C$(n){return jT(n,e=>{if(!uW(e))throw Nf.create("not-registered");const t=e.authToken;return ffe(t)?{...e,authToken:{requestStatus:0}}:e})}async function cfe(n,e){try{const t=await ofe(n,e),r={...e,authToken:t};return await SS(n.appConfig,r),t}catch(t){if(JH(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await lW(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await SS(n.appConfig,r)}throw t}}function uW(n){return n!==void 0&&n.registrationStatus===2}function ufe(n){return n.requestStatus===2&&!dfe(n)}function dfe(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Fhe}function hfe(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function ffe(n){return n.requestStatus===1&&n.requestTime+YH<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pfe(n){const e=n,{installationEntry:t,registrationPromise:r}=await zM(e);return r?r.catch(console.error):UM(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mfe(n,e=!1){const t=n;return await gfe(t),(await UM(t,e)).token}async function gfe(n){const{registrationPromise:e}=await zM(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yfe(n){if(!n||!n.options)throw KP("App Configuration");if(!n.name)throw KP("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw KP(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function KP(n){return Nf.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dW="installations",vfe="installations-internal",bfe=n=>{const e=n.getProvider("app").getImmediate(),t=yfe(e),r=vd(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},wfe=n=>{const e=n.getProvider("app").getImmediate(),t=vd(e,dW).getImmediate();return{getId:()=>pfe(t),getToken:i=>mfe(t,i)}};function xfe(){Fs(new ls(dW,bfe,"PUBLIC")),Fs(new ls(vfe,wfe,"PRIVATE"))}xfe();Ei(KH,VM);Ei(KH,VM,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="analytics",_fe="firebase_id",Afe="origin",Sfe=60*1e3,Efe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",HM="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new kT("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tfe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ss=new yd("analytics","Analytics",Tfe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cfe(n){if(!n.startsWith(HM)){const e=ss.create("invalid-gtag-resource",{gtagURL:n});return Ci.warn(e.message),""}return n}function hW(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Pfe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Ife(n,e){const t=Pfe("firebase-js-sdk-policy",{createScriptURL:Cfe}),r=document.createElement("script"),i=`${HM}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function kfe(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function Rfe(n,e,t,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await hW(t)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){Ci.error(a)}n("config",i,s)}async function Nfe(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await hW(t);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),n("event",r,i||{})}catch(s){Ci.error(s)}}function Ofe(n,e,t,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await Nfe(n,e,t,a,l)}else if(s==="config"){const[a,l]=o;await Rfe(n,e,t,r,a,l)}else if(s==="consent"){const[a,l]=o;n("consent",a,l)}else if(s==="get"){const[a,l,c]=o;n("get",a,l,c)}else if(s==="set"){const[a]=o;n("set",a)}else n(s,...o)}catch(a){Ci.error(a)}}return i}function Mfe(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Ofe(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function Dfe(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(HM)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lfe=30,jfe=1e3;class Ffe{constructor(e={},t=jfe){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const fW=new Ffe;function $fe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Vfe(n){var o;const{appId:e,apiKey:t}=n,r={method:"GET",headers:$fe(t)},i=Efe.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const l=await s.json();(o=l.error)!=null&&o.message&&(a=l.error.message)}catch{}throw ss.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function Bfe(n,e=fW,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw ss.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ss.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Hfe;return setTimeout(async()=>{a.abort()},Sfe),pW({appId:r,apiKey:i,measurementId:s},o,a,e)}async function pW(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=fW){var a;const{appId:s,measurementId:o}=n;try{await zfe(r,e)}catch(l){if(o)return Ci.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw l}try{const l=await Vfe(n);return i.deleteThrottleMetadata(s),l}catch(l){const c=l;if(!Ufe(c)){if(i.deleteThrottleMetadata(s),o)return Ci.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:o};throw l}const u=Number((a=c==null?void 0:c.customData)==null?void 0:a.httpStatus)===503?K4(t,i.intervalMillis,Lfe):K4(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return i.setThrottleMetadata(s,d),Ci.debug(`Calling attemptFetch again in ${u} millis`),pW(n,d,r,i)}}function zfe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(ss.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Ufe(n){if(!(n instanceof No)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class Hfe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Wfe(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const s=await e,o={...r,send_to:s};n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gfe(){if(EM())try{await TM()}catch(n){return Ci.warn(ss.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Ci.warn(ss.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function qfe(n,e,t,r,i,s,o){const a=Bfe(n);a.then(h=>{t[h.measurementId]=h.appId,n.options.measurementId&&h.measurementId!==n.options.measurementId&&Ci.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>Ci.error(h)),e.push(a);const l=Gfe().then(h=>{if(h)return r.getId()}),[c,u]=await Promise.all([a,l]);Dfe(s)||Ife(s,c.measurementId),i("js",new Date);const d=(o==null?void 0:o.config)??{};return d[Afe]="firebase",d.update=!0,u!=null&&(d[_fe]=u),i("config",c.measurementId,d),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kfe{constructor(e){this.app=e}_delete(){return delete hb[this.app.options.appId],Promise.resolve()}}let hb={},P$=[];const I$={};let YP="dataLayer",Yfe="gtag",k$,mW,R$=!1;function Xfe(){const n=[];if(nH()&&n.push("This is a browser extension environment."),rH()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ss.create("invalid-analytics-context",{errorInfo:e});Ci.warn(t.message)}}function Qfe(n,e,t){Xfe();const r=n.options.appId;if(!r)throw ss.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ci.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ss.create("no-api-key");if(hb[r]!=null)throw ss.create("already-exists",{id:r});if(!R$){kfe(YP);const{wrappedGtag:s,gtagCore:o}=Mfe(hb,P$,I$,YP,Yfe);mW=s,k$=o,R$=!0}return hb[r]=qfe(n,P$,I$,e,k$,YP,t),new Kfe(n)}function Jfe(n=NT()){n=St(n);const e=vd(n,ES);return e.isInitialized()?e.getImmediate():Zfe(n)}function Zfe(n,e={}){const t=vd(n,ES);if(t.isInitialized()){const i=t.getImmediate();if(td(e,t.getOptions()))return i;throw ss.create("already-initialized")}return t.initialize({options:e})}function epe(n,e,t,r){n=St(n),Wfe(mW,hb[n.app.options.appId],e,t,r).catch(i=>Ci.error(i))}const N$="@firebase/analytics",O$="0.10.18";function tpe(){Fs(new ls(ES,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Qfe(r,i,t)},"PUBLIC")),Fs(new ls("analytics-internal",n,"PRIVATE")),Ei(N$,O$),Ei(N$,O$,"esm2020");function n(e){try{const t=e.getProvider(ES).getImmediate();return{logEvent:(r,i,s)=>epe(t,r,i,s)}}catch(t){throw ss.create("interop-component-reg-failed",{reason:t})}}}tpe();var M$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uu,gW;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,C){function k(){}k.prototype=C.prototype,T.D=C.prototype,T.prototype=new k,T.prototype.constructor=T,T.C=function(M,L,F){for(var j=Array(arguments.length-2),q=2;q<arguments.length;q++)j[q-2]=arguments[q];return C.prototype[L].apply(M,j)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,C,k){k||(k=0);var M=Array(16);if(typeof C=="string")for(var L=0;16>L;++L)M[L]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(L=0;16>L;++L)M[L]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=T.g[0],k=T.g[1],L=T.g[2];var F=T.g[3],j=C+(F^k&(L^F))+M[0]+3614090360&4294967295;C=k+(j<<7&4294967295|j>>>25),j=F+(L^C&(k^L))+M[1]+3905402710&4294967295,F=C+(j<<12&4294967295|j>>>20),j=L+(k^F&(C^k))+M[2]+606105819&4294967295,L=F+(j<<17&4294967295|j>>>15),j=k+(C^L&(F^C))+M[3]+3250441966&4294967295,k=L+(j<<22&4294967295|j>>>10),j=C+(F^k&(L^F))+M[4]+4118548399&4294967295,C=k+(j<<7&4294967295|j>>>25),j=F+(L^C&(k^L))+M[5]+1200080426&4294967295,F=C+(j<<12&4294967295|j>>>20),j=L+(k^F&(C^k))+M[6]+2821735955&4294967295,L=F+(j<<17&4294967295|j>>>15),j=k+(C^L&(F^C))+M[7]+4249261313&4294967295,k=L+(j<<22&4294967295|j>>>10),j=C+(F^k&(L^F))+M[8]+1770035416&4294967295,C=k+(j<<7&4294967295|j>>>25),j=F+(L^C&(k^L))+M[9]+2336552879&4294967295,F=C+(j<<12&4294967295|j>>>20),j=L+(k^F&(C^k))+M[10]+4294925233&4294967295,L=F+(j<<17&4294967295|j>>>15),j=k+(C^L&(F^C))+M[11]+2304563134&4294967295,k=L+(j<<22&4294967295|j>>>10),j=C+(F^k&(L^F))+M[12]+1804603682&4294967295,C=k+(j<<7&4294967295|j>>>25),j=F+(L^C&(k^L))+M[13]+4254626195&4294967295,F=C+(j<<12&4294967295|j>>>20),j=L+(k^F&(C^k))+M[14]+2792965006&4294967295,L=F+(j<<17&4294967295|j>>>15),j=k+(C^L&(F^C))+M[15]+1236535329&4294967295,k=L+(j<<22&4294967295|j>>>10),j=C+(L^F&(k^L))+M[1]+4129170786&4294967295,C=k+(j<<5&4294967295|j>>>27),j=F+(k^L&(C^k))+M[6]+3225465664&4294967295,F=C+(j<<9&4294967295|j>>>23),j=L+(C^k&(F^C))+M[11]+643717713&4294967295,L=F+(j<<14&4294967295|j>>>18),j=k+(F^C&(L^F))+M[0]+3921069994&4294967295,k=L+(j<<20&4294967295|j>>>12),j=C+(L^F&(k^L))+M[5]+3593408605&4294967295,C=k+(j<<5&4294967295|j>>>27),j=F+(k^L&(C^k))+M[10]+38016083&4294967295,F=C+(j<<9&4294967295|j>>>23),j=L+(C^k&(F^C))+M[15]+3634488961&4294967295,L=F+(j<<14&4294967295|j>>>18),j=k+(F^C&(L^F))+M[4]+3889429448&4294967295,k=L+(j<<20&4294967295|j>>>12),j=C+(L^F&(k^L))+M[9]+568446438&4294967295,C=k+(j<<5&4294967295|j>>>27),j=F+(k^L&(C^k))+M[14]+3275163606&4294967295,F=C+(j<<9&4294967295|j>>>23),j=L+(C^k&(F^C))+M[3]+4107603335&4294967295,L=F+(j<<14&4294967295|j>>>18),j=k+(F^C&(L^F))+M[8]+1163531501&4294967295,k=L+(j<<20&4294967295|j>>>12),j=C+(L^F&(k^L))+M[13]+2850285829&4294967295,C=k+(j<<5&4294967295|j>>>27),j=F+(k^L&(C^k))+M[2]+4243563512&4294967295,F=C+(j<<9&4294967295|j>>>23),j=L+(C^k&(F^C))+M[7]+1735328473&4294967295,L=F+(j<<14&4294967295|j>>>18),j=k+(F^C&(L^F))+M[12]+2368359562&4294967295,k=L+(j<<20&4294967295|j>>>12),j=C+(k^L^F)+M[5]+4294588738&4294967295,C=k+(j<<4&4294967295|j>>>28),j=F+(C^k^L)+M[8]+2272392833&4294967295,F=C+(j<<11&4294967295|j>>>21),j=L+(F^C^k)+M[11]+1839030562&4294967295,L=F+(j<<16&4294967295|j>>>16),j=k+(L^F^C)+M[14]+4259657740&4294967295,k=L+(j<<23&4294967295|j>>>9),j=C+(k^L^F)+M[1]+2763975236&4294967295,C=k+(j<<4&4294967295|j>>>28),j=F+(C^k^L)+M[4]+1272893353&4294967295,F=C+(j<<11&4294967295|j>>>21),j=L+(F^C^k)+M[7]+4139469664&4294967295,L=F+(j<<16&4294967295|j>>>16),j=k+(L^F^C)+M[10]+3200236656&4294967295,k=L+(j<<23&4294967295|j>>>9),j=C+(k^L^F)+M[13]+681279174&4294967295,C=k+(j<<4&4294967295|j>>>28),j=F+(C^k^L)+M[0]+3936430074&4294967295,F=C+(j<<11&4294967295|j>>>21),j=L+(F^C^k)+M[3]+3572445317&4294967295,L=F+(j<<16&4294967295|j>>>16),j=k+(L^F^C)+M[6]+76029189&4294967295,k=L+(j<<23&4294967295|j>>>9),j=C+(k^L^F)+M[9]+3654602809&4294967295,C=k+(j<<4&4294967295|j>>>28),j=F+(C^k^L)+M[12]+3873151461&4294967295,F=C+(j<<11&4294967295|j>>>21),j=L+(F^C^k)+M[15]+530742520&4294967295,L=F+(j<<16&4294967295|j>>>16),j=k+(L^F^C)+M[2]+3299628645&4294967295,k=L+(j<<23&4294967295|j>>>9),j=C+(L^(k|~F))+M[0]+4096336452&4294967295,C=k+(j<<6&4294967295|j>>>26),j=F+(k^(C|~L))+M[7]+1126891415&4294967295,F=C+(j<<10&4294967295|j>>>22),j=L+(C^(F|~k))+M[14]+2878612391&4294967295,L=F+(j<<15&4294967295|j>>>17),j=k+(F^(L|~C))+M[5]+4237533241&4294967295,k=L+(j<<21&4294967295|j>>>11),j=C+(L^(k|~F))+M[12]+1700485571&4294967295,C=k+(j<<6&4294967295|j>>>26),j=F+(k^(C|~L))+M[3]+2399980690&4294967295,F=C+(j<<10&4294967295|j>>>22),j=L+(C^(F|~k))+M[10]+4293915773&4294967295,L=F+(j<<15&4294967295|j>>>17),j=k+(F^(L|~C))+M[1]+2240044497&4294967295,k=L+(j<<21&4294967295|j>>>11),j=C+(L^(k|~F))+M[8]+1873313359&4294967295,C=k+(j<<6&4294967295|j>>>26),j=F+(k^(C|~L))+M[15]+4264355552&4294967295,F=C+(j<<10&4294967295|j>>>22),j=L+(C^(F|~k))+M[6]+2734768916&4294967295,L=F+(j<<15&4294967295|j>>>17),j=k+(F^(L|~C))+M[13]+1309151649&4294967295,k=L+(j<<21&4294967295|j>>>11),j=C+(L^(k|~F))+M[4]+4149444226&4294967295,C=k+(j<<6&4294967295|j>>>26),j=F+(k^(C|~L))+M[11]+3174756917&4294967295,F=C+(j<<10&4294967295|j>>>22),j=L+(C^(F|~k))+M[2]+718787259&4294967295,L=F+(j<<15&4294967295|j>>>17),j=k+(F^(L|~C))+M[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(L+(j<<21&4294967295|j>>>11))&4294967295,T.g[2]=T.g[2]+L&4294967295,T.g[3]=T.g[3]+F&4294967295}r.prototype.u=function(T,C){C===void 0&&(C=T.length);for(var k=C-this.blockSize,M=this.B,L=this.h,F=0;F<C;){if(L==0)for(;F<=k;)i(this,T,F),F+=this.blockSize;if(typeof T=="string"){for(;F<C;)if(M[L++]=T.charCodeAt(F++),L==this.blockSize){i(this,M),L=0;break}}else for(;F<C;)if(M[L++]=T[F++],L==this.blockSize){i(this,M),L=0;break}}this.h=L,this.o+=C},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;var k=8*this.o;for(C=T.length-8;C<T.length;++C)T[C]=k&255,k/=256;for(this.u(T),T=Array(16),C=k=0;4>C;++C)for(var M=0;32>M;M+=8)T[k++]=this.g[C]>>>M&255;return T};function s(T,C){var k=a;return Object.prototype.hasOwnProperty.call(k,T)?k[T]:k[T]=C(T)}function o(T,C){this.h=C;for(var k=[],M=!0,L=T.length-1;0<=L;L--){var F=T[L]|0;M&&F==C||(k[L]=F,M=!1)}this.g=k}var a={};function l(T){return-128<=T&&128>T?s(T,function(C){return new o([C|0],0>C?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return d;if(0>T)return b(c(-T));for(var C=[],k=1,M=0;T>=k;M++)C[M]=T/k|0,k*=4294967296;return new o(C,0)}function u(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return b(u(T.substring(1),C));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(C,8)),M=d,L=0;L<T.length;L+=8){var F=Math.min(8,T.length-L),j=parseInt(T.substring(L,L+F),C);8>F?(F=c(Math.pow(C,F)),M=M.j(F).add(c(j))):(M=M.j(k),M=M.add(c(j)))}return M}var d=l(0),h=l(1),m=l(16777216);n=o.prototype,n.m=function(){if(g(this))return-b(this).m();for(var T=0,C=1,k=0;k<this.g.length;k++){var M=this.i(k);T+=(0<=M?M:4294967296+M)*C,C*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(g(this))return"-"+b(this).toString(T);for(var C=c(Math.pow(T,6)),k=this,M="";;){var L=S(k,C).g;k=w(k,L.j(C));var F=((0<k.g.length?k.g[0]:k.h)>>>0).toString(T);if(k=L,y(k))return F+M;for(;6>F.length;)F="0"+F;M=F+M}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(var C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function g(T){return T.h==-1}n.l=function(T){return T=w(this,T),g(T)?-1:y(T)?0:1};function b(T){for(var C=T.g.length,k=[],M=0;M<C;M++)k[M]=~T.g[M];return new o(k,~T.h).add(h)}n.abs=function(){return g(this)?b(this):this},n.add=function(T){for(var C=Math.max(this.g.length,T.g.length),k=[],M=0,L=0;L<=C;L++){var F=M+(this.i(L)&65535)+(T.i(L)&65535),j=(F>>>16)+(this.i(L)>>>16)+(T.i(L)>>>16);M=j>>>16,F&=65535,j&=65535,k[L]=j<<16|F}return new o(k,k[k.length-1]&-2147483648?-1:0)};function w(T,C){return T.add(b(C))}n.j=function(T){if(y(this)||y(T))return d;if(g(this))return g(T)?b(this).j(b(T)):b(b(this).j(T));if(g(T))return b(this.j(b(T)));if(0>this.l(m)&&0>T.l(m))return c(this.m()*T.m());for(var C=this.g.length+T.g.length,k=[],M=0;M<2*C;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(var L=0;L<T.g.length;L++){var F=this.i(M)>>>16,j=this.i(M)&65535,q=T.i(L)>>>16,H=T.i(L)&65535;k[2*M+2*L]+=j*H,x(k,2*M+2*L),k[2*M+2*L+1]+=F*H,x(k,2*M+2*L+1),k[2*M+2*L+1]+=j*q,x(k,2*M+2*L+1),k[2*M+2*L+2]+=F*q,x(k,2*M+2*L+2)}for(M=0;M<C;M++)k[M]=k[2*M+1]<<16|k[2*M];for(M=C;M<2*C;M++)k[M]=0;return new o(k,0)};function x(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function _(T,C){this.g=T,this.h=C}function S(T,C){if(y(C))throw Error("division by zero");if(y(T))return new _(d,d);if(g(T))return C=S(b(T),C),new _(b(C.g),b(C.h));if(g(C))return C=S(T,b(C)),new _(b(C.g),C.h);if(30<T.g.length){if(g(T)||g(C))throw Error("slowDivide_ only works with positive integers.");for(var k=h,M=C;0>=M.l(T);)k=P(k),M=P(M);var L=N(k,1),F=N(M,1);for(M=N(M,2),k=N(k,2);!y(M);){var j=F.add(M);0>=j.l(T)&&(L=L.add(k),F=j),M=N(M,1),k=N(k,1)}return C=w(T,L.j(C)),new _(L,C)}for(L=d;0<=T.l(C);){for(k=Math.max(1,Math.floor(T.m()/C.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),F=c(k),j=F.j(C);g(j)||0<j.l(T);)k-=M,F=c(k),j=F.j(C);y(F)&&(F=h),L=L.add(F),T=w(T,j)}return new _(L,T)}n.A=function(T){return S(this,T).h},n.and=function(T){for(var C=Math.max(this.g.length,T.g.length),k=[],M=0;M<C;M++)k[M]=this.i(M)&T.i(M);return new o(k,this.h&T.h)},n.or=function(T){for(var C=Math.max(this.g.length,T.g.length),k=[],M=0;M<C;M++)k[M]=this.i(M)|T.i(M);return new o(k,this.h|T.h)},n.xor=function(T){for(var C=Math.max(this.g.length,T.g.length),k=[],M=0;M<C;M++)k[M]=this.i(M)^T.i(M);return new o(k,this.h^T.h)};function P(T){for(var C=T.g.length+1,k=[],M=0;M<C;M++)k[M]=T.i(M)<<1|T.i(M-1)>>>31;return new o(k,T.h)}function N(T,C){var k=C>>5;C%=32;for(var M=T.g.length-k,L=[],F=0;F<M;F++)L[F]=0<C?T.i(F+k)>>>C|T.i(F+k+1)<<32-C:T.i(F+k);return new o(L,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gW=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Uu=o}).apply(typeof M$<"u"?M$:typeof self<"u"?self:typeof window<"u"?window:{});var V_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yW,xv,vW,U1,yk,bW,wW,xW;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,E,R){return v==Array.prototype||v==Object.prototype||(v[E]=R.value),v};function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof V_=="object"&&V_];for(var E=0;E<v.length;++E){var R=v[E];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=t(this);function i(v,E){if(E)e:{var R=r;v=v.split(".");for(var $=0;$<v.length-1;$++){var X=v[$];if(!(X in R))break e;R=R[X]}v=v[v.length-1],$=R[v],E=E($),E!=$&&E!=null&&e(R,v,{configurable:!0,writable:!0,value:E})}}function s(v,E){v instanceof String&&(v+="");var R=0,$=!1,X={next:function(){if(!$&&R<v.length){var Z=R++;return{value:E(Z,v[Z]),done:!1}}return $=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}i("Array.prototype.values",function(v){return v||function(){return s(this,function(E,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(v){var E=typeof v;return E=E!="object"?E:v?Array.isArray(v)?"array":E:"null",E=="array"||E=="object"&&typeof v.length=="number"}function c(v){var E=typeof v;return E=="object"&&v!=null||E=="function"}function u(v,E,R){return v.call.apply(v.bind,arguments)}function d(v,E,R){if(!v)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,$),v.apply(E,X)}}return function(){return v.apply(E,arguments)}}function h(v,E,R){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,h.apply(null,arguments)}function m(v,E){var R=Array.prototype.slice.call(arguments,1);return function(){var $=R.slice();return $.push.apply($,arguments),v.apply(this,$)}}function y(v,E){function R(){}R.prototype=E.prototype,v.aa=E.prototype,v.prototype=new R,v.prototype.constructor=v,v.Qb=function($,X,Z){for(var oe=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)oe[mt-2]=arguments[mt];return E.prototype[X].apply($,oe)}}function g(v){const E=v.length;if(0<E){const R=Array(E);for(let $=0;$<E;$++)R[$]=v[$];return R}return[]}function b(v,E){for(let R=1;R<arguments.length;R++){const $=arguments[R];if(l($)){const X=v.length||0,Z=$.length||0;v.length=X+Z;for(let oe=0;oe<Z;oe++)v[X+oe]=$[oe]}else v.push($)}}class w{constructor(E,R){this.i=E,this.j=R,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function x(v){return/^[\s\xa0]*$/.test(v)}function _(){var v=a.navigator;return v&&(v=v.userAgent)?v:""}function S(v){return S[" "](v),v}S[" "]=function(){};var P=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function N(v,E,R){for(const $ in v)E.call(R,v[$],$,v)}function T(v,E){for(const R in v)E.call(void 0,v[R],R,v)}function C(v){const E={};for(const R in v)E[R]=v[R];return E}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(v,E){let R,$;for(let X=1;X<arguments.length;X++){$=arguments[X];for(R in $)v[R]=$[R];for(let Z=0;Z<k.length;Z++)R=k[Z],Object.prototype.hasOwnProperty.call($,R)&&(v[R]=$[R])}}function L(v){var E=1;v=v.split(":");const R=[];for(;0<E&&v.length;)R.push(v.shift()),E--;return v.length&&R.push(v.join(":")),R}function F(v){a.setTimeout(()=>{throw v},0)}function j(){var v=U;let E=null;return v.g&&(E=v.g,v.g=v.g.next,v.g||(v.h=null),E.next=null),E}class q{constructor(){this.h=this.g=null}add(E,R){const $=H.get();$.set(E,R),this.h?this.h.next=$:this.g=$,this.h=$}}var H=new w(()=>new z,v=>v.reset());class z{constructor(){this.next=this.g=this.h=null}set(E,R){this.h=E,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let W,V=!1,U=new q,K=()=>{const v=a.Promise.resolve(void 0);W=()=>{v.then(Q)}};var Q=()=>{for(var v;v=j();){try{v.h.call(v.g)}catch(R){F(R)}var E=H;E.j(v),100>E.h&&(E.h++,v.next=E.g,E.g=v)}V=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(v,E){this.type=v,this.g=this.target=E,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var re=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var v=!1,E=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const R=()=>{};a.addEventListener("test",R,E),a.removeEventListener("test",R,E)}catch{}return v}();function te(v,E){if(Y.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var R=this.type=v.type,$=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=E,E=v.relatedTarget){if(P){e:{try{S(E.nodeName);var X=!0;break e}catch{}X=!1}X||(E=null)}}else R=="mouseover"?E=v.fromElement:R=="mouseout"&&(E=v.toElement);this.relatedTarget=E,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:ie[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&te.aa.h.call(this)}}y(te,Y);var ie={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function Le(v,E,R,$,X){this.listener=v,this.proxy=null,this.src=E,this.type=R,this.capture=!!$,this.ha=X,this.key=++Ne,this.da=this.fa=!1}function nn(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Pi(v){this.src=v,this.g={},this.h=0}Pi.prototype.add=function(v,E,R,$,X){var Z=v.toString();v=this.g[Z],v||(v=this.g[Z]=[],this.h++);var oe=ii(v,E,$,X);return-1<oe?(E=v[oe],R||(E.fa=!1)):(E=new Le(E,this.src,Z,!!$,X),E.fa=R,v.push(E)),E};function ri(v,E){var R=E.type;if(R in v.g){var $=v.g[R],X=Array.prototype.indexOf.call($,E,void 0),Z;(Z=0<=X)&&Array.prototype.splice.call($,X,1),Z&&(nn(E),v.g[R].length==0&&(delete v.g[R],v.h--))}}function ii(v,E,R,$){for(var X=0;X<v.length;++X){var Z=v[X];if(!Z.da&&Z.listener==E&&Z.capture==!!R&&Z.ha==$)return X}return-1}var qs="closure_lm_"+(1e6*Math.random()|0),fc={};function Ks(v,E,R,$,X){if(Array.isArray(E)){for(var Z=0;Z<E.length;Z++)Ks(v,E[Z],R,$,X);return null}return R=ky(R),v&&v[ae]?v.K(E,R,c($)?!!$.capture:!!$,X):Cy(v,E,R,!1,$,X)}function Cy(v,E,R,$,X,Z){if(!E)throw Error("Invalid event type");var oe=c(X)?!!X.capture:!!X,mt=pc(v);if(mt||(v[qs]=mt=new Pi(v)),R=mt.add(E,R,$,oe,Z),R.proxy)return R;if($=Py(),R.proxy=$,$.src=v,$.listener=R,v.addEventListener)re||(X=oe),X===void 0&&(X=!1),v.addEventListener(E.toString(),$,X);else if(v.attachEvent)v.attachEvent(Zx(E.toString()),$);else if(v.addListener&&v.removeListener)v.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Py(){function v(R){return E.call(v.src,v.listener,R)}const E=BC;return v}function un(v,E,R,$,X){if(Array.isArray(E))for(var Z=0;Z<E.length;Z++)un(v,E[Z],R,$,X);else $=c($)?!!$.capture:!!$,R=ky(R),v&&v[ae]?(v=v.i,E=String(E).toString(),E in v.g&&(Z=v.g[E],R=ii(Z,R,$,X),-1<R&&(nn(Z[R]),Array.prototype.splice.call(Z,R,1),Z.length==0&&(delete v.g[E],v.h--)))):v&&(v=pc(v))&&(E=v.g[E.toString()],v=-1,E&&(v=ii(E,R,$,X)),(R=-1<v?E[v]:null)&&jo(R))}function jo(v){if(typeof v!="number"&&v&&!v.da){var E=v.src;if(E&&E[ae])ri(E.i,v);else{var R=v.type,$=v.proxy;E.removeEventListener?E.removeEventListener(R,$,v.capture):E.detachEvent?E.detachEvent(Zx(R),$):E.addListener&&E.removeListener&&E.removeListener($),(R=pc(E))?(ri(R,v),R.h==0&&(R.src=null,E[qs]=null)):nn(v)}}}function Zx(v){return v in fc?fc[v]:fc[v]="on"+v}function BC(v,E){if(v.da)v=!0;else{E=new te(E,this);var R=v.listener,$=v.ha||v.src;v.fa&&jo(v),v=R.call($,E)}return v}function pc(v){return v=v[qs],v instanceof Pi?v:null}var Iy="__closure_events_fn_"+(1e9*Math.random()>>>0);function ky(v){return typeof v=="function"?v:(v[Iy]||(v[Iy]=function(E){return v.handleEvent(E)}),v[Iy])}function dn(){B.call(this),this.i=new Pi(this),this.M=this,this.F=null}y(dn,B),dn.prototype[ae]=!0,dn.prototype.removeEventListener=function(v,E,R,$){un(this,v,E,R,$)};function Yt(v,E){var R,$=v.F;if($)for(R=[];$;$=$.F)R.push($);if(v=v.M,$=E.type||E,typeof E=="string")E=new Y(E,v);else if(E instanceof Y)E.target=E.target||v;else{var X=E;E=new Y($,v),M(E,X)}if(X=!0,R)for(var Z=R.length-1;0<=Z;Z--){var oe=E.g=R[Z];X=Sd(oe,$,!0,E)&&X}if(oe=E.g=v,X=Sd(oe,$,!0,E)&&X,X=Sd(oe,$,!1,E)&&X,R)for(Z=0;Z<R.length;Z++)oe=E.g=R[Z],X=Sd(oe,$,!1,E)&&X}dn.prototype.N=function(){if(dn.aa.N.call(this),this.i){var v=this.i,E;for(E in v.g){for(var R=v.g[E],$=0;$<R.length;$++)nn(R[$]);delete v.g[E],v.h--}}this.F=null},dn.prototype.K=function(v,E,R,$){return this.i.add(String(v),E,!1,R,$)},dn.prototype.L=function(v,E,R,$){return this.i.add(String(v),E,!0,R,$)};function Sd(v,E,R,$){if(E=v.i.g[String(E)],!E)return!0;E=E.concat();for(var X=!0,Z=0;Z<E.length;++Z){var oe=E[Z];if(oe&&!oe.da&&oe.capture==R){var mt=oe.listener,Kn=oe.ha||oe.src;oe.fa&&ri(v.i,oe),X=mt.call(Kn,$)!==!1&&X}}return X&&!$.defaultPrevented}function $a(v,E,R){if(typeof v=="function")R&&(v=h(v,R));else if(v&&typeof v.handleEvent=="function")v=h(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:a.setTimeout(v,E||0)}function Ry(v){v.g=$a(()=>{v.g=null,v.i&&(v.i=!1,Ry(v))},v.l);const E=v.h;v.h=null,v.m.apply(null,E)}class zC extends B{constructor(E,R){super(),this.m=E,this.l=R,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Ry(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mc(v){B.call(this),this.h=v,this.g={}}y(mc,B);var Ny=[];function e_(v){N(v.g,function(E,R){this.g.hasOwnProperty(R)&&jo(E)},v),v.g={}}mc.prototype.N=function(){mc.aa.N.call(this),e_(this)},mc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ed=a.JSON.stringify,Fo=a.JSON.parse,UC=class{stringify(v){return a.JSON.stringify(v,void 0)}parse(v){return a.JSON.parse(v,void 0)}};function Ee(){}Ee.prototype.h=null;function ut(v){return v.h||(v.h=v.i())}function it(){}var dr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function si(){Y.call(this,"d")}y(si,Y);function gc(){Y.call(this,"c")}y(gc,Y);var Va={},oj=null;function t_(){return oj=oj||new dn}Va.La="serverreachability";function aj(v){Y.call(this,Va.La,v)}y(aj,Y);function Oy(v){const E=t_();Yt(E,new aj(E))}Va.STAT_EVENT="statevent";function lj(v,E){Y.call(this,Va.STAT_EVENT,v),this.stat=E}y(lj,Y);function Mr(v){const E=t_();Yt(E,new lj(E,v))}Va.Ma="timingevent";function cj(v,E){Y.call(this,Va.Ma,v),this.size=E}y(cj,Y);function My(v,E){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){v()},E)}function Dy(){this.g=!0}Dy.prototype.xa=function(){this.g=!1};function UZ(v,E,R,$,X,Z){v.info(function(){if(v.g)if(Z)for(var oe="",mt=Z.split("&"),Kn=0;Kn<mt.length;Kn++){var Ye=mt[Kn].split("=");if(1<Ye.length){var hr=Ye[0];Ye=Ye[1];var fr=hr.split("_");oe=2<=fr.length&&fr[1]=="type"?oe+(hr+"="+Ye+"&"):oe+(hr+"=redacted&")}}else oe=null;else oe=Z;return"XMLHTTP REQ ("+$+") [attempt "+X+"]: "+E+`
`+R+`
`+oe})}function HZ(v,E,R,$,X,Z,oe){v.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+X+"]: "+E+`
`+R+`
`+Z+" "+oe})}function lp(v,E,R,$){v.info(function(){return"XMLHTTP TEXT ("+E+"): "+GZ(v,R)+($?" "+$:"")})}function WZ(v,E){v.info(function(){return"TIMEOUT: "+E})}Dy.prototype.info=function(){};function GZ(v,E){if(!v.g)return E;if(!E)return null;try{var R=JSON.parse(E);if(R){for(v=0;v<R.length;v++)if(Array.isArray(R[v])){var $=R[v];if(!(2>$.length)){var X=$[1];if(Array.isArray(X)&&!(1>X.length)){var Z=X[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var oe=1;oe<X.length;oe++)X[oe]=""}}}}return Ed(R)}catch{return E}}var n_={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},uj={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},HC;function r_(){}y(r_,Ee),r_.prototype.g=function(){return new XMLHttpRequest},r_.prototype.i=function(){return{}},HC=new r_;function yc(v,E,R,$){this.j=v,this.i=E,this.l=R,this.R=$||1,this.U=new mc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dj}function dj(){this.i=null,this.g="",this.h=!1}var hj={},WC={};function GC(v,E,R){v.L=1,v.v=a_(Ba(E)),v.m=R,v.P=!0,fj(v,null)}function fj(v,E){v.F=Date.now(),i_(v),v.A=Ba(v.v);var R=v.A,$=v.R;Array.isArray($)||($=[String($)]),Cj(R.i,"t",$),v.C=0,R=v.j.J,v.h=new dj,v.g=Wj(v.j,R?E:null,!v.m),0<v.O&&(v.M=new zC(h(v.Y,v,v.g),v.O)),E=v.U,R=v.g,$=v.ca;var X="readystatechange";Array.isArray(X)||(X&&(Ny[0]=X.toString()),X=Ny);for(var Z=0;Z<X.length;Z++){var oe=Ks(R,X[Z],$||E.handleEvent,!1,E.h||E);if(!oe)break;E.g[oe.key]=oe}E=v.H?C(v.H):{},v.m?(v.u||(v.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,E)):(v.u="GET",v.g.ea(v.A,v.u,null,E)),Oy(),UZ(v.i,v.u,v.A,v.l,v.R,v.m)}yc.prototype.ca=function(v){v=v.target;const E=this.M;E&&za(v)==3?E.j():this.Y(v)},yc.prototype.Y=function(v){try{if(v==this.g)e:{const fr=za(this.g);var E=this.g.Ba();const dp=this.g.Z();if(!(3>fr)&&(fr!=3||this.g&&(this.h.h||this.g.oa()||Mj(this.g)))){this.J||fr!=4||E==7||(E==8||0>=dp?Oy(3):Oy(2)),qC(this);var R=this.g.Z();this.X=R;t:if(pj(this)){var $=Mj(this.g);v="";var X=$.length,Z=za(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Td(this),Ly(this);var oe="";break t}this.h.i=new a.TextDecoder}for(E=0;E<X;E++)this.h.h=!0,v+=this.h.i.decode($[E],{stream:!(Z&&E==X-1)});$.length=0,this.h.g+=v,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=R==200,HZ(this.i,this.u,this.A,this.l,this.R,fr,R),this.o){if(this.T&&!this.K){t:{if(this.g){var mt,Kn=this.g;if((mt=Kn.g?Kn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(mt)){var Ye=mt;break t}}Ye=null}if(R=Ye)lp(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,KC(this,R);else{this.o=!1,this.s=3,Mr(12),Td(this),Ly(this);break e}}if(this.P){R=!0;let Ys;for(;!this.J&&this.C<oe.length;)if(Ys=qZ(this,oe),Ys==WC){fr==4&&(this.s=4,Mr(14),R=!1),lp(this.i,this.l,null,"[Incomplete Response]");break}else if(Ys==hj){this.s=4,Mr(15),lp(this.i,this.l,oe,"[Invalid Chunk]"),R=!1;break}else lp(this.i,this.l,Ys,null),KC(this,Ys);if(pj(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fr!=4||oe.length!=0||this.h.h||(this.s=1,Mr(16),R=!1),this.o=this.o&&R,!R)lp(this.i,this.l,oe,"[Invalid Chunked Response]"),Td(this),Ly(this);else if(0<oe.length&&!this.W){this.W=!0;var hr=this.j;hr.g==this&&hr.ba&&!hr.M&&(hr.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),eP(hr),hr.M=!0,Mr(11))}}else lp(this.i,this.l,oe,null),KC(this,oe);fr==4&&Td(this),this.o&&!this.J&&(fr==4?Bj(this.j,this):(this.o=!1,i_(this)))}else uee(this.g),R==400&&0<oe.indexOf("Unknown SID")?(this.s=3,Mr(12)):(this.s=0,Mr(13)),Td(this),Ly(this)}}}catch{}finally{}};function pj(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function qZ(v,E){var R=v.C,$=E.indexOf(`
`,R);return $==-1?WC:(R=Number(E.substring(R,$)),isNaN(R)?hj:($+=1,$+R>E.length?WC:(E=E.slice($,$+R),v.C=$+R,E)))}yc.prototype.cancel=function(){this.J=!0,Td(this)};function i_(v){v.S=Date.now()+v.I,mj(v,v.I)}function mj(v,E){if(v.B!=null)throw Error("WatchDog timer not null");v.B=My(h(v.ba,v),E)}function qC(v){v.B&&(a.clearTimeout(v.B),v.B=null)}yc.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(WZ(this.i,this.A),this.L!=2&&(Oy(),Mr(17)),Td(this),this.s=2,Ly(this)):mj(this,this.S-v)};function Ly(v){v.j.G==0||v.J||Bj(v.j,v)}function Td(v){qC(v);var E=v.M;E&&typeof E.ma=="function"&&E.ma(),v.M=null,e_(v.U),v.g&&(E=v.g,v.g=null,E.abort(),E.ma())}function KC(v,E){try{var R=v.j;if(R.G!=0&&(R.g==v||YC(R.h,v))){if(!v.K&&YC(R.h,v)&&R.G==3){try{var $=R.Da.g.parse(E)}catch{$=null}if(Array.isArray($)&&$.length==3){var X=$;if(X[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<v.F)f_(R),d_(R);else break e;ZC(R),Mr(18)}}else R.za=X[1],0<R.za-R.T&&37500>X[2]&&R.F&&R.v==0&&!R.C&&(R.C=My(h(R.Za,R),6e3));if(1>=vj(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else Pd(R,11)}else if((v.K||R.g==v)&&f_(R),!x(E))for(X=R.Da.g.parse(E),E=0;E<X.length;E++){let Ye=X[E];if(R.T=Ye[0],Ye=Ye[1],R.G==2)if(Ye[0]=="c"){R.K=Ye[1],R.ia=Ye[2];const hr=Ye[3];hr!=null&&(R.la=hr,R.j.info("VER="+R.la));const fr=Ye[4];fr!=null&&(R.Aa=fr,R.j.info("SVER="+R.Aa));const dp=Ye[5];dp!=null&&typeof dp=="number"&&0<dp&&($=1.5*dp,R.L=$,R.j.info("backChannelRequestTimeoutMs_="+$)),$=R;const Ys=v.g;if(Ys){const m_=Ys.g?Ys.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m_){var Z=$.h;Z.g||m_.indexOf("spdy")==-1&&m_.indexOf("quic")==-1&&m_.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(XC(Z,Z.h),Z.h=null))}if($.D){const tP=Ys.g?Ys.g.getResponseHeader("X-HTTP-Session-Id"):null;tP&&($.ya=tP,Et($.I,$.D,tP))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-v.F,R.j.info("Handshake RTT: "+R.R+"ms")),$=R;var oe=v;if($.qa=Hj($,$.J?$.ia:null,$.W),oe.K){bj($.h,oe);var mt=oe,Kn=$.L;Kn&&(mt.I=Kn),mt.B&&(qC(mt),i_(mt)),$.g=oe}else $j($);0<R.i.length&&h_(R)}else Ye[0]!="stop"&&Ye[0]!="close"||Pd(R,7);else R.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Pd(R,7):JC(R):Ye[0]!="noop"&&R.l&&R.l.ta(Ye),R.v=0)}}Oy(4)}catch{}}var KZ=class{constructor(v,E){this.g=v,this.map=E}};function gj(v){this.l=v||10,a.PerformanceNavigationTiming?(v=a.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yj(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function vj(v){return v.h?1:v.g?v.g.size:0}function YC(v,E){return v.h?v.h==E:v.g?v.g.has(E):!1}function XC(v,E){v.g?v.g.add(E):v.h=E}function bj(v,E){v.h&&v.h==E?v.h=null:v.g&&v.g.has(E)&&v.g.delete(E)}gj.prototype.cancel=function(){if(this.i=wj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function wj(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let E=v.i;for(const R of v.g.values())E=E.concat(R.D);return E}return g(v.i)}function YZ(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(l(v)){for(var E=[],R=v.length,$=0;$<R;$++)E.push(v[$]);return E}E=[],R=0;for($ in v)E[R++]=v[$];return E}function XZ(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(l(v)||typeof v=="string"){var E=[];v=v.length;for(var R=0;R<v;R++)E.push(R);return E}E=[],R=0;for(const $ in v)E[R++]=$;return E}}}function xj(v,E){if(v.forEach&&typeof v.forEach=="function")v.forEach(E,void 0);else if(l(v)||typeof v=="string")Array.prototype.forEach.call(v,E,void 0);else for(var R=XZ(v),$=YZ(v),X=$.length,Z=0;Z<X;Z++)E.call(void 0,$[Z],R&&R[Z],v)}var _j=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QZ(v,E){if(v){v=v.split("&");for(var R=0;R<v.length;R++){var $=v[R].indexOf("="),X=null;if(0<=$){var Z=v[R].substring(0,$);X=v[R].substring($+1)}else Z=v[R];E(Z,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Cd(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Cd){this.h=v.h,s_(this,v.j),this.o=v.o,this.g=v.g,o_(this,v.s),this.l=v.l;var E=v.i,R=new $y;R.i=E.i,E.g&&(R.g=new Map(E.g),R.h=E.h),Aj(this,R),this.m=v.m}else v&&(E=String(v).match(_j))?(this.h=!1,s_(this,E[1]||"",!0),this.o=jy(E[2]||""),this.g=jy(E[3]||"",!0),o_(this,E[4]),this.l=jy(E[5]||"",!0),Aj(this,E[6]||"",!0),this.m=jy(E[7]||"")):(this.h=!1,this.i=new $y(null,this.h))}Cd.prototype.toString=function(){var v=[],E=this.j;E&&v.push(Fy(E,Sj,!0),":");var R=this.g;return(R||E=="file")&&(v.push("//"),(E=this.o)&&v.push(Fy(E,Sj,!0),"@"),v.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&v.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&v.push("/"),v.push(Fy(R,R.charAt(0)=="/"?eee:ZZ,!0))),(R=this.i.toString())&&v.push("?",R),(R=this.m)&&v.push("#",Fy(R,nee)),v.join("")};function Ba(v){return new Cd(v)}function s_(v,E,R){v.j=R?jy(E,!0):E,v.j&&(v.j=v.j.replace(/:$/,""))}function o_(v,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);v.s=E}else v.s=null}function Aj(v,E,R){E instanceof $y?(v.i=E,ree(v.i,v.h)):(R||(E=Fy(E,tee)),v.i=new $y(E,v.h))}function Et(v,E,R){v.i.set(E,R)}function a_(v){return Et(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function jy(v,E){return v?E?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Fy(v,E,R){return typeof v=="string"?(v=encodeURI(v).replace(E,JZ),R&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function JZ(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Sj=/[#\/\?@]/g,ZZ=/[#\?:]/g,eee=/[#\?]/g,tee=/[#\?@]/g,nee=/#/g;function $y(v,E){this.h=this.g=null,this.i=v||null,this.j=!!E}function vc(v){v.g||(v.g=new Map,v.h=0,v.i&&QZ(v.i,function(E,R){v.add(decodeURIComponent(E.replace(/\+/g," ")),R)}))}n=$y.prototype,n.add=function(v,E){vc(this),this.i=null,v=cp(this,v);var R=this.g.get(v);return R||this.g.set(v,R=[]),R.push(E),this.h+=1,this};function Ej(v,E){vc(v),E=cp(v,E),v.g.has(E)&&(v.i=null,v.h-=v.g.get(E).length,v.g.delete(E))}function Tj(v,E){return vc(v),E=cp(v,E),v.g.has(E)}n.forEach=function(v,E){vc(this),this.g.forEach(function(R,$){R.forEach(function(X){v.call(E,X,$,this)},this)},this)},n.na=function(){vc(this);const v=Array.from(this.g.values()),E=Array.from(this.g.keys()),R=[];for(let $=0;$<E.length;$++){const X=v[$];for(let Z=0;Z<X.length;Z++)R.push(E[$])}return R},n.V=function(v){vc(this);let E=[];if(typeof v=="string")Tj(this,v)&&(E=E.concat(this.g.get(cp(this,v))));else{v=Array.from(this.g.values());for(let R=0;R<v.length;R++)E=E.concat(v[R])}return E},n.set=function(v,E){return vc(this),this.i=null,v=cp(this,v),Tj(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[E]),this.h+=1,this},n.get=function(v,E){return v?(v=this.V(v),0<v.length?String(v[0]):E):E};function Cj(v,E,R){Ej(v,E),0<R.length&&(v.i=null,v.g.set(cp(v,E),g(R)),v.h+=R.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],E=Array.from(this.g.keys());for(var R=0;R<E.length;R++){var $=E[R];const Z=encodeURIComponent(String($)),oe=this.V($);for($=0;$<oe.length;$++){var X=Z;oe[$]!==""&&(X+="="+encodeURIComponent(String(oe[$]))),v.push(X)}}return this.i=v.join("&")};function cp(v,E){return E=String(E),v.j&&(E=E.toLowerCase()),E}function ree(v,E){E&&!v.j&&(vc(v),v.i=null,v.g.forEach(function(R,$){var X=$.toLowerCase();$!=X&&(Ej(this,$),Cj(this,X,R))},v)),v.j=E}function iee(v,E){const R=new Dy;if(a.Image){const $=new Image;$.onload=m(bc,R,"TestLoadImage: loaded",!0,E,$),$.onerror=m(bc,R,"TestLoadImage: error",!1,E,$),$.onabort=m(bc,R,"TestLoadImage: abort",!1,E,$),$.ontimeout=m(bc,R,"TestLoadImage: timeout",!1,E,$),a.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=v}else E(!1)}function see(v,E){const R=new Dy,$=new AbortController,X=setTimeout(()=>{$.abort(),bc(R,"TestPingServer: timeout",!1,E)},1e4);fetch(v,{signal:$.signal}).then(Z=>{clearTimeout(X),Z.ok?bc(R,"TestPingServer: ok",!0,E):bc(R,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(X),bc(R,"TestPingServer: error",!1,E)})}function bc(v,E,R,$,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),$(R)}catch{}}function oee(){this.g=new UC}function aee(v,E,R){const $=R||"";try{xj(v,function(X,Z){let oe=X;c(X)&&(oe=Ed(X)),E.push($+Z+"="+encodeURIComponent(oe))})}catch(X){throw E.push($+"type="+encodeURIComponent("_badmap")),X}}function l_(v){this.l=v.Ub||null,this.j=v.eb||!1}y(l_,Ee),l_.prototype.g=function(){return new c_(this.l,this.j)},l_.prototype.i=function(v){return function(){return v}}({});function c_(v,E){dn.call(this),this.D=v,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(c_,dn),n=c_.prototype,n.open=function(v,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=E,this.readyState=1,By(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(E.body=v),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vy(this)),this.readyState=0},n.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,By(this)),this.g&&(this.readyState=3,By(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pj(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pj(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}n.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var E=v.value?v.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!v.done}))&&(this.response=this.responseText+=E)}v.done?Vy(this):By(this),this.readyState==3&&Pj(this)}},n.Ra=function(v){this.g&&(this.response=this.responseText=v,Vy(this))},n.Qa=function(v){this.g&&(this.response=v,Vy(this))},n.ga=function(){this.g&&Vy(this)};function Vy(v){v.readyState=4,v.l=null,v.j=null,v.v=null,By(v)}n.setRequestHeader=function(v,E){this.u.append(v,E)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],E=this.h.entries();for(var R=E.next();!R.done;)R=R.value,v.push(R[0]+": "+R[1]),R=E.next();return v.join(`\r
`)};function By(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(c_.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Ij(v){let E="";return N(v,function(R,$){E+=$,E+=":",E+=R,E+=`\r
`}),E}function QC(v,E,R){e:{for($ in R){var $=!1;break e}$=!0}$||(R=Ij(R),typeof v=="string"?R!=null&&encodeURIComponent(String(R)):Et(v,E,R))}function Xt(v){dn.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Xt,dn);var lee=/^https?$/i,cee=["POST","PUT"];n=Xt.prototype,n.Ha=function(v){this.J=v},n.ea=function(v,E,R,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);E=E?E.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():HC.g(),this.v=this.o?ut(this.o):ut(HC),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(E,String(v),!0),this.B=!1}catch(Z){kj(this,Z);return}if(v=R||"",R=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var X in $)R.set(X,$[X]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const Z of $.keys())R.set(Z,$.get(Z));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(R.keys()).find(Z=>Z.toLowerCase()=="content-type"),X=a.FormData&&v instanceof a.FormData,!(0<=Array.prototype.indexOf.call(cee,E,void 0))||$||X||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,oe]of R)this.g.setRequestHeader(Z,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oj(this),this.u=!0,this.g.send(v),this.u=!1}catch(Z){kj(this,Z)}};function kj(v,E){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=E,v.m=5,Rj(v),u_(v)}function Rj(v){v.A||(v.A=!0,Yt(v,"complete"),Yt(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,Yt(this,"complete"),Yt(this,"abort"),u_(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),u_(this,!0)),Xt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Nj(this):this.bb())},n.bb=function(){Nj(this)};function Nj(v){if(v.h&&typeof o<"u"&&(!v.v[1]||za(v)!=4||v.Z()!=2)){if(v.u&&za(v)==4)$a(v.Ea,0,v);else if(Yt(v,"readystatechange"),za(v)==4){v.h=!1;try{const oe=v.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var R;if(!(R=E)){var $;if($=oe===0){var X=String(v.D).match(_j)[1]||null;!X&&a.self&&a.self.location&&(X=a.self.location.protocol.slice(0,-1)),$=!lee.test(X?X.toLowerCase():"")}R=$}if(R)Yt(v,"complete"),Yt(v,"success");else{v.m=6;try{var Z=2<za(v)?v.g.statusText:""}catch{Z=""}v.l=Z+" ["+v.Z()+"]",Rj(v)}}finally{u_(v)}}}}function u_(v,E){if(v.g){Oj(v);const R=v.g,$=v.v[0]?()=>{}:null;v.g=null,v.v=null,E||Yt(v,"ready");try{R.onreadystatechange=$}catch{}}}function Oj(v){v.I&&(a.clearTimeout(v.I),v.I=null)}n.isActive=function(){return!!this.g};function za(v){return v.g?v.g.readyState:0}n.Z=function(){try{return 2<za(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(v){if(this.g){var E=this.g.responseText;return v&&E.indexOf(v)==0&&(E=E.substring(v.length)),Fo(E)}};function Mj(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function uee(v){const E={};v=(v.g&&2<=za(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<v.length;$++){if(x(v[$]))continue;var R=L(v[$]);const X=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const Z=E[X]||[];E[X]=Z,Z.push(R)}T(E,function($){return $.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zy(v,E,R){return R&&R.internalChannelParams&&R.internalChannelParams[v]||E}function Dj(v){this.Aa=0,this.i=[],this.j=new Dy,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zy("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zy("baseRetryDelayMs",5e3,v),this.cb=zy("retryDelaySeedMs",1e4,v),this.Wa=zy("forwardChannelMaxRetries",2,v),this.wa=zy("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new gj(v&&v.concurrentRequestLimit),this.Da=new oee,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Dj.prototype,n.la=8,n.G=1,n.connect=function(v,E,R,$){Mr(0),this.W=v,this.H=E||{},R&&$!==void 0&&(this.H.OSID=R,this.H.OAID=$),this.F=this.X,this.I=Hj(this,null,this.W),h_(this)};function JC(v){if(Lj(v),v.G==3){var E=v.U++,R=Ba(v.I);if(Et(R,"SID",v.K),Et(R,"RID",E),Et(R,"TYPE","terminate"),Uy(v,R),E=new yc(v,v.j,E),E.L=2,E.v=a_(Ba(R)),R=!1,a.navigator&&a.navigator.sendBeacon)try{R=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!R&&a.Image&&(new Image().src=E.v,R=!0),R||(E.g=Wj(E.j,null),E.g.ea(E.v)),E.F=Date.now(),i_(E)}Uj(v)}function d_(v){v.g&&(eP(v),v.g.cancel(),v.g=null)}function Lj(v){d_(v),v.u&&(a.clearTimeout(v.u),v.u=null),f_(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&a.clearTimeout(v.s),v.s=null)}function h_(v){if(!yj(v.h)&&!v.s){v.s=!0;var E=v.Ga;W||K(),V||(W(),V=!0),U.add(E,v),v.B=0}}function dee(v,E){return vj(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=E.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=My(h(v.Ga,v,E),zj(v,v.B)),v.B++,!0)}n.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const X=new yc(this,this.j,v);let Z=this.o;if(this.S&&(Z?(Z=C(Z),M(Z,this.S)):Z=this.S),this.m!==null||this.O||(X.H=Z,Z=null),this.P)e:{for(var E=0,R=0;R<this.i.length;R++){t:{var $=this.i[R];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(E+=$,4096<E){E=R;break e}if(E===4096||R===this.i.length-1){E=R+1;break e}}E=1e3}else E=1e3;E=Fj(this,X,E),R=Ba(this.I),Et(R,"RID",v),Et(R,"CVER",22),this.D&&Et(R,"X-HTTP-Session-Id",this.D),Uy(this,R),Z&&(this.O?E="headers="+encodeURIComponent(String(Ij(Z)))+"&"+E:this.m&&QC(R,this.m,Z)),XC(this.h,X),this.Ua&&Et(R,"TYPE","init"),this.P?(Et(R,"$req",E),Et(R,"SID","null"),X.T=!0,GC(X,R,null)):GC(X,R,E),this.G=2}}else this.G==3&&(v?jj(this,v):this.i.length==0||yj(this.h)||jj(this))};function jj(v,E){var R;E?R=E.l:R=v.U++;const $=Ba(v.I);Et($,"SID",v.K),Et($,"RID",R),Et($,"AID",v.T),Uy(v,$),v.m&&v.o&&QC($,v.m,v.o),R=new yc(v,v.j,R,v.B+1),v.m===null&&(R.H=v.o),E&&(v.i=E.D.concat(v.i)),E=Fj(v,R,1e3),R.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),XC(v.h,R),GC(R,$,E)}function Uy(v,E){v.H&&N(v.H,function(R,$){Et(E,$,R)}),v.l&&xj({},function(R,$){Et(E,$,R)})}function Fj(v,E,R){R=Math.min(v.i.length,R);var $=v.l?h(v.l.Na,v.l,v):null;e:{var X=v.i;let Z=-1;for(;;){const oe=["count="+R];Z==-1?0<R?(Z=X[0].g,oe.push("ofs="+Z)):Z=0:oe.push("ofs="+Z);let mt=!0;for(let Kn=0;Kn<R;Kn++){let Ye=X[Kn].g;const hr=X[Kn].map;if(Ye-=Z,0>Ye)Z=Math.max(0,X[Kn].g-100),mt=!1;else try{aee(hr,oe,"req"+Ye+"_")}catch{$&&$(hr)}}if(mt){$=oe.join("&");break e}}}return v=v.i.splice(0,R),E.D=v,$}function $j(v){if(!v.g&&!v.u){v.Y=1;var E=v.Fa;W||K(),V||(W(),V=!0),U.add(E,v),v.v=0}}function ZC(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=My(h(v.Fa,v),zj(v,v.v)),v.v++,!0)}n.Fa=function(){if(this.u=null,Vj(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=My(h(this.ab,this),v)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mr(10),d_(this),Vj(this))};function eP(v){v.A!=null&&(a.clearTimeout(v.A),v.A=null)}function Vj(v){v.g=new yc(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var E=Ba(v.qa);Et(E,"RID","rpc"),Et(E,"SID",v.K),Et(E,"AID",v.T),Et(E,"CI",v.F?"0":"1"),!v.F&&v.ja&&Et(E,"TO",v.ja),Et(E,"TYPE","xmlhttp"),Uy(v,E),v.m&&v.o&&QC(E,v.m,v.o),v.L&&(v.g.I=v.L);var R=v.g;v=v.ia,R.L=1,R.v=a_(Ba(E)),R.m=null,R.P=!0,fj(R,v)}n.Za=function(){this.C!=null&&(this.C=null,d_(this),ZC(this),Mr(19))};function f_(v){v.C!=null&&(a.clearTimeout(v.C),v.C=null)}function Bj(v,E){var R=null;if(v.g==E){f_(v),eP(v),v.g=null;var $=2}else if(YC(v.h,E))R=E.D,bj(v.h,E),$=1;else return;if(v.G!=0){if(E.o)if($==1){R=E.m?E.m.length:0,E=Date.now()-E.F;var X=v.B;$=t_(),Yt($,new cj($,R)),h_(v)}else $j(v);else if(X=E.s,X==3||X==0&&0<E.X||!($==1&&dee(v,E)||$==2&&ZC(v)))switch(R&&0<R.length&&(E=v.h,E.i=E.i.concat(R)),X){case 1:Pd(v,5);break;case 4:Pd(v,10);break;case 3:Pd(v,6);break;default:Pd(v,2)}}}function zj(v,E){let R=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(R*=2),R*E}function Pd(v,E){if(v.j.info("Error code "+E),E==2){var R=h(v.fb,v),$=v.Xa;const X=!$;$=new Cd($||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||s_($,"https"),a_($),X?iee($.toString(),R):see($.toString(),R)}else Mr(2);v.G=0,v.l&&v.l.sa(E),Uj(v),Lj(v)}n.fb=function(v){v?(this.j.info("Successfully pinged google.com"),Mr(2)):(this.j.info("Failed to ping google.com"),Mr(1))};function Uj(v){if(v.G=0,v.ka=[],v.l){const E=wj(v.h);(E.length!=0||v.i.length!=0)&&(b(v.ka,E),b(v.ka,v.i),v.h.i.length=0,g(v.i),v.i.length=0),v.l.ra()}}function Hj(v,E,R){var $=R instanceof Cd?Ba(R):new Cd(R);if($.g!="")E&&($.g=E+"."+$.g),o_($,$.s);else{var X=a.location;$=X.protocol,E=E?E+"."+X.hostname:X.hostname,X=+X.port;var Z=new Cd(null);$&&s_(Z,$),E&&(Z.g=E),X&&o_(Z,X),R&&(Z.l=R),$=Z}return R=v.D,E=v.ya,R&&E&&Et($,R,E),Et($,"VER",v.la),Uy(v,$),$}function Wj(v,E,R){if(E&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=v.Ca&&!v.pa?new Xt(new l_({eb:R})):new Xt(v.pa),E.Ha(v.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gj(){}n=Gj.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function p_(){}p_.prototype.g=function(v,E){return new Ii(v,E)};function Ii(v,E){dn.call(this),this.g=new Dj(E),this.l=v,this.h=E&&E.messageUrlParams||null,v=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(v?v["X-WebChannel-Content-Type"]=E.messageContentType:v={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(v?v["X-WebChannel-Client-Profile"]=E.va:v={"X-WebChannel-Client-Profile":E.va}),this.g.S=v,(v=E&&E.Sb)&&!x(v)&&(this.g.m=v),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!x(E)&&(this.g.D=E,v=this.h,v!==null&&E in v&&(v=this.h,E in v&&delete v[E])),this.j=new up(this)}y(Ii,dn),Ii.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ii.prototype.close=function(){JC(this.g)},Ii.prototype.o=function(v){var E=this.g;if(typeof v=="string"){var R={};R.__data__=v,v=R}else this.u&&(R={},R.__data__=Ed(v),v=R);E.i.push(new KZ(E.Ya++,v)),E.G==3&&h_(E)},Ii.prototype.N=function(){this.g.l=null,delete this.j,JC(this.g),delete this.g,Ii.aa.N.call(this)};function qj(v){si.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var E=v.__sm__;if(E){e:{for(const R in E){v=R;break e}v=void 0}(this.i=v)&&(v=this.i,E=E!==null&&v in E?E[v]:void 0),this.data=E}else this.data=v}y(qj,si);function Kj(){gc.call(this),this.status=1}y(Kj,gc);function up(v){this.g=v}y(up,Gj),up.prototype.ua=function(){Yt(this.g,"a")},up.prototype.ta=function(v){Yt(this.g,new qj(v))},up.prototype.sa=function(v){Yt(this.g,new Kj)},up.prototype.ra=function(){Yt(this.g,"b")},p_.prototype.createWebChannel=p_.prototype.g,Ii.prototype.send=Ii.prototype.o,Ii.prototype.open=Ii.prototype.m,Ii.prototype.close=Ii.prototype.close,xW=function(){return new p_},wW=function(){return t_()},bW=Va,yk={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},n_.NO_ERROR=0,n_.TIMEOUT=8,n_.HTTP_ERROR=6,U1=n_,uj.COMPLETE="complete",vW=uj,it.EventType=dr,dr.OPEN="a",dr.CLOSE="b",dr.ERROR="c",dr.MESSAGE="d",dn.prototype.listen=dn.prototype.K,xv=it,Xt.prototype.listenOnce=Xt.prototype.L,Xt.prototype.getLastError=Xt.prototype.Ka,Xt.prototype.getLastErrorCode=Xt.prototype.Ba,Xt.prototype.getStatus=Xt.prototype.Z,Xt.prototype.getResponseJson=Xt.prototype.Oa,Xt.prototype.getResponseText=Xt.prototype.oa,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Ha,yW=Xt}).apply(typeof V_<"u"?V_:typeof self<"u"?self:typeof window<"u"?window:{});const D$="@firebase/firestore",L$="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Er.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hy="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf=new kT("@firebase/firestore");function wp(){return Mf.logLevel}function de(n,...e){if(Mf.logLevel<=$e.DEBUG){const t=e.map(WM);Mf.debug(`Firestore (${hy}): ${n}`,...t)}}function nc(n,...e){if(Mf.logLevel<=$e.ERROR){const t=e.map(WM);Mf.error(`Firestore (${hy}): ${n}`,...t)}}function Fg(n,...e){if(Mf.logLevel<=$e.WARN){const t=e.map(WM);Mf.warn(`Firestore (${hy}): ${n}`,...t)}}function WM(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,_W(n,r,t)}function _W(n,e,t){let r=`FIRESTORE (${hy}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw nc(r),new Error(r)}function nt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||_W(e,i,r)}function Ie(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends No{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class npe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Er.UNAUTHENTICATED))}shutdown(){}}class rpe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ipe{constructor(e){this.t=e,this.currentUser=Er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Hu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hu,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hu)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt(typeof r.accessToken=="string",31837,{l:r}),new AW(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new Er(e)}}class spe{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Er.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ope{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new spe(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class j${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ape{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const r=s=>{s.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,de("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new j$(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new j$(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lpe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=lpe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Ve(n,e){return n<e?-1:n>e?1:0}function vk(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return XP(i)===XP(s)?Ve(i,s):XP(i)?1:-1}return Ve(n.length,e.length)}const cpe=55296,upe=57343;function XP(n){const e=n.charCodeAt(0);return e>=cpe&&e<=upe}function $g(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F$="__name__";class qo{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Se(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return qo.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qo?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=qo.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ve(e.length,t.length)}static compareSegments(e,t){const r=qo.isNumericId(e),i=qo.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?qo.extractNumericId(e).compare(qo.extractNumericId(t)):vk(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Uu.fromString(e.substring(4,e.length-2))}}class wt extends qo{construct(e,t,r){return new wt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new wt(t)}static emptyPath(){return new wt([])}}const dpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class or extends qo{construct(e,t,r){return new or(e,t,r)}static isValidIdentifier(e){return dpe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===F$}static keyField(){return new or([F$])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ue(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ue(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ue(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ue(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new or(t)}static emptyPath(){return new or([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(wt.fromString(e))}static fromName(e){return new xe(wt.fromString(e).popFirst(5))}static empty(){return new xe(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new wt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SW(n,e,t){if(!t)throw new ue(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hpe(n,e,t,r){if(e===!0&&r===!0)throw new ue(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $$(n){if(!xe.isDocumentKey(n))throw new ue(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function V$(n){if(xe.isDocumentKey(n))throw new ue(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function EW(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function FT(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function zl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=FT(n);throw new ue(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Dx(n,e){if(!EW(n))throw new ue(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ue(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$=-62135596800,z$=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*z$);return new Rt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<B$)throw new ue(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/z$}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dx(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-B$;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:wn("string",Rt._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Rt(0,0))}static max(){return new Te(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=-1;function fpe(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Te.fromTimestamp(r===1e9?new Rt(t+1,0):new Rt(t,r));return new nd(i,xe.empty(),e)}function ppe(n){return new nd(n.readTime,n.key,Zb)}class nd{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new nd(Te.min(),xe.empty(),Zb)}static max(){return new nd(Te.max(),xe.empty(),Zb)}}function mpe(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gpe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ype{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fy(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==gpe)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(i=>i?ne.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new ne((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function vpe(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function py(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$T.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=-1;function VT(n){return n==null}function TS(n){return n===0&&1/n==-1/0}function bpe(n){return typeof n=="number"&&Number.isInteger(n)&&!TS(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TW="";function wpe(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=U$(e)),e=xpe(n.get(t),e);return U$(e)}function xpe(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case TW:t+="";break;default:t+=s}}return t}function U$(n){return n+TW+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CW(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t){this.comparator=e,this.root=t||rr.EMPTY}insert(e,t){return new Kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new B_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new B_(this.root,e,this.comparator,!1)}getReverseIterator(){return new B_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new B_(this.root,e,this.comparator,!0)}}class B_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??rr.RED,this.left=i??rr.EMPTY,this.right=s??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new rr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return rr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new W$(this.data.getIterator())}getIteratorFrom(e){return new W$(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mn(this.comparator);return t.data=e,t}}class W${constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.fields=e,e.sort(or.comparator)}static empty(){return new wo([])}unionWith(e){let t=new Mn(or.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new wo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $g(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new PW("Invalid base64 string: "+s):s}}(e);return new ur(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const _pe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rd(n){if(nt(!!n,39018),typeof n=="string"){let e=0;const t=_pe.exec(n);if(nt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:on(n.seconds),nanos:on(n.nanos)}}function on(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function id(n){return typeof n=="string"?ur.fromBase64String(n):ur.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW="server_timestamp",kW="__type__",RW="__previous_value__",NW="__local_write_time__";function KM(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[kW])==null?void 0:r.stringValue)===IW}function BT(n){const e=n.mapValue.fields[RW];return KM(e)?BT(e):e}function e0(n){const e=rd(n.mapValue.fields[NW].timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ape{constructor(e,t,r,i,s,o,a,l,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const CS="(default)";class t0{constructor(e,t){this.projectId=e,this.database=t||CS}static empty(){return new t0("","")}get isDefaultDatabase(){return this.database===CS}isEqual(e){return e instanceof t0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OW="__type__",MW="__max__",z_={mapValue:{fields:{__type__:{stringValue:MW}}}},DW="__vector__",PS="value";function sd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?KM(n)?4:Epe(n)?9007199254740991:Spe(n)?10:11:Se(28295,{value:n})}function Oa(n,e){if(n===e)return!0;const t=sd(n);if(t!==sd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return e0(n).isEqual(e0(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=rd(i.timestampValue),a=rd(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return id(i.bytesValue).isEqual(id(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return on(i.geoPointValue.latitude)===on(s.geoPointValue.latitude)&&on(i.geoPointValue.longitude)===on(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return on(i.integerValue)===on(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=on(i.doubleValue),a=on(s.doubleValue);return o===a?TS(o)===TS(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return $g(n.arrayValue.values||[],e.arrayValue.values||[],Oa);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(H$(o)!==H$(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Oa(o[l],a[l])))return!1;return!0}(n,e);default:return Se(52216,{left:n})}}function n0(n,e){return(n.values||[]).find(t=>Oa(t,e))!==void 0}function Vg(n,e){if(n===e)return 0;const t=sd(n),r=sd(e);if(t!==r)return Ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=on(s.integerValue||s.doubleValue),l=on(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return G$(n.timestampValue,e.timestampValue);case 4:return G$(e0(n),e0(e));case 5:return vk(n.stringValue,e.stringValue);case 6:return function(s,o){const a=id(s),l=id(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ve(a[c],l[c]);if(u!==0)return u}return Ve(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ve(on(s.latitude),on(o.latitude));return a!==0?a:Ve(on(s.longitude),on(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return q$(n.arrayValue,e.arrayValue);case 10:return function(s,o){var h,m,y,g;const a=s.fields||{},l=o.fields||{},c=(h=a[PS])==null?void 0:h.arrayValue,u=(m=l[PS])==null?void 0:m.arrayValue,d=Ve(((y=c==null?void 0:c.values)==null?void 0:y.length)||0,((g=u==null?void 0:u.values)==null?void 0:g.length)||0);return d!==0?d:q$(c,u)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===z_.mapValue&&o===z_.mapValue)return 0;if(s===z_.mapValue)return 1;if(o===z_.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const h=vk(l[d],u[d]);if(h!==0)return h;const m=Vg(a[l[d]],c[u[d]]);if(m!==0)return m}return Ve(l.length,u.length)}(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function G$(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=rd(n),r=rd(e),i=Ve(t.seconds,r.seconds);return i!==0?i:Ve(t.nanos,r.nanos)}function q$(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Vg(t[i],r[i]);if(s)return s}return Ve(t.length,r.length)}function Bg(n){return bk(n)}function bk(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=rd(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return id(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return xe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=bk(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${bk(t.fields[o])}`;return i+"}"}(n.mapValue):Se(61005,{value:n})}function H1(n){switch(sd(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=BT(n);return e?16+H1(e):16;case 5:return 2*n.stringValue.length;case 6:return id(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+H1(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Qf(r.fields,(s,o)=>{i+=s.length+H1(o)}),i}(n.mapValue);default:throw Se(13486,{value:n})}}function K$(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wk(n){return!!n&&"integerValue"in n}function YM(n){return!!n&&"arrayValue"in n}function Y$(n){return!!n&&"nullValue"in n}function X$(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function W1(n){return!!n&&"mapValue"in n}function Spe(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[OW])==null?void 0:r.stringValue)===DW}function fb(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Qf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=fb(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fb(n.arrayValue.values[t]);return e}return{...n}}function Epe(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===MW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.value=e}static empty(){return new Ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!W1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fb(t)}setAll(e){let t=or.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=fb(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());W1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];W1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Qf(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ts(fb(this.value))}}function LW(n){const e=[];return Qf(n.fields,(t,r)=>{const i=new or([t]);if(W1(r)){const s=LW(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new wo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Cr(e,0,Te.min(),Te.min(),Te.min(),Ts.empty(),0)}static newFoundDocument(e,t,r,i){return new Cr(e,1,t,Te.min(),r,i,0)}static newNoDocument(e,t){return new Cr(e,2,t,Te.min(),Te.min(),Ts.empty(),0)}static newUnknownDocument(e,t){return new Cr(e,3,t,Te.min(),Te.min(),Ts.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t){this.position=e,this.inclusive=t}}function Q$(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=xe.comparator(xe.fromName(o.referenceValue),t.key):r=Vg(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function J$(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oa(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,t="asc"){this.field=e,this.dir=t}}function Tpe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jW{}class vn extends jW{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ppe(e,t,r):t==="array-contains"?new Rpe(e,r):t==="in"?new Npe(e,r):t==="not-in"?new Ope(e,r):t==="array-contains-any"?new Mpe(e,r):new vn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ipe(e,r):new kpe(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vg(t,this.value)):t!==null&&sd(this.value)===sd(t)&&this.matchesComparison(Vg(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Io extends jW{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Io(e,t)}matches(e){return FW(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function FW(n){return n.op==="and"}function $W(n){return Cpe(n)&&FW(n)}function Cpe(n){for(const e of n.filters)if(e instanceof Io)return!1;return!0}function xk(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+Bg(n.value);if($W(n))return n.filters.map(e=>xk(e)).join(",");{const e=n.filters.map(t=>xk(t)).join(",");return`${n.op}(${e})`}}function VW(n,e){return n instanceof vn?function(r,i){return i instanceof vn&&r.op===i.op&&r.field.isEqual(i.field)&&Oa(r.value,i.value)}(n,e):n instanceof Io?function(r,i){return i instanceof Io&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&VW(o,i.filters[a]),!0):!1}(n,e):void Se(19439)}function BW(n){return n instanceof vn?function(t){return`${t.field.canonicalString()} ${t.op} ${Bg(t.value)}`}(n):n instanceof Io?function(t){return t.op.toString()+" {"+t.getFilters().map(BW).join(" ,")+"}"}(n):"Filter"}class Ppe extends vn{constructor(e,t,r){super(e,t,r),this.key=xe.fromName(r.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ipe extends vn{constructor(e,t){super(e,"in",t),this.keys=zW("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kpe extends vn{constructor(e,t){super(e,"not-in",t),this.keys=zW("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function zW(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(r=>xe.fromName(r.referenceValue))}class Rpe extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return YM(t)&&n0(t.arrayValue,this.value)}}class Npe extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&n0(this.value.arrayValue,t)}}class Ope extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(n0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!n0(this.value.arrayValue,t)}}class Mpe extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!YM(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>n0(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dpe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function Z$(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Dpe(n,e,t,r,i,s,o)}function XM(n){const e=Ie(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>xk(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),VT(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bg(r)).join(",")),e.Te=t}return e.Te}function QM(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Tpe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!VW(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!J$(n.startAt,e.startAt)&&J$(n.endAt,e.endAt)}function _k(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Lpe(n,e,t,r,i,s,o,a){return new my(n,e,t,r,i,s,o,a)}function zT(n){return new my(n)}function e3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function UW(n){return n.collectionGroup!==null}function pb(n){const e=Ie(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mn(or.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new r0(s,r))}),t.has(or.keyField().canonicalString())||e.Ie.push(new r0(or.keyField(),r))}return e.Ie}function Ea(n){const e=Ie(n);return e.Ee||(e.Ee=jpe(e,pb(n))),e.Ee}function jpe(n,e){if(n.limitType==="F")return Z$(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new r0(i.field,s)});const t=n.endAt?new IS(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new IS(n.startAt.position,n.startAt.inclusive):null;return Z$(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ak(n,e){const t=n.filters.concat([e]);return new my(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Sk(n,e,t){return new my(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function UT(n,e){return QM(Ea(n),Ea(e))&&n.limitType===e.limitType}function HW(n){return`${XM(Ea(n))}|lt:${n.limitType}`}function xp(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>BW(i)).join(", ")}]`),VT(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Bg(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Bg(i)).join(",")),`Target(${r})`}(Ea(n))}; limitType=${n.limitType})`}function HT(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):xe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of pb(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=Q$(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,pb(r),i)||r.endAt&&!function(o,a,l){const c=Q$(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,pb(r),i))}(n,e)}function Fpe(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function WW(n){return(e,t)=>{let r=!1;for(const i of pb(n)){const s=$pe(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $pe(n,e,t){const r=n.field.isKeyField()?xe.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Vg(l,c):Se(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qf(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return CW(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vpe=new Kt(xe.comparator);function rc(){return Vpe}const GW=new Kt(xe.comparator);function _v(...n){let e=GW;for(const t of n)e=e.insert(t.key,t);return e}function qW(n){let e=GW;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qd(){return mb()}function KW(){return mb()}function mb(){return new Jf(n=>n.toString(),(n,e)=>n.isEqual(e))}const Bpe=new Kt(xe.comparator),zpe=new Mn(xe.comparator);function Be(...n){let e=zpe;for(const t of n)e=e.add(t);return e}const Upe=new Mn(Ve);function Hpe(){return Upe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:TS(e)?"-0":e}}function YW(n){return{integerValue:""+n}}function Wpe(n,e){return bpe(e)?YW(e):JM(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this._=void 0}}function Gpe(n,e,t){return n instanceof i0?function(i,s){const o={fields:{[kW]:{stringValue:IW},[NW]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&KM(s)&&(s=BT(s)),s&&(o.fields[RW]=s),{mapValue:o}}(t,e):n instanceof s0?QW(n,e):n instanceof o0?JW(n,e):function(i,s){const o=XW(i,s),a=t3(o)+t3(i.Ae);return wk(o)&&wk(i.Ae)?YW(a):JM(i.serializer,a)}(n,e)}function qpe(n,e,t){return n instanceof s0?QW(n,e):n instanceof o0?JW(n,e):t}function XW(n,e){return n instanceof kS?function(r){return wk(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class i0 extends WT{}class s0 extends WT{constructor(e){super(),this.elements=e}}function QW(n,e){const t=ZW(e);for(const r of n.elements)t.some(i=>Oa(i,r))||t.push(r);return{arrayValue:{values:t}}}class o0 extends WT{constructor(e){super(),this.elements=e}}function JW(n,e){let t=ZW(e);for(const r of n.elements)t=t.filter(i=>!Oa(i,r));return{arrayValue:{values:t}}}class kS extends WT{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function t3(n){return on(n.integerValue||n.doubleValue)}function ZW(n){return YM(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kpe{constructor(e,t){this.field=e,this.transform=t}}function Ype(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof s0&&i instanceof s0||r instanceof o0&&i instanceof o0?$g(r.elements,i.elements,Oa):r instanceof kS&&i instanceof kS?Oa(r.Ae,i.Ae):r instanceof i0&&i instanceof i0}(n.transform,e.transform)}class Xpe{constructor(e,t){this.version=e,this.transformResults=t}}class Ta{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ta}static exists(e){return new Ta(void 0,e)}static updateTime(e){return new Ta(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function G1(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class GT{}function e7(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new n7(n.key,Ta.none()):new Lx(n.key,n.data,Ta.none());{const t=n.data,r=Ts.empty();let i=new Mn(or.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zf(n.key,r,new wo(i.toArray()),Ta.none())}}function Qpe(n,e,t){n instanceof Lx?function(i,s,o){const a=i.value.clone(),l=r3(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Zf?function(i,s,o){if(!G1(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=r3(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(t7(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function gb(n,e,t,r){return n instanceof Lx?function(s,o,a,l){if(!G1(s.precondition,o))return a;const c=s.value.clone(),u=i3(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Zf?function(s,o,a,l){if(!G1(s.precondition,o))return a;const c=i3(s.fieldTransforms,l,o),u=o.data;return u.setAll(t7(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(s,o,a){return G1(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Jpe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=XW(r.transform,i||null);s!=null&&(t===null&&(t=Ts.empty()),t.set(r.field,s))}return t||null}function n3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$g(r,i,(s,o)=>Ype(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Lx extends GT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zf extends GT{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function t7(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function r3(n,e,t){const r=new Map;nt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,qpe(o,a,t[i]))}return r}function i3(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Gpe(s,o,e))}return r}class n7 extends GT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zpe extends GT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eme{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Qpe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gb(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gb(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=KW();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=e7(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Be())}isEqual(e){return this.batchId===e.batchId&&$g(this.mutations,e.mutations,(t,r)=>n3(t,r))&&$g(this.baseMutations,e.baseMutations,(t,r)=>n3(t,r))}}class ZM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){nt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return Bpe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ZM(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tme=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nme{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pn,He;function rme(n){switch(n){case ee.OK:return Se(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function r7(n){if(n===void 0)return nc("GRPC error has no .code"),ee.UNKNOWN;switch(n){case pn.OK:return ee.OK;case pn.CANCELLED:return ee.CANCELLED;case pn.UNKNOWN:return ee.UNKNOWN;case pn.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case pn.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case pn.INTERNAL:return ee.INTERNAL;case pn.UNAVAILABLE:return ee.UNAVAILABLE;case pn.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case pn.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case pn.NOT_FOUND:return ee.NOT_FOUND;case pn.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case pn.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case pn.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case pn.ABORTED:return ee.ABORTED;case pn.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case pn.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case pn.DATA_LOSS:return ee.DATA_LOSS;default:return Se(39323,{code:n})}}(He=pn||(pn={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ime(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sme=new Uu([4294967295,4294967295],0);function s3(n){const e=ime().encode(n),t=new gW;return t.update(e),new Uint8Array(t.digest())}function o3(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Uu([t,r],0),new Uu([i,s],0)]}class eD{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Av(`Invalid padding: ${t}`);if(r<0)throw new Av(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Av(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Av(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Uu.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Uu.fromNumber(r)));return i.compare(sme)===1&&(i=new Uu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=s3(e),[r,i]=o3(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new eD(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const t=s3(e),[r,i]=o3(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Av extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,jx.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qT(Te.min(),i,new Kt(Ve),rc(),Be())}}class jx{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new jx(r,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class i7{constructor(e,t){this.targetId=e,this.Ce=t}}class s7{constructor(e,t,r=ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class a3{constructor(){this.ve=0,this.Fe=l3(),this.Me=ur.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),r=Be();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Se(38017,{changeType:s})}}),new jx(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=l3()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ome{constructor(e){this.Ge=e,this.ze=new Map,this.je=rc(),this.Je=U_(),this.He=U_(),this.Ye=new Kt(Ve)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(_k(s))if(r===0){const o=new xe(s.path);this.et(t,o,Cr.newNoDocument(o,Te.min()))}else nt(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,c)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=id(r).toUint8Array()}catch(l){if(l instanceof PW)return Fg("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new eD(o,i,s)}catch(l){return Fg(l instanceof Av?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&_k(a.target)){const l=new xe(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Cr.newNoDocument(l,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=Be();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new qT(e,t,this.Ye,this.je,r);return this.je=rc(),this.Je=U_(),this.He=U_(),this.Ye=new Kt(Ve),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new a3,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Mn(Ve),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Mn(Ve),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new a3),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function U_(){return new Kt(xe.comparator)}function l3(){return new Kt(xe.comparator)}const ame={asc:"ASCENDING",desc:"DESCENDING"},lme={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cme={and:"AND",or:"OR"};class ume{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ek(n,e){return n.useProto3Json||VT(e)?e:{value:e}}function RS(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function o7(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dme(n,e){return RS(n,e.toTimestamp())}function Ca(n){return nt(!!n,49232),Te.fromTimestamp(function(t){const r=rd(t);return new Rt(r.seconds,r.nanos)}(n))}function tD(n,e){return Tk(n,e).canonicalString()}function Tk(n,e){const t=function(i){return new wt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function a7(n){const e=wt.fromString(n);return nt(h7(e),10190,{key:e.toString()}),e}function Ck(n,e){return tD(n.databaseId,e.path)}function QP(n,e){const t=a7(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(c7(t))}function l7(n,e){return tD(n.databaseId,e)}function hme(n){const e=a7(n);return e.length===4?wt.emptyPath():c7(e)}function Pk(n){return new wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function c7(n){return nt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function c3(n,e,t){return{name:Ck(n,e),fields:t.value.mapValue.fields}}function fme(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Se(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(nt(u===void 0||typeof u=="string",58123),ur.fromBase64String(u||"")):(nt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ur.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?ee.UNKNOWN:r7(c.code);return new ue(u,c.message||"")}(o);t=new s7(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=QP(n,r.document.name),s=Ca(r.document.updateTime),o=r.document.createTime?Ca(r.document.createTime):Te.min(),a=new Ts({mapValue:{fields:r.document.fields}}),l=Cr.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];t=new q1(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=QP(n,r.document),s=r.readTime?Ca(r.readTime):Te.min(),o=Cr.newNoDocument(i,s),a=r.removedTargetIds||[];t=new q1([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=QP(n,r.document),s=r.removedTargetIds||[];t=new q1([],s,i,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new nme(i,s),a=r.targetId;t=new i7(a,o)}}return t}function pme(n,e){let t;if(e instanceof Lx)t={update:c3(n,e.key,e.value)};else if(e instanceof n7)t={delete:Ck(n,e.key)};else if(e instanceof Zf)t={update:c3(n,e.key,e.data),updateMask:Ame(e.fieldMask)};else{if(!(e instanceof Zpe))return Se(16599,{Vt:e.type});t={verify:Ck(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof i0)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof s0)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof o0)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof kS)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Se(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:dme(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Se(27497)}(n,e.precondition)),t}function mme(n,e){return n&&n.length>0?(nt(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?Ca(i.updateTime):Ca(s);return o.isEqual(Te.min())&&(o=Ca(s)),new Xpe(o,i.transformResults||[])}(t,e))):[]}function gme(n,e){return{documents:[l7(n,e.path)]}}function yme(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=l7(n,i);const s=function(c){if(c.length!==0)return d7(Io.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:_p(h.field),direction:wme(h.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Ek(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:t,parent:i}}function vme(n){let e=hme(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){nt(r===1,65062);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(d){const h=u7(d);return h instanceof Io&&$W(h)?h.getFilters():[h]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(h=>function(y){return new r0(Ap(y.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(h))}(t.orderBy));let a=null;t.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,VT(h)?null:h}(t.limit));let l=null;t.startAt&&(l=function(d){const h=!!d.before,m=d.values||[];return new IS(m,h)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const h=!d.before,m=d.values||[];return new IS(m,h)}(t.endAt)),Lpe(e,i,o,s,a,"F",l,c)}function bme(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function u7(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ap(t.unaryFilter.field);return vn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ap(t.unaryFilter.field);return vn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ap(t.unaryFilter.field);return vn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ap(t.unaryFilter.field);return vn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}}(n):n.fieldFilter!==void 0?function(t){return vn.create(Ap(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Io.create(t.compositeFilter.filters.map(r=>u7(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Se(1026)}}(t.compositeFilter.op))}(n):Se(30097,{filter:n})}function wme(n){return ame[n]}function xme(n){return lme[n]}function _me(n){return cme[n]}function _p(n){return{fieldPath:n.canonicalString()}}function Ap(n){return or.fromServerFormat(n.fieldPath)}function d7(n){return n instanceof vn?function(t){if(t.op==="=="){if(X$(t.value))return{unaryFilter:{field:_p(t.field),op:"IS_NAN"}};if(Y$(t.value))return{unaryFilter:{field:_p(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(X$(t.value))return{unaryFilter:{field:_p(t.field),op:"IS_NOT_NAN"}};if(Y$(t.value))return{unaryFilter:{field:_p(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_p(t.field),op:xme(t.op),value:t.value}}}(n):n instanceof Io?function(t){const r=t.getFilters().map(i=>d7(i));return r.length===1?r[0]:{compositeFilter:{op:_me(t.op),filters:r}}}(n):Se(54877,{filter:n})}function Ame(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function h7(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t,r,i,s=Te.min(),o=Te.min(),a=ur.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ku(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ku(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sme{constructor(e){this.yt=e}}function Eme(n){const e=vme({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Sk(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tme{constructor(){this.Cn=new Cme}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(nd.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(nd.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class Cme{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mn(wt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mn(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},f7=41943040;class fi{static withCacheSize(e){return new fi(e,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fi.DEFAULT_COLLECTION_PERCENTILE=10,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fi.DEFAULT=new fi(f7,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fi.DISABLED=new fi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zg(0)}static cr(){return new zg(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="LruGarbageCollector",Pme=1048576;function h3([n,e],[t,r]){const i=Ve(n,t);return i===0?Ve(e,r):i}class Ime{constructor(e){this.Ir=e,this.buffer=new Mn(h3),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();h3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kme{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(d3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){py(t)?de(d3,"Ignoring IndexedDB error during garbage collection: ",t):await fy(t)}await this.Vr(3e5)})}}class Rme{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ne.resolve($T.ce);const r=new Ime(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(u3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),u3):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),wp()<=$e.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function Nme(n,e){return new Rme(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ome{constructor(){this.changes=new Jf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mme{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dme{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&gb(r.mutation,i,wo.empty(),Rt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Be()){const i=Qd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=_v();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Qd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Be()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=rc();const o=mb(),a=function(){return mb()}();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Zf)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),gb(u.mutation,c,u.mutation.getFieldMask(),Rt.now())):o.set(c.key,wo.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>a.set(c,new Mme(u,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,t){const r=mb();let i=new Kt((o,a)=>o-a),s=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||wo.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||Be()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=KW();u.forEach(h=>{if(!s.has(h)){const m=e7(t.get(h),r.get(h));m!==null&&d.set(h,m),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return ne.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return xe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):UW(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ne.resolve(Qd());let a=Zb,l=s;return o.next(c=>ne.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?ne.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Be())).next(u=>({batchId:a,changes:qW(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next(r=>{let i=_v();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=_v();return this.indexManager.getCollectionParents(e,s).next(a=>ne.forEach(a,l=>{const c=function(d,h){return new my(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Cr.newInvalidDocument(u)))});let a=_v();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&gb(u.mutation,c,wo.empty(),Rt.now()),HT(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lme{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ca(i.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:Eme(i.bundledQuery),readTime:Ca(i.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jme{constructor(){this.overlays=new Kt(xe.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qd();return ne.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const i=Qd(),s=t.length+1,o=new xe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Kt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Qd(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Qd(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return ne.resolve(a)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tme(t,r));let s=this.qr.get(t);s===void 0&&(s=Be(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fme{constructor(){this.sessionToken=ur.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.Qr=new Mn(Un.$r),this.Ur=new Mn(Un.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Un(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Un(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new xe(new wt([])),r=new Un(t,e),i=new Un(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new wt([])),r=new Un(t,e),i=new Un(t,e+1);let s=Be();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Un(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Un{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||Ve(e.Yr,t.Yr)}static Kr(e,t){return Ve(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $me{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Mn(Un.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new eme(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Un(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?qM:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Un(t,0),i=new Un(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(Ve);return t.forEach(i=>{const s=new Un(i,0),o=new Un(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),ne.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;xe.isDocumentKey(s)||(s=s.child(""));const o=new Un(new xe(s),0);let a=new Mn(Ve);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)},o),ne.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ne.forEach(t.mutations,i=>{const s=new Un(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new Un(t,0),i=this.Zr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vme{constructor(e){this.ri=e,this.docs=function(){return new Kt(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Cr.newInvalidDocument(t))}getEntries(e,t){let r=rc();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Cr.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=rc();const o=t.path,a=new xe(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||mpe(ppe(u),r)<=0||(i.has(u.key)||HT(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ne.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Se(9500)}ii(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Bme(this)}getSize(e){return ne.resolve(this.size)}}class Bme extends Ome{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zme{constructor(e){this.persistence=e,this.si=new Jf(t=>XM(t),QM),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new nD,this.targetCount=0,this.ai=zg.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new zg(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ne.waitFor(s).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ne.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e,t){this.ui={},this.overlays={},this.ci=new $T(0),this.li=!1,this.li=!0,this.hi=new Fme,this.referenceDelegate=e(this),this.Pi=new zme(this),this.indexManager=new Tme,this.remoteDocumentCache=function(i){return new Vme(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Sme(t),this.Ii=new Lme(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jme,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new $me(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){de("MemoryPersistence","Starting transaction:",e);const i=new Ume(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return ne.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class Ume extends ype{constructor(e){super(),this.currentSequenceNumber=e}}class rD{constructor(e){this.persistence=e,this.Ri=new nD,this.Vi=null}static mi(e){return new rD(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,r=>{const i=xe.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,Te.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class NS{constructor(e,t){this.persistence=e,this.pi=new Jf(r=>wpe(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Nme(this,t)}static mi(e,t){return new NS(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return ne.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?ne.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Te.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=H1(e.data.value)),t}br(e,t,r){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ne.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Be(),i=Be();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new iD(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hme{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wme{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Lle()?8:vpe(Nr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Hme;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(wp()<=$e.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",xp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(wp()<=$e.DEBUG&&de("QueryEngine","Query:",xp(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(wp()<=$e.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",xp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ea(t))):ne.resolve())}ys(e,t){if(e3(t))return ne.resolve(null);let r=Ea(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Sk(t,null,"F"),r=Ea(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Be(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(t,a);return this.Cs(t,c,o,l.readTime)?this.ys(e,Sk(t,null,"F")):this.vs(e,c,t,l)}))})))}ws(e,t,r,i){return e3(t)||i.isEqual(Te.min())?ne.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(t,s);return this.Cs(t,o,r,i)?ne.resolve(null):(wp()<=$e.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xp(t)),this.vs(e,o,t,fpe(i,Zb)).next(a=>a))})}Ds(e,t){let r=new Mn(WW(e));return t.forEach((i,s)=>{HT(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return wp()<=$e.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",xp(t)),this.ps.getDocumentsMatchingQuery(e,t,nd.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="LocalStore",Gme=3e8;class qme{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Kt(Ve),this.xs=new Jf(s=>XM(s),QM),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Dme(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Kme(n,e,t,r){return new qme(n,e,t,r)}async function m7(n,e){const t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Be();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function Yme(n,e){const t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,h=d.keys();let m=ne.resolve();return h.forEach(y=>{m=m.next(()=>u.getEntry(l,y)).next(g=>{const b=c.docVersions.get(y);nt(b!==null,48541),g.version.compareTo(b)<0&&(d.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),u.addEntry(g)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Be();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function g7(n){const e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Xme(n,e){const t=Ie(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(t.Pi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Pi.addMatchingKeys(s,u.addedDocuments,d)));let m=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(ur.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(d,m),function(g,b,w){return g.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=Gme?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,m,u)&&a.push(t.Pi.updateTargetData(s,m))});let l=rc(),c=Be();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Qme(s,o,e.documentUpdates).next(u=>{l=u.ks,c=u.qs})),!r.isEqual(Te.min())){const u=t.Pi.getLastRemoteSnapshotVersion(s).next(d=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return ne.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ms=i,s))}function Qme(n,e,t){let r=Be(),i=Be();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=rc();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):de(sD,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:i}})}function Jme(n,e){const t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qM),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zme(n,e){const t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,ne.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new ku(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function Ik(n,e,t){const r=Ie(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!py(o))throw o;de(sD,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function f3(n,e,t){const r=Ie(n);let i=Te.min(),s=Be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=Ie(l),h=d.xs.get(u);return h!==void 0?ne.resolve(d.Ms.get(h)):d.Pi.getTargetData(c,u)}(r,o,Ea(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:Te.min(),t?s:Be())).next(a=>(ege(r,Fpe(e),a),{documents:a,Qs:s})))}function ege(n,e,t){let r=n.Os.get(e)||Te.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}class p3{constructor(){this.activeTargetIds=Hpe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tge{constructor(){this.Mo=new p3,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new p3,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nge{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3="ConnectivityMonitor";class g3{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(m3,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(m3,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H_=null;function kk(){return H_===null?H_=function(){return 268435456+Math.round(2147483648*Math.random())}():H_++,"0x"+H_.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="RestConnection",rge={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ige{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===CS?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const o=kk(),a=this.zo(e,t.toUriEncodedString());de(JP,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:c}=new URL(a),u=cy(c);return this.Jo(e,a,l,r,u).then(d=>(de(JP,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Fg(JP,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hy}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){const r=rge[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sge{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="WebChannelConnection";class oge extends ige{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const o=kk();return new Promise((a,l)=>{const c=new yW;c.setWithCredentials(!0),c.listenOnce(vW.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case U1.NO_ERROR:const d=c.getResponseJson();de(gr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case U1.TIMEOUT:de(gr,`RPC '${e}' ${o} timed out`),l(new ue(ee.DEADLINE_EXCEEDED,"Request time out"));break;case U1.HTTP_ERROR:const h=c.getStatus();if(de(gr,`RPC '${e}' ${o} failed with status:`,h,"response text:",c.getResponseText()),h>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const g=function(w){const x=w.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(x)>=0?x:ee.UNKNOWN}(y.status);l(new ue(g,y.message))}else l(new ue(ee.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ue(ee.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{de(gr,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);de(gr,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",u,r,15)})}T_(e,t,r){const i=kk(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xW(),a=wW(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");de(gr,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);this.I_(d);let h=!1,m=!1;const y=new sge({Yo:b=>{m?de(gr,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(h||(de(gr,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),de(gr,`RPC '${e}' stream ${i} sending:`,b),d.send(b))},Zo:()=>d.close()}),g=(b,w,x)=>{b.listen(w,_=>{try{x(_)}catch(S){setTimeout(()=>{throw S},0)}})};return g(d,xv.EventType.OPEN,()=>{m||(de(gr,`RPC '${e}' stream ${i} transport opened.`),y.o_())}),g(d,xv.EventType.CLOSE,()=>{m||(m=!0,de(gr,`RPC '${e}' stream ${i} transport closed`),y.a_(),this.E_(d))}),g(d,xv.EventType.ERROR,b=>{m||(m=!0,Fg(gr,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),y.a_(new ue(ee.UNAVAILABLE,"The operation could not be completed")))}),g(d,xv.EventType.MESSAGE,b=>{var w;if(!m){const x=b.data[0];nt(!!x,16349);const _=x,S=(_==null?void 0:_.error)||((w=_[0])==null?void 0:w.error);if(S){de(gr,`RPC '${e}' stream ${i} received error:`,S);const P=S.status;let N=function(k){const M=pn[k];if(M!==void 0)return r7(M)}(P),T=S.message;N===void 0&&(N=ee.INTERNAL,T="Unknown error status: "+P+" with message "+S.message),m=!0,y.a_(new ue(N,T)),d.close()}else de(gr,`RPC '${e}' stream ${i} received:`,x),y.u_(x)}}),g(a,bW.STAT_EVENT,b=>{b.stat===yk.PROXY?de(gr,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===yk.NOPROXY&&de(gr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function ZP(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(n){return new ume(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&de("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3="PersistentStream";class v7{constructor(e,t,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new y7(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(nc(t.toString()),nc("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new ue(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return de(y3,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(de(y3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class age extends v7{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=fme(this.serializer,e),r=function(s){if(!("targetChange"in s))return Te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Te.min():o.readTime?Ca(o.readTime):Te.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Pk(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=_k(l)?{documents:gme(s,l)}:{query:yme(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=o7(s,o.resumeToken);const c=Ek(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Te.min())>0){a.readTime=RS(s,o.snapshotVersion.toTimestamp());const c=Ek(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=bme(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Pk(this.serializer),t.removeTarget=e,this.q_(t)}}class lge extends v7{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=mme(e.writeResults,e.commitTime),r=Ca(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Pk(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>pme(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cge{}class uge extends cge{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ue(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Tk(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ue(ee.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Tk(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(ee.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class dge{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nc(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="RemoteStore";class hge{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ep(this)&&(de(Df,"Restarting streams for network reachability change."),await async function(l){const c=Ie(l);c.Ea.add(4),await Fx(c),c.Ra.set("Unknown"),c.Ea.delete(4),await YT(c)}(this))})}),this.Ra=new dge(r,i)}}async function YT(n){if(ep(n))for(const e of n.da)await e(!0)}async function Fx(n){for(const e of n.da)await e(!1)}function b7(n,e){const t=Ie(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),cD(t)?lD(t):gy(t).O_()&&aD(t,e))}function oD(n,e){const t=Ie(n),r=gy(t);t.Ia.delete(e),r.O_()&&w7(t,e),t.Ia.size===0&&(r.O_()?r.L_():ep(t)&&t.Ra.set("Unknown"))}function aD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gy(n).Y_(e)}function w7(n,e){n.Va.Ue(e),gy(n).Z_(e)}function lD(n){n.Va=new ome({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),gy(n).start(),n.Ra.ua()}function cD(n){return ep(n)&&!gy(n).x_()&&n.Ia.size>0}function ep(n){return Ie(n).Ea.size===0}function x7(n){n.Va=void 0}async function fge(n){n.Ra.set("Online")}async function pge(n){n.Ia.forEach((e,t)=>{aD(n,e)})}async function mge(n,e){x7(n),cD(n)?(n.Ra.ha(e),lD(n)):n.Ra.set("Unknown")}async function gge(n,e,t){if(n.Ra.set("Online"),e instanceof s7&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(n,e)}catch(r){de(Df,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await OS(n,r)}else if(e instanceof q1?n.Va.Ze(e):e instanceof i7?n.Va.st(e):n.Va.tt(e),!t.isEqual(Te.min()))try{const r=await g7(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.Ia.get(c);u&&s.Ia.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.Ia.get(l);if(!u)return;s.Ia.set(l,u.withResumeToken(ur.EMPTY_BYTE_STRING,u.snapshotVersion)),w7(s,l);const d=new ku(u.target,l,c,u.sequenceNumber);aD(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){de(Df,"Failed to raise snapshot:",r),await OS(n,r)}}async function OS(n,e,t){if(!py(e))throw e;n.Ea.add(1),await Fx(n),n.Ra.set("Offline"),t||(t=()=>g7(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{de(Df,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await YT(n)})}function _7(n,e){return e().catch(t=>OS(n,t,e))}async function XT(n){const e=Ie(n),t=od(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qM;for(;yge(e);)try{const i=await Jme(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,vge(e,i)}catch(i){await OS(e,i)}A7(e)&&S7(e)}function yge(n){return ep(n)&&n.Ta.length<10}function vge(n,e){n.Ta.push(e);const t=od(n);t.O_()&&t.X_&&t.ea(e.mutations)}function A7(n){return ep(n)&&!od(n).x_()&&n.Ta.length>0}function S7(n){od(n).start()}async function bge(n){od(n).ra()}async function wge(n){const e=od(n);for(const t of n.Ta)e.ea(t.mutations)}async function xge(n,e,t){const r=n.Ta.shift(),i=ZM.from(r,e,t);await _7(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await XT(n)}async function _ge(n,e){e&&od(n).X_&&await async function(r,i){if(function(o){return rme(o)&&o!==ee.ABORTED}(i.code)){const s=r.Ta.shift();od(r).B_(),await _7(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await XT(r)}}(n,e),A7(n)&&S7(n)}async function v3(n,e){const t=Ie(n);t.asyncQueue.verifyOperationInProgress(),de(Df,"RemoteStore received new credentials");const r=ep(t);t.Ea.add(3),await Fx(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await YT(t)}async function Age(n,e){const t=Ie(n);e?(t.Ea.delete(2),await YT(t)):e||(t.Ea.add(2),await Fx(t),t.Ra.set("Unknown"))}function gy(n){return n.ma||(n.ma=function(t,r,i){const s=Ie(t);return s.sa(),new age(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:fge.bind(null,n),t_:pge.bind(null,n),r_:mge.bind(null,n),H_:gge.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),cD(n)?lD(n):n.Ra.set("Unknown")):(await n.ma.stop(),x7(n))})),n.ma}function od(n){return n.fa||(n.fa=function(t,r,i){const s=Ie(t);return s.sa(),new lge(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:bge.bind(null,n),r_:_ge.bind(null,n),ta:wge.bind(null,n),na:xge.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await XT(n)):(await n.fa.stop(),n.Ta.length>0&&(de(Df,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Hu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new uD(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dD(n,e){if(nc("AsyncQueue",`${e}: ${n}`),py(n))return new ue(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{static emptySet(e){return new lm(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||xe.comparator(t.key,r.key):(t,r)=>xe.comparator(t.key,r.key),this.keyedMap=_v(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new lm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.ga=new Kt(xe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ug{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Ug(e,t,lm.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&UT(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sge{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Ege{constructor(){this.queries=w3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ie(t),s=i.queries;i.queries=w3(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new ue(ee.ABORTED,"Firestore shutting down"))}}function w3(){return new Jf(n=>HW(n),UT)}async function E7(n,e){const t=Ie(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Sge,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=dD(o,`Initialization of query '${xp(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&hD(t)}async function T7(n,e){const t=Ie(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Tge(n,e){const t=Ie(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&hD(t)}function Cge(n,e,t){const r=Ie(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function hD(n){n.Ca.forEach(e=>{e.next()})}var Rk,x3;(x3=Rk||(Rk={})).Ma="default",x3.Cache="cache";class C7{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ug(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ug.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rk.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e){this.key=e}}class I7{constructor(e){this.key=e}}class Pge{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=WW(e),this.tu=new lm(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new b3,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),m=HT(this.query,d)?d:null,y=!!h&&this.mutatedKeys.has(h.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let b=!1;h&&m?h.data.isEqual(m.data)?y!==g&&(r.track({type:3,doc:m}),b=!0):this.su(h,m)||(r.track({type:2,doc:m}),b=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!h&&m?(r.track({type:0,doc:m}),b=!0):h&&!m&&(r.track({type:1,doc:h}),b=!0,(l||c)&&(a=!0)),b&&(m?(o=o.add(m),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((u,d)=>function(m,y){const g=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:b})}};return g(m)-g(y)}(u.type,d.type)||this.eu(u.doc,d.doc)),this.ou(r),i=i??!1;const a=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Ug(this.query,e.tu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new b3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new I7(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new P7(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ug.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const fD="SyncEngine";class Ige{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class kge{constructor(e){this.key=e,this.hu=!1}}class Rge{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Jf(a=>HW(a),UT),this.Iu=new Map,this.Eu=new Set,this.du=new Kt(xe.comparator),this.Au=new Map,this.Ru=new nD,this.Vu={},this.mu=new Map,this.fu=zg.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Nge(n,e,t=!0){const r=D7(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await k7(r,e,t,!0),i}async function Oge(n,e){const t=D7(n);await k7(t,e,!0,!1)}async function k7(n,e,t,r){const i=await Zme(n.localStore,Ea(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await Mge(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&b7(n.remoteStore,i),a}async function Mge(n,e,t,r,i){n.pu=(d,h,m)=>async function(g,b,w,x){let _=b.view.ru(w);_.Cs&&(_=await f3(g.localStore,b.query,!1).then(({documents:T})=>b.view.ru(T,_)));const S=x&&x.targetChanges.get(b.targetId),P=x&&x.targetMismatches.get(b.targetId)!=null,N=b.view.applyChanges(_,g.isPrimaryClient,S,P);return A3(g,b.targetId,N.au),N.snapshot}(n,d,h,m);const s=await f3(n.localStore,e,!0),o=new Pge(e,s.Qs),a=o.ru(s.documents),l=jx.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);A3(n,t,c.au);const u=new Ige(e,t,o);return n.Tu.set(e,u),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),c.snapshot}async function Dge(n,e,t){const r=Ie(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!UT(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ik(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&oD(r.remoteStore,i.targetId),Nk(r,i.targetId)}).catch(fy)):(Nk(r,i.targetId),await Ik(r.localStore,i.targetId,!0))}async function Lge(n,e){const t=Ie(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),oD(t.remoteStore,r.targetId))}async function jge(n,e,t){const r=Hge(n);try{const i=await function(o,a){const l=Ie(o),c=Rt.now(),u=a.reduce((m,y)=>m.add(y.key),Be());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=rc(),g=Be();return l.Ns.getEntries(m,u).next(b=>{y=b,y.forEach((w,x)=>{x.isValidDocument()||(g=g.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(b=>{d=b;const w=[];for(const x of a){const _=Jpe(x,d.get(x.key).overlayedDocument);_!=null&&w.push(new Zf(x.key,_,LW(_.value.mapValue),Ta.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(b=>{h=b;const w=b.applyToLocalDocumentSet(d,g);return l.documentOverlayCache.saveOverlays(m,b.batchId,w)})}).then(()=>({batchId:h.batchId,changes:qW(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Kt(Ve)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,i.batchId,t),await $x(r,i.changes),await XT(r.remoteStore)}catch(i){const s=dD(i,"Failed to persist write");t.reject(s)}}async function R7(n,e){const t=Ie(n);try{const r=await Xme(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Au.get(s);o&&(nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?nt(o.hu,14607):i.removedDocuments.size>0&&(nt(o.hu,42227),o.hu=!1))}),await $x(t,r,e)}catch(r){await fy(r)}}function _3(n,e,t){const r=Ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ie(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const h of d.Sa)h.va(a)&&(c=!0)}),c&&hD(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Fge(n,e,t){const r=Ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Kt(xe.comparator);o=o.insert(s,Cr.newNoDocument(s,Te.min()));const a=Be().add(s),l=new qT(Te.min(),new Map,new Kt(Ve),o,a);await R7(r,l),r.du=r.du.remove(s),r.Au.delete(e),pD(r)}else await Ik(r.localStore,e,!1).then(()=>Nk(r,e,t)).catch(fy)}async function $ge(n,e){const t=Ie(n),r=e.batch.batchId;try{const i=await Yme(t.localStore,e);O7(t,r,null),N7(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await $x(t,i)}catch(i){await fy(i)}}async function Vge(n,e,t){const r=Ie(n);try{const i=await function(o,a){const l=Ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(nt(d!==null,37113),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);O7(r,e,t),N7(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await $x(r,i)}catch(i){await fy(i)}}function N7(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function O7(n,e,t){const r=Ie(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Nk(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||M7(n,r)})}function M7(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(oD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),pD(n))}function A3(n,e,t){for(const r of t)r instanceof P7?(n.Ru.addReference(r.key,e),Bge(n,r)):r instanceof I7?(de(fD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||M7(n,r.key)):Se(19791,{wu:r})}function Bge(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(de(fD,"New document in limbo: "+t),n.Eu.add(r),pD(n))}function pD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new xe(wt.fromString(e)),r=n.fu.next();n.Au.set(r,new kge(t)),n.du=n.du.insert(t,r),b7(n.remoteStore,new ku(Ea(zT(t.path)),r,"TargetPurposeLimboResolution",$T.ce))}}async function $x(n,e,t){const r=Ie(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))==null?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=iD.As(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,c){const u=Ie(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ne.forEach(c,h=>ne.forEach(h.Es,m=>u.persistence.referenceDelegate.addReference(d,h.targetId,m)).next(()=>ne.forEach(h.ds,m=>u.persistence.referenceDelegate.removeReference(d,h.targetId,m)))))}catch(d){if(!py(d))throw d;de(sD,"Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const m=u.Ms.get(h),y=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(y);u.Ms=u.Ms.insert(h,g)}}}(r.localStore,s))}async function zge(n,e){const t=Ie(n);if(!t.currentUser.isEqual(e)){de(fD,"User change. New user:",e.toKey());const r=await m7(t.localStore,e);t.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new ue(ee.CANCELLED,o))})}),s.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $x(t,r.Ls)}}function Uge(n,e){const t=Ie(n),r=t.Au.get(e);if(r&&r.hu)return Be().add(r.key);{let i=Be();const s=t.Iu.get(e);if(!s)return i;for(const o of s){const a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function D7(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=R7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uge.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fge.bind(null,e),e.Pu.H_=Tge.bind(null,e.eventManager),e.Pu.yu=Cge.bind(null,e.eventManager),e}function Hge(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$ge.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vge.bind(null,e),e}class MS{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=KT(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Kme(this.persistence,new Wme,e.initialUser,this.serializer)}Cu(e){return new p7(rD.mi,this.serializer)}Du(e){return new tge}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}MS.provider={build:()=>new MS};class Wge extends MS{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){nt(this.persistence.referenceDelegate instanceof NS,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kme(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?fi.withCacheSize(this.cacheSizeBytes):fi.DEFAULT;return new p7(r=>NS.mi(r,t),this.serializer)}}class Ok{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_3(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zge.bind(null,this.syncEngine),await Age(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ege}()}createDatastore(e){const t=KT(e.databaseInfo.databaseId),r=function(s){return new oge(s)}(e.databaseInfo);return function(s,o,a,l){return new uge(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new hge(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>_3(this.syncEngine,t,0),function(){return g3.v()?new g3:new nge}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,u){const d=new Rge(i,s,o,a,l,c);return u&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Ie(i);de(Df,"RemoteStore shutting down."),s.Ea.add(5),await Fx(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ok.provider={build:()=>new Ok};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nc("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="FirestoreClient";class Gge{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Er.UNAUTHENTICATED,this.clientId=GM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{de(ad,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(de(ad,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=dD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function eI(n,e){n.asyncQueue.verifyOperationInProgress(),de(ad,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await m7(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function S3(n,e){n.asyncQueue.verifyOperationInProgress();const t=await qge(n);de(ad,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>v3(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>v3(e.remoteStore,i)),n._onlineComponents=e}async function qge(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(ad,"Using user provided OfflineComponentProvider");try{await eI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ee.FAILED_PRECONDITION||i.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Fg("Error using user provided cache. Falling back to memory cache: "+t),await eI(n,new MS)}}else de(ad,"Using default OfflineComponentProvider"),await eI(n,new Wge(void 0));return n._offlineComponents}async function j7(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(ad,"Using user provided OnlineComponentProvider"),await S3(n,n._uninitializedComponentsProvider._online)):(de(ad,"Using default OnlineComponentProvider"),await S3(n,new Ok))),n._onlineComponents}function Kge(n){return j7(n).then(e=>e.syncEngine)}async function Mk(n){const e=await j7(n),t=e.eventManager;return t.onListen=Nge.bind(null,e.syncEngine),t.onUnlisten=Dge.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Oge.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Lge.bind(null,e.syncEngine),t}function Yge(n,e,t={}){const r=new Hu;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new L7({next:h=>{u.Nu(),o.enqueueAndForget(()=>T7(s,d));const m=h.docs.has(a);!m&&h.fromCache?c.reject(new ue(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&l&&l.source==="server"?c.reject(new ue(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new C7(zT(a.path),u,{includeMetadataChanges:!0,qa:!0});return E7(s,d)}(await Mk(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7="firestore.googleapis.com",T3=!0;class C3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$7,this.ssl=T3}else this.host=e.host,this.ssl=e.ssl??T3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=f7;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Pme)throw new ue(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hpe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F7(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class QT{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new npe;switch(r.type){case"firstParty":return new ope(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=E3.get(t);r&&(de("ComponentProvider","Removing Datastore"),E3.delete(t),r.terminate())}(this),Promise.resolve()}}function Xge(n,e,t,r={}){var c;n=zl(n,QT);const i=cy(e),s=n._getSettings(),o={...s,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;i&&(eH(`https://${a}`),tH("Firestore",!0)),s.host!==$7&&s.host!==a&&Fg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!td(l,o)&&(n._setSettings(l),r.mockUserToken)){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=Er.MOCK_USER;else{u=Ple(r.mockUserToken,(c=n._app)==null?void 0:c.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new ue(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Er(h)}n._authCredentials=new rpe(new AW(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new tp(this.firestore,e,this._query)}}class ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Dx(t,ln._jsonSchema))return new ln(e,r||null,new xe(wt.fromString(t.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:wn("string",ln._jsonSchemaVersion),referencePath:wn("string")};class Wu extends tp{constructor(e,t,r){super(e,t,zT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new xe(e))}withConverter(e){return new Wu(this.firestore,e,this._path)}}function Wr(n,e,...t){if(n=St(n),SW("collection","path",e),n instanceof QT){const r=wt.fromString(e,...t);return V$(r),new Wu(n,null,r)}{if(!(n instanceof ln||n instanceof Wu))throw new ue(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wt.fromString(e,...t));return V$(r),new Wu(n.firestore,null,r)}}function tn(n,e,...t){if(n=St(n),arguments.length===1&&(e=GM.newId()),SW("doc","path",e),n instanceof QT){const r=wt.fromString(e,...t);return $$(r),new ln(n,null,new xe(r))}{if(!(n instanceof ln||n instanceof Wu))throw new ue(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wt.fromString(e,...t));return $$(r),new ln(n.firestore,n instanceof Wu?n.converter:null,new xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3="AsyncQueue";class I3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new y7(this,"async_queue_retry"),this._c=()=>{const r=ZP();r&&de(P3,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=ZP();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ZP();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Hu;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!py(e))throw e;de(P3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,nc("INTERNAL UNHANDLED ERROR: ",k3(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=uD.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Se(47125,{Pc:k3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function k3(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class Hg extends QT{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new I3,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new I3(e),this._firestoreClient=void 0,await e}}}function Qge(n,e){const t=typeof n=="object"?n:NT(),r=typeof n=="string"?n:CS,i=vd(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Tle("firestore");s&&Xge(i,...s)}return i}function mD(n){if(n._terminated)throw new ue(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Jge(n),n._firestoreClient}function Jge(n){var r,i,s;const e=n._freezeSettings(),t=function(a,l,c,u){return new Ape(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,F7(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Gge(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cs(ur.fromBase64String(e))}catch(t){throw new ue(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cs(ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dx(e,Cs._jsonSchema))return Cs.fromBase64String(e.bytes)}}Cs._jsonSchemaVersion="firestore/bytes/1.0",Cs._jsonSchema={type:wn("string",Cs._jsonSchemaVersion),bytes:wn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pa._jsonSchemaVersion}}static fromJSON(e){if(Dx(e,Pa._jsonSchema))return new Pa(e.latitude,e.longitude)}}Pa._jsonSchemaVersion="firestore/geoPoint/1.0",Pa._jsonSchema={type:wn("string",Pa._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ia._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dx(e,Ia._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ia(e.vectorValues);throw new ue(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ia._jsonSchemaVersion="firestore/vectorValue/1.0",Ia._jsonSchema={type:wn("string",Ia._jsonSchemaVersion),vectorValues:wn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zge=/^__.*__$/;class eye{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Zf(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lx(e,this.data,t,this.fieldTransforms)}}function V7(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:n})}}class vD{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vD({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return DS(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(V7(this.Ac)&&Zge.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class tye{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||KT(e)}Cc(e,t,r,i=!1){return new vD({Ac:e,methodName:t,Dc:r,path:or.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bD(n){const e=n._freezeSettings(),t=KT(n._databaseId);return new tye(n._databaseId,!!e.ignoreUndefinedProperties,t)}function B7(n,e,t,r,i,s={}){const o=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);H7("Data must be an object, but it was:",o,r);const a=z7(r,o);let l,c;if(s.merge)l=new wo(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=rye(e,d,t);if(!o.contains(h))throw new ue(ee.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);sye(u,h)||u.push(h)}l=new wo(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new eye(new Ts(a),l,c)}class wD extends yD{_toFieldTransform(e){return new Kpe(e.path,new i0)}isEqual(e){return e instanceof wD}}function nye(n,e,t,r=!1){return xD(t,n.Cc(r?4:3,e))}function xD(n,e){if(U7(n=St(n)))return H7("Unsupported field value:",e,n),z7(n,e);if(n instanceof yD)return function(r,i){if(!V7(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=xD(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Wpe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Rt.fromDate(r);return{timestampValue:RS(i.serializer,s)}}if(r instanceof Rt){const s=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:RS(i.serializer,s)}}if(r instanceof Pa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cs)return{bytesValue:o7(i.serializer,r._byteString)};if(r instanceof ln){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:tD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ia)return function(o,a){return{mapValue:{fields:{[OW]:{stringValue:DW},[PS]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return JM(a.serializer,c)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${FT(r)}`)}(n,e)}function z7(n,e){const t={};return CW(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qf(n,(r,i)=>{const s=xD(i,e.mc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function U7(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Rt||n instanceof Pa||n instanceof Cs||n instanceof ln||n instanceof yD||n instanceof Ia)}function H7(n,e,t){if(!U7(t)||!EW(t)){const r=FT(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function rye(n,e,t){if((e=St(e))instanceof gD)return e._internalPath;if(typeof e=="string")return W7(n,e);throw DS("Field path arguments must be of type string or ",n,!1,void 0,t)}const iye=new RegExp("[~\\*/\\[\\]]");function W7(n,e,t){if(e.search(iye)>=0)throw DS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gD(...e.split("."))._internalPath}catch{throw DS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function DS(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ue(ee.INVALID_ARGUMENT,a+n+l)}function sye(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oye(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_D("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class oye extends G7{data(){return super.data()}}function _D(n,e){return typeof e=="string"?W7(n,e):e instanceof gD?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aye(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AD{}class q7 extends AD{}function a0(n,e,...t){let r=[];e instanceof AD&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof ED).length,a=s.filter(l=>l instanceof SD).length;if(o>1||o>0&&a>0)throw new ue(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class SD extends q7{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new SD(e,t,r)}_apply(e){const t=this._parse(e);return K7(e._query,t),new tp(e.firestore,e.converter,Ak(e._query,t))}_parse(e){const t=bD(e.firestore);return function(s,o,a,l,c,u,d){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ue(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){O3(d,u);const y=[];for(const g of d)y.push(N3(l,s,g));h={arrayValue:{values:y}}}else h=N3(l,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||O3(d,u),h=nye(a,o,d,u==="in"||u==="not-in");return vn.create(c,u,h)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class ED extends AD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ED(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Io.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)K7(o,l),o=Ak(o,l)}(e._query,t),new tp(e.firestore,e.converter,Ak(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class TD extends q7{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new TD(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new ue(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ue(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new r0(s,o)}(e._query,this._field,this._direction);return new tp(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new my(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function l0(n,e="asc"){const t=e,r=_D("orderBy",n);return TD._create(r,t)}function N3(n,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new ue(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UW(e)&&t.indexOf("/")!==-1)throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(wt.fromString(t));if(!xe.isDocumentKey(r))throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return K$(n,new xe(r))}if(t instanceof ln)return K$(n,t._key);throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${FT(t)}.`)}function O3(n,e){if(!Array.isArray(n)||n.length===0)throw new ue(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function K7(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ue(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lye{convertValue(e,t="none"){switch(sd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(id(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Qf(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var r,i,s;const t=(s=(i=(r=e.fields)==null?void 0:r[PS].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>on(o.doubleValue));return new Ia(t)}convertGeoPoint(e){return new Pa(on(e.latitude),on(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=BT(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(e0(e));default:return null}}convertTimestamp(e){const t=rd(e);return new Rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=wt.fromString(e);nt(h7(r),9688,{name:e});const i=new t0(r.get(1),r.get(3)),s=new xe(r.popFirst(5));return i.isEqual(t)||nc(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Sv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wf extends G7{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new K1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(_D("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wf._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}wf._jsonSchemaVersion="firestore/documentSnapshot/1.0",wf._jsonSchema={type:wn("string",wf._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class K1 extends wf{data(e={}){return super.data(e)}}class cm{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Sv(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new K1(this._firestore,this._userDataWriter,r.key,r,new Sv(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new K1(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sv(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new K1(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sv(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:cye(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=cm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=GM.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cye(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(n){n=zl(n,ln);const e=zl(n.firestore,Hg);return Yge(mD(e),n._key).then(t=>J7(e,n,t))}cm._jsonSchemaVersion="firestore/querySnapshot/1.0",cm._jsonSchema={type:wn("string",cm._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};class X7 extends lye{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function Nt(n,e,t){n=zl(n,ln);const r=zl(n.firestore,Hg),i=Y7(n.converter,e,t);return Q7(r,[B7(bD(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ta.none())])}function ma(n,e){const t=zl(n.firestore,Hg),r=tn(n),i=Y7(n.converter,e);return Q7(t,[B7(bD(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ta.exists(!1))]).then(()=>r)}function jf(n,...e){var l,c,u;n=St(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||R3(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(R3(e[r])){const d=e[r];e[r]=(l=d.next)==null?void 0:l.bind(d),e[r+1]=(c=d.error)==null?void 0:c.bind(d),e[r+2]=(u=d.complete)==null?void 0:u.bind(d)}let s,o,a;if(n instanceof ln)o=zl(n.firestore,Hg),a=zT(n._key.path),s={next:d=>{e[r]&&e[r](J7(o,n,d))},error:e[r+1],complete:e[r+2]};else{const d=zl(n,tp);o=zl(d.firestore,Hg),a=d._query;const h=new X7(o);s={next:m=>{e[r]&&e[r](new cm(o,h,d,m))},error:e[r+1],complete:e[r+2]},aye(n._query)}return function(h,m,y,g){const b=new L7(g),w=new C7(m,b,y);return h.asyncQueue.enqueueAndForget(async()=>E7(await Mk(h),w)),()=>{b.Nu(),h.asyncQueue.enqueueAndForget(async()=>T7(await Mk(h),w))}}(mD(o),a,i,s)}function Q7(n,e){return function(r,i){const s=new Hu;return r.asyncQueue.enqueueAndForget(async()=>jge(await Kge(r),i,s)),s.promise}(mD(n),e)}function J7(n,e,t){const r=t.docs.get(e._key),i=new X7(n);return new wf(n,i,e._key,r,new Sv(t.hasPendingWrites,t.fromCache),e.converter)}function gt(){return new wD("serverTimestamp")}(function(e,t=!0){(function(i){hy=i})(dy),Fs(new ls("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Hg(new ipe(r.getProvider("auth-internal")),new ape(o,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ue(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new t0(c.options.projectId,u)}(o,i),o);return s={useFetchStreams:t,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ei(D$,L$,e),Ei(D$,L$,"esm2020")})();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uye="/firebase-messaging-sw.js",dye="/firebase-cloud-messaging-push-scope",Z7="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hye="https://fcmregistrations.googleapis.com/v1",eG="google.c.a.c_id",fye="google.c.a.c_l",pye="google.c.a.ts",mye="google.c.a.e",M3=1e4;var D3;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(D3||(D3={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var c0;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(c0||(c0={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gye(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="fcm_token_details_db",yye=5,L3="fcm_token_object_Store";async function vye(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(tI))return null;let e=null;return(await RT(tI,yye,{upgrade:async(r,i,s,o)=>{if(i<2||!r.objectStoreNames.contains(L3))return;const a=o.objectStore(L3),l=await a.index("fcmSenderId").get(n);if(await a.clear(),!!l){if(i===2){const c=l;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:c.createTime??Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:Za(c.vapidKey)}}}else if(i===3){const c=l;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Za(c.auth),p256dh:Za(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Za(c.vapidKey)}}}else if(i===4){const c=l;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Za(c.auth),p256dh:Za(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Za(c.vapidKey)}}}}}})).close(),await VP(tI),await VP("fcm_vapid_details_db"),await VP("undefined"),bye(e)?e:null}function bye(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wye="firebase-messaging-database",xye=1,u0="firebase-messaging-store";let nI=null;function tG(){return nI||(nI=RT(wye,xye,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(u0)}}})),nI}async function _ye(n){const e=nG(n),r=await(await tG()).transaction(u0).objectStore(u0).get(e);if(r)return r;{const i=await vye(n.appConfig.senderId);if(i)return await CD(n,i),i}}async function CD(n,e){const t=nG(n),i=(await tG()).transaction(u0,"readwrite");return await i.objectStore(u0).put(e,t),await i.done,e}function nG({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aye={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ir=new yd("messaging","Messaging",Aye);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sye(n,e){const t=await ID(n),r=rG(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=await(await fetch(PD(n.appConfig),i)).json()}catch(o){throw Ir.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw Ir.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Ir.create("token-subscribe-no-token");return s.token}async function Eye(n,e){const t=await ID(n),r=rG(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${PD(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw Ir.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw Ir.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Ir.create("token-update-no-token");return s.token}async function Tye(n,e){const r={method:"DELETE",headers:await ID(n)};try{const s=await(await fetch(`${PD(n.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw Ir.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Ir.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function PD({projectId:n}){return`${hye}/projects/${n}/registrations`}async function ID({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function rG({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==Z7&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cye=7*24*60*60*1e3;async function Pye(n){const e=await kye(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Za(e.getKey("auth")),p256dh:Za(e.getKey("p256dh"))},r=await _ye(n.firebaseDependencies);if(r){if(Rye(r.subscriptionOptions,t))return Date.now()>=r.createTime+Cye?Iye(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{await Tye(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return j3(n.firebaseDependencies,t)}else return j3(n.firebaseDependencies,t)}async function Iye(n,e){try{const t=await Eye(n.firebaseDependencies,e),r={...e,token:t,createTime:Date.now()};return await CD(n.firebaseDependencies,r),t}catch(t){throw t}}async function j3(n,e){const r={token:await Sye(n,e),createTime:Date.now(),subscriptionOptions:e};return await CD(n,r),r.token}async function kye(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gye(e)})}function Rye(n,e){const t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return Nye(e,n),Oye(e,n),Mye(e,n),e}function Nye(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}function Oye(n,e){e.data&&(n.data=e.data)}function Mye(n,e){var i,s,o,a;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;n.fcmOptions={};const t=((s=e.fcmOptions)==null?void 0:s.link)??((o=e.notification)==null?void 0:o.click_action);t&&(n.fcmOptions.link=t);const r=(a=e.fcmOptions)==null?void 0:a.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dye(n){return typeof n=="object"&&!!n&&eG in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lye(n){if(!n||!n.options)throw rI("App Configuration Object");if(!n.name)throw rI("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw rI(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function rI(n){return Ir.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jye{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=Lye(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fye(n){try{n.swRegistration=await navigator.serviceWorker.register(uye,{scope:dye}),n.swRegistration.update().catch(()=>{}),await $ye(n.swRegistration)}catch(e){throw Ir.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function $ye(n){return new Promise((e,t)=>{const r=setTimeout(()=>t(new Error(`Service worker not registered after ${M3} ms`)),M3),i=n.installing||n.waiting;n.active?(clearTimeout(r),e()):i?i.onstatechange=s=>{var o;((o=s.target)==null?void 0:o.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vye(n,e){if(!e&&!n.swRegistration&&await Fye(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ir.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bye(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=Z7)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iG(n,e){if(!navigator)throw Ir.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Ir.create("permission-blocked");return await Bye(n,e==null?void 0:e.vapidKey),await Vye(n,e==null?void 0:e.serviceWorkerRegistration),Pye(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zye(n,e,t){const r=Uye(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[eG],message_name:t[fye],message_time:t[pye],message_device_time:Math.floor(Date.now()/1e3)})}function Uye(n){switch(n){case c0.NOTIFICATION_CLICKED:return"notification_open";case c0.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hye(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===c0.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(F3(t)):n.onMessageHandler.next(F3(t)));const r=t.data;Dye(r)&&r[mye]==="1"&&await zye(n,t.messageType,r)}const $3="@firebase/messaging",V3="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wye=n=>{const e=new jye(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>Hye(e,t)),e},Gye=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>iG(e,r)}};function qye(){Fs(new ls("messaging",Wye,"PUBLIC")),Fs(new ls("messaging-internal",Gye,"PRIVATE")),Ei($3,V3),Ei($3,V3,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kye(){try{await TM()}catch{return!1}return typeof window<"u"&&EM()&&rH()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yye(n,e){if(!navigator)throw Ir.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xye(n=NT()){return Kye().then(e=>{if(!e)throw Ir.create("unsupported-browser")},e=>{throw Ir.create("indexed-db-unsupported")}),vd(St(n),"messaging").getImmediate()}async function Qye(n,e){return n=St(n),iG(n,e)}function Jye(n,e){return n=St(n),Yye(n,e)}qye();const Zye={apiKey:"AIzaSyAdqAoT2IewbCknzqqMQ5En5lUIYWJv0e4",authDomain:"storagefinsight.firebaseapp.com",databaseURL:"https://storagefinsight-default-rtdb.firebaseio.com",projectId:"storagefinsight",storageBucket:"storagefinsight.firebasestorage.app",messagingSenderId:"822642518224",appId:"1:822642518224:web:7d03616bb2dcd6dc04d6d5",measurementId:"G-MJ3K9LWY3K"},JT=oH(Zye),nr=qH(JT);Jfe(JT);const tt=Qge(JT);async function sG(n){try{const e=tn(tt,"users",n);return await Nt(e,{isPro:!0,proUpgradedAt:gt()},{merge:!0}),console.log("User marked as Pro successfully"),!0}catch(e){return console.error("Error marking user as Pro:",e),!1}}async function oG(n){try{const e=tn(tt,"users",n);return await Nt(e,{isPro:!1,proRemovedAt:gt()},{merge:!0}),console.log("Pro status removed successfully"),!0}catch(e){return console.error("Error removing Pro status:",e),!1}}async function eve({title:n,body:e,userId:t}){return await ma(Wr(tt,"alerts"),{title:n,body:e,userId:t||null,createdAt:gt()})}const aG=Xye(JT);typeof window<"u"&&"Notification"in window&&Notification.requestPermission().then(n=>{n==="granted"&&Qye(aG,{vapidKey:"BPKX9IyCflfAa349rAJjUUWzcvy4qrjsilktExNe3L4FYT8T2-KC301xvikxQpJ_ksR-AME8K6w7hD0XCP_2VeU"}).then(e=>{e?console.log("FCM Token:",e):console.log("No registration token available.")}).catch(e=>{console.log("An error occurred while retrieving token. ",e)})});typeof window<"u"&&"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(n=>{console.log("Service Worker registered with scope:",n.scope)}).catch(n=>{console.log("Service Worker registration failed:",n)});Jye(aG,async n=>{console.log("Message received. ",n);const e=n.notification;e&&await eve({title:e.title||"New Alert",body:e.body||"You have a new message.",userId:"testUserId"})});var kD="Avatar",[tve,ZVe]=ac(kD),[nve,lG]=tve(kD),cG=A.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[i,s]=A.useState("idle");return p.jsx(nve,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:p.jsx(Re.span,{...r,ref:e})})});cG.displayName=kD;var uG="AvatarImage",dG=A.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...s}=n,o=lG(uG,t),a=rve(r,s.referrerPolicy),l=Rr(c=>{i(c),o.onImageLoadingStatusChange(c)});return To(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?p.jsx(Re.img,{...s,ref:e,src:r}):null});dG.displayName=uG;var hG="AvatarFallback",fG=A.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...i}=n,s=lG(hG,t),[o,a]=A.useState(r===void 0);return A.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&s.imageLoadingStatus!=="loaded"?p.jsx(Re.span,{...i,ref:e}):null});fG.displayName=hG;function rve(n,e){const[t,r]=A.useState("idle");return To(()=>{if(!n){r("error");return}let i=!0;const s=new window.Image,o=a=>()=>{i&&r(a)};return r("loading"),s.onload=o("loaded"),s.onerror=o("error"),s.src=n,e&&(s.referrerPolicy=e),()=>{i=!1}},[n,e]),t}var pG=cG,mG=dG,gG=fG;const Dk=A.forwardRef(({className:n,...e},t)=>p.jsx(pG,{ref:t,className:ce("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));Dk.displayName=pG.displayName;const Lk=A.forwardRef(({className:n,...e},t)=>p.jsx(mG,{ref:t,className:ce("aspect-square h-full w-full",n),...e}));Lk.displayName=mG.displayName;const jk=A.forwardRef(({className:n,...e},t)=>p.jsx(gG,{ref:t,className:ce("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));jk.displayName=gG.displayName;const yG=A.createContext(void 0),ive=({children:n})=>{const[e,t]=A.useState(null),[r,i]=A.useState(!1),[s,o]=A.useState(!0),a=async l=>{try{const c=tn(tt,"users",l);await Nt(c,{isPro:!0,proUpgradedAt:gt()},{merge:!0}),console.log("User marked as Pro successfully")}catch(c){console.error("Error marking user as Pro:",c)}};return A.useEffect(()=>{const l=Ox(nr,c=>{if(t(c),o(!1),c){const u=tn(tt,"users",c.uid),d=jf(u,h=>{if(h.exists()){const m=h.data();i(m.isPro||!1)}else i(!1)},h=>{console.error("Error listening to user document:",h),i(!1)});return()=>d()}else i(!1)});return()=>l()},[]),p.jsx(yG.Provider,{value:{user:e,isPro:r,loadingUser:s,markUserAsPro:a},children:n})},Oo=()=>{const n=A.useContext(yG);if(n===void 0)throw new Error("useUser must be used within a UserProvider");return n};var sve=A.createContext(void 0);function ZT(n){const e=A.useContext(sve);return n||e||"ltr"}var iI=0;function vG(){A.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??B3()),document.body.insertAdjacentElement("beforeend",n[1]??B3()),iI++,()=>{iI===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),iI--}},[])}function B3(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var sI="focusScope.autoFocusOnMount",oI="focusScope.autoFocusOnUnmount",z3={bubbles:!1,cancelable:!0},ove="FocusScope",RD=A.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=n,[a,l]=A.useState(null),c=Rr(i),u=Rr(s),d=A.useRef(null),h=qt(e,g=>l(g)),m=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let g=function(_){if(m.paused||!a)return;const S=_.target;a.contains(S)?d.current=S:Tc(d.current,{select:!0})},b=function(_){if(m.paused||!a)return;const S=_.relatedTarget;S!==null&&(a.contains(S)||Tc(d.current,{select:!0}))},w=function(_){if(document.activeElement===document.body)for(const P of _)P.removedNodes.length>0&&Tc(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const x=new MutationObserver(w);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),x.disconnect()}}},[r,a,m.paused]),A.useEffect(()=>{if(a){H3.add(m);const g=document.activeElement;if(!a.contains(g)){const w=new CustomEvent(sI,z3);a.addEventListener(sI,c),a.dispatchEvent(w),w.defaultPrevented||(ave(hve(bG(a)),{select:!0}),document.activeElement===g&&Tc(a))}return()=>{a.removeEventListener(sI,c),setTimeout(()=>{const w=new CustomEvent(oI,z3);a.addEventListener(oI,u),a.dispatchEvent(w),w.defaultPrevented||Tc(g??document.body,{select:!0}),a.removeEventListener(oI,u),H3.remove(m)},0)}}},[a,c,u,m]);const y=A.useCallback(g=>{if(!t&&!r||m.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(b&&w){const x=g.currentTarget,[_,S]=lve(x);_&&S?!g.shiftKey&&w===S?(g.preventDefault(),t&&Tc(_,{select:!0})):g.shiftKey&&w===_&&(g.preventDefault(),t&&Tc(S,{select:!0})):w===x&&g.preventDefault()}},[t,r,m.paused]);return p.jsx(Re.div,{tabIndex:-1,...o,ref:h,onKeyDown:y})});RD.displayName=ove;function ave(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Tc(r,{select:e}),document.activeElement!==t)return}function lve(n){const e=bG(n),t=U3(e,n),r=U3(e.reverse(),n);return[t,r]}function bG(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function U3(n,e){for(const t of n)if(!cve(t,{upTo:e}))return t}function cve(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function uve(n){return n instanceof HTMLInputElement&&"select"in n}function Tc(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&uve(n)&&e&&n.select()}}var H3=dve();function dve(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=W3(n,e),n.unshift(e)},remove(e){var t;n=W3(n,e),(t=n[0])==null||t.resume()}}}function W3(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function hve(n){return n.filter(e=>e.tagName!=="A")}function fve(n,e=[]){let t=[];function r(s,o){const a=A.createContext(o),l=t.length;t=[...t,o];function c(d){const{scope:h,children:m,...y}=d,g=(h==null?void 0:h[n][l])||a,b=A.useMemo(()=>y,Object.values(y));return p.jsx(g.Provider,{value:b,children:m})}function u(d,h){const m=(h==null?void 0:h[n][l])||a,y=A.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,pve(i,...e)]}function pve(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var aI="rovingFocusGroup.onEntryFocus",mve={bubbles:!1,cancelable:!0},eC="RovingFocusGroup",[Fk,wG,gve]=hT(eC),[yve,tC]=fve(eC,[gve]),[vve,bve]=yve(eC),xG=A.forwardRef((n,e)=>p.jsx(Fk.Provider,{scope:n.__scopeRovingFocusGroup,children:p.jsx(Fk.Slot,{scope:n.__scopeRovingFocusGroup,children:p.jsx(wve,{...n,ref:e})})}));xG.displayName=eC;var wve=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=n,h=A.useRef(null),m=qt(e,h),y=ZT(s),[g=null,b]=lc({prop:o,defaultProp:a,onChange:l}),[w,x]=A.useState(!1),_=Rr(c),S=wG(t),P=A.useRef(!1),[N,T]=A.useState(0);return A.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(aI,_),()=>C.removeEventListener(aI,_)},[_]),p.jsx(vve,{scope:t,orientation:r,dir:y,loop:i,currentTabStopId:g,onItemFocus:A.useCallback(C=>b(C),[b]),onItemShiftTab:A.useCallback(()=>x(!0),[]),onFocusableItemAdd:A.useCallback(()=>T(C=>C+1),[]),onFocusableItemRemove:A.useCallback(()=>T(C=>C-1),[]),children:p.jsx(Re.div,{tabIndex:w||N===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...n.style},onMouseDown:ve(n.onMouseDown,()=>{P.current=!0}),onFocus:ve(n.onFocus,C=>{const k=!P.current;if(C.target===C.currentTarget&&k&&!w){const M=new CustomEvent(aI,mve);if(C.currentTarget.dispatchEvent(M),!M.defaultPrevented){const L=S().filter(z=>z.focusable),F=L.find(z=>z.active),j=L.find(z=>z.id===g),H=[F,j,...L].filter(Boolean).map(z=>z.ref.current);SG(H,u)}}P.current=!1}),onBlur:ve(n.onBlur,()=>x(!1))})})}),_G="RovingFocusGroupItem",AG=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:s,...o}=n,a=Aa(),l=s||a,c=bve(_G,t),u=c.currentTabStopId===l,d=wG(t),{onFocusableItemAdd:h,onFocusableItemRemove:m}=c;return A.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),p.jsx(Fk.ItemSlot,{scope:t,id:l,focusable:r,active:i,children:p.jsx(Re.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:ve(n.onMouseDown,y=>{r?c.onItemFocus(l):y.preventDefault()}),onFocus:ve(n.onFocus,()=>c.onItemFocus(l)),onKeyDown:ve(n.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){c.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const g=Ave(y,c.orientation,c.dir);if(g!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let w=d().filter(x=>x.focusable).map(x=>x.ref.current);if(g==="last")w.reverse();else if(g==="prev"||g==="next"){g==="prev"&&w.reverse();const x=w.indexOf(y.currentTarget);w=c.loop?Sve(w,x+1):w.slice(x+1)}setTimeout(()=>SG(w))}})})})});AG.displayName=_G;var xve={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _ve(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function Ave(n,e,t){const r=_ve(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return xve[r]}function SG(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function Sve(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var EG=xG,TG=AG,Eve=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},fp=new WeakMap,W_=new WeakMap,G_={},lI=0,CG=function(n){return n&&(n.host||CG(n.parentNode))},Tve=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=CG(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},Cve=function(n,e,t,r){var i=Tve(e,Array.isArray(n)?n:[n]);G_[t]||(G_[t]=new WeakMap);var s=G_[t],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var m=h.getAttribute(r),y=m!==null&&m!=="false",g=(fp.get(h)||0)+1,b=(s.get(h)||0)+1;fp.set(h,g),s.set(h,b),o.push(h),g===1&&y&&W_.set(h,!0),b===1&&h.setAttribute(t,"true"),y||h.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",h,w)}})};return u(e),a.clear(),lI++,function(){o.forEach(function(d){var h=fp.get(d)-1,m=s.get(d)-1;fp.set(d,h),s.set(d,m),h||(W_.has(d)||d.removeAttribute(r),W_.delete(d)),m||d.removeAttribute(t)}),lI--,lI||(fp=new WeakMap,fp=new WeakMap,W_=new WeakMap,G_={})}},PG=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=Eve(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),Cve(r,i,t,"aria-hidden")):function(){return null}},ga=function(){return ga=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ga.apply(this,arguments)};function IG(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Pve(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var Y1="right-scroll-bar-position",X1="width-before-scroll-bar",Ive="with-scroll-bars-hidden",kve="--removed-body-scroll-bar-size";function cI(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function Rve(n,e){var t=A.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var Nve=typeof window<"u"?A.useLayoutEffect:A.useEffect,G3=new WeakMap;function Ove(n,e){var t=Rve(null,function(r){return n.forEach(function(i){return cI(i,r)})});return Nve(function(){var r=G3.get(t);if(r){var i=new Set(r),s=new Set(n),o=t.current;i.forEach(function(a){s.has(a)||cI(a,null)}),s.forEach(function(a){i.has(a)||cI(a,o)})}G3.set(t,n)},[n]),t}function Mve(n){return n}function Dve(n,e){e===void 0&&(e=Mve);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var o=e(s,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return i}function Lve(n){n===void 0&&(n={});var e=Dve(null);return e.options=ga({async:!0,ssr:!1},n),e}var kG=function(n){var e=n.sideCar,t=IG(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,ga({},t))};kG.isSideCarExport=!0;function jve(n,e){return n.useMedium(e),kG}var RG=Lve(),uI=function(){},nC=A.forwardRef(function(n,e){var t=A.useRef(null),r=A.useState({onScrollCapture:uI,onWheelCapture:uI,onTouchMoveCapture:uI}),i=r[0],s=r[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,d=n.shards,h=n.sideCar,m=n.noIsolation,y=n.inert,g=n.allowPinchZoom,b=n.as,w=b===void 0?"div":b,x=n.gapMode,_=IG(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,P=Ove([t,e]),N=ga(ga({},_),i);return A.createElement(A.Fragment,null,u&&A.createElement(S,{sideCar:RG,removeScrollBar:c,shards:d,noIsolation:m,inert:y,setCallbacks:s,allowPinchZoom:!!g,lockRef:t,gapMode:x}),o?A.cloneElement(A.Children.only(a),ga(ga({},N),{ref:P})):A.createElement(w,ga({},N,{className:l,ref:P}),a))});nC.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nC.classNames={fullWidth:X1,zeroRight:Y1};var Fve=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $ve(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=Fve();return e&&n.setAttribute("nonce",e),n}function Vve(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function Bve(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var zve=function(){var n=0,e=null;return{add:function(t){n==0&&(e=$ve())&&(Vve(e,t),Bve(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Uve=function(){var n=zve();return function(e,t){A.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},NG=function(){var n=Uve(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},Hve={left:0,top:0,right:0,gap:0},dI=function(n){return parseInt(n||"",10)||0},Wve=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[dI(t),dI(r),dI(i)]},Gve=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Hve;var e=Wve(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},qve=NG(),um="data-scroll-locked",Kve=function(n,e,t,r){var i=n.left,s=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(Ive,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(um,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Y1,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(X1,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Y1," .").concat(Y1,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(X1," .").concat(X1,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(um,`] {
    `).concat(kve,": ").concat(a,`px;
  }
`)},q3=function(){var n=parseInt(document.body.getAttribute(um)||"0",10);return isFinite(n)?n:0},Yve=function(){A.useEffect(function(){return document.body.setAttribute(um,(q3()+1).toString()),function(){var n=q3()-1;n<=0?document.body.removeAttribute(um):document.body.setAttribute(um,n.toString())}},[])},Xve=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;Yve();var s=A.useMemo(function(){return Gve(i)},[i]);return A.createElement(qve,{styles:Kve(s,!e,i,t?"":"!important")})},$k=!1;if(typeof window<"u")try{var q_=Object.defineProperty({},"passive",{get:function(){return $k=!0,!0}});window.addEventListener("test",q_,q_),window.removeEventListener("test",q_,q_)}catch{$k=!1}var pp=$k?{passive:!1}:!1,Qve=function(n){return n.tagName==="TEXTAREA"},OG=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Qve(n)&&t[e]==="visible")},Jve=function(n){return OG(n,"overflowY")},Zve=function(n){return OG(n,"overflowX")},K3=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=MG(n,r);if(i){var s=DG(n,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},ebe=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},tbe=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},MG=function(n,e){return n==="v"?Jve(e):Zve(e)},DG=function(n,e){return n==="v"?ebe(e):tbe(e)},nbe=function(n,e){return n==="h"&&e==="rtl"?-1:1},rbe=function(n,e,t,r,i){var s=nbe(n,window.getComputedStyle(e).direction),o=s*r,a=t.target,l=e.contains(a),c=!1,u=o>0,d=0,h=0;do{var m=DG(n,a),y=m[0],g=m[1],b=m[2],w=g-b-s*y;(y||w)&&MG(n,a)&&(d+=w,h+=y),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!i)||!u&&(Math.abs(h)<1||!i))&&(c=!0),c},K_=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Y3=function(n){return[n.deltaX,n.deltaY]},X3=function(n){return n&&"current"in n?n.current:n},ibe=function(n,e){return n[0]===e[0]&&n[1]===e[1]},sbe=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},obe=0,mp=[];function abe(n){var e=A.useRef([]),t=A.useRef([0,0]),r=A.useRef(),i=A.useState(obe++)[0],s=A.useState(NG)[0],o=A.useRef(n);A.useEffect(function(){o.current=n},[n]),A.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var g=Pve([n.lockRef.current],(n.shards||[]).map(X3),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var a=A.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var w=K_(g),x=t.current,_="deltaX"in g?g.deltaX:x[0]-w[0],S="deltaY"in g?g.deltaY:x[1]-w[1],P,N=g.target,T=Math.abs(_)>Math.abs(S)?"h":"v";if("touches"in g&&T==="h"&&N.type==="range")return!1;var C=K3(T,N);if(!C)return!0;if(C?P=T:(P=T==="v"?"h":"v",C=K3(T,N)),!C)return!1;if(!r.current&&"changedTouches"in g&&(_||S)&&(r.current=P),!P)return!0;var k=r.current||P;return rbe(k,b,g,k==="h"?_:S,!0)},[]),l=A.useCallback(function(g){var b=g;if(!(!mp.length||mp[mp.length-1]!==s)){var w="deltaY"in b?Y3(b):K_(b),x=e.current.filter(function(P){return P.name===b.type&&(P.target===b.target||b.target===P.shadowParent)&&ibe(P.delta,w)})[0];if(x&&x.should){b.cancelable&&b.preventDefault();return}if(!x){var _=(o.current.shards||[]).map(X3).filter(Boolean).filter(function(P){return P.contains(b.target)}),S=_.length>0?a(b,_[0]):!o.current.noIsolation;S&&b.cancelable&&b.preventDefault()}}},[]),c=A.useCallback(function(g,b,w,x){var _={name:g,delta:b,target:w,should:x,shadowParent:lbe(w)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(S){return S!==_})},1)},[]),u=A.useCallback(function(g){t.current=K_(g),r.current=void 0},[]),d=A.useCallback(function(g){c(g.type,Y3(g),g.target,a(g,n.lockRef.current))},[]),h=A.useCallback(function(g){c(g.type,K_(g),g.target,a(g,n.lockRef.current))},[]);A.useEffect(function(){return mp.push(s),n.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,pp),document.addEventListener("touchmove",l,pp),document.addEventListener("touchstart",u,pp),function(){mp=mp.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,pp),document.removeEventListener("touchmove",l,pp),document.removeEventListener("touchstart",u,pp)}},[]);var m=n.removeScrollBar,y=n.inert;return A.createElement(A.Fragment,null,y?A.createElement(s,{styles:sbe(i)}):null,m?A.createElement(Xve,{gapMode:n.gapMode}):null)}function lbe(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const cbe=jve(RG,abe);var ND=A.forwardRef(function(n,e){return A.createElement(nC,ga({},n,{ref:e,sideCar:cbe}))});ND.classNames=nC.classNames;var Vk=["Enter"," "],ube=["ArrowDown","PageUp","Home"],LG=["ArrowUp","PageDown","End"],dbe=[...ube,...LG],hbe={ltr:[...Vk,"ArrowRight"],rtl:[...Vk,"ArrowLeft"]},fbe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Vx="Menu",[d0,pbe,mbe]=hT(Vx),[np,jG]=ac(Vx,[mbe,wT,tC]),rC=wT(),FG=tC(),[gbe,rp]=np(Vx),[ybe,Bx]=np(Vx),$G=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=n,a=rC(e),[l,c]=A.useState(null),u=A.useRef(!1),d=Rr(s),h=ZT(i);return A.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),p.jsx(f9,{...a,children:p.jsx(gbe,{scope:e,open:t,onOpenChange:d,content:l,onContentChange:c,children:p.jsx(ybe,{scope:e,onClose:A.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:o,children:r})})})};$G.displayName=Vx;var vbe="MenuAnchor",OD=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=rC(t);return p.jsx(p9,{...i,...r,ref:e})});OD.displayName=vbe;var MD="MenuPortal",[bbe,VG]=np(MD,{forceMount:void 0}),BG=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,s=rp(MD,e);return p.jsx(bbe,{scope:e,forceMount:t,children:p.jsx(Us,{present:t||s.open,children:p.jsx(fT,{asChild:!0,container:i,children:r})})})};BG.displayName=MD;var Os="MenuContent",[wbe,DD]=np(Os),zG=A.forwardRef((n,e)=>{const t=VG(Os,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=rp(Os,n.__scopeMenu),o=Bx(Os,n.__scopeMenu);return p.jsx(d0.Provider,{scope:n.__scopeMenu,children:p.jsx(Us,{present:r||s.open,children:p.jsx(d0.Slot,{scope:n.__scopeMenu,children:o.modal?p.jsx(xbe,{...i,ref:e}):p.jsx(_be,{...i,ref:e})})})})}),xbe=A.forwardRef((n,e)=>{const t=rp(Os,n.__scopeMenu),r=A.useRef(null),i=qt(e,r);return A.useEffect(()=>{const s=r.current;if(s)return PG(s)},[]),p.jsx(LD,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:ve(n.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),_be=A.forwardRef((n,e)=>{const t=rp(Os,n.__scopeMenu);return p.jsx(LD,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),LD=A.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:y,...g}=n,b=rp(Os,t),w=Bx(Os,t),x=rC(t),_=FG(t),S=pbe(t),[P,N]=A.useState(null),T=A.useRef(null),C=qt(e,T,b.onContentChange),k=A.useRef(0),M=A.useRef(""),L=A.useRef(0),F=A.useRef(null),j=A.useRef("right"),q=A.useRef(0),H=y?ND:A.Fragment,z=y?{as:js,allowPinchZoom:!0}:void 0,W=U=>{var ae,Ne;const K=M.current+U,Q=S().filter(Le=>!Le.disabled),B=document.activeElement,Y=(ae=Q.find(Le=>Le.ref.current===B))==null?void 0:ae.textValue,re=Q.map(Le=>Le.textValue),te=Mbe(re,K,Y),ie=(Ne=Q.find(Le=>Le.textValue===te))==null?void 0:Ne.ref.current;(function Le(nn){M.current=nn,window.clearTimeout(k.current),nn!==""&&(k.current=window.setTimeout(()=>Le(""),1e3))})(K),ie&&setTimeout(()=>ie.focus())};A.useEffect(()=>()=>window.clearTimeout(k.current),[]),vG();const V=A.useCallback(U=>{var Q,B;return j.current===((Q=F.current)==null?void 0:Q.side)&&Lbe(U,(B=F.current)==null?void 0:B.area)},[]);return p.jsx(wbe,{scope:t,searchRef:M,onItemEnter:A.useCallback(U=>{V(U)&&U.preventDefault()},[V]),onItemLeave:A.useCallback(U=>{var K;V(U)||((K=T.current)==null||K.focus(),N(null))},[V]),onTriggerLeave:A.useCallback(U=>{V(U)&&U.preventDefault()},[V]),pointerGraceTimerRef:L,onPointerGraceIntentChange:A.useCallback(U=>{F.current=U},[]),children:p.jsx(H,{...z,children:p.jsx(RD,{asChild:!0,trapped:i,onMountAutoFocus:ve(s,U=>{var K;U.preventDefault(),(K=T.current)==null||K.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:p.jsx(Tx,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:p.jsx(EG,{asChild:!0,..._,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:N,onEntryFocus:ve(l,U=>{w.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(m9,{role:"menu","aria-orientation":"vertical","data-state":iq(b.open),"data-radix-menu-content":"",dir:w.dir,...x,...g,ref:C,style:{outline:"none",...g.style},onKeyDown:ve(g.onKeyDown,U=>{const Q=U.target.closest("[data-radix-menu-content]")===U.currentTarget,B=U.ctrlKey||U.altKey||U.metaKey,Y=U.key.length===1;Q&&(U.key==="Tab"&&U.preventDefault(),!B&&Y&&W(U.key));const re=T.current;if(U.target!==re||!dbe.includes(U.key))return;U.preventDefault();const ie=S().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);LG.includes(U.key)&&ie.reverse(),Nbe(ie)}),onBlur:ve(n.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(k.current),M.current="")}),onPointerMove:ve(n.onPointerMove,h0(U=>{const K=U.target,Q=q.current!==U.clientX;if(U.currentTarget.contains(K)&&Q){const B=U.clientX>q.current?"right":"left";j.current=B,q.current=U.clientX}}))})})})})})})});zG.displayName=Os;var Abe="MenuGroup",jD=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return p.jsx(Re.div,{role:"group",...r,ref:e})});jD.displayName=Abe;var Sbe="MenuLabel",UG=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return p.jsx(Re.div,{...r,ref:e})});UG.displayName=Sbe;var LS="MenuItem",Q3="menu.itemSelect",iC=A.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,s=A.useRef(null),o=Bx(LS,n.__scopeMenu),a=DD(LS,n.__scopeMenu),l=qt(e,s),c=A.useRef(!1),u=()=>{const d=s.current;if(!t&&d){const h=new CustomEvent(Q3,{bubbles:!0,cancelable:!0});d.addEventListener(Q3,m=>r==null?void 0:r(m),{once:!0}),oM(d,h),h.defaultPrevented?c.current=!1:o.onClose()}};return p.jsx(HG,{...i,ref:l,disabled:t,onClick:ve(n.onClick,u),onPointerDown:d=>{var h;(h=n.onPointerDown)==null||h.call(n,d),c.current=!0},onPointerUp:ve(n.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:ve(n.onKeyDown,d=>{const h=a.searchRef.current!=="";t||h&&d.key===" "||Vk.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});iC.displayName=LS;var HG=A.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...s}=n,o=DD(LS,t),a=FG(t),l=A.useRef(null),c=qt(e,l),[u,d]=A.useState(!1),[h,m]=A.useState("");return A.useEffect(()=>{const y=l.current;y&&m((y.textContent??"").trim())},[s.children]),p.jsx(d0.ItemSlot,{scope:t,disabled:r,textValue:i??h,children:p.jsx(TG,{asChild:!0,...a,focusable:!r,children:p.jsx(Re.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:ve(n.onPointerMove,h0(y=>{r?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ve(n.onPointerLeave,h0(y=>o.onItemLeave(y))),onFocus:ve(n.onFocus,()=>d(!0)),onBlur:ve(n.onBlur,()=>d(!1))})})})}),Ebe="MenuCheckboxItem",WG=A.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return p.jsx(XG,{scope:n.__scopeMenu,checked:t,children:p.jsx(iC,{role:"menuitemcheckbox","aria-checked":jS(t)?"mixed":t,...i,ref:e,"data-state":$D(t),onSelect:ve(i.onSelect,()=>r==null?void 0:r(jS(t)?!0:!t),{checkForDefaultPrevented:!1})})})});WG.displayName=Ebe;var GG="MenuRadioGroup",[Tbe,Cbe]=np(GG,{value:void 0,onValueChange:()=>{}}),qG=A.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,s=Rr(r);return p.jsx(Tbe,{scope:n.__scopeMenu,value:t,onValueChange:s,children:p.jsx(jD,{...i,ref:e})})});qG.displayName=GG;var KG="MenuRadioItem",YG=A.forwardRef((n,e)=>{const{value:t,...r}=n,i=Cbe(KG,n.__scopeMenu),s=t===i.value;return p.jsx(XG,{scope:n.__scopeMenu,checked:s,children:p.jsx(iC,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":$D(s),onSelect:ve(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,t)},{checkForDefaultPrevented:!1})})})});YG.displayName=KG;var FD="MenuItemIndicator",[XG,Pbe]=np(FD,{checked:!1}),QG=A.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,s=Pbe(FD,t);return p.jsx(Us,{present:r||jS(s.checked)||s.checked===!0,children:p.jsx(Re.span,{...i,ref:e,"data-state":$D(s.checked)})})});QG.displayName=FD;var Ibe="MenuSeparator",JG=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return p.jsx(Re.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});JG.displayName=Ibe;var kbe="MenuArrow",ZG=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=rC(t);return p.jsx(g9,{...i,...r,ref:e})});ZG.displayName=kbe;var Rbe="MenuSub",[e6e,eq]=np(Rbe),Ev="MenuSubTrigger",tq=A.forwardRef((n,e)=>{const t=rp(Ev,n.__scopeMenu),r=Bx(Ev,n.__scopeMenu),i=eq(Ev,n.__scopeMenu),s=DD(Ev,n.__scopeMenu),o=A.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:n.__scopeMenu},u=A.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return A.useEffect(()=>u,[u]),A.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),p.jsx(OD,{asChild:!0,...c,children:p.jsx(HG,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":iq(t.open),...n,ref:dT(e,i.onTriggerChange),onClick:d=>{var h;(h=n.onClick)==null||h.call(n,d),!(n.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:ve(n.onPointerMove,h0(d=>{s.onItemEnter(d),!d.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:ve(n.onPointerLeave,h0(d=>{var m,y;u();const h=(m=t.content)==null?void 0:m.getBoundingClientRect();if(h){const g=(y=t.content)==null?void 0:y.dataset.side,b=g==="right",w=b?-5:5,x=h[b?"left":"right"],_=h[b?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+w,y:d.clientY},{x,y:h.top},{x:_,y:h.top},{x:_,y:h.bottom},{x,y:h.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ve(n.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";n.disabled||h&&d.key===" "||hbe[r.dir].includes(d.key)&&(t.onOpenChange(!0),(m=t.content)==null||m.focus(),d.preventDefault())})})})});tq.displayName=Ev;var nq="MenuSubContent",rq=A.forwardRef((n,e)=>{const t=VG(Os,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=rp(Os,n.__scopeMenu),o=Bx(Os,n.__scopeMenu),a=eq(nq,n.__scopeMenu),l=A.useRef(null),c=qt(e,l);return p.jsx(d0.Provider,{scope:n.__scopeMenu,children:p.jsx(Us,{present:r||s.open,children:p.jsx(d0.Slot,{scope:n.__scopeMenu,children:p.jsx(LD,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ve(n.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ve(n.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ve(n.onKeyDown,u=>{var m;const d=u.currentTarget.contains(u.target),h=fbe[o.dir].includes(u.key);d&&h&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});rq.displayName=nq;function iq(n){return n?"open":"closed"}function jS(n){return n==="indeterminate"}function $D(n){return jS(n)?"indeterminate":n?"checked":"unchecked"}function Nbe(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function Obe(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function Mbe(n,e,t){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=Obe(n,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function Dbe(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function Lbe(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return Dbe(t,e)}function h0(n){return e=>e.pointerType==="mouse"?n(e):void 0}var jbe=$G,Fbe=OD,$be=BG,Vbe=zG,Bbe=jD,zbe=UG,Ube=iC,Hbe=WG,Wbe=qG,Gbe=YG,qbe=QG,Kbe=JG,Ybe=ZG,Xbe=tq,Qbe=rq,VD="DropdownMenu",[Jbe,t6e]=ac(VD,[jG]),ni=jG(),[Zbe,sq]=Jbe(VD),oq=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=n,l=ni(e),c=A.useRef(null),[u=!1,d]=lc({prop:i,defaultProp:s,onChange:o});return p.jsx(Zbe,{scope:e,triggerId:Aa(),triggerRef:c,contentId:Aa(),open:u,onOpenChange:d,onOpenToggle:A.useCallback(()=>d(h=>!h),[d]),modal:a,children:p.jsx(jbe,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:t})})};oq.displayName=VD;var aq="DropdownMenuTrigger",lq=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...i}=n,s=sq(aq,t),o=ni(t);return p.jsx(Fbe,{asChild:!0,...o,children:p.jsx(Re.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:dT(e,s.triggerRef),onPointerDown:ve(n.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ve(n.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});lq.displayName=aq;var e0e="DropdownMenuPortal",cq=n=>{const{__scopeDropdownMenu:e,...t}=n,r=ni(e);return p.jsx($be,{...r,...t})};cq.displayName=e0e;var uq="DropdownMenuContent",dq=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=sq(uq,t),s=ni(t),o=A.useRef(!1);return p.jsx(Vbe,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:ve(n.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ve(n.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});dq.displayName=uq;var t0e="DropdownMenuGroup",n0e=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ni(t);return p.jsx(Bbe,{...i,...r,ref:e})});n0e.displayName=t0e;var r0e="DropdownMenuLabel",hq=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ni(t);return p.jsx(zbe,{...i,...r,ref:e})});hq.displayName=r0e;var i0e="DropdownMenuItem",fq=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ni(t);return p.jsx(Ube,{...i,...r,ref:e})});fq.displayName=i0e;var s0e="DropdownMenuCheckboxItem",pq=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ni(t);return p.jsx(Hbe,{...i,...r,ref:e})});pq.displayName=s0e;var o0e="DropdownMenuRadioGroup",a0e=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ni(t);return p.jsx(Wbe,{...i,...r,ref:e})});a0e.displayName=o0e;var l0e="DropdownMenuRadioItem",mq=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ni(t);return p.jsx(Gbe,{...i,...r,ref:e})});mq.displayName=l0e;var c0e="DropdownMenuItemIndicator",gq=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ni(t);return p.jsx(qbe,{...i,...r,ref:e})});gq.displayName=c0e;var u0e="DropdownMenuSeparator",yq=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ni(t);return p.jsx(Kbe,{...i,...r,ref:e})});yq.displayName=u0e;var d0e="DropdownMenuArrow",h0e=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ni(t);return p.jsx(Ybe,{...i,...r,ref:e})});h0e.displayName=d0e;var f0e="DropdownMenuSubTrigger",vq=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ni(t);return p.jsx(Xbe,{...i,...r,ref:e})});vq.displayName=f0e;var p0e="DropdownMenuSubContent",bq=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=ni(t);return p.jsx(Qbe,{...i,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bq.displayName=p0e;var m0e=oq,g0e=lq,y0e=cq,wq=dq,xq=hq,_q=fq,Aq=pq,Sq=mq,Eq=gq,Tq=yq,Cq=vq,Pq=bq;const v0e=m0e,b0e=g0e,w0e=A.forwardRef(({className:n,inset:e,children:t,...r},i)=>p.jsxs(Cq,{ref:i,className:ce("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...r,children:[t,p.jsx(Ure,{className:"ml-auto h-4 w-4"})]}));w0e.displayName=Cq.displayName;const x0e=A.forwardRef(({className:n,...e},t)=>p.jsx(Pq,{ref:t,className:ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));x0e.displayName=Pq.displayName;const Iq=A.forwardRef(({className:n,sideOffset:e=4,...t},r)=>p.jsx(y0e,{children:p.jsx(wq,{ref:r,sideOffset:e,className:ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));Iq.displayName=wq.displayName;const kq=A.forwardRef(({className:n,inset:e,...t},r)=>p.jsx(_q,{ref:r,className:ce("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));kq.displayName=_q.displayName;const _0e=A.forwardRef(({className:n,children:e,checked:t,...r},i)=>p.jsxs(Aq,{ref:i,className:ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(Eq,{children:p.jsx(Bre,{className:"h-4 w-4"})})}),e]}));_0e.displayName=Aq.displayName;const A0e=A.forwardRef(({className:n,children:e,...t},r)=>p.jsxs(Sq,{ref:r,className:ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(Eq,{children:p.jsx(Wre,{className:"h-2 w-2 fill-current"})})}),e]}));A0e.displayName=Sq.displayName;const S0e=A.forwardRef(({className:n,inset:e,...t},r)=>p.jsx(xq,{ref:r,className:ce("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));S0e.displayName=xq.displayName;const E0e=A.forwardRef(({className:n,...e},t)=>p.jsx(Tq,{ref:t,className:ce("-mx-1 my-1 h-px bg-muted",n),...e}));E0e.displayName=Tq.displayName;const Rq=({activeTab:n,onTabChange:e,onShowAuth:t})=>{const[r,i]=A.useState(!1),{user:s}=Oo(),{toast:o}=qf(),a=async()=>{const u=new vo;try{const d=await $M(nr,u),h=tn(tt,"users",d.user.uid);(await Lf(h)).exists()?(await Nt(h,{lastSignIn:new Date},{merge:!0}),o({title:"Welcome back!",description:"Signed in successfully."})):(await Nt(h,{email:d.user.email,displayName:d.user.displayName,photoURL:d.user.photoURL,lastSignIn:new Date,createdAt:new Date}),o({title:"Welcome to FinSight!",description:"Your account has been created successfully."}))}catch(d){o({title:"Error",description:d.message||"Failed to sign in with Google",variant:"destructive"})}},l=async()=>{try{await jH(nr)}catch{}},c=[{id:"home",label:"Home",icon:Xre},{id:"dashboard",label:"Dashboard",icon:Vre},{id:"portfolio",label:"Portfolio",icon:pS},{id:"chat",label:"AI Chat",icon:sS},{id:"notifications",label:"Alerts",icon:Fre},{id:"settings",label:"Settings",icon:eie},{id:"about",label:"About Us",icon:Vl}];return p.jsxs(p.Fragment,{children:[p.jsxs("nav",{className:"hidden md:flex items-center justify-between p-6 bg-card/50 border-b border-border/50 backdrop-blur-sm sticky top-0 z-50",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-primary flex items-center justify-center",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-trending-up w-6 h-6 text-white",children:[p.jsx("polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}),p.jsx("polyline",{points:"16 7 22 7 22 13"})]})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"FinSight"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"AI Investment Advisor"})]})]}),p.jsx("div",{className:"flex items-center gap-2",children:c.map(u=>{const d=u.icon;return p.jsxs(Ze,{variant:n===u.id?"default":"ghost",onClick:()=>e(u.id),className:`flex items-center gap-2 transition-all duration-300 ${n===u.id?"bg-gradient-primary text-white shadow-glow":"hover:bg-card/80"}`,children:[p.jsx(d,{className:"w-4 h-4"}),u.label]},u.id)})}),s?p.jsxs(v0e,{children:[p.jsx(b0e,{asChild:!0,children:p.jsxs("div",{className:"flex items-center gap-4 cursor-pointer focus:outline-none",children:[p.jsxs(Dk,{className:"h-12 w-12 border-4 border-white shadow-2xl bg-accent",children:[p.jsx(Lk,{src:s.photoURL||void 0,alt:s.displayName||s.email||void 0}),p.jsx(jk,{className:"text-lg font-bold bg-primary text-white",children:s.displayName?s.displayName[0]:s.email?s.email[0].toUpperCase():"U"})]}),p.jsx("span",{className:"text-base font-semibold text-foreground",children:s.displayName||s.email||"User"})]})}),p.jsx(Iq,{align:"end",className:"bg-zinc-900/80 border border-zinc-700 shadow-xl rounded-2xl p-3 backdrop-blur-md",children:p.jsxs(kq,{onClick:l,className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg bg-transparent hover:bg-zinc-800/80 hover:shadow-red-500/20 hover:text-red-400 hover:scale-105 transition-all duration-200 text-red-500 font-medium cursor-pointer text-sm min-w-[140px] border-none shadow-none focus:bg-zinc-800/80 focus:text-red-400",children:[p.jsx(d4,{className:"w-4 h-4 text-red-500 group-hover:text-red-400 group-hover:scale-110 transition-all duration-200"}),p.jsx("span",{children:"Log Out"})]})})]}):p.jsxs(Ze,{variant:"outline",size:"sm",className:"border-border/50",onClick:t||a,children:[p.jsx(Vl,{className:"w-4 h-4 mr-2"}),"Sign In / Sign Up"]})]}),p.jsxs("nav",{className:"md:hidden",children:[p.jsxs("div",{className:"flex items-center justify-between p-4 bg-card/50 border-b border-border/50 backdrop-blur-sm sticky top-0 z-50",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-primary flex items-center justify-center",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-trending-up w-5 h-5 text-white",children:[p.jsx("polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}),p.jsx("polyline",{points:"16 7 22 7 22 13"})]})}),p.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"FinSight"})]}),p.jsx(Ze,{variant:"ghost",size:"sm",onClick:()=>i(!r),children:r?p.jsx(uM,{className:"w-5 h-5"}):p.jsx(Ub,{className:"w-5 h-5"})})]}),r&&p.jsx("div",{className:"fixed inset-0 z-40 bg-background/95 backdrop-blur-sm",children:p.jsxs("div",{className:"p-6 pt-20 space-y-4",children:[c.map(u=>{const d=u.icon;return p.jsxs(Ze,{variant:n===u.id?"default":"ghost",onClick:()=>{e(u.id),i(!1)},className:`w-full justify-start gap-3 h-12 text-left ${n===u.id?"bg-gradient-primary text-white":"hover:bg-card/80"}`,children:[p.jsx(d,{className:"w-5 h-5"}),u.label]},u.id)}),p.jsx("div",{className:"pt-6 border-t border-border/50",children:s?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs(Dk,{children:[p.jsx(Lk,{src:s.photoURL||void 0,alt:s.displayName||void 0}),p.jsx(jk,{children:s.displayName?s.displayName[0]:"U"})]}),p.jsxs(Ze,{variant:"outline",className:"w-full justify-start gap-3 h-12 border-none bg-zinc-900/80 text-red-500 font-semibold rounded-2xl shadow-xl hover:bg-zinc-800/80 hover:shadow-red-500/20 hover:text-red-400 hover:scale-105 transition-all duration-200 text-base backdrop-blur-md focus:bg-zinc-800/80 focus:text-red-400",onClick:l,children:[p.jsx(d4,{className:"w-5 h-5 text-red-500 group-hover:text-red-400 transition-all duration-200"}),"Log Out"]})]}):p.jsxs(Ze,{variant:"outline",className:"w-full justify-start gap-3 h-12 border-border/50",onClick:t||a,children:[p.jsx(Vl,{className:"w-5 h-5"}),"Sign In / Sign Up"]})})]})})]}),p.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-card/95 border-t border-border/50 backdrop-blur-sm z-50",children:p.jsx("div",{className:"flex justify-around py-2",children:c.slice(0,4).map(u=>{const d=u.icon;return p.jsxs(Ze,{variant:"ghost",size:"sm",onClick:()=>e(u.id),className:`flex flex-col gap-1 h-auto py-2 px-3 ${n===u.id?"text-primary":"text-muted-foreground"}`,children:[p.jsx(d,{className:"w-5 h-5"}),p.jsx("span",{className:"text-xs",children:u.label})]},u.id)})})})]})},Nq=({onTabChange:n})=>p.jsx("footer",{className:"w-full bg-zinc-950 border-t-2 border-t-transparent border-t-gradient-to-r from-indigo-500 via-blue-400 to-green-400 py-10 px-4",children:p.jsxs("div",{className:"w-full flex flex-col md:flex-row items-center md:items-start justify-between gap-8 md:gap-0 px-0 md:px-8",children:[p.jsxs("div",{className:"flex flex-col items-center md:items-start gap-2 md:w-1/3",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-indigo-500 to-blue-400 flex items-center justify-center shadow-lg",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-trending-up w-6 h-6 text-white",children:[p.jsx("polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}),p.jsx("polyline",{points:"16 7 22 7 22 13"})]})}),p.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-400 to-green-400 bg-clip-text text-transparent drop-shadow",children:"FinSight"})]}),p.jsx("p",{className:"text-sm text-zinc-400 max-w-xs text-center md:text-left",children:"Your AI-powered investment and tax optimization advisor. Secure, smart, and always available to help you grow your wealth."})]}),p.jsxs("nav",{className:"flex flex-wrap justify-center gap-6 md:gap-8 text-base md:w-1/3",children:[p.jsx("button",{onClick:()=>n("home"),className:"text-zinc-300 hover:text-indigo-400 transition font-medium",children:"Home"}),p.jsx("button",{onClick:()=>n("dashboard"),className:"text-zinc-300 hover:text-indigo-400 transition font-medium",children:"Dashboard"}),p.jsx("button",{onClick:()=>n("portfolio"),className:"text-zinc-300 hover:text-indigo-400 transition font-medium",children:"Portfolio"}),p.jsx("button",{onClick:()=>n("chat"),className:"text-zinc-300 hover:text-indigo-400 transition font-medium",children:"AI Chat"}),p.jsx("button",{onClick:()=>n("notifications"),className:"text-zinc-300 hover:text-indigo-400 transition font-medium",children:"Alerts"}),p.jsx("button",{onClick:()=>n("settings"),className:"text-zinc-300 hover:text-indigo-400 transition font-medium",children:"Settings"}),p.jsx("button",{onClick:()=>n("about"),className:"text-zinc-300 hover:text-indigo-400 transition font-medium",children:"About Us"})]}),p.jsxs("div",{className:"flex flex-col items-center md:items-end gap-2 md:w-1/3",children:[p.jsxs("span",{className:"text-sm text-zinc-400",children:["Made by the ",p.jsx("span",{className:"text-indigo-400 font-semibold",children:"FinSight Team"})]}),p.jsxs("span",{className:"text-xs text-zinc-500 mt-2",children:["© ",new Date().getFullYear()," FinSight. All rights reserved."]})]})]})}),Es=({children:n})=>{const e=ly(),t=cc(),{isPro:r}=Oo(),s=(a=>a==="/"?"home":a.startsWith("/dashboard")?"dashboard":a.startsWith("/chat")||a.startsWith("/pro-ai-chat")?"chat":a.startsWith("/portfolio")?"portfolio":a.startsWith("/alerts")?"notifications":a.startsWith("/settings")?"settings":a.startsWith("/about")?"about":"home")(e.pathname),o=a=>{let l="/";switch(a){case"home":l="/";break;case"dashboard":l="/dashboard";break;case"chat":l=r?"/pro-ai-chat":"/chat";break;case"portfolio":l="/portfolio";break;case"notifications":l="/alerts";break;case"settings":l="/settings";break;case"about":l="/about";break;default:l="/"}t(l)};return p.jsxs("div",{className:"min-h-screen flex flex-col bg-background text-foreground",children:[p.jsx(Rq,{activeTab:s,onTabChange:o}),p.jsx("main",{className:"flex-grow w-full",children:n}),p.jsx(Nq,{onTabChange:o})]})},wi=A.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:ce("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));wi.displayName="Card";const T0e=A.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:ce("flex flex-col space-y-1.5 p-6",n),...e}));T0e.displayName="CardHeader";const Oq=A.forwardRef(({className:n,...e},t)=>p.jsx("h3",{ref:t,className:ce("text-2xl font-semibold leading-none tracking-tight",n),...e}));Oq.displayName="CardTitle";const Bk=A.forwardRef(({className:n,...e},t)=>p.jsx("p",{ref:t,className:ce("text-sm text-muted-foreground",n),...e}));Bk.displayName="CardDescription";const Ru=A.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:ce("p-6 pt-0",n),...e}));Ru.displayName="CardContent";const C0e=A.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:ce("flex items-center p-6 pt-0",n),...e}));C0e.displayName="CardFooter";const P0e="/assets/hero-bg-Grn_XkpW.jpg",hI=()=>{const{user:n,isPro:e}=Oo(),t=cc(),{toast:r}=qf(),i=()=>{if(!n){r({title:"Authentication Required",description:"Please sign in to access AI Tax Advisor.",variant:"destructive"});return}if(!e){r({title:"Pro Subscription Required",description:"Upgrade to Pro to access advanced AI Tax Advisor features."}),t("/pro-subscription");return}t("/pro-ai-chat")};return p.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${P0e})`},children:p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background/95 via-background/80 to-background/95"})}),p.jsxs("div",{className:"absolute inset-0 opacity-20",children:[p.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-primary/30 rounded-full blur-3xl animate-pulse-glow"}),p.jsx("div",{className:"absolute bottom-1/3 right-1/4 w-48 h-48 bg-accent/20 rounded-full blur-3xl animate-pulse-glow",style:{animationDelay:"1s"}}),p.jsx("div",{className:"absolute top-1/2 right-1/3 w-24 h-24 bg-primary/40 rounded-full blur-2xl animate-pulse-glow",style:{animationDelay:"2s"}})]}),p.jsx("div",{className:"relative z-10 text-center px-4",children:p.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 border border-primary/20 text-sm text-primary font-medium",children:[p.jsx(Pu,{className:"w-4 h-4"}),"AI-Powered Tax Optimization"]}),p.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold bg-gradient-to-r from-foreground via-primary to-accent bg-clip-text text-transparent leading-tight",children:"FinSight"}),p.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground max-w-2xl mx-auto leading-relaxed",children:"Your AI investment advisor that works 24/7 to find tax-saving opportunities and optimize your portfolio"})]}),p.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:p.jsxs("div",{className:"relative px-10 py-4 rounded-2xl bg-gradient-to-r from-primary to-accent text-white text-xl font-bold shadow-glow animate-shine select-none",style:{overflow:"hidden",cursor:"default"},children:[p.jsx("span",{className:"relative z-10 flex items-center gap-2",children:"✨ Let our AI optimize your wealth"}),p.jsx("span",{className:"absolute left-0 top-0 w-full h-full bg-gradient-to-r from-white/10 via-white/30 to-white/10 opacity-0 animate-shine-effect pointer-events-none"})]})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-12",children:[p.jsxs(wi,{className:"p-6 bg-gradient-card border-border/50 hover:shadow-glow transition-all duration-500 hover:scale-105 cursor-pointer",onClick:i,children:[p.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-r from-yellow-400 to-amber-500 p-2.5 mb-4 shadow-lg animate-pulse",children:p.jsx(_a,{className:"w-full h-full text-white drop-shadow-lg"})}),p.jsx("h3",{className:"text-lg font-semibold mb-2",children:"AI Tax Advisor"}),p.jsx("p",{className:"text-muted-foreground text-sm",children:"Chat with our AI to get personalized tax-saving strategies and investment advice"})]}),p.jsxs(wi,{className:"p-6 bg-gradient-card border-border/50 hover:shadow-glow transition-all duration-500 hover:scale-105",children:[p.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-success p-2.5 mb-4",children:p.jsx(F8,{className:"w-full h-full text-white"})}),p.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Smart Analytics"}),p.jsx("p",{className:"text-muted-foreground text-sm",children:"Real-time portfolio tracking with LTCG/STCG optimization and wash-sale prevention"})]}),p.jsxs(wi,{className:"p-6 bg-gradient-card border-border/50 hover:shadow-glow transition-all duration-500 hover:scale-105",children:[p.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-primary p-2.5 mb-4",children:p.jsx(tie,{className:"w-full h-full text-white"})}),p.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Secure & Private"}),p.jsx("p",{className:"text-muted-foreground text-sm",children:"Bank-grade security with encrypted data and compliance with Indian tax regulations"})]})]})]})})]})};var BD="Tabs",[I0e,n6e]=ac(BD,[tC]),Mq=tC(),[k0e,zD]=I0e(BD),Dq=A.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=n,u=ZT(a),[d,h]=lc({prop:r,onChange:i,defaultProp:s});return p.jsx(k0e,{scope:t,baseId:Aa(),value:d,onValueChange:h,orientation:o,dir:u,activationMode:l,children:p.jsx(Re.div,{dir:u,"data-orientation":o,...c,ref:e})})});Dq.displayName=BD;var Lq="TabsList",jq=A.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,s=zD(Lq,t),o=Mq(t);return p.jsx(EG,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:p.jsx(Re.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});jq.displayName=Lq;var Fq="TabsTrigger",$q=A.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...s}=n,o=zD(Fq,t),a=Mq(t),l=zq(o.baseId,r),c=Uq(o.baseId,r),u=r===o.value;return p.jsx(TG,{asChild:!0,...a,focusable:!i,active:u,children:p.jsx(Re.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:ve(n.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:ve(n.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:ve(n.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!i&&d&&o.onValueChange(r)})})})});$q.displayName=Fq;var Vq="TabsContent",Bq=A.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:s,...o}=n,a=zD(Vq,t),l=zq(a.baseId,r),c=Uq(a.baseId,r),u=r===a.value,d=A.useRef(u);return A.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),p.jsx(Us,{present:i||u,children:({present:h})=>p.jsx(Re.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});Bq.displayName=Vq;function zq(n,e){return`${n}-trigger-${e}`}function Uq(n,e){return`${n}-content-${e}`}var R0e=Dq,Hq=jq,Wq=$q,Gq=Bq;const N0e=R0e,zk=A.forwardRef(({className:n,...e},t)=>p.jsx(Hq,{ref:t,className:ce("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));zk.displayName=Hq.displayName;const Ga=A.forwardRef(({className:n,...e},t)=>p.jsx(Wq,{ref:t,className:ce("inline-flex items-center justify-center whitespace-nowrap rounded-full px-6 py-2 mx-1 text-base font-semibold ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-transparent text-muted-foreground hover:bg-indigo-50 hover:text-indigo-700 hover:scale-105 data-[state=active]:bg-gradient-to-r data-[state=active]:from-indigo-500 data-[state=active]:to-blue-400 data-[state=active]:text-white data-[state=active]:shadow-xl data-[state=active]:scale-105 data-[state=active]:border-0",n),...e}));Ga.displayName=Wq.displayName;const Tv=A.forwardRef(({className:n,...e},t)=>p.jsx(Gq,{ref:t,className:ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));Tv.displayName=Gq.displayName;/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function zx(n){return n+.5|0}const Nu=(n,e,t)=>Math.max(Math.min(n,t),e);function Cv(n){return Nu(zx(n*2.55),0,255)}function Gu(n){return Nu(zx(n*255),0,255)}function rl(n){return Nu(zx(n/2.55)/100,0,1)}function J3(n){return Nu(zx(n*100),0,100)}const ds={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Uk=[..."0123456789ABCDEF"],O0e=n=>Uk[n&15],M0e=n=>Uk[(n&240)>>4]+Uk[n&15],Y_=n=>(n&240)>>4===(n&15),D0e=n=>Y_(n.r)&&Y_(n.g)&&Y_(n.b)&&Y_(n.a);function L0e(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&ds[n[1]]*17,g:255&ds[n[2]]*17,b:255&ds[n[3]]*17,a:e===5?ds[n[4]]*17:255}:(e===7||e===9)&&(t={r:ds[n[1]]<<4|ds[n[2]],g:ds[n[3]]<<4|ds[n[4]],b:ds[n[5]]<<4|ds[n[6]],a:e===9?ds[n[7]]<<4|ds[n[8]]:255})),t}const j0e=(n,e)=>n<255?e(n):"";function F0e(n){var e=D0e(n)?O0e:M0e;return n?"#"+e(n.r)+e(n.g)+e(n.b)+j0e(n.a,e):void 0}const $0e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qq(n,e,t){const r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function V0e(n,e,t){const r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function B0e(n,e,t){const r=qq(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function z0e(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function UD(n){const t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=z0e(t,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function HD(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(Gu)}function WD(n,e,t){return HD(qq,n,e,t)}function U0e(n,e,t){return HD(B0e,n,e,t)}function H0e(n,e,t){return HD(V0e,n,e,t)}function Kq(n){return(n%360+360)%360}function W0e(n){const e=$0e.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Cv(+e[5]):Gu(+e[5]));const i=Kq(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=U0e(i,s,o):e[1]==="hsv"?r=H0e(i,s,o):r=WD(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}function G0e(n,e){var t=UD(n);t[0]=Kq(t[0]+e),t=WD(t),n.r=t[0],n.g=t[1],n.b=t[2]}function q0e(n){if(!n)return;const e=UD(n),t=e[0],r=J3(e[1]),i=J3(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${rl(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}const Z3={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},e5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function K0e(){const n={},e=Object.keys(e5),t=Object.keys(Z3);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<t.length;i++)s=t[i],a=a.replace(s,Z3[s]);s=parseInt(e5[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}let X_;function Y0e(n){X_||(X_=K0e(),X_.transparent=[0,0,0,0]);const e=X_[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const X0e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Q0e(n){const e=X0e.exec(n);let t=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?Cv(o):Nu(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Cv(r):Nu(r,0,255)),i=255&(e[4]?Cv(i):Nu(i,0,255)),s=255&(e[6]?Cv(s):Nu(s,0,255)),{r,g:i,b:s,a:t}}}function J0e(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${rl(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const fI=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,gp=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Z0e(n,e,t){const r=gp(rl(n.r)),i=gp(rl(n.g)),s=gp(rl(n.b));return{r:Gu(fI(r+t*(gp(rl(e.r))-r))),g:Gu(fI(i+t*(gp(rl(e.g))-i))),b:Gu(fI(s+t*(gp(rl(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Q_(n,e,t){if(n){let r=UD(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=WD(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function Yq(n,e){return n&&Object.assign(e||{},n)}function t5(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Gu(n[3]))):(e=Yq(n,{r:0,g:0,b:0,a:1}),e.a=Gu(e.a)),e}function ewe(n){return n.charAt(0)==="r"?Q0e(n):W0e(n)}class f0{constructor(e){if(e instanceof f0)return e;const t=typeof e;let r;t==="object"?r=t5(e):t==="string"&&(r=L0e(e)||Y0e(e)||ewe(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Yq(this._rgb);return e&&(e.a=rl(e.a)),e}set rgb(e){this._rgb=t5(e)}rgbString(){return this._valid?J0e(this._rgb):void 0}hexString(){return this._valid?F0e(this._rgb):void 0}hslString(){return this._valid?q0e(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=Z0e(this._rgb,e._rgb,t)),this}clone(){return new f0(this.rgb)}alpha(e){return this._rgb.a=Gu(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=zx(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Q_(this._rgb,2,e),this}darken(e){return Q_(this._rgb,2,-e),this}saturate(e){return Q_(this._rgb,1,e),this}desaturate(e){return Q_(this._rgb,1,-e),this}rotate(e){return G0e(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ha(){}const twe=(()=>{let n=0;return()=>n++})();function et(n){return n==null}function kn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Qe(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Vs(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Vo(n,e){return Vs(n)?n:e}function Ae(n,e){return typeof n>"u"?e:n}const nwe=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function It(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function ot(n,e,t,r){let i,s,o;if(kn(n))for(s=n.length,i=0;i<s;i++)e.call(t,n[i],i);else if(Qe(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function FS(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function $S(n){if(kn(n))return n.map($S);if(Qe(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=$S(n[t[i]]);return e}return n}function Xq(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function rwe(n,e,t,r){if(!Xq(n))return;const i=e[n],s=t[n];Qe(i)&&Qe(s)?p0(i,s,r):e[n]=$S(s)}function p0(n,e,t){const r=kn(e)?e:[e],i=r.length;if(!Qe(n))return n;t=t||{};const s=t.merger||rwe;let o;for(let a=0;a<i;++a){if(o=r[a],!Qe(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,t)}return n}function yb(n,e){return p0(n,e,{merger:iwe})}function iwe(n,e,t){if(!Xq(n))return;const r=e[n],i=t[n];Qe(r)&&Qe(i)?yb(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=$S(i))}const n5={"":n=>n,x:n=>n.x,y:n=>n.y};function swe(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function owe(n){const e=swe(n);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function Wg(n,e){return(n5[e]||(n5[e]=owe(e)))(n)}function GD(n){return n.charAt(0).toUpperCase()+n.slice(1)}const m0=n=>typeof n<"u",ld=n=>typeof n=="function",r5=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function awe(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const qn=Math.PI,ka=2*qn,lwe=ka+qn,VS=Number.POSITIVE_INFINITY,cwe=qn/180,xo=qn/2,Id=qn/4,i5=qn*2/3,Hk=Math.log10,Ra=Math.sign;function vb(n,e,t){return Math.abs(n-e)<t}function s5(n){const e=Math.round(n);n=vb(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Hk(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function uwe(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}function dwe(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function g0(n){return!dwe(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function hwe(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function fwe(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Jd(n){return n*(qn/180)}function pwe(n){return n*(180/qn)}function o5(n){if(!Vs(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function mwe(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*qn&&(s+=ka),{angle:s,distance:i}}function Wk(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function gwe(n,e){return(n-e+lwe)%ka-qn}function Cc(n){return(n%ka+ka)%ka}function Qq(n,e,t,r){const i=Cc(n),s=Cc(e),o=Cc(t),a=Cc(s-i),l=Cc(o-i),c=Cc(i-s),u=Cc(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function ns(n,e,t){return Math.max(e,Math.min(t,n))}function ywe(n){return ns(n,-32768,32767)}function Zd(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function qD(n,e,t){t=t||(o=>n[o]<e);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}const eh=(n,e,t,r)=>qD(n,t,r?i=>{const s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),vwe=(n,e,t)=>qD(n,t,r=>n[r][e]>=t);function bwe(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}const Jq=["push","pop","shift","splice","unshift"];function wwe(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Jq.forEach(t=>{const r="_onData"+GD(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function a5(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(Jq.forEach(s=>{delete n[s]}),delete n._chartjs)}function Zq(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const eK=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function tK(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,eK.call(window,()=>{r=!1,n.apply(e,t)}))}}function xwe(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}const KD=n=>n==="start"?"left":n==="end"?"right":"center",Ar=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,_we=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function Awe(n,e,t){const r=e.length;let i=0,s=r;if(n._sorted){const{iScale:o,vScale:a,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:m,maxDefined:y}=o.getUserBounds();if(m){if(i=Math.min(eh(l,u,d).lo,t?r:eh(e,u,o.getPixelForValue(d)).lo),c){const g=l.slice(0,i+1).reverse().findIndex(b=>!et(b[a.axis]));i-=Math.max(0,g)}i=ns(i,0,r-1)}if(y){let g=Math.max(eh(l,o.axis,h,!0).hi+1,t?0:eh(e,u,o.getPixelForValue(h),!0).hi+1);if(c){const b=l.slice(g-1).findIndex(w=>!et(w[a.axis]));g+=Math.max(0,b)}s=ns(g,i,r)-i}else s=r-i}return{start:i,count:s}}function Swe(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}const J_=n=>n===0||n===1,l5=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*ka/t)),c5=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*ka/t)+1,bb={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*xo)+1,easeOutSine:n=>Math.sin(n*xo),easeInOutSine:n=>-.5*(Math.cos(qn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>J_(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>J_(n)?n:l5(n,.075,.3),easeOutElastic:n=>J_(n)?n:c5(n,.075,.3),easeInOutElastic(n){return J_(n)?n:n<.5?.5*l5(n*2,.1125,.45):.5+.5*c5(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-bb.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?bb.easeInBounce(n*2)*.5:bb.easeOutBounce(n*2-1)*.5+.5};function YD(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function u5(n){return YD(n)?n:new f0(n)}function pI(n){return YD(n)?n:new f0(n).saturate(.5).darken(.1).hexString()}const Ewe=["x","y","borderWidth","radius","tension"],Twe=["color","borderColor","backgroundColor"];function Cwe(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Twe},numbers:{type:"number",properties:Ewe}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Pwe(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const d5=new Map;function Iwe(n,e){e=e||{};const t=n+JSON.stringify(e);let r=d5.get(t);return r||(r=new Intl.NumberFormat(n,e),d5.set(t,r)),r}function nK(n,e,t){return Iwe(e,t).format(n)}const rK={values(n){return kn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const r=this.chart.options.locale;let i,s=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=kwe(n,t)}const o=Hk(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),nK(n,r,l)},logarithmic(n,e,t){if(n===0)return"0";const r=t[e].significand||n/Math.pow(10,Math.floor(Hk(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?rK.numeric.call(this,n,e,t):""}};function kwe(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var iK={formatters:rK};function Rwe(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:iK.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ff=Object.create(null),Gk=Object.create(null);function wb(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function mI(n,e,t){return typeof e=="string"?p0(wb(n,e),t):p0(wb(n,""),e)}class Nwe{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>pI(i.backgroundColor),this.hoverBorderColor=(r,i)=>pI(i.borderColor),this.hoverColor=(r,i)=>pI(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return mI(this,e,t)}get(e){return wb(this,e)}describe(e,t){return mI(Gk,e,t)}override(e,t){return mI(Ff,e,t)}route(e,t,r,i){const s=wb(this,e),o=wb(this,r),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[i];return Qe(l)?Object.assign({},c,l):Ae(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var at=new Nwe({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Cwe,Pwe,Rwe]);function Owe(n){return!n||et(n.size)||et(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function h5(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function kd(n,e,t){const r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function f5(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function qk(n,e,t,r){sK(n,e,t,r,null)}function sK(n,e,t,r,i){let s,o,a,l,c,u,d,h;const m=e.pointStyle,y=e.rotation,g=e.radius;let b=(y||0)*cwe;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(b),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(g)||g<=0)){switch(n.beginPath(),m){default:i?n.ellipse(t,r,i/2,g,0,0,ka):n.arc(t,r,g,0,ka),n.closePath();break;case"triangle":u=i?i/2:g,n.moveTo(t+Math.sin(b)*u,r-Math.cos(b)*g),b+=i5,n.lineTo(t+Math.sin(b)*u,r-Math.cos(b)*g),b+=i5,n.lineTo(t+Math.sin(b)*u,r-Math.cos(b)*g),n.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(b+Id)*l,d=Math.cos(b+Id)*(i?i/2-c:l),a=Math.sin(b+Id)*l,h=Math.sin(b+Id)*(i?i/2-c:l),n.arc(t-d,r-a,c,b-qn,b-xo),n.arc(t+h,r-o,c,b-xo,b),n.arc(t+d,r+a,c,b,b+xo),n.arc(t-h,r+o,c,b+xo,b+qn),n.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*g,u=i?i/2:l,n.rect(t-u,r-l,2*u,2*l);break}b+=Id;case"rectRot":d=Math.cos(b)*(i?i/2:g),o=Math.cos(b)*g,a=Math.sin(b)*g,h=Math.sin(b)*(i?i/2:g),n.moveTo(t-d,r-a),n.lineTo(t+h,r-o),n.lineTo(t+d,r+a),n.lineTo(t-h,r+o),n.closePath();break;case"crossRot":b+=Id;case"cross":d=Math.cos(b)*(i?i/2:g),o=Math.cos(b)*g,a=Math.sin(b)*g,h=Math.sin(b)*(i?i/2:g),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+h,r-o),n.lineTo(t-h,r+o);break;case"star":d=Math.cos(b)*(i?i/2:g),o=Math.cos(b)*g,a=Math.sin(b)*g,h=Math.sin(b)*(i?i/2:g),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+h,r-o),n.lineTo(t-h,r+o),b+=Id,d=Math.cos(b)*(i?i/2:g),o=Math.cos(b)*g,a=Math.sin(b)*g,h=Math.sin(b)*(i?i/2:g),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+h,r-o),n.lineTo(t-h,r+o);break;case"line":o=i?i/2:Math.cos(b)*g,a=Math.sin(b)*g,n.moveTo(t-o,r-a),n.lineTo(t+o,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(b)*(i?i/2:g),r+Math.sin(b)*g);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function y0(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function sC(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function oC(n){n.restore()}function Mwe(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function Dwe(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function Lwe(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),et(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function jwe(n,e,t,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,c=t+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function Fwe(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function v0(n,e,t,r,i,s={}){const o=kn(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(n.save(),n.font=i.string,Lwe(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Fwe(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),et(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,t,r,s.maxWidth)),n.fillText(c,t,r,s.maxWidth),jwe(n,t,r,c,s),r+=Number(i.lineHeight);n.restore()}function BS(n,e){const{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*qn,qn,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,qn,xo,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,xo,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-xo,!0),n.lineTo(t+o.topLeft,r)}const $we=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Vwe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Bwe(n,e){const t=(""+n).match($we);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const zwe=n=>+n||0;function oK(n,e){const t={},r=Qe(e),i=r?Object.keys(e):e,s=Qe(n)?r?o=>Ae(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=zwe(s(o));return t}function aK(n){return oK(n,{top:"y",right:"x",bottom:"y",left:"x"})}function dm(n){return oK(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Bs(n){const e=aK(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Pr(n,e){n=n||{},e=e||at.font;let t=Ae(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=Ae(n.style,e.style);r&&!(""+r).match(Vwe)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Ae(n.family,e.family),lineHeight:Bwe(Ae(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:Ae(n.weight,e.weight),string:""};return i.string=Owe(i),i}function Z_(n,e,t,r){let i,s,o;for(i=0,s=n.length;i<s;++i)if(o=n[i],o!==void 0&&o!==void 0)return o}function Uwe(n,e,t){const{min:r,max:i}=n,s=nwe(e,(i-r)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function ip(n,e){return Object.assign(Object.create(n),e)}function XD(n,e=[""],t,r,i=()=>n[0]){const s=t||n;typeof r>"u"&&(r=dK("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>XD([a,...n],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return cK(a,l,()=>Qwe(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return m5(a).includes(l)},ownKeys(a){return m5(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Gg(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:lK(n,r),setContext:s=>Gg(n,s,t,r),override:s=>Gg(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return cK(s,o,()=>Wwe(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function lK(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:ld(t)?t:()=>t,isIndexable:ld(r)?r:()=>r}}const Hwe=(n,e)=>n?n+GD(e):e,QD=(n,e)=>Qe(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function cK(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const r=t();return n[e]=r,r}function Wwe(n,e,t){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n;let a=r[e];return ld(a)&&o.isScriptable(e)&&(a=Gwe(e,a,n,t)),kn(a)&&a.length&&(a=qwe(e,a,n,o.isIndexable)),QD(e,a)&&(a=Gg(a,i,s&&s[e],o)),a}function Gwe(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(s,o||r);return a.delete(n),QD(n,l)&&(l=JD(i._scopes,i,n,l)),l}function qwe(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(Qe(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=JD(c,i,n,u);e.push(Gg(d,s,o&&o[n],a))}}return e}function uK(n,e,t){return ld(n)?n(e,t):n}const Kwe=(n,e)=>n===!0?e:typeof n=="string"?Wg(e,n):void 0;function Ywe(n,e,t,r,i){for(const s of e){const o=Kwe(t,s);if(o){n.add(o);const a=uK(o._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function JD(n,e,t,r){const i=e._rootScopes,s=uK(e._fallback,t,r),o=[...n,...i],a=new Set;a.add(r);let l=p5(a,o,t,s||t,r);return l===null||typeof s<"u"&&s!==t&&(l=p5(a,o,s,l,r),l===null)?!1:XD(Array.from(a),[""],i,s,()=>Xwe(e,t,r))}function p5(n,e,t,r,i){for(;t;)t=Ywe(n,e,t,r,i);return t}function Xwe(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return kn(i)&&Qe(t)?t:i||{}}function Qwe(n,e,t,r){let i;for(const s of e)if(i=dK(Hwe(s,n),t),typeof i<"u")return QD(n,i)?JD(t,r,n,i):i}function dK(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function m5(n){let e=n._keys;return e||(e=n._keys=Jwe(n._scopes)),e}function Jwe(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const Zwe=Number.EPSILON||1e-14,qg=(n,e)=>e<n.length&&!n[e].skip&&n[e],hK=n=>n==="x"?"y":"x";function exe(n,e,t,r){const i=n.skip?e:n,s=e,o=t.skip?e:t,a=Wk(s,i),l=Wk(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+h*(o.x-i.x),y:s.y+h*(o.y-i.y)}}}function txe(n,e,t){const r=n.length;let i,s,o,a,l,c=qg(n,0);for(let u=0;u<r-1;++u)if(l=c,c=qg(n,u+1),!(!l||!c)){if(vb(e[u],0,Zwe)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=i*o*e[u],t[u+1]=s*o*e[u])}}function nxe(n,e,t="x"){const r=hK(t),i=n.length;let s,o,a,l=qg(n,0);for(let c=0;c<i;++c){if(o=a,a=l,l=qg(n,c+1),!a)continue;const u=a[t],d=a[r];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${r}`]=d+s*e[c])}}function rxe(n,e="x"){const t=hK(e),r=n.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=qg(n,0);for(o=0;o<r;++o)if(a=l,l=c,c=qg(n,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[t]-l[t])/u:0}s[o]=a?c?Ra(i[o-1])!==Ra(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}txe(n,i,s),nxe(n,s,e)}function e1(n,e,t){return Math.max(Math.min(n,t),e)}function ixe(n,e){let t,r,i,s,o,a=y0(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=a,a=t<r-1&&y0(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=e1(i.cp1x,e.left,e.right),i.cp1y=e1(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=e1(i.cp2x,e.left,e.right),i.cp2y=e1(i.cp2y,e.top,e.bottom)))}function sxe(n,e,t,r,i){let s,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")rxe(n,i);else{let c=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=exe(c,a,n[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&ixe(n,t)}function ZD(){return typeof window<"u"&&typeof document<"u"}function eL(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function zS(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}const aC=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function oxe(n,e){return aC(n).getPropertyValue(e)}const axe=["top","right","bottom","left"];function xf(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=axe[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const lxe=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function cxe(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(lxe(i,s,n.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Dd(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=aC(t),s=i.boxSizing==="border-box",o=xf(i,"padding"),a=xf(i,"border","width"),{x:l,y:c,box:u}=cxe(n,t),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:m,height:y}=e;return s&&(m-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/m*t.width/r),y:Math.round((c-h)/y*t.height/r)}}function uxe(n,e,t){let r,i;if(e===void 0||t===void 0){const s=n&&eL(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const o=s.getBoundingClientRect(),a=aC(s),l=xf(a,"border","width"),c=xf(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,r=zS(a.maxWidth,s,"clientWidth"),i=zS(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:r||VS,maxHeight:i||VS}}const t1=n=>Math.round(n*10)/10;function dxe(n,e,t,r){const i=aC(n),s=xf(i,"margin"),o=zS(i.maxWidth,n,"clientWidth")||VS,a=zS(i.maxHeight,n,"clientHeight")||VS,l=uxe(n,e,t);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const h=xf(i,"border","width"),m=xf(i,"padding");c-=m.width+h.width,u-=m.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=t1(Math.min(c,o,l.maxWidth)),u=t1(Math.min(u,a,l.maxHeight)),c&&!u&&(u=t1(c/2)),(e!==void 0||t!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=t1(Math.floor(u*r))),{width:c,height:u}}function g5(n,e,t){const r=e||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const hxe=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};ZD()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function y5(n,e){const t=oxe(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ld(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function fxe(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function pxe(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=Ld(n,i,t),a=Ld(i,s,t),l=Ld(s,e,t),c=Ld(o,a,t),u=Ld(a,l,t);return Ld(c,u,t)}const mxe=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},gxe=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function hm(n,e,t){return n?mxe(e,t):gxe()}function fK(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function pK(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function mK(n){return n==="angle"?{between:Qq,compare:gwe,normalize:Cc}:{between:Zd,compare:(e,t)=>e-t,normalize:e=>e}}function v5({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function yxe(n,e,t){const{property:r,start:i,end:s}=t,{between:o,normalize:a}=mK(r),l=e.length;let{start:c,end:u,loop:d}=n,h,m;if(d){for(c+=l,u+=l,h=0,m=l;h<m&&o(a(e[c%l][r]),i,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function vxe(n,e,t){if(!t)return[n];const{property:r,start:i,end:s}=t,o=e.length,{compare:a,between:l,normalize:c}=mK(r),{start:u,end:d,loop:h,style:m}=yxe(n,e,t),y=[];let g=!1,b=null,w,x,_;const S=()=>l(i,_,w)&&a(i,_)!==0,P=()=>a(s,w)===0||l(s,_,w),N=()=>g||S(),T=()=>!g||P();for(let C=u,k=u;C<=d;++C)x=e[C%o],!x.skip&&(w=c(x[r]),w!==_&&(g=l(w,i,s),b===null&&N()&&(b=a(w,i)===0?C:k),b!==null&&T()&&(y.push(v5({start:b,end:C,loop:h,count:o,style:m})),b=null),k=C,_=w));return b!==null&&y.push(v5({start:b,end:d,loop:h,count:o,style:m})),y}function bxe(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const s=vxe(r[i],n.points,e);s.length&&t.push(...s)}return t}function wxe(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}function xxe(n,e,t,r){const i=n.length,s=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function _xe(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const s=!!n._loop,{start:o,end:a}=wxe(t,i,s,r);if(r===!0)return b5(n,[{start:o,end:a,loop:s}],t,e);const l=a<o?a+i:a,c=!!n._fullLoop&&o===0&&a===i-1;return b5(n,xxe(t,o,l,c),t,e)}function b5(n,e,t,r){return!r||!r.setContext||!t?e:Axe(n,e,t,r)}function Axe(n,e,t,r){const i=n._chart.getContext(),s=w5(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let u=s,d=e[0].start,h=d;function m(y,g,b,w){const x=a?-1:1;if(y!==g){for(y+=l;t[y%l].skip;)y-=x;for(;t[g%l].skip;)g+=x;y%l!==g%l&&(c.push({start:y%l,end:g%l,loop:b,style:w}),u=w,d=g%l)}}for(const y of e){d=a?d:y.start;let g=t[d%l],b;for(h=d+1;h<=y.end;h++){const w=t[h%l];b=w5(r.setContext(ip(i,{type:"segment",p0:g,p1:w,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),Sxe(b,u)&&m(d,h-1,y.loop,u),g=w,u=b}d<h-1&&m(d,h-1,y.loop,u)}return c}function w5(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Sxe(n,e){if(!e)return!1;const t=[],r=function(i,s){return YD(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function n1(n,e,t){return n.options.clip?n[t]:e[t]}function Exe(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:n1(t,e,"left"),right:n1(t,e,"right"),top:n1(r,e,"top"),bottom:n1(r,e,"bottom")}:e}function Txe(n,e){const t=e._clip;if(t.disabled)return!1;const r=Exe(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Cxe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const s=t.listeners[i],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=eK.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var qa=new Cxe;const x5="transparent",Pxe={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const r=u5(n||x5),i=r.valid&&u5(e||x5);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class Ixe{constructor(e,t,r,i){const s=t[r];i=Z_([e.to,i,s,e.from]);const o=Z_([e.from,s,i]);this._active=!0,this._fn=e.fn||Pxe[e.type||typeof o],this._easing=bb[e.easing]||bb.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Z_([e.to,t,i,e.from]),this._from=Z_([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=s;return}l=t/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class gK{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Qe(e))return;const t=Object.keys(at.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Qe(s))return;const o={};for(const a of t)o[a]=s[a];(kn(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,t){const r=t.options,i=Rxe(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&kxe(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,t));continue}const u=t[c];let d=s[c];const h=r.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}s[c]=d=new Ixe(h,e,c,u),i.push(d)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return qa.add(this._chart,r),!0}}function kxe(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function Rxe(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function _5(n,e){const t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function Nxe(n,e,t){if(t===!1)return!1;const r=_5(n,t),i=_5(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function Oxe(n){let e,t,r,i;return Qe(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function yK(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function A5(n,e,t,r={}){const i=n.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===t){if(u=!0,r.all)continue;break}c=n.values[l],Vs(c)&&(s||e===0||Ra(e)===Ra(c))&&(e+=c)}return!u&&!r.all?0:e}function Mxe(n,e){const{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:n[u]};return a}function gI(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function Dxe(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function Lxe(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function jxe(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function S5(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function E5(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=Dxe(s,o,r),d=e.length;let h;for(let m=0;m<d;++m){const y=e[m],{[l]:g,[c]:b}=y,w=y._stacks||(y._stacks={});h=w[c]=jxe(i,u,g),h[a]=b,h._top=S5(h,o,!0,r.type),h._bottom=S5(h,o,!1,r.type);const x=h._visualValues||(h._visualValues={});x[a]=b}}function yI(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function Fxe(n,e){return ip(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function $xe(n,e,t){return ip(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function tv(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][t]===void 0)return;delete s[r][t],s[r]._visualValues!==void 0&&s[r]._visualValues[t]!==void 0&&delete s[r]._visualValues[t]}}}const vI=n=>n==="reset"||n==="none",T5=(n,e)=>e?n:Object.assign({},n),Vxe=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:yK(t,!0),values:null};class fm{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=gI(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&tv(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(d,h,m,y)=>d==="x"?h:d==="r"?y:m,s=t.xAxisID=Ae(r.xAxisID,yI(e,"x")),o=t.yAxisID=Ae(r.yAxisID,yI(e,"y")),a=t.rAxisID=Ae(r.rAxisID,yI(e,"r")),l=t.indexAxis,c=t.iAxisID=i(l,s,o,a),u=t.vAxisID=i(l,o,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&a5(this._data,this),e._stacked&&tv(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(Qe(t)){const i=this._cachedMeta;this._data=Mxe(t,i)}else if(r!==t){if(r){a5(r,this);const i=this._cachedMeta;tv(i),i._parsed=[]}t&&Object.isExtensible(t)&&wwe(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=t._stacked;t._stacked=gI(t.vScale,t),t.stack!==r.stack&&(i=!0,tv(t),t.stack=r.stack),this._resyncElements(e),(i||s!==t._stacked)&&(E5(this,t._parsed),t._stacked=gI(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&t===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,h;if(this._parsing===!1)r._parsed=i,r._sorted=!0,h=i;else{kn(i[e])?h=this.parseArrayData(r,i,e,t):Qe(i[e])?h=this.parseObjectData(r,i,e,t):h=this.parsePrimitiveData(r,i,e,t);const m=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<t;++u)r._parsed[u+e]=d=h[u],l&&(m()&&(l=!1),c=d);r._sorted=l}o&&E5(this,h)}parsePrimitiveData(e,t,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(i);let h,m,y;for(h=0,m=i;h<m;++h)y=h+r,d[h]={[a]:u||s.parse(c[y],y),[l]:o.parse(t[y],y)};return d}parseArrayData(e,t,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+r,d=t[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,t,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,h,m;for(u=0,d=i;u<d;++u)h=u+r,m=t[h],c[u]={x:s.parse(Wg(m,a),h),y:o.parse(Wg(m,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const i=this.chart,s=this._cachedMeta,o=t[e.axis],a={keys:yK(i,!0),values:t._stacks[e.axis]._visualValues};return A5(a,o,s.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const s=r[t.axis];let o=s===null?NaN:s;const a=i&&r._stacks[t.axis];i&&a&&(i.values=a,o=A5(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=Vxe(t,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=Lxe(a);let h,m;function y(){m=i[h];const g=m[a.axis];return!Vs(m[e.axis])||u>g||d<g}for(h=0;h<o&&!(!y()&&(this.updateRangeFromParsed(c,e,m,l),s));++h);if(s){for(h=o-1;h>=0;--h)if(!y()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=t.length;i<s;++i)o=t[i][e.axis],Vs(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=Oxe(Ae(this.options.clip,Nxe(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,i=r.data||[],s=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=$xe(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Fxe(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i=t==="active",s=this._cachedDataOpts,o=e+"-"+t,a=s[o],l=this.enableOptionSharing&&m0(r);if(a)return T5(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),m=Object.keys(at.elements[e]),y=()=>this.getContext(r,i,t),g=c.resolveNamedOptions(h,m,y,d);return g.$shared&&(g.$shared=l,s[o]=Object.freeze(T5(g,l))),g}_resolveAnimations(e,t,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,t),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,r,t))}const c=new gK(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||vI(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(t,s)||s!==i;return this.updateSharedOptions(s,t,r),{sharedOptions:s,includeOptions:o}}updateElement(e,t,r,i){vI(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!vI(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const s=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=t.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,t,r=!0){const i=this._cachedMeta,s=i.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,t),r&&this.updateElements(s,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&tv(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}J(fm,"defaults",{}),J(fm,"datasetElementType",null),J(fm,"dataElementType",null);function Bxe(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=Zq(r.sort((i,s)=>i-s))}return n._cache.$bar}function zxe(n){const e=n.iScale,t=Bxe(e,n.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(m0(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function Uxe(n,e,t,r){const i=t.barThickness;let s,o;return et(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}function Hxe(n,e,t,r){const i=e.pixels,s=i[n];let o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null;const l=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:t.barPercentage,start:c}}function Wxe(n,e,t,r){const i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function vK(n,e,t,r){return kn(n)?Wxe(n,e,t,r):e[t.axis]=t.parse(n,r),e}function C5(n,e,t,r){const i=n.iScale,s=n.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,d,h;for(c=t,u=t+r;c<u;++c)h=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(vK(h,d,s,c));return l}function bI(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Gxe(n,e,t){return n!==0?Ra(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function qxe(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}function Kxe(n,e,t,r){let i=e.borderSkipped;const s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=qxe(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=c:(t._bottom||0)===r?i=u:(s[P5(u,o,a,l)]=!0,i=c)),s[P5(i,o,a,l)]=!0,n.borderSkipped=s}function P5(n,e,t,r){return r?(n=Yxe(n,e,t),n=I5(n,t,e)):n=I5(n,e,t),n}function Yxe(n,e,t){return n===e?t:n===t?e:n}function I5(n,e,t){return n==="start"?e:n==="end"?t:n}function Xxe(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class xb extends fm{parsePrimitiveData(e,t,r,i){return C5(e,t,r,i)}parseArrayData(e,t,r,i){return C5(e,t,r,i)}parseObjectData(e,t,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let h,m,y,g;for(h=r,m=r+i;h<m;++h)g=t[h],y={},y[s.axis]=s.parse(Wg(g,c),h),d.push(vK(Wg(g,u),y,o,h));return d}updateRangeFromParsed(e,t,r,i){super.updateRangeFromParsed(e,t,r,i);const s=r._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:i}=t,s=this.getParsed(e),o=s._custom,a=bI(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(t,i);for(let m=t;m<t+r;m++){const y=this.getParsed(m),g=s||et(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),b=this._calculateBarIndexPixels(m,u),w=(y._stacks||{})[a.axis],x={horizontal:c,base:g.base,enableBorderRadius:!w||bI(y._custom)||o===w._top||o===w._bottom,x:c?g.head:b.center,y:c?b.center:g.head,height:c?b.size:Math.abs(g.size),width:c?Math.abs(g.size):b.size};h&&(x.options=d||this.resolveDataElementOptions(m,e[m].active?"active":i));const _=x.options||e[m].options;Kxe(x,_,w,o),Xxe(x,_,u.ratio),this.updateElement(e[m],m,x,i)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(t),l=a&&a[r.axis],c=u=>{const d=u._parsed.find(m=>m[r.axis]===l),h=d&&d[u.vScale.axis];if(et(h)||isNaN(h))return!0};for(const u of i)if(!(t!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[Ae(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,r){const i=this._getStacks(e,r),s=t!==void 0?i.indexOf(t):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,i=[];let s,o;for(s=0,o=t.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||zxe(t),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=bI(c);let d=l[t.axis],h=0,m=r?this.applyStack(t,l,r):d,y,g;m!==d&&(h=m-d,m=d),u&&(d=c.barStart,m=c.barEnd-c.barStart,d!==0&&Ra(d)!==Ra(c.barEnd)&&(h=0),h+=d);const b=!et(s)&&!u?s:h;let w=t.getPixelForValue(b);if(this.chart.getDataVisibility(e)?y=t.getPixelForValue(h+m):y=w,g=y-w,Math.abs(g)<o){g=Gxe(g,t,a)*o,d===a&&(w-=g/2);const x=t.getPixelForDecimal(0),_=t.getPixelForDecimal(1),S=Math.min(x,_),P=Math.max(x,_);w=Math.max(Math.min(w,P),S),y=w+g,r&&!u&&(l._stacks[t.axis]._visualValues[i]=t.getValueForPixel(y)-t.getValueForPixel(w))}if(w===t.getPixelForValue(a)){const x=Ra(g)*t.getLineWidthForValue(a)/2;w+=x,g-=x}return{size:g,base:w,head:y,center:y+g/2}}_calculateBarIndexPixels(e,t){const r=t.scale,i=this.options,s=i.skipNull,o=Ae(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(t.grouped){const u=s?this._getStackCount(e):t.stackCount,d=i.barThickness==="flex"?Hxe(e,t,i,u*c):Uxe(e,t,i,u*c),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(Ae(h,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+m;a=d.start+d.chunk*y+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[t.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}J(xb,"id","bar"),J(xb,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),J(xb,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Q1 extends fm{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=Awe(t,i,o);this._drawStart=a,this._drawCount=l,Swe(t)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,t,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,i),h=o.axis,m=a.axis,{spanGaps:y,segment:g}=this.options,b=g0(y)?y:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||i==="none",x=t+r,_=e.length;let S=t>0&&this.getParsed(t-1);for(let P=0;P<_;++P){const N=e[P],T=w?N:{};if(P<t||P>=x){T.skip=!0;continue}const C=this.getParsed(P),k=et(C[m]),M=T[h]=o.getPixelForValue(C[h],P),L=T[m]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[m],P);T.skip=isNaN(M)||isNaN(L)||k,T.stop=P>0&&Math.abs(C[h]-S[h])>b,g&&(T.parsed=C,T.raw=c.data[P]),d&&(T.options=u||this.resolveDataElementOptions(P,N.active?"active":i)),w||this.updateElement(N,P,T,i),S=C}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}J(Q1,"id","line"),J(Q1,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),J(Q1,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Rd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class tL{constructor(e){J(this,"options");this.options=e||{}}static override(e){Object.assign(tL.prototype,e)}init(){}formats(){return Rd()}parse(){return Rd()}format(){return Rd()}add(){return Rd()}diff(){return Rd()}startOf(){return Rd()}endOf(){return Rd()}}var Qxe={_date:tL};function Jxe(n,e,t,r){const{controller:i,data:s,_sorted:o}=n,a=i._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?vwe:eh;if(r){if(i._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const h=c(s,e,t-d),m=c(s,e,t+d);return{lo:h.lo,hi:m.hi}}}}else{const u=c(s,e,t);if(l){const{vScale:d}=i._cachedMeta,{_parsed:h}=n,m=h.slice(0,u.lo+1).reverse().findIndex(g=>!et(g[d.axis]));u.lo-=Math.max(0,m);const y=h.slice(u.hi).findIndex(g=>!et(g[d.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:s.length-1}}function Ux(n,e,t,r,i){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:h}=Jxe(s[a],e,o,i);for(let m=d;m<=h;++m){const y=u[m];y.skip||r(y,c,m)}}}function Zxe(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function wI(n,e,t,r,i){const s=[];return!i&&!n.isPointInArea(e)||Ux(n,t,e,function(a,l,c){!i&&!y0(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function e_e(n,e,t,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=mwe(o,{x:e.x,y:e.y});Qq(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return Ux(n,t,e,s),i}function t_e(n,e,t,r,i,s){let o=[];const a=Zxe(t);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const m=u.inRange(e.x,e.y,i);if(r&&!m)return;const y=u.getCenterPoint(i);if(!(!!s||n.isPointInArea(y))&&!m)return;const b=a(e,y);b<l?(o=[{element:u,datasetIndex:d,index:h}],l=b):b===l&&o.push({element:u,datasetIndex:d,index:h})}return Ux(n,t,e,c),o}function xI(n,e,t,r,i,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!r?e_e(n,e,t,i):t_e(n,e,t,r,i,s)}function k5(n,e,t,r,i){const s=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Ux(n,t,e,(l,c,u)=>{l[o]&&l[o](e[t],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var n_e={evaluateInteractionItems:Ux,modes:{index(n,e,t,r){const i=Dd(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?wI(n,i,s,r,o):xI(n,i,s,!1,r,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,r){const i=Dd(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?wI(n,i,s,r,o):xI(n,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,e,t,r){const i=Dd(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return wI(n,i,s,r,o)},nearest(n,e,t,r){const i=Dd(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return xI(n,i,s,t.intersect,r,o)},x(n,e,t,r){const i=Dd(e,n);return k5(n,i,"x",t.intersect,r)},y(n,e,t,r){const i=Dd(e,n);return k5(n,i,"y",t.intersect,r)}}};const bK=["left","top","right","bottom"];function nv(n,e){return n.filter(t=>t.pos===e)}function R5(n,e){return n.filter(t=>bK.indexOf(t.pos)===-1&&t.box.axis===e)}function rv(n,e){return n.sort((t,r)=>{const i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function r_e(n){const e=[];let t,r,i,s,o,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function i_e(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:s}=t;if(!r||!bK.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function s_e(n,e){const t=i_e(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return t}function o_e(n){const e=r_e(n),t=rv(e.filter(c=>c.box.fullSize),!0),r=rv(nv(e,"left"),!0),i=rv(nv(e,"right")),s=rv(nv(e,"top"),!0),o=rv(nv(e,"bottom")),a=R5(e,"x"),l=R5(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:nv(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function N5(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function wK(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function a_e(n,e,t,r){const{pos:i,box:s}=t,o=n.maxPadding;if(!Qe(i)){t.size&&(n[i]-=t.size);const d=r[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[i]+=t.size}s.getPadding&&wK(o,s.getPadding());const a=Math.max(0,e.outerWidth-N5(o,n,"left","right")),l=Math.max(0,e.outerHeight-N5(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function l_e(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function c_e(n,e){const t=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return r(n?["left","right"]:["top","bottom"])}function Pv(n,e,t,r){const i=[];let s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||e.w,a.height||e.h,c_e(a.horizontal,e));const{same:d,other:h}=a_e(e,t,a,r);c|=d&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Pv(i,e,t,r)||u}function r1(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function O5(n,e,t,r){const i=t.padding;let{x:s,y:o}=e;for(const a of n){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,h=c.size||l.height;m0(c.start)&&(o=c.start),l.fullSize?r1(l,i.left,o,t.outerWidth-i.right-i.left,h):r1(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,h=c.size||l.width;m0(c.start)&&(s=c.start),l.fullSize?r1(l,s,i.top,h,t.outerHeight-i.bottom-i.top):r1(l,s,e.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Rs={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=Bs(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),a=o_e(n.boxes),l=a.vertical,c=a.horizontal;ot(n.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,b)=>b.box.options&&b.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);wK(h,Bs(r));const m=Object.assign({maxPadding:h,w:s,h:o,x:i.left,y:i.top},i),y=s_e(l.concat(c),d);Pv(a.fullSize,m,d,y),Pv(l,m,d,y),Pv(c,m,d,y)&&Pv(l,m,d,y),l_e(m),O5(a.leftAndTop,m,d,y),m.x+=m.w,m.y+=m.h,O5(a.rightAndBottom,m,d,y),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ot(a.chartArea,g=>{const b=g.box;Object.assign(b,n.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class xK{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class u_e extends xK{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const J1="$chartjs",d_e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},M5=n=>n===null||n==="";function h_e(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[J1]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",M5(i)){const s=y5(n,"width");s!==void 0&&(n.width=s)}if(M5(r))if(n.style.height==="")n.height=n.width/(e||2);else{const s=y5(n,"height");s!==void 0&&(n.height=s)}return n}const _K=hxe?{passive:!0}:!1;function f_e(n,e,t){n&&n.addEventListener(e,t,_K)}function p_e(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,_K)}function m_e(n,e){const t=d_e[n.type]||n.type,{x:r,y:i}=Dd(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function US(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function g_e(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||US(a.addedNodes,r),o=o&&!US(a.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function y_e(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||US(a.removedNodes,r),o=o&&!US(a.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const b0=new Map;let D5=0;function AK(){const n=window.devicePixelRatio;n!==D5&&(D5=n,b0.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function v_e(n,e){b0.size||window.addEventListener("resize",AK),b0.set(n,e)}function b_e(n){b0.delete(n),b0.size||window.removeEventListener("resize",AK)}function w_e(n,e,t){const r=n.canvas,i=r&&eL(r);if(!i)return;const s=tK((a,l)=>{const c=i.clientWidth;t(a,l),c<i.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),v_e(n,s),o}function _I(n,e,t){t&&t.disconnect(),e==="resize"&&b_e(n)}function x_e(n,e,t){const r=n.canvas,i=tK(s=>{n.ctx!==null&&t(m_e(s,n))},n);return f_e(r,e,i),i}class __e extends xK{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(h_e(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[J1])return!1;const r=t[J1].initial;["height","width"].forEach(s=>{const o=r[s];et(o)?t.removeAttribute(s):t.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[J1],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),o={attach:g_e,detach:y_e,resize:w_e}[t]||x_e;i[t]=o(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:_I,detach:_I,resize:_I}[t]||p_e)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return dxe(e,t,r,i)}isAttached(e){const t=e&&eL(e);return!!(t&&t.isConnected)}}function A_e(n){return!ZD()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?u_e:__e}var A1;let wd=(A1=class{constructor(){J(this,"x");J(this,"y");J(this,"active",!1);J(this,"options");J(this,"$animations")}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return g0(this.x)&&g0(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},J(A1,"defaults",{}),J(A1,"defaultRoutes"),A1);function S_e(n,e){const t=n.options.ticks,r=E_e(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?C_e(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return P_e(e,c,s,o/i),c;const u=T_e(s,e,i);if(o>0){let d,h;const m=o>1?Math.round((l-a)/(o-1)):null;for(i1(e,c,u,et(m)?0:a-m,a),d=0,h=o-1;d<h;d++)i1(e,c,u,s[d],s[d+1]);return i1(e,c,u,l,et(m)?e.length:l+m),c}return i1(e,c,u),c}function E_e(n){const e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function T_e(n,e,t){const r=I_e(n),i=e.length/t;if(!r)return Math.max(i,1);const s=uwe(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function C_e(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function P_e(n,e,t,r){let i=0,s=t[0],o;for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}function i1(n,e,t,r,i){const s=Ae(r,0),o=Math.min(Ae(i,n.length),n.length);let a=0,l,c,u;for(t=Math.ceil(t),i&&(l=i-r,t=l/Math.floor(l/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(n[c]),a++,u=Math.round(s+a*t))}function I_e(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}const k_e=n=>n==="left"?"right":n==="right"?"left":n,L5=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,j5=(n,e)=>Math.min(e||n,n);function F5(n,e){const t=[],r=n.length/e,i=n.length;let s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function R_e(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(i),c;if(!(t&&(r===1?c=Math.max(l-s,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function N_e(n,e){ot(n,t=>{const r=t.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}function iv(n){return n.drawTicks?n.tickLength:0}function $5(n,e){if(!n.display)return 0;const t=Pr(n.font,e),r=Bs(n.padding);return(kn(n.text)?n.text.length:1)*t.lineHeight+r.height}function O_e(n,e){return ip(n,{scale:e,type:"scale"})}function M_e(n,e,t){return ip(n,{tick:t,index:e,type:"tick"})}function D_e(n,e,t){let r=KD(n);return(t&&e!=="right"||!t&&e==="right")&&(r=k_e(r)),r}function L_e(n,e,t,r){const{top:i,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let d=0,h,m,y;const g=o-i,b=a-s;if(n.isHorizontal()){if(m=Ar(r,s,a),Qe(t)){const w=Object.keys(t)[0],x=t[w];y=u[w].getPixelForValue(x)+g-e}else t==="center"?y=(c.bottom+c.top)/2+g-e:y=L5(n,t,e);h=a-s}else{if(Qe(t)){const w=Object.keys(t)[0],x=t[w];m=u[w].getPixelForValue(x)-b+e}else t==="center"?m=(c.left+c.right)/2-b+e:m=L5(n,t,e);y=Ar(r,o,i),d=t==="left"?-xo:xo}return{titleX:m,titleY:y,maxWidth:h,rotation:d}}class yy extends wd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=Vo(e,Number.POSITIVE_INFINITY),t=Vo(t,Number.NEGATIVE_INFINITY),r=Vo(r,Number.POSITIVE_INFINITY),i=Vo(i,Number.NEGATIVE_INFINITY),{min:Vo(e,r),max:Vo(t,i),minDefined:Vs(e),maxDefined:Vs(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:t,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:Vo(t,Vo(r,t)),max:Vo(r,Vo(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){It(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Uwe(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?F5(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=S_e(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){It(this.options.afterUpdate,[this])}beforeSetDimensions(){It(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){It(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),It(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){It(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=It(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){It(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){It(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=j5(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,m=ns(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),d+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-iv(e.grid)-t.padding-$5(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=pwe(Math.min(Math.asin(ns((u.highest.height+6)/a,-1,1)),Math.asin(ns(l/c,-1,1))-Math.asin(ns(h/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){It(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){It(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=$5(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=iv(s)+l):(e.height=this.maxHeight,e.width=iv(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),m=r.padding*2,y=Jd(this.labelRotation),g=Math.cos(y),b=Math.sin(y);if(a){const w=r.mirror?0:b*d.width+g*h.height;e.height=Math.min(this.maxHeight,e.height+w+m)}else{const w=r.mirror?0:g*d.width+b*h.height;e.width=Math.min(this.maxWidth,e.width+w+m)}this._calculatePadding(c,u,b,g)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,m=0;l?c?(h=i*e.width,m=r*t.height):(h=r*e.height,m=i*t.width):s==="start"?m=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,m=t.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=t.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){It(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)et(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=F5(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/j5(t,r));let c=0,u=0,d,h,m,y,g,b,w,x,_,S,P;for(d=0;d<t;d+=l){if(y=e[d].label,g=this._resolveTickFontOptions(d),i.font=b=g.string,w=s[b]=s[b]||{data:{},gc:[]},x=g.lineHeight,_=S=0,!et(y)&&!kn(y))_=h5(i,w.data,w.gc,_,y),S=x;else if(kn(y))for(h=0,m=y.length;h<m;++h)P=y[h],!et(P)&&!kn(P)&&(_=h5(i,w.data,w.gc,_,P),S+=x);o.push(_),a.push(S),c=Math.max(_,c),u=Math.max(S,u)}N_e(s,t);const N=o.indexOf(c),T=a.indexOf(u),C=k=>({width:o[k]||0,height:a[k]||0});return{first:C(0),last:C(t-1),widest:C(N),highest:C(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return ywe(this._alignToPixels?kd(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=M_e(this.getContext(),e,r))}return this.$context||(this.$context=O_e(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Jd(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=iv(s),m=[],y=a.setContext(this.getContext()),g=y.display?y.width:0,b=g/2,w=function(z){return kd(r,z,g)};let x,_,S,P,N,T,C,k,M,L,F,j;if(o==="top")x=w(this.bottom),T=this.bottom-h,k=x-b,L=w(e.top)+b,j=e.bottom;else if(o==="bottom")x=w(this.top),L=e.top,j=w(e.bottom)-b,T=x+b,k=this.top+h;else if(o==="left")x=w(this.right),N=this.right-h,C=x-b,M=w(e.left)+b,F=e.right;else if(o==="right")x=w(this.left),M=e.left,F=w(e.right)-b,N=x+b,C=this.left+h;else if(t==="x"){if(o==="center")x=w((e.top+e.bottom)/2+.5);else if(Qe(o)){const z=Object.keys(o)[0],W=o[z];x=w(this.chart.scales[z].getPixelForValue(W))}L=e.top,j=e.bottom,T=x+b,k=T+h}else if(t==="y"){if(o==="center")x=w((e.left+e.right)/2);else if(Qe(o)){const z=Object.keys(o)[0],W=o[z];x=w(this.chart.scales[z].getPixelForValue(W))}N=x-b,C=N-h,M=e.left,F=e.right}const q=Ae(i.ticks.maxTicksLimit,d),H=Math.max(1,Math.ceil(d/q));for(_=0;_<d;_+=H){const z=this.getContext(_),W=s.setContext(z),V=a.setContext(z),U=W.lineWidth,K=W.color,Q=V.dash||[],B=V.dashOffset,Y=W.tickWidth,re=W.tickColor,te=W.tickBorderDash||[],ie=W.tickBorderDashOffset;S=R_e(this,_,l),S!==void 0&&(P=kd(r,S,U),c?N=C=M=F=P:T=k=L=j=P,m.push({tx1:N,ty1:T,tx2:C,ty2:k,x1:M,y1:L,x2:F,y2:j,width:U,color:K,borderDash:Q,borderDashOffset:B,tickWidth:Y,tickColor:re,tickBorderDash:te,tickBorderDashOffset:ie}))}return this._ticksLength=d,this._borderValue=x,m}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=iv(r.grid),m=h+u,y=d?-u:m,g=-Jd(this.labelRotation),b=[];let w,x,_,S,P,N,T,C,k,M,L,F,j="middle";if(i==="top")N=this.bottom-y,T=this._getXAxisLabelAlignment();else if(i==="bottom")N=this.top+y,T=this._getXAxisLabelAlignment();else if(i==="left"){const H=this._getYAxisLabelAlignment(h);T=H.textAlign,P=H.x}else if(i==="right"){const H=this._getYAxisLabelAlignment(h);T=H.textAlign,P=H.x}else if(t==="x"){if(i==="center")N=(e.top+e.bottom)/2+m;else if(Qe(i)){const H=Object.keys(i)[0],z=i[H];N=this.chart.scales[H].getPixelForValue(z)+m}T=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")P=(e.left+e.right)/2-m;else if(Qe(i)){const H=Object.keys(i)[0],z=i[H];P=this.chart.scales[H].getPixelForValue(z)}T=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(l==="start"?j="top":l==="end"&&(j="bottom"));const q=this._getLabelSizes();for(w=0,x=a.length;w<x;++w){_=a[w],S=_.label;const H=s.setContext(this.getContext(w));C=this.getPixelForTick(w)+s.labelOffset,k=this._resolveTickFontOptions(w),M=k.lineHeight,L=kn(S)?S.length:1;const z=L/2,W=H.color,V=H.textStrokeColor,U=H.textStrokeWidth;let K=T;o?(P=C,T==="inner"&&(w===x-1?K=this.options.reverse?"left":"right":w===0?K=this.options.reverse?"right":"left":K="center"),i==="top"?c==="near"||g!==0?F=-L*M+M/2:c==="center"?F=-q.highest.height/2-z*M+M:F=-q.highest.height+M/2:c==="near"||g!==0?F=M/2:c==="center"?F=q.highest.height/2-z*M:F=q.highest.height-L*M,d&&(F*=-1),g!==0&&!H.showLabelBackdrop&&(P+=M/2*Math.sin(g))):(N=C,F=(1-L)*M/2);let Q;if(H.showLabelBackdrop){const B=Bs(H.backdropPadding),Y=q.heights[w],re=q.widths[w];let te=F-B.top,ie=0-B.left;switch(j){case"middle":te-=Y/2;break;case"bottom":te-=Y;break}switch(T){case"center":ie-=re/2;break;case"right":ie-=re;break;case"inner":w===x-1?ie-=re:w>0&&(ie-=re/2);break}Q={left:ie,top:te,width:re+B.width,height:Y+B.height,color:H.backdropColor}}b.push({label:S,font:k,textOffset:F,options:{rotation:g,color:W,strokeColor:V,strokeWidth:U,textAlign:K,textBaseline:j,translation:[P,N],backdrop:Q}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Jd(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return t==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){const l=i[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=kd(e,this.left,o)-o/2,u=kd(e,this.right,a)+a/2,d=h=l):(d=kd(e,this.top,o)-o/2,h=kd(e,this.bottom,a)+a/2,c=u=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(c,d),t.lineTo(u,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&sC(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;v0(r,c,0,u,l,a)}i&&oC(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const s=Pr(r.font),o=Bs(r.padding),a=r.align;let l=s.lineHeight/2;t==="bottom"||t==="center"||Qe(t)?(l+=o.bottom,kn(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=L_e(this,l,t,a);v0(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:h,textAlign:D_e(a,t,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=Ae(e.grid&&e.grid.z,-1),i=Ae(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==yy.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=t.length;s<o;++s){const a=t[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Pr(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class s1{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;$_e(t)&&(r=this.register(t));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,j_e(e,o,r),this.override&&at.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in at[i]&&(delete at[i][r],this.override&&delete Ff[r])}}function j_e(n,e,t){const r=p0(Object.create(null),[t?at.get(t):{},at.get(e),n.defaults]);at.set(e,r),n.defaultRoutes&&F_e(e,n.defaultRoutes),n.descriptors&&at.describe(e,n.descriptors)}function F_e(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");at.route(s,i,l,a)})}function $_e(n){return"id"in n&&"defaults"in n}class V_e{constructor(){this.controllers=new s1(fm,"datasets",!0),this.elements=new s1(wd,"elements"),this.plugins=new s1(Object,"plugins"),this.scales=new s1(yy,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ot(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,r){const i=GD(e);It(r["before"+i],[],r),t[e](r),It(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Go=new V_e;class B_e{constructor(){this._init=[]}notify(e,t,r,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[t,i,s.options];if(It(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){et(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=Ae(r.options&&r.options.plugins,{}),s=z_e(r);return i===!1&&!t?[]:H_e(e,s,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function z_e(n){const e={},t=[],r=Object.keys(Go.plugins.items);for(let s=0;s<r.length;s++)t.push(Go.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function U_e(n,e){return!e&&n===!1?null:n===!0?{}:n}function H_e(n,{plugins:e,localIds:t},r,i){const s=[],o=n.getContext();for(const a of e){const l=a.id,c=U_e(r[l],i);c!==null&&s.push({plugin:a,options:W_e(n.config,{plugin:a,local:t[l]},c,o)})}return s}function W_e(n,{plugin:e,local:t},r,i){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Kk(n,e){const t=at.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function G_e(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function q_e(n,e){return n===e?"_index_":"_value_"}function V5(n){if(n==="x"||n==="y"||n==="r")return n}function K_e(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Yk(n,...e){if(V5(n))return n;for(const t of e){const r=t.axis||K_e(t.position)||n.length>1&&V5(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function B5(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function Y_e(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return B5(n,"x",t[0])||B5(n,"y",t[0])}return{}}function X_e(n,e){const t=Ff[n.type]||{scales:{}},r=e.scales||{},i=Kk(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Qe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Yk(o,a,Y_e(o,n),at.scales[a.type]),c=q_e(l,i),u=t.scales||{};s[o]=yb(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||Kk(a,e),u=(Ff[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=G_e(d,l),m=o[h+"AxisID"]||h;s[m]=s[m]||Object.create(null),yb(s[m],[{axis:h},r[m],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];yb(a,[at.scales[a.type],at.scale])}),s}function SK(n){const e=n.options||(n.options={});e.plugins=Ae(e.plugins,{}),e.scales=X_e(n,e)}function EK(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function Q_e(n){return n=n||{},n.data=EK(n.data),SK(n),n}const z5=new Map,TK=new Set;function o1(n,e){let t=z5.get(n);return t||(t=e(),z5.set(n,t),TK.add(t)),t}const sv=(n,e,t)=>{const r=Wg(e,t);r!==void 0&&n.add(r)};class J_e{constructor(e){this._config=Q_e(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=EK(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),SK(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return o1(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return o1(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return o1(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return o1(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(t);if(a)return a;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(d=>sv(l,e,d))),u.forEach(d=>sv(l,i,d)),u.forEach(d=>sv(l,Ff[s]||{},d)),u.forEach(d=>sv(l,at,d)),u.forEach(d=>sv(l,Gk,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),TK.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Ff[t]||{},at.datasets[t]||{},{type:t},at,Gk]}resolveNamedOptions(e,t,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=U5(this._resolverCache,e,i);let l=o;if(e1e(o,t)){s.$shared=!1,r=ld(r)?r():r;const c=this.createResolver(e,r,a);l=Gg(o,r,c)}for(const c of t)s[c]=l[c];return s}createResolver(e,t,r=[""],i){const{resolver:s}=U5(this._resolverCache,e,r);return Qe(t)?Gg(s,t,void 0,i):s}}function U5(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let s=r.get(i);return s||(s={resolver:XD(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const Z_e=n=>Qe(n)&&Object.getOwnPropertyNames(n).some(e=>ld(n[e]));function e1e(n,e){const{isScriptable:t,isIndexable:r}=lK(n);for(const i of e){const s=t(i),o=r(i),a=(o||s)&&n[i];if(s&&(ld(a)||Z_e(a))||o&&kn(a))return!0}return!1}var t1e="4.5.0";const n1e=["top","bottom","left","right","chartArea"];function H5(n,e){return n==="top"||n==="bottom"||n1e.indexOf(n)===-1&&e==="x"}function W5(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function G5(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),It(t&&t.onComplete,[n],e)}function r1e(n){const e=n.chart,t=e.options.animation;It(t&&t.onProgress,[n],e)}function CK(n){return ZD()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Z1={},q5=n=>{const e=CK(n);return Object.values(Z1).filter(t=>t.canvas===e).pop()};function i1e(n,e,t){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=e){const o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function s1e(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}var Sc;let Hx=(Sc=class{static register(...e){Go.add(...e),K5()}static unregister(...e){Go.remove(...e),K5()}constructor(e,t){const r=this.config=new J_e(t),i=CK(e),s=q5(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||A_e(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=twe(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new B_e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=xwe(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Z1[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}qa.listen(this,"complete",G5),qa.listen(this,"progress",r1e),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:s}=this;return et(e)?t&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Go}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():g5(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return f5(this.canvas,this.ctx),this}stop(){return qa.stop(this),this}resize(e,t){qa.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,g5(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),It(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};ot(t,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const a=t[o],l=Yk(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ot(s,o=>{const a=o.options,l=a.id,c=Yk(l,a),u=Ae(a.type,o.dtype);(a.position===void 0||H5(a.position,c)!==H5(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const h=Go.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),ot(i,(o,a)=>{o||delete r[a]}),ot(r,o=>{Rs.configure(this,o,o.options),Rs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(W5("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{t.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const s=t[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Kk(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Go.getController(a),{datasetElementType:c,dataElementType:u}=at.datasets[a];Object.assign(l,{dataElementType:Go.getElement(u),datasetElementType:c&&Go.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ot(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ot(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(W5("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ot(this.scales,e=>{Rs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!r5(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of t){const o=r==="_removeElements"?-s:s;i1e(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<t;s++)if(!r5(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Rs.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],ot(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,ld(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qa.has(this)?this.attached&&!qa.running(this)&&qa.start(this):(this.draw(),G5({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,s;for(i=0,s=t.length;i<s;++i){const o=t[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=Txe(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&sC(t,i),e.controller.draw(),i&&oC(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return y0(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const s=n_e.modes[t];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=ip(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);m0(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),qa.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),f5(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Z1[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ot(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){ot(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},ot(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let s,o,a,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!FS(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(t,e),a=r?e:s(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:s}=this,o=t,a=this._getActiveElements(e,i,r,o),l=awe(e),c=s1e(e,this._lastEvent,r,l);r&&(this._lastEvent=null,It(s.onHover,[e,a,this],this),l&&It(s.onClick,[e,a,this],this));const u=!FS(a,i);return(u||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=c,u}_getActiveElements(e,t,r,i){if(e.type==="mouseout")return[];if(!r)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},J(Sc,"defaults",at),J(Sc,"instances",Z1),J(Sc,"overrides",Ff),J(Sc,"registry",Go),J(Sc,"version",t1e),J(Sc,"getChart",q5),Sc);function K5(){return ot(Hx.instances,n=>n._plugins.invalidate())}function PK(n,e,t=e){n.lineCap=Ae(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Ae(t.borderDash,e.borderDash)),n.lineDashOffset=Ae(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Ae(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Ae(t.borderWidth,e.borderWidth),n.strokeStyle=Ae(t.borderColor,e.borderColor)}function o1e(n,e,t){n.lineTo(t.x,t.y)}function a1e(n){return n.stepped?Mwe:n.tension||n.cubicInterpolationMode==="monotone"?Dwe:o1e}function IK(n,e,t={}){const r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function l1e(n,e,t,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=IK(i,t,r),u=a1e(s);let{move:d=!0,reverse:h}=r||{},m,y,g;for(m=0;m<=c;++m)y=i[(a+(h?c-m:m))%o],!y.skip&&(d?(n.moveTo(y.x,y.y),d=!1):u(n,g,y,h,s.stepped),g=y);return l&&(y=i[(a+(h?c:0))%o],u(n,g,y,h,s.stepped)),!!l}function c1e(n,e,t,r){const i=e.points,{count:s,start:o,ilen:a}=IK(i,t,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,h,m,y,g,b,w;const x=S=>(o+(c?a-S:S))%s,_=()=>{g!==b&&(n.lineTo(u,b),n.lineTo(u,g),n.lineTo(u,w))};for(l&&(m=i[x(0)],n.moveTo(m.x,m.y)),h=0;h<=a;++h){if(m=i[x(h)],m.skip)continue;const S=m.x,P=m.y,N=S|0;N===y?(P<g?g=P:P>b&&(b=P),u=(d*u+S)/++d):(_(),n.lineTo(S,P),y=N,d=0,g=b=P),w=P}_()}function Xk(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?c1e:l1e}function u1e(n){return n.stepped?fxe:n.tension||n.cubicInterpolationMode==="monotone"?pxe:Ld}function d1e(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),PK(n,e.options),n.stroke(i)}function h1e(n,e,t,r){const{segments:i,options:s}=e,o=Xk(e);for(const a of i)PK(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}const f1e=typeof Path2D=="function";function p1e(n,e,t,r){f1e&&!e.options.segment?d1e(n,e,t,r):h1e(n,e,t,r)}class Iv extends wd{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;sxe(this._points,r,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_xe(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],s=this.points,o=bxe(this,{property:t,start:i,end:i});if(!o.length)return;const a=[],l=u1e(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:h}=o[c],m=s[d],y=s[h];if(m===y){a.push(m);continue}const g=Math.abs((i-m[t])/(y[t]-m[t])),b=l(m,y,g,r.stepped);b[t]=e[t],a.push(b)}return a.length===1?a[0]:a}pathSegment(e,t,r){return Xk(this)(e,this,t,r)}path(e,t,r){const i=this.segments,s=Xk(this);let o=this._loop;t=t||0,r=r||this.points.length-t;for(const a of i)o&=s(e,this,a,{start:t,end:t+r-1});return!!o}draw(e,t,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),p1e(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}J(Iv,"id","line"),J(Iv,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),J(Iv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),J(Iv,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Y5(n,e,t,r){const i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}class eA extends wd{constructor(t){super();J(this,"parsed");J(this,"skip");J(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return Y5(this,t,"x",r)}inYRange(t,r){return Y5(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);const i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){const i=this.options;this.skip||i.radius<.1||!y0(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,qk(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}J(eA,"id","point"),J(eA,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),J(eA,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function kK(n,e){const{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return n.horizontal?(d=o/2,a=Math.min(t,i),l=Math.max(t,i),c=r-d,u=r+d):(d=s/2,a=t-d,l=t+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function Ou(n,e,t,r){return n?0:ns(e,t,r)}function m1e(n,e,t){const r=n.options.borderWidth,i=n.borderSkipped,s=aK(r);return{t:Ou(i.top,s.top,0,t),r:Ou(i.right,s.right,0,e),b:Ou(i.bottom,s.bottom,0,t),l:Ou(i.left,s.left,0,e)}}function g1e(n,e,t){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=dm(i),o=Math.min(e,t),a=n.borderSkipped,l=r||Qe(i);return{topLeft:Ou(!l||a.top||a.left,s.topLeft,0,o),topRight:Ou(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Ou(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ou(!l||a.bottom||a.right,s.bottomRight,0,o)}}function y1e(n){const e=kK(n),t=e.right-e.left,r=e.bottom-e.top,i=m1e(n,t/2,r/2),s=g1e(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function AI(n,e,t,r){const i=e===null,s=t===null,a=n&&!(i&&s)&&kK(n,r);return a&&(i||Zd(e,a.left,a.right))&&(s||Zd(t,a.top,a.bottom))}function v1e(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function b1e(n,e){n.rect(e.x,e.y,e.w,e.h)}function SI(n,e,t={}){const r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-r,o=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+o,radius:n.radius}}class tA extends wd{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=y1e(this),a=v1e(o.radius)?BS:b1e;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,SI(o,t,s)),e.clip(),a(e,SI(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,SI(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return AI(this,e,t,r)}inXRange(e,t){return AI(this,e,null,t)}inYRange(e,t){return AI(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}J(tA,"id","bar"),J(tA,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),J(tA,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const X5=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},w1e=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class Q5 extends wd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=It(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Pr(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=X5(r,s);let c,u;t.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,m=-u;return this.legendItems.forEach((y,g)=>{const b=r+t/2+s.measureText(y.text).width;(g===0||c[c.length-1]+b+2*a>o)&&(d+=u,c[c.length-(g>0?0:1)]=0,m+=u,h++),l[g]={left:0,top:m,row:h,width:b,height:i},c[c.length-1]+=b+a}),d}_fitCols(e,t,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,h=0,m=0,y=0,g=0;return this.legendItems.forEach((b,w)=>{const{itemWidth:x,itemHeight:_}=x1e(r,t,s,b,i);w>0&&m+_+2*a>u&&(d+=h+a,c.push({width:h,height:m}),y+=h+a,g++,h=m=0),l[w]={left:y,top:m,col:g,width:x,height:_},h=Math.max(h,x),m+=_+a}),d+=h,c.push({width:h,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=hm(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ar(r,this.left+i,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=Ar(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Ar(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=Ar(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;sC(e,this),this._draw(),oC(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=at.color,l=hm(e.rtl,this.left,this.width),c=Pr(o.font),{padding:u}=o,d=c.size,h=d/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:g,itemHeight:b}=X5(o,d),w=function(N,T,C){if(isNaN(y)||y<=0||isNaN(g)||g<0)return;i.save();const k=Ae(C.lineWidth,1);if(i.fillStyle=Ae(C.fillStyle,a),i.lineCap=Ae(C.lineCap,"butt"),i.lineDashOffset=Ae(C.lineDashOffset,0),i.lineJoin=Ae(C.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=Ae(C.strokeStyle,a),i.setLineDash(Ae(C.lineDash,[])),o.usePointStyle){const M={radius:g*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:k},L=l.xPlus(N,y/2),F=T+h;sK(i,M,L,F,o.pointStyleWidth&&y)}else{const M=T+Math.max((d-g)/2,0),L=l.leftForLtr(N,y),F=dm(C.borderRadius);i.beginPath(),Object.values(F).some(j=>j!==0)?BS(i,{x:L,y:M,w:y,h:g,radius:F}):i.rect(L,M,y,g),i.fill(),k!==0&&i.stroke()}i.restore()},x=function(N,T,C){v0(i,C.text,N,T+b/2,c,{strikethrough:C.hidden,textAlign:l.textAlign(C.textAlign)})},_=this.isHorizontal(),S=this._computeTitleHeight();_?m={x:Ar(s,this.left+u,this.right-r[0]),y:this.top+u+S,line:0}:m={x:this.left+u,y:Ar(s,this.top+S+u,this.bottom-t[0].height),line:0},fK(this.ctx,e.textDirection);const P=b+u;this.legendItems.forEach((N,T)=>{i.strokeStyle=N.fontColor,i.fillStyle=N.fontColor;const C=i.measureText(N.text).width,k=l.textAlign(N.textAlign||(N.textAlign=o.textAlign)),M=y+h+C;let L=m.x,F=m.y;l.setWidth(this.width),_?T>0&&L+M+u>this.right&&(F=m.y+=P,m.line++,L=m.x=Ar(s,this.left+u,this.right-r[m.line])):T>0&&F+P>this.bottom&&(L=m.x=L+t[m.line].width+u,m.line++,F=m.y=Ar(s,this.top+S+u,this.bottom-t[m.line].height));const j=l.x(L);if(w(j,F,N),L=_we(k,L+y+h,_?L+M:this.right,e.rtl),x(l.x(L),F,N),_)m.x+=M+u;else if(typeof N.text!="string"){const q=c.lineHeight;m.y+=RK(N,q)+u}else m.y+=P}),pK(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Pr(t.font),i=Bs(t.padding);if(!t.display)return;const s=hm(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=r.size/2,c=i.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Ar(e.align,d,this.right-h);else{const y=this.columnSizes.reduce((g,b)=>Math.max(g,b.height),0);u=c+Ar(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const m=Ar(a,d,d+h);o.textAlign=s.textAlign(KD(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,v0(o,t.text,m,u,r)}_computeTitleHeight(){const e=this.options.title,t=Pr(e.font),r=Bs(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(Zd(e,this.left,this.right)&&Zd(t,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Zd(e,i.left,i.left+i.width)&&Zd(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!S1e(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=w1e(i,r);i&&!s&&It(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&It(t.onHover,[e,r,this],this)}else r&&It(t.onClick,[e,r,this],this)}}function x1e(n,e,t,r,i){const s=_1e(r,n,e,t),o=A1e(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function _1e(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}function A1e(n,e,t){let r=n;return typeof e.text!="string"&&(r=RK(e,t)),r}function RK(n,e){const t=n.text?n.text.length:0;return e*t}function S1e(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var E1e={id:"legend",_element:Q5,start(n,e,t){const r=n.legend=new Q5({ctx:n.ctx,options:t,chart:n});Rs.configure(n,r,t),Rs.addBox(n,r)},stop(n){Rs.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;Rs.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=Bs(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};let NK=class extends wd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=kn(r.text)?r.text.length:1;this._padding=Bs(r.padding);const s=i*Pr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Ar(a,r,s),d=t+e,c=s-r):(o.position==="left"?(u=r+e,d=Ar(a,i,t),l=qn*-.5):(u=s-e,d=Ar(a,t,i),l=qn*.5),c=i-t),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=Pr(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);v0(e,t.text,0,0,r,{color:t.color,maxWidth:l,rotation:c,textAlign:KD(t.align),textBaseline:"middle",translation:[o,a]})}};function T1e(n,e){const t=new NK({ctx:n.ctx,options:e,chart:n});Rs.configure(n,t,e),Rs.addBox(n,t),n.titleBlock=t}var C1e={id:"title",_element:NK,start(n,e,t){T1e(n,t)},stop(n){const e=n.titleBlock;Rs.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;Rs.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const kv={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,s=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Wk(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,r=l.y}return{x:t,y:r}}};function Uo(n,e){return e&&(kn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Ka(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function P1e(n,e){const{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function J5(n,e){const t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:a}=e,l=Pr(e.bodyFont),c=Pr(e.titleFont),u=Pr(e.footerFont),d=s.length,h=i.length,m=r.length,y=Bs(e.padding);let g=y.height,b=0,w=r.reduce((S,P)=>S+P.before.length+P.lines.length+P.after.length,0);if(w+=n.beforeBody.length+n.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),w){const S=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=m*S+(w-m)*l.lineHeight+(w-1)*e.bodySpacing}h&&(g+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let x=0;const _=function(S){b=Math.max(b,t.measureText(S).width+x)};return t.save(),t.font=c.string,ot(n.title,_),t.font=l.string,ot(n.beforeBody.concat(n.afterBody),_),x=e.displayColors?o+2+e.boxPadding:0,ot(r,S=>{ot(S.before,_),ot(S.lines,_),ot(S.after,_)}),x=0,t.font=u.string,ot(n.footer,_),t.restore(),b+=y.width,{width:b,height:g}}function I1e(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function k1e(n,e,t,r){const{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if(n==="left"&&i+s+o>e.width||n==="right"&&i-s-o<0)return!0}function R1e(n,e,t,r){const{x:i,width:s}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),k1e(c,n,e,t)&&(c="center"),c}function Z5(n,e,t){const r=t.yAlign||e.yAlign||I1e(n,t);return{xAlign:t.xAlign||e.xAlign||R1e(n,e,t,r),yAlign:r}}function N1e(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function O1e(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function eV(n,e,t,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=i+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:m}=dm(o);let y=N1e(e,a);const g=O1e(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,h)+i:a==="right"&&(y+=Math.max(d,m)+i),{x:ns(y,0,r.width-e.width),y:ns(g,0,r.height-e.height)}}function a1(n,e,t){const r=Bs(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function tV(n){return Uo([],Ka(n))}function M1e(n,e,t){return ip(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function nV(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const OK={beforeTitle:Ha,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Ha,beforeBody:Ha,beforeLabel:Ha,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return et(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ha,afterBody:Ha,beforeFooter:Ha,footer:Ha,afterFooter:Ha};function oi(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?OK[e].call(t,r):i}class Qk extends wd{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,s=new gK(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=M1e(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=oi(r,"beforeTitle",this,e),s=oi(r,"title",this,e),o=oi(r,"afterTitle",this,e);let a=[];return a=Uo(a,Ka(i)),a=Uo(a,Ka(s)),a=Uo(a,Ka(o)),a}getBeforeBody(e,t){return tV(oi(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return ot(e,s=>{const o={before:[],lines:[],after:[]},a=nV(r,s);Uo(o.before,Ka(oi(a,"beforeLabel",this,s))),Uo(o.lines,oi(a,"label",this,s)),Uo(o.after,Ka(oi(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,t){return tV(oi(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=oi(r,"beforeFooter",this,e),s=oi(r,"footer",this,e),o=oi(r,"afterFooter",this,e);let a=[];return a=Uo(a,Ka(i)),a=Uo(a,Ka(s)),a=Uo(a,Ka(o)),a}_createItems(e){const t=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(P1e(this.chart,t[l]));return e.filter&&(a=a.filter((u,d,h)=>e.filter(u,d,h,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),ot(a,u=>{const d=nV(e.callbacks,u);i.push(oi(d,"labelColor",this,u)),s.push(oi(d,"labelPointStyle",this,u)),o.push(oi(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=kv[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=J5(this,r),c=Object.assign({},a,l),u=Z5(this.chart,r,c),d=eV(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const s=this.getCaretPosition(e,r,i);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=dm(a),{x:h,y:m}=e,{width:y,height:g}=t;let b,w,x,_,S,P;return s==="center"?(S=m+g/2,i==="left"?(b=h,w=b-o,_=S+o,P=S-o):(b=h+y,w=b+o,_=S-o,P=S+o),x=b):(i==="left"?w=h+Math.max(l,u)+o:i==="right"?w=h+y-Math.max(c,d)-o:w=this.caretX,s==="top"?(_=m,S=_-o,b=w-o,x=w+o):(_=m+g,S=_+o,b=w+o,x=w-o),P=_),{x1:b,x2:w,x3:x,y1:_,y2:S,y3:P}}drawTitle(e,t,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=hm(r.rtl,this.x,this.width);for(e.x=a1(this,r.titleAlign,r),t.textAlign=c.textAlign(r.titleAlign),t.textBaseline="middle",o=Pr(r.titleFont),a=r.titleSpacing,t.fillStyle=r.titleColor,t.font=o.string,l=0;l<s;++l)t.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,t,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=Pr(s.bodyFont),d=a1(this,"left",s),h=i.x(d),m=l<u.lineHeight?(u.lineHeight-l)/2:0,y=t.y+m;if(s.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(h,c)+c/2,w=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,qk(e,g,b,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,qk(e,g,b,w)}else{e.lineWidth=Qe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=i.leftForLtr(h,c),b=i.leftForLtr(i.xPlus(h,1),c-2),w=dm(o.borderRadius);Object.values(w).some(x=>x!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,BS(e,{x:g,y,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),BS(e,{x:b,y:y+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(g,y,c,l),e.strokeRect(g,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(b,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=Pr(r.bodyFont);let h=d.lineHeight,m=0;const y=hm(r.rtl,this.x,this.width),g=function(C){t.fillText(C,y.x(e.x+m),e.y+h/2),e.y+=h+s},b=y.textAlign(o);let w,x,_,S,P,N,T;for(t.textAlign=o,t.textBaseline="middle",t.font=d.string,e.x=a1(this,b,r),t.fillStyle=r.bodyColor,ot(this.beforeBody,g),m=a&&b!=="right"?o==="center"?c/2+u:c+2+u:0,S=0,N=i.length;S<N;++S){for(w=i[S],x=this.labelTextColors[S],t.fillStyle=x,ot(w.before,g),_=w.lines,a&&_.length&&(this._drawColorBox(t,e,S,y,r),h=Math.max(d.lineHeight,l)),P=0,T=_.length;P<T;++P)g(_[P]),h=d.lineHeight;ot(w.after,g)}m=0,h=d.lineHeight,ot(this.afterBody,g),e.y-=s}drawFooter(e,t,r){const i=this.footer,s=i.length;let o,a;if(s){const l=hm(r.rtl,this.x,this.width);for(e.x=a1(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=l.textAlign(r.footerAlign),t.textBaseline="middle",o=Pr(r.footerFont),t.fillStyle=r.footerColor,t.font=o.string,a=0;a<s;++a)t.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:h,bottomLeft:m,bottomRight:y}=dm(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+d,l),o==="top"&&this.drawCaret(e,t,r,i),t.lineTo(a+c-h,l),t.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&s==="right"&&this.drawCaret(e,t,r,i),t.lineTo(a+c,l+u-y),t.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,t,r,i),t.lineTo(a+m,l+u),t.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&s==="left"&&this.drawCaret(e,t,r,i),t.lineTo(a,l+d),t.quadraticCurveTo(a,l,a+d,l),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=kv[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=J5(this,e),l=Object.assign({},o,this._size),c=Z5(t,e,l),u=eV(e,l,c,t);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Bs(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,t),fK(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),pK(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!FS(r,i),o=this._positionChanged(i,t);(s||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,r),a=this._positionChanged(o,e),l=t||!FS(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:r,caretY:i,options:s}=this,o=kv[s.position].call(this,e,t);return o!==!1&&(r!==o.x||i!==o.y)}}J(Qk,"positioners",kv);var D1e={id:"tooltip",_element:Qk,positioners:kv,afterInit(n,e,t){t&&(n.tooltip=new Qk({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:OK},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const L1e=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function j1e(n,e,t,r){const i=n.indexOf(e);if(i===-1)return L1e(n,e,t,r);const s=n.lastIndexOf(e);return i!==s?t:i}const F1e=(n,e)=>n===null?null:ns(Math.round(n),0,e);function rV(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class Jk extends yy{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:i,label:s}of t)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(et(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:j1e(r,e,Ae(t,e),this._addedLabels),F1e(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return rV.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}J(Jk,"id","category"),J(Jk,"defaults",{ticks:{callback:rV}});function $1e(n,e){const t=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=n,m=s||1,y=u-1,{min:g,max:b}=e,w=!et(o),x=!et(a),_=!et(c),S=(b-g)/(d+1);let P=s5((b-g)/y/m)*m,N,T,C,k;if(P<1e-14&&!w&&!x)return[{value:g},{value:b}];k=Math.ceil(b/P)-Math.floor(g/P),k>y&&(P=s5(k*P/y/m)*m),et(l)||(N=Math.pow(10,l),P=Math.ceil(P*N)/N),i==="ticks"?(T=Math.floor(g/P)*P,C=Math.ceil(b/P)*P):(T=g,C=b),w&&x&&s&&hwe((a-o)/s,P/1e3)?(k=Math.round(Math.min((a-o)/P,u)),P=(a-o)/k,T=o,C=a):_?(T=w?o:T,C=x?a:C,k=c-1,P=(C-T)/k):(k=(C-T)/P,vb(k,Math.round(k),P/1e3)?k=Math.round(k):k=Math.ceil(k));const M=Math.max(o5(P),o5(T));N=Math.pow(10,et(l)?M:l),T=Math.round(T*N)/N,C=Math.round(C*N)/N;let L=0;for(w&&(h&&T!==o?(t.push({value:o}),T<o&&L++,vb(Math.round((T+L*P)*N)/N,o,iV(o,S,n))&&L++):T<o&&L++);L<k;++L){const F=Math.round((T+L*P)*N)/N;if(x&&F>a)break;t.push({value:F})}return x&&h&&C!==a?t.length&&vb(t[t.length-1].value,a,iV(a,S,n))?t[t.length-1].value=a:t.push({value:a}):(!x||C===a)&&t.push({value:C}),t}function iV(n,e,{horizontal:t,minRotation:r}){const i=Jd(r),s=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}class V1e extends yy{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return et(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=t?i:l,a=l=>s=r?s:l;if(e){const l=Ra(i),c=Ra(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=$1e(i,s);return e.bounds==="ticks"&&fwe(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return nK(e,this.chart.options.locale,this.options.ticks.format)}}class Zk extends V1e{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Vs(e)?e:0,this.max=Vs(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=Jd(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}J(Zk,"id","linear"),J(Zk,"defaults",{ticks:{callback:iK.formatters.numeric}});const lC={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yi=Object.keys(lC);function sV(n,e){return n-e}function oV(n,e){if(et(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Vs(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(g0(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,i)),+o)}function aV(n,e,t,r){const i=yi.length;for(let s=yi.indexOf(n);s<i-1;++s){const o=lC[yi[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=r)return yi[s]}return yi[i-1]}function B1e(n,e,t,r,i){for(let s=yi.length-1;s>=yi.indexOf(t);s--){const o=yi[s];if(lC[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return yi[t?yi.indexOf(t):0]}function z1e(n){for(let e=yi.indexOf(n)+1,t=yi.length;e<t;++e)if(lC[yi[e]].common)return yi[e]}function lV(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:r,hi:i}=qD(t,e),s=t[r]>=e?t[r]:t[i];n[s]=!0}}function U1e(n,e,t,r){const i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=t[a],l>=0&&(e[l].major=!0);return e}function cV(n,e,t){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!t?r:U1e(n,r,i,t)}class HS extends yy{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new Qxe._date(e.adapters.date);i.init(t),yb(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:oV(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Vs(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),s=Vs(s)&&!isNaN(s)?s:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=bwe(i,s,o);return this._unit=t.unit||(r.autoSkip?aV(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):B1e(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:z1e(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),cV(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=ns(t,0,o),r=ns(r,0,o),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||aV(s.minUnit,t,r,this._getLabelCapacity(t)),a=Ae(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=g0(l)||l===!0,u={};let d=t,h,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,t,o)>1e5*a)throw new Error(t+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(h=d,m=0;h<r;h=+e.add(h,a,o),m++)lV(u,h,y);return(h===r||i.bounds==="ticks"||m===1)&&lV(u,h,y),Object.keys(u).sort(sV).map(g=>+g)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,s=this._unit,o=t||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,r,i){const s=this.options,o=s.ticks.callback;if(o)return It(o,[e,t,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=r[t],m=c&&d&&h&&h.major;return this._adapter.format(e,i||(m?d:u))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=Jd(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,s=this._tickFormatFunction(e,0,cV(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(oV(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Zq(e.sort(sV))}}J(HS,"id","time"),J(HS,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function l1(n,e,t){let r=0,i=n.length-1,s,o,a,l;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=eh(n,"pos",e)),{pos:s,time:a}=n[r],{pos:o,time:l}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=eh(n,"time",e)),{time:s,pos:a}=n[r],{time:o,pos:l}=n[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class uV extends HS{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=l1(t,this.min),this._tableRange=l1(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=r&&i.push(c);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(l1(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return l1(this._table,r*this._tableRange+this._minPos,!0)}}J(uV,"id","timeseries"),J(uV,"defaults",HS.defaults);const MK="label";function dV(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function H1e(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function DK(n,e){n.labels=e}function LK(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:MK;const r=[];n.datasets=e.map(i=>{const s=n.datasets.find(o=>o[t]===i[t]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function W1e(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:MK;const t={labels:[],datasets:[]};return DK(t,n.labels),LK(t,n.datasets,e),t}function G1e(n,e){const{height:t=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=n,m=A.useRef(null),y=A.useRef(null),g=()=>{m.current&&(y.current=new Hx(m.current,{type:o,data:W1e(a,s),options:l&&{...l},plugins:c}),dV(e,y.current))},b=()=>{dV(e,null),y.current&&(y.current.destroy(),y.current=null)};return A.useEffect(()=>{!i&&y.current&&l&&H1e(y.current,l)},[i,l]),A.useEffect(()=>{!i&&y.current&&DK(y.current.config.data,a.labels)},[i,a.labels]),A.useEffect(()=>{!i&&y.current&&a.datasets&&LK(y.current.config.data,a.datasets,s)},[i,a.datasets]),A.useEffect(()=>{y.current&&(i?(b(),setTimeout(g)):y.current.update(d))},[i,l,a.labels,a.datasets,d]),A.useEffect(()=>{y.current&&(b(),setTimeout(g))},[o]),A.useEffect(()=>(g(),()=>b()),[]),G.createElement("canvas",{ref:m,role:"img",height:t,width:r,...h},u)}const jK=A.forwardRef(G1e);function q1e(n,e){return Hx.register(e),A.forwardRef((t,r)=>G.createElement(jK,{...t,ref:r,type:n}))}const eR=q1e("line",Q1);/*!
 * @license
 * chartjs-chart-financial
 * http://chartjs.org/
 * Version: 0.2.1
 *
 * Copyright 2024 Chart.js Contributors
 * Released under the MIT license
 * https://github.com/chartjs/chartjs-chart-financial/blob/master/LICENSE.md
 */function K1e(n,e){const{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","low","high","width","height"],e);let a,l,c,u,d;return n.horizontal?(d=o/2,a=Math.min(t,i),l=Math.max(t,i),c=r-d,u=r+d):(d=s/2,a=t-d,l=t+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function EI(n,e,t,r){const i=e===null,s=t===null,o=!n||i&&s?!1:K1e(n,r);return o&&(i||e>=o.left&&e<=o.right)&&(s||t>=o.top&&t<=o.bottom)}class w0 extends tA{height(){return this.base-this.y}inRange(e,t,r){return EI(this,e,t,r)}inXRange(e,t){return EI(this,e,null,t)}inYRange(e,t){return EI(this,null,e,t)}getRange(e){return e==="x"?this.width/2:this.height/2}getCenterPoint(e){const{x:t,low:r,high:i}=this.getProps(["x","low","high"],e);return{x:t,y:(i+r)/2}}tooltipPosition(e){const{x:t,open:r,close:i}=this.getProps(["x","open","close"],e);return{x:t,y:(r+i)/2}}}J(w0,"defaults",{backgroundColors:{up:"rgba(75, 192, 192, 0.5)",down:"rgba(255, 99, 132, 0.5)",unchanged:"rgba(201, 203, 207, 0.5)"},borderColors:{up:"rgb(75, 192, 192)",down:"rgb(255, 99, 132)",unchanged:"rgb(201, 203, 207)"}});const yp=Hx.defaults;class tR extends w0{draw(e){const t=this,{x:r,open:i,high:s,low:o,close:a}=t,l=Ae(t.armLengthRatio,yp.elements.ohlc.armLengthRatio);let c=Ae(t.armLength,yp.elements.ohlc.armLength);c===null&&(c=t.width*l*.5),a<i?e.strokeStyle=Ae(t.options.borderColors?t.options.borderColors.up:void 0,yp.elements.ohlc.borderColors.up):a>i?e.strokeStyle=Ae(t.options.borderColors?t.options.borderColors.down:void 0,yp.elements.ohlc.borderColors.down):e.strokeStyle=Ae(t.options.borderColors?t.options.borderColors.unchanged:void 0,yp.elements.ohlc.borderColors.unchanged),e.lineWidth=Ae(t.lineWidth,yp.elements.ohlc.lineWidth),e.beginPath(),e.moveTo(r,s),e.lineTo(r,o),e.moveTo(r-c,i),e.lineTo(r,i),e.moveTo(r+c,a),e.lineTo(r,a),e.stroke()}}J(tR,"id","ohlc"),J(tR,"defaults",{...w0.defaults,lineWidth:2,armLength:null,armLengthRatio:.8});class x0 extends xb{getLabelAndValue(e){const t=this,r=t.getParsed(e),i=t._cachedMeta.iScale.axis,{o:s,h:o,l:a,c:l}=r,c=`O: ${s}  H: ${o}  L: ${a}  C: ${l}`;return{label:`${t._cachedMeta.iScale.getLabelForValue(r[i])}`,value:c}}getUserBounds(e){const{min:t,max:r,minDefined:i,maxDefined:s}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?r:Number.POSITIVE_INFINITY}}getMinMax(e){const t=this._cachedMeta,r=t._parsed,i=t.iScale.axis,s=this._getOtherScale(e),{min:o,max:a}=this.getUserBounds(s);if(r.length<2)return{min:0,max:1};if(e===t.iScale)return{min:r[0][i],max:r[r.length-1][i]};const l=r.filter(({x:d})=>d>=o&&d<a);let c=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;for(let d=0;d<l.length;d++){const h=l[d];c=Math.min(c,h.l),u=Math.max(u,h.h)}return{min:c,max:u}}calculateElementProperties(e,t,r,i){const s=this,o=s._cachedMeta.vScale,a=o.getBasePixel(),l=s._calculateBarIndexPixels(e,t,i),c=s.chart.data.datasets[s.index].data[e],u=o.getPixelForValue(c.o),d=o.getPixelForValue(c.h),h=o.getPixelForValue(c.l),m=o.getPixelForValue(c.c);return{base:r?a:h,x:l.center,y:(h+d)/2,width:l.size,open:u,high:d,low:h,close:m}}draw(){const e=this,t=e.chart,r=e._cachedMeta.data;sC(t.ctx,t.chartArea);for(let i=0;i<r.length;++i)r[i].draw(e._ctx);oC(t.ctx)}}J(x0,"overrides",{label:"",parsing:!1,hover:{mode:"label"},animations:{numbers:{type:"number",properties:["x","y","base","width","open","high","low","close"]}},scales:{x:{type:"timeseries",offset:!0,ticks:{major:{enabled:!0},source:"data",maxRotation:0,autoSkip:!0,autoSkipPadding:75,sampleSize:100}},y:{type:"linear"}},plugins:{tooltip:{intersect:!1,mode:"index",callbacks:{label(e){const t=e.parsed;if(!et(t.y))return at.plugins.tooltip.callbacks.label(e);const{o:r,h:i,l:s,c:o}=t;return`O: ${r}  H: ${i}  L: ${s}  C: ${o}`}}}}});class hV extends x0{updateElements(e,t,r,i){const s=i==="reset",o=this._getRuler(),{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,i);for(let c=t;c<t+r;c++){const u=a||this.resolveDataElementOptions(c,i),d=this.calculateElementProperties(c,o,s,u);l&&(d.options=u),this.updateElement(e[c],c,d,i)}}}J(hV,"id","ohlc"),J(hV,"defaults",{...x0.defaults,dataElementType:tR.id,datasets:{barPercentage:1,categoryPercentage:1}});class WS extends w0{draw(e){const t=this,{x:r,open:i,high:s,low:o,close:a}=t;let l=t.options.borderColors;typeof l=="string"&&(l={up:l,down:l,unchanged:l});let c;a<i?(c=Ae(l?l.up:void 0,at.elements.candlestick.borderColors.up),e.fillStyle=Ae(t.options.backgroundColors?t.options.backgroundColors.up:void 0,at.elements.candlestick.backgroundColors.up)):a>i?(c=Ae(l?l.down:void 0,at.elements.candlestick.borderColors.down),e.fillStyle=Ae(t.options.backgroundColors?t.options.backgroundColors.down:void 0,at.elements.candlestick.backgroundColors.down)):(c=Ae(l?l.unchanged:void 0,at.elements.candlestick.borderColors.unchanged),e.fillStyle=Ae(t.backgroundColors?t.backgroundColors.unchanged:void 0,at.elements.candlestick.backgroundColors.unchanged)),e.lineWidth=Ae(t.options.borderWidth,at.elements.candlestick.borderWidth),e.strokeStyle=c,e.beginPath(),e.moveTo(r,s),e.lineTo(r,Math.min(i,a)),e.moveTo(r,o),e.lineTo(r,Math.max(i,a)),e.stroke(),e.fillRect(r-t.width/2,a,t.width,i-a),e.strokeRect(r-t.width/2,a,t.width,i-a),e.closePath()}}J(WS,"id","candlestick"),J(WS,"defaults",{...w0.defaults,borderWidth:1});class nA extends x0{updateElements(e,t,r,i){const s=i==="reset",o=this._getRuler(),{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,i);for(let c=t;c<t+r;c++){const u=a||this.resolveDataElementOptions(c,i),d=this.calculateElementProperties(c,o,s,u);l&&(d.options=u),this.updateElement(e[c],c,d,i)}}}J(nA,"id","candlestick"),J(nA,"defaults",{...x0.defaults,dataElementType:WS.id}),J(nA,"defaultRoutes",xb.defaultRoutes);const Y1e=Kf("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),FK=A.forwardRef(({className:n,variant:e,...t},r)=>p.jsx("div",{ref:r,role:"alert",className:ce(Y1e({variant:e}),n),...t}));FK.displayName="Alert";const X1e=A.forwardRef(({className:n,...e},t)=>p.jsx("h5",{ref:t,className:ce("mb-1 font-medium leading-none tracking-tight",n),...e}));X1e.displayName="AlertTitle";const Q1e=A.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,className:ce("text-sm [&_p]:leading-relaxed",n),...e}));Q1e.displayName="AlertDescription";function Hp({className:n,...e}){return p.jsx("div",{className:ce("animate-pulse rounded-md bg-muted",n),...e})}const $K=A.createContext({portfolio:[],addToPortfolio:()=>{},removeFromPortfolio:()=>{},updatePortfolio:()=>{}}),nL=()=>A.useContext($K),J1e=({children:n})=>{const[e,t]=A.useState([]),[r,i]=A.useState(!0),{user:s}=Oo(),o=A.useRef(!1);A.useEffect(()=>{(async()=>{if(i(!0),s&&s.uid){const d=tn(tt,"portfolios",s.uid),h=await Lf(d);t(h.exists()?h.data().stocks||[]:[])}else{const d=localStorage.getItem("portfolio");t(d?JSON.parse(d):[])}i(!1),o.current=!0})().catch(console.error)},[s]),A.useEffect(()=>{if(!o.current||r)return;(async()=>{const d=e.map(h=>({...h,avgPrice:isNaN(h.avgPrice)?0:h.avgPrice,quantity:isNaN(h.quantity)?0:h.quantity}));if(s&&s.uid)try{await Nt(tn(tt,"portfolios",s.uid),{stocks:d},{merge:!0})}catch(h){console.error("Firestore save failed!",h),console.log("Data that failed to save:",{stocks:d})}else localStorage.setItem("portfolio",JSON.stringify(d))})()},[e,s,r]);const a=u=>{const d={symbol:u.symbol||"",name:u.name||"",quantity:u.quantity||0,avgPrice:u.avgPrice||0,currentPrice:u.currentPrice||0,change:u.change??0,percentChange:u.percentChange??0};if(!d.symbol){console.error("Attempted to add a stock with no symbol.");return}t(h=>h.find(y=>y.symbol===d.symbol)?h.map(y=>{if(y.symbol===d.symbol){const g=(y.quantity||0)+d.quantity,b=g>0?((y.avgPrice||0)*(y.quantity||0)+d.avgPrice*d.quantity)/g:0;return{...y,quantity:g,avgPrice:isNaN(b)?0:b,currentPrice:d.currentPrice,change:d.change,percentChange:d.percentChange}}return y}):[...h,d])},l=u=>{t(d=>d.filter(h=>h.symbol!==u))},c=u=>{t(u)};return p.jsx($K.Provider,{value:{portfolio:e,addToPortfolio:a,removeFromPortfolio:l,updatePortfolio:c},children:n})},qr=A.forwardRef(({className:n,type:e,...t},r)=>p.jsx("input",{type:e,className:ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));qr.displayName="Input";const TI="d226hu1r01qt86770ko0d226hu1r01qt86770kog",CI="https://finnhub.io/api/v1",Z1e=[{symbol:"AAPL",name:"Apple Inc."},{symbol:"MSFT",name:"Microsoft Corporation"},{symbol:"GOOGL",name:"Alphabet Inc."},{symbol:"AMZN",name:"Amazon.com Inc."},{symbol:"META",name:"Meta Platforms Inc."},{symbol:"TSLA",name:"Tesla Inc."},{symbol:"NVDA",name:"NVIDIA Corporation"},{symbol:"JPM",name:"JPMorgan Chase & Co."},{symbol:"V",name:"Visa Inc."},{symbol:"JNJ",name:"Johnson & Johnson"},{symbol:"WMT",name:"Walmart Inc."},{symbol:"MA",name:"Mastercard Inc."},{symbol:"UNH",name:"UnitedHealth Group Inc."},{symbol:"HD",name:"The Home Depot Inc."},{symbol:"BAC",name:"Bank of America Corp."},{symbol:"PG",name:"Procter & Gamble Co."},{symbol:"DIS",name:"The Walt Disney Co."},{symbol:"ADBE",name:"Adobe Inc."},{symbol:"NFLX",name:"Netflix Inc."},{symbol:"CRM",name:"Salesforce Inc."},{symbol:"CSCO",name:"Cisco Systems Inc."},{symbol:"INTC",name:"Intel Corporation"},{symbol:"VZ",name:"Verizon Communications Inc."},{symbol:"KO",name:"The Coca-Cola Co."},{symbol:"PEP",name:"PepsiCo Inc."},{symbol:"CMCSA",name:"Comcast Corporation"},{symbol:"ABT",name:"Abbott Laboratories"},{symbol:"MRK",name:"Merck & Co. Inc."},{symbol:"PFE",name:"Pfizer Inc."},{symbol:"NKE",name:"Nike Inc."},{symbol:"TMO",name:"Thermo Fisher Scientific Inc."},{symbol:"COST",name:"Costco Wholesale Corp."},{symbol:"DHR",name:"Danaher Corporation"},{symbol:"NEE",name:"NextEra Energy Inc."},{symbol:"T",name:"AT&T Inc."},{symbol:"LLY",name:"Eli Lilly and Co."},{symbol:"PYPL",name:"PayPal Holdings Inc."},{symbol:"UNP",name:"Union Pacific Corporation"},{symbol:"MS",name:"Morgan Stanley"},{symbol:"RTX",name:"Raytheon Technologies Corp."},{symbol:"C",name:"Citigroup Inc."},{symbol:"SCHW",name:"Charles Schwab Corp."},{symbol:"AMD",name:"Advanced Micro Devices Inc."},{symbol:"IBM",name:"International Business Machines"},{symbol:"GS",name:"Goldman Sachs Group Inc."},{symbol:"UBER",name:"Uber Technologies Inc."},{symbol:"SBUX",name:"Starbucks Corporation"},{symbol:"GE",name:"General Electric Co."},{symbol:"BA",name:"Boeing Co."},{symbol:"CVX",name:"Chevron Corporation"},{symbol:"ABNB",name:"Airbnb Inc."},{symbol:"SNOW",name:"Snowflake Inc."},{symbol:"ORCL",name:"Oracle Corporation"},{symbol:"COIN",name:"Coinbase Global Inc."},{symbol:"SHOP",name:"Shopify Inc."},{symbol:"SONY",name:"Sony Group Corp."},{symbol:"BABA",name:"Alibaba Group"},{symbol:"SAP",name:"SAP SE"},{symbol:"TM",name:"Toyota Motor Corp."}];Hx.register(Jk,Zk,eA,Iv,C1e,D1e,E1e,nA,WS);const eAe=({symbol:n,quantity:e,onChange:t,price:r})=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"flex items-center bg-zinc-800 rounded-lg border border-zinc-700",children:[p.jsx("button",{onClick:i=>{i.stopPropagation(),t(Math.max(1,e-1))},className:"px-3 py-1 text-zinc-400 hover:text-white transition-colors border-r border-zinc-700",children:"-"}),p.jsx("div",{className:"px-3 py-1 min-w-[40px] text-center",children:e}),p.jsx("button",{onClick:i=>{i.stopPropagation(),t(e+1)},className:"px-3 py-1 text-zinc-400 hover:text-white transition-colors border-l border-zinc-700",children:"+"})]}),p.jsxs("div",{className:"text-sm text-zinc-400",children:["$",(r*e).toFixed(2)]})]}),tAe=({data:n,isPositive:e})=>{if(!n.length)return null;const t=Math.min(...n),i=Math.max(...n)-t||1,s=n.map((a,l)=>{const c=l/(n.length-1)*64,u=28-(a-t)/i*24;return`${c},${u}`}).join(" "),o=e?"#22c55e":"#ef4444";return p.jsx("div",{className:"w-20 h-8 flex items-center justify-center",children:p.jsxs("svg",{width:"64",height:"32",className:"overflow-visible",children:[p.jsx("polyline",{points:s,fill:"none",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("circle",{cx:"0",cy:28-(n[0]-t)/i*24,r:"2",fill:o}),p.jsx("circle",{cx:"64",cy:28-(n[n.length-1]-t)/i*24,r:"2",fill:o})]})})},nAe=()=>{const[n,e]=A.useState([]),[t,r]=A.useState(!0),[i,s]=A.useState(null),[o,a]=A.useState(null),[l,c]=A.useState({}),[u,d]=A.useState(null),[h,m]=A.useState(!1),[y,g]=A.useState({}),[b,w]=A.useState({}),[x,_]=A.useState(""),{portfolio:S,addToPortfolio:P,removeFromPortfolio:N}=nL(),T={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"nearest",intersect:!1,callbacks:{label:H=>{const z=H.raw;return[`Open: $${z.o.toFixed(2)}`,`High: $${z.h.toFixed(2)}`,`Low: $${z.l.toFixed(2)}`,`Close: $${z.c.toFixed(2)}`]}}}},scales:{x:{display:!0,grid:{display:!1},ticks:{color:"#9ca3af",maxRotation:0,maxTicksLimit:5}},y:{display:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#9ca3af",callback:H=>`$${H.toFixed(2)}`}}}},C={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"nearest",intersect:!1,callbacks:{label:H=>`Price: $${H.raw.toFixed(2)}`}}},scales:{x:{display:!0,grid:{display:!1},ticks:{color:"#9ca3af",maxRotation:0,maxTicksLimit:5}},y:{display:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#9ca3af",callback:H=>`$${H.toFixed(2)}`}}}},k=H=>{const z=[];let W=100;for(let V=0;V<H;V++){z.push(W);const U=(Math.random()-.5)*2;W+=U}return z},M=async H=>{try{const z=await fetch(`${CI}/quote?symbol=${H}&token=${TI}`);if(!z.ok)throw new Error(`HTTP error! status: ${z.status}`);const W=await z.json();return W.error?(console.error(`API error for ${H}:`,W.error),null):W}catch(z){return console.error(`Error fetching quote for ${H}:`,z),null}},L=async H=>{try{const z=Math.floor(Date.now()/1e3),W=z-7*24*60*60,U=await(await fetch(`${CI}/stock/candle?symbol=${H}&resolution=D&from=${W}&to=${z}&token=${TI}`)).json();if(U.error)return console.error(`API error for ${H} sparkline:`,U.error),k(7);if(U.s==="ok"&&U.c&&U.c.length>0){const K=U.c.slice(-7);for(;K.length<7;)K.unshift(K[0]);return K}return k(7)}catch(z){return console.error(`Error fetching sparkline for ${H}:`,z),k(7)}},F=(H,z)=>{const W=Math.max(1,z);w(V=>({...V,[H]:W}))},j=async(H,z=1)=>{d(H.symbol);try{const W=await M(H.symbol),V=(W==null?void 0:W.c)||H.price;P({symbol:H.symbol,name:H.name,quantity:z,avgPrice:V,currentPrice:V,change:(W==null?void 0:W.d)||H.change,percentChange:(W==null?void 0:W.dp)||H.percentChange})}catch(W){console.error("Failed to add to portfolio:",W),alert("Failed to add stock to portfolio. Please try again.")}finally{d(null)}},q=async H=>{if(o===H.symbol){a(null);return}if(a(H.symbol),!l[H.symbol])try{const z=Math.floor(Date.now()/1e3),W=z-7*24*60*60,V=await fetch(`${CI}/stock/candle?symbol=${H.symbol}&resolution=D&from=${W}&to=${z}&token=${TI}`);if(!V.ok)throw new Error("Failed to fetch stock data");const U=await V.json();U.s==="ok"&&U.t&&U.t.length>0&&c(K=>({...K,[H.symbol]:U}))}catch(z){console.error("Error fetching stock details:",z)}};return A.useEffect(()=>{const H=S.reduce((z,W)=>({...z,[W.symbol]:W.quantity}),{});w(H)},[S]),A.useEffect(()=>{(async()=>{r(!0);try{const z=JSON.parse(localStorage.getItem("stockPrices")||"{}"),W=Z1e.map(Q=>{var B,Y,re,te;return{...Q,price:((B=z[Q.symbol])==null?void 0:B.price)??null,change:((Y=z[Q.symbol])==null?void 0:Y.change)??null,percentChange:((re=z[Q.symbol])==null?void 0:re.percentChange)??null,lastUpdated:((te=z[Q.symbol])==null?void 0:te.lastUpdated)||null}});e(W);const V=10,U=[];for(let Q=0;Q<W.length;Q+=V){const B=W.slice(Q,Q+V),Y=await Promise.all(B.map(async re=>{const te=await M(re.symbol),ie=await L(re.symbol);return g(ae=>({...ae,[re.symbol]:ie})),{...re,price:(te==null?void 0:te.c)??re.price,change:(te==null?void 0:te.d)??re.change,percentChange:(te==null?void 0:te.dp)??re.percentChange,lastUpdated:new Date().toISOString()}}));U.push(...Y),e([...U]),await new Promise(re=>setTimeout(re,1e3))}const K=U.reduce((Q,B)=>({...Q,[B.symbol]:{price:B.price,change:B.change,percentChange:B.percentChange,lastUpdated:B.lastUpdated}}),{});localStorage.setItem("stockPrices",JSON.stringify(K))}catch(z){console.error("Error initializing stocks:",z),s("Failed to load stocks. Please try again.")}finally{r(!1)}})()},[]),A.useEffect(()=>{const z=setInterval(async()=>{if(n.length!==0){m(!0);try{const W=await Promise.all(n.map(async U=>{const K=await M(U.symbol);return K&&typeof K.c=="number"?{...U,price:K.c,change:K.d||U.change,percentChange:K.dp||U.percentChange,lastUpdated:new Date().toISOString()}:U})),V=W.reduce((U,K)=>({...U,[K.symbol]:{price:K.price,change:K.change,percentChange:K.percentChange,lastUpdated:K.lastUpdated}}),{});localStorage.setItem("stockPrices",JSON.stringify(V)),e(W)}catch(W){console.error("Error updating prices:",W)}finally{m(!1)}}},3e4);return()=>clearInterval(z)},[]),p.jsx(p.Fragment,{children:p.jsxs(wi,{className:"p-6 mb-6 w-full",children:[p.jsxs(Oq,{className:"mb-4 flex justify-between items-center",children:[p.jsx("span",{children:"Stocks"}),h&&p.jsx("span",{className:"text-sm text-gray-500",children:"Updating prices..."})]}),p.jsxs(Ru,{className:"p-0",children:[p.jsx("div",{className:"mb-4 px-4",children:p.jsxs("div",{className:"relative flex items-center bg-zinc-900 rounded-xl shadow focus-within:ring-2 focus-within:ring-indigo-500 transition-all border border-zinc-700",children:[p.jsx(yle,{className:"absolute left-4 text-zinc-400 pointer-events-none"}),p.jsx(qr,{type:"text",placeholder:"Search stocks by name or symbol...",value:x,onChange:H=>_(H.target.value),className:"w-full pl-10 bg-transparent border-none focus:ring-0 text-white placeholder-zinc-400 rounded-xl py-3"}),x&&p.jsx("button",{onClick:()=>_(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-white",children:"✕"})]})}),t&&!n.some(H=>H.price!==null)&&p.jsxs("div",{className:"flex flex-col items-center my-8",children:[p.jsx(Hp,{className:"h-8 w-1/2 mb-4"}),p.jsx(Hp,{className:"h-8 w-full mb-2"}),p.jsx(Hp,{className:"h-8 w-full mb-2"}),p.jsx(Hp,{className:"h-8 w-full"})]}),i&&p.jsxs(FK,{variant:"destructive",children:[p.jsx("span",{className:"font-semibold",children:"Error loading stocks:"})," ",i]}),n.length>0&&p.jsxs("div",{className:"overflow-x-auto rounded-lg border border-gray-800 bg-zinc-950",children:[p.jsxs("table",{className:"w-full divide-y divide-gray-800",children:[p.jsx("thead",{className:"bg-zinc-900",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider w-[10%]",children:"Symbol"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider w-[20%]",children:"Name"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider w-[10%]",children:"Price"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider w-[15%]",children:"Change"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider w-[15%]",children:"Trend"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider w-[15%]",children:"Quantity"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-200 uppercase tracking-wider w-[15%]",children:"Action"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-800",children:n.filter(H=>H.symbol.toLowerCase().includes(x.toLowerCase())||H.name.toLowerCase().includes(x.toLowerCase())).map((H,z)=>{const W=S.some(Y=>Y.symbol===H.symbol),V=y[H.symbol]||[],U=H.change>=0,K=b[H.symbol]||1,Q=o===H.symbol,B=l[H.symbol];return p.jsxs(G.Fragment,{children:[p.jsxs("tr",{className:`hover:bg-zinc-800 cursor-pointer ${z%2===0?"bg-zinc-900":"bg-zinc-950"}`,children:[p.jsx("td",{className:"px-4 py-3 font-mono font-semibold text-gray-100 whitespace-nowrap",onClick:()=>q(H),children:H.symbol}),p.jsx("td",{className:"px-4 py-3 text-gray-100 whitespace-nowrap",onClick:()=>q(H),children:H.name}),p.jsx("td",{className:"px-4 py-3 text-gray-100 whitespace-nowrap",onClick:()=>q(H),children:H.price!==null?`$${H.price.toFixed(2)}`:"Loading..."}),p.jsx("td",{className:`px-4 py-3 whitespace-nowrap ${H.change>0?"text-green-500":H.change<0?"text-red-500":"text-gray-100"}`,onClick:()=>q(H),children:H.change!==null?`${H.change>0?"+":""}${H.change.toFixed(2)} (${H.percentChange.toFixed(2)}%)`:"Loading..."}),p.jsx("td",{className:"px-4 py-3 relative group whitespace-nowrap",onClick:()=>q(H),children:V.length>0?p.jsxs("div",{className:"relative",children:[p.jsx(tAe,{data:V,isPositive:U}),p.jsx("div",{className:"absolute inset-0 bg-zinc-800 opacity-0 group-hover:opacity-10 transition-opacity rounded"})]}):p.jsx("div",{className:"w-20 h-8 bg-zinc-800 rounded animate-pulse"})}),p.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:p.jsx(eAe,{symbol:H.symbol,quantity:K,onChange:Y=>F(H.symbol,Y),price:H.price||0})}),p.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:W?p.jsx(Ze,{variant:"destructive",size:"sm",onClick:()=>N(H.symbol),className:"w-[120px]",children:"Remove"}):p.jsx(Ze,{variant:"default",size:"sm",disabled:u===H.symbol||H.price===null,onClick:()=>j(H,K),className:"w-[120px]",children:u===H.symbol?"Adding...":"Add to Portfolio"})})]}),Q&&B&&p.jsx("tr",{children:p.jsxs("td",{colSpan:7,className:"p-6 bg-gradient-to-br from-indigo-950 via-zinc-900 to-zinc-950 border-l-4 border-indigo-500 shadow-xl rounded-b-xl animate-fade-in",children:[p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[p.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4 flex flex-col items-start",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:[p.jsx(PT,{})," High"]}),p.jsxs("div",{className:"text-lg font-medium",children:["$",Math.max(...B.h).toFixed(2)]})]}),p.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4 flex flex-col items-start",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:[p.jsx(SM,{})," Low"]}),p.jsxs("div",{className:"text-lg font-medium",children:["$",Math.min(...B.l).toFixed(2)]})]}),p.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4 flex flex-col items-start",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:[p.jsx(fle,{})," Volume"]}),p.jsxs("div",{className:"text-lg font-medium",children:[(B.v[B.v.length-1]/1e6).toFixed(1),"M"]})]}),p.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4 flex flex-col items-start",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:[p.jsx(Xb,{})," 7d Change"]}),p.jsxs("div",{className:`text-lg font-medium ${H.change>=0?"text-green-500":"text-red-500"}`,children:[H.change>=0?"+":"",H.percentChange.toFixed(2),"%"]})]})]}),p.jsx("div",{className:"border-t border-zinc-700 my-4"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4",children:[p.jsxs("h3",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[p.jsx(hle,{})," Candlestick Chart"]}),p.jsx("div",{className:"h-[300px]",children:p.jsx(jK,{type:"candlestick",data:{labels:B.t.map(Y=>new Date(Y*1e3).toLocaleDateString()),datasets:[{label:H.symbol,data:B.t.map((Y,re)=>({x:new Date(B.t[re]*1e3).toLocaleDateString(),o:B.o[re],h:B.h[re],l:B.l[re],c:B.c[re]}))}]},options:T})})]}),p.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4",children:[p.jsx("h3",{className:"text-lg font-medium mb-4",children:"Price Chart"}),p.jsx("div",{className:"h-[300px]",children:p.jsx(eR,{data:{labels:B.t.map(Y=>new Date(Y*1e3).toLocaleDateString()),datasets:[{label:"Price",data:B.c,borderColor:"#6366f1",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4}]},options:C})})]})]})]})})]},H.symbol)})})]}),p.jsxs("div",{className:"text-right text-xs text-zinc-400 px-4 py-2",children:["Showing ",n.filter(H=>H.symbol.toLowerCase().includes(x.toLowerCase())||H.name.toLowerCase().includes(x.toLowerCase())).length," stock(s)"]}),n.filter(H=>H.symbol.toLowerCase().includes(x.toLowerCase())||H.name.toLowerCase().includes(x.toLowerCase())).length===0&&x&&p.jsxs("div",{className:"text-center py-8 text-gray-400",children:['No stocks found matching "',x,'"']})]})]})]})})},rAe=Kf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ul({className:n,variant:e,...t}){return p.jsx("div",{className:ce(rAe({variant:e}),n),...t})}const zr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),nR=[.001,0,0,.001,0,0],PI=1.35,Yi={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},jc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},VK="pdfjs_internal_editor_",Ce={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Ue={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},iAe={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},yr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},rA={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},fn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Sp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},cC={ERRORS:0,WARNINGS:1,INFOS:5},GS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},c1={moveTo:0,lineTo:1,curveTo:2,closePath:3},sAe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let uC=cC.WARNINGS;function oAe(n){Number.isInteger(n)&&(uC=n)}function aAe(){return uC}function dC(n){uC>=cC.INFOS&&console.log(`Info: ${n}`)}function Pe(n){uC>=cC.WARNINGS&&console.log(`Warning: ${n}`)}function ft(n){throw new Error(n)}function bn(n,e){n||ft(e)}function lAe(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function BK(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=fAe(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return lAe(r)?r:null}function zK(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&BK(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function ze(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const sp=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class fV extends sp{constructor(e,t){super(e,"PasswordException"),this.code=t}}class II extends sp{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class rR extends sp{constructor(e){super(e,"InvalidPDFException")}}class qS extends sp{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class cAe extends sp{constructor(e){super(e,"FormatError")}}class cd extends sp{constructor(e){super(e,"AbortException")}}function UK(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&ft("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const s=Math.min(i+t,e),o=n.subarray(i,s);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function Wx(n){typeof n!="string"&&ft("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function uAe(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function dAe(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function hAe(){try{return new Function(""),!0}catch{return!1}}class lr{static get isLittleEndian(){return ze(this,"isLittleEndian",dAe())}static get isEvalSupported(){return ze(this,"isEvalSupported",hAe())}static get isOffscreenCanvasSupported(){return ze(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ze(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return ze(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return ze(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const kI=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Gl,iA,iR;class we{static makeHexColor(e,t,r){return`#${kI[e]}${kI[t]}${kI[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,r=0){const i=e[r],s=e[r+1];e[r]=i*t[0]+s*t[2]+t[4],e[r+1]=i*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let u=0;u<6;u+=2){const d=e[r+u],h=e[r+u+1];e[r+u]=d*i+h*o+l,e[r+u+1]=d*s+h*a+c}}static applyInverseTransform(e,t){const r=e[0],i=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-r*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,r){const i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5],u=e[0],d=e[1],h=e[2],m=e[3];let y=i*u+l,g=y,b=i*h+l,w=b,x=a*d+c,_=x,S=a*m+c,P=S;if(s!==0||o!==0){const N=s*u,T=s*h,C=o*d,k=o*m;y+=C,w+=C,b+=k,g+=k,x+=N,P+=N,S+=T,_+=T}r[0]=Math.min(r[0],y,b,g,w),r[1]=Math.min(r[1],x,S,_,P),r[2]=Math.max(r[2],y,b,g,w),r[3]=Math.max(r[3],x,S,_,P)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],i=e[1],s=e[2],o=e[3],a=r**2+i**2,l=r*s+i*o,c=s**2+o**2,u=(a+c)/2,d=Math.sqrt(u**2-(a*c-l**2));t[0]=Math.sqrt(u+d||1),t[1]=Math.sqrt(u-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[r,s,i,o]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,i,s){s[0]=Math.min(s[0],e,r),s[1]=Math.min(s[1],t,i),s[2]=Math.max(s[2],e,r),s[3]=Math.max(s[3],t,i)}static bezierBoundingBox(e,t,r,i,s,o,a,l,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l),D(this,Gl,iR).call(this,e,r,s,a,t,i,o,l,3*(-e+3*(r-s)+a),6*(e-2*r+s),3*(r-e),c),D(this,Gl,iR).call(this,e,r,s,a,t,i,o,l,3*(-t+3*(i-o)+l),6*(t-2*i+o),3*(i-t),c)}}Gl=new WeakSet,iA=function(e,t,r,i,s,o,a,l,c,u){if(c<=0||c>=1)return;const d=1-c,h=c*c,m=h*c,y=d*(d*(d*e+3*c*t)+3*h*r)+m*i,g=d*(d*(d*s+3*c*o)+3*h*a)+m*l;u[0]=Math.min(u[0],y),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],y),u[3]=Math.max(u[3],g)},iR=function(e,t,r,i,s,o,a,l,c,u,d,h){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&D(this,Gl,iA).call(this,e,t,r,i,s,o,a,l,-d/u,h);return}const m=u**2-4*d*c;if(m<0)return;const y=Math.sqrt(m),g=2*c;D(this,Gl,iA).call(this,e,t,r,i,s,o,a,l,(-u+y)/g,h),D(this,Gl,iA).call(this,e,t,r,i,s,o,a,l,(-u-y)/g,h)},O(we,Gl);function fAe(n){return decodeURIComponent(escape(n))}let RI=null,pV=null;function pAe(n){return RI||(RI=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,pV=new Map([["ﬅ","ſt"]])),n.replaceAll(RI,(e,t,r)=>t?t.normalize("NFKC"):pV.get(r))}function HK(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),UK(n)}const rL="pdfjs_internal_id_";function mAe(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,i,...s]=t;if(!n(r)&&!Number.isInteger(r)||!e(i))return!1;const o=s.length;let a=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of s)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function Ur(n,e,t){return Math.min(Math.max(n,e),t)}function WK(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(UK(n))}function gAe(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Wx(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const Ya="http://www.w3.org/2000/svg",Hd=class Hd{};J(Hd,"CSS",96),J(Hd,"PDF",72),J(Hd,"PDF_TO_CSS_UNITS",Hd.CSS/Hd.PDF);let ud=Hd;async function Gx(n,e="text"){if(Rv(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class qx{constructor({viewBox:e,userUnit:t,scale:r,rotation:i,offsetX:s=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=i,this.offsetX=s,this.offsetY=o,r*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,d,h,m;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,d=0,h=0,m=1;break;case 90:u=0,d=1,h=1,m=0;break;case 270:u=0,d=-1,h=-1,m=0;break;case 0:u=1,d=0,h=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(h=-h,m=-m);let y,g,b,w;u===0?(y=Math.abs(c-e[1])*r+s,g=Math.abs(l-e[0])*r+o,b=(e[3]-e[1])*r,w=(e[2]-e[0])*r):(y=Math.abs(l-e[0])*r+s,g=Math.abs(c-e[1])*r+o,b=(e[2]-e[0])*r,w=(e[3]-e[1])*r),this.transform=[u*r,d*r,h*r,m*r,y-u*r*l-h*r*c,g-d*r*l-m*r*c],this.width=b,this.height=w}get rawDims(){const e=this.viewBox;return ze(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new qx({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){const r=[e,t];return we.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];we.applyTransform(t,this.transform);const r=[e[2],e[3]];return we.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return we.applyInverseTransform(r,this.transform),r}}class iL extends sp{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function hC(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function sL(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function yAe(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function vAe(n,e="document.pdf"){if(typeof n!="string")return e;if(hC(n))return Pe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const i=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},s=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(s.test(o))return i(o);if(r.searchParams.size>0){const a=Array.from(r.searchParams.values()).reverse();for(const c of a)if(s.test(c))return i(c);const l=Array.from(r.searchParams.keys()).reverse();for(const c of l)if(s.test(c))return i(c)}if(r.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(l)return i(l[0])}return e}class mV{constructor(){J(this,"started",Object.create(null));J(this,"times",[])}time(e){e in this.started&&Pe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Pe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(t)} ${s-i}ms
`);return e.join("")}}function Rv(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function ko(n){n.preventDefault()}function gn(n){n.preventDefault(),n.stopPropagation()}function bAe(n){console.log("Deprecated API usage: "+n)}var G0;class oL{static toDateObject(e){if(!e||typeof e!="string")return null;f(this,G0)||I(this,G0,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=f(this,G0).exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(o+=u,a+=d):c==="+"&&(o-=u,a-=d),new Date(Date.UTC(r,i,s,o,a,l))}}G0=new WeakMap,O(oL,G0);function wAe(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new qx({viewBox:s,userUnit:1,scale:e,rotation:t})}function aL(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Pe(`Not a valid color format: "${n}"`),[0,0,0])}function xAe(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,aL(r))}e.remove()}function zt(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform();return[e,t,r,i,s,o]}function Bo(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform().invertSelf();return[e,t,r,i,s,o]}function $f(n,e,t=!1,r=!0){if(e instanceof qx){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:o}=n,a=lr.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${s}px`,u=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Ma{constructor(){const{pixelRatio:e}=Ma;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,i,s=-1){let o=1/0,a=1/0,l=1/0;r=Ma.capPixels(r,s),r>0&&(o=Math.sqrt(r/(e*t))),i!==-1&&(a=i/e,l=i/t);const c=Math.min(o,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const sR=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Uc,ah,gs,Hc,q0,Sm,K0,kE,GK,Kr,qK,KK,Nv,sA;const el=class el{constructor(e){O(this,Kr);O(this,Uc,null);O(this,ah,null);O(this,gs);O(this,Hc,null);O(this,q0,null);O(this,Sm,null);I(this,gs,e),f(el,K0)||I(el,K0,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=I(this,Uc,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=f(this,gs)._uiManager._signal;e.addEventListener("contextmenu",ko,{signal:t}),e.addEventListener("pointerdown",D(el,kE,GK),{signal:t});const r=I(this,Hc,document.createElement("div"));r.className="buttons",e.append(r);const i=f(this,gs).toolbarPosition;if(i){const{style:s}=e,o=f(this,gs)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return f(this,Uc)}hide(){var e;f(this,Uc).classList.add("hidden"),(e=f(this,ah))==null||e.hideDropdown()}show(){var e;f(this,Uc).classList.remove("hidden"),(e=f(this,q0))==null||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=f(this,gs),r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",f(el,K0)[e]),D(this,Kr,Nv).call(this,r),r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),f(this,Hc).append(r)}async addAltText(e){const t=await e.render();D(this,Kr,Nv).call(this,t),f(this,Hc).append(t,f(this,Kr,sA)),I(this,q0,e)}addColorPicker(e){I(this,ah,e);const t=e.renderButton();D(this,Kr,Nv).call(this,t),f(this,Hc).append(t,f(this,Kr,sA))}async addEditSignatureButton(e){const t=I(this,Sm,await e.renderEditButton(f(this,gs)));D(this,Kr,Nv).call(this,t),f(this,Hc).append(t,f(this,Kr,sA))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){f(this,Sm)&&(f(this,Sm).title=e)}remove(){var e;f(this,Uc).remove(),(e=f(this,ah))==null||e.destroy(),I(this,ah,null)}};Uc=new WeakMap,ah=new WeakMap,gs=new WeakMap,Hc=new WeakMap,q0=new WeakMap,Sm=new WeakMap,K0=new WeakMap,kE=new WeakSet,GK=function(e){e.stopPropagation()},Kr=new WeakSet,qK=function(e){f(this,gs)._focusEventsAllowed=!1,gn(e)},KK=function(e){f(this,gs)._focusEventsAllowed=!0,gn(e)},Nv=function(e){const t=f(this,gs)._uiManager._signal;e.addEventListener("focusin",D(this,Kr,qK).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",D(this,Kr,KK).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ko,{signal:t})},sA=function(){const e=document.createElement("div");return e.className="divider",e},O(el,kE),O(el,K0,null);let oR=el;var Y0,lh,ch,dd,YK,XK,QK;class _Ae{constructor(e){O(this,dd);O(this,Y0,null);O(this,lh,null);O(this,ch);I(this,ch,e)}show(e,t,r){const[i,s]=D(this,dd,XK).call(this,t,r),{style:o}=f(this,lh)||I(this,lh,D(this,dd,YK).call(this));e.append(f(this,lh)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){f(this,lh).remove()}}Y0=new WeakMap,lh=new WeakMap,ch=new WeakMap,dd=new WeakSet,YK=function(){const e=I(this,lh,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ko,{signal:f(this,ch)._signal});const t=I(this,Y0,document.createElement("div"));return t.className="buttons",e.append(t),D(this,dd,QK).call(this),e},XK=function(e,t){let r=0,i=0;for(const s of e){const o=s.y+s.height;if(o<r)continue;const a=s.x+(t?s.width:0);if(o>r){i=a,r=o;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,r]},QK=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=f(this,ch)._signal;e.addEventListener("contextmenu",ko,{signal:r}),e.addEventListener("click",()=>{f(this,ch).highlightSelection("floating_button")},{signal:r}),f(this,Y0).append(e)};function JK(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var RE;class AAe{constructor(){O(this,RE,0)}get id(){return`${VK}${Dn(this,RE)._++}`}}RE=new WeakMap;var Em,X0,wr,Tm,oA;const tj=class tj{constructor(){O(this,Tm);O(this,Em,HK());O(this,X0,0);O(this,wr,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return ze(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:r,size:i,type:s}=e;return D(this,Tm,oA).call(this,`${t}_${r}_${i}_${s}`,e)}async getFromUrl(e){return D(this,Tm,oA).call(this,e,e)}async getFromBlob(e,t){const r=await t;return D(this,Tm,oA).call(this,e,r)}async getFromId(e){f(this,wr)||I(this,wr,new Map);const t=f(this,wr).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){f(this,wr)||I(this,wr,new Map);let r=f(this,wr).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${f(this,Em)}_${Dn(this,X0)._++}`,refCounter:1,isSvg:!1},f(this,wr).set(e,r),f(this,wr).set(r.id,r),r}getSvgUrl(e){const t=f(this,wr).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;f(this,wr)||I(this,wr,new Map);const t=f(this,wr).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(r.width,r.height);s.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=s.convertToBlob()}(i=r.close)==null||i.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${f(this,Em)}_`)}};Em=new WeakMap,X0=new WeakMap,wr=new WeakMap,Tm=new WeakSet,oA=async function(e,t){f(this,wr)||I(this,wr,new Map);let r=f(this,wr).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${f(this,Em)}_${Dn(this,X0)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(r.url=t,i=await Gx(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const s=tj._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,c()},o.onload=async()=>{const d=r.svgUrl=o.result;a.src=await s?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=u});o.readAsDataURL(i),await l}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){Pe(i),r=null}return f(this,wr).set(e,r),r&&f(this,wr).set(r.id,r),r};let aR=tj;var rn,Wc,Q0,Bt;class SAe{constructor(e=128){O(this,rn,[]);O(this,Wc,!1);O(this,Q0);O(this,Bt,-1);I(this,Q0,e)}add({cmd:e,undo:t,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&e(),f(this,Wc))return;const l={cmd:e,undo:t,post:r,type:s};if(f(this,Bt)===-1){f(this,rn).length>0&&(f(this,rn).length=0),I(this,Bt,0),f(this,rn).push(l);return}if(o&&f(this,rn)[f(this,Bt)].type===s){a&&(l.undo=f(this,rn)[f(this,Bt)].undo),f(this,rn)[f(this,Bt)]=l;return}const c=f(this,Bt)+1;c===f(this,Q0)?f(this,rn).splice(0,1):(I(this,Bt,c),c<f(this,rn).length&&f(this,rn).splice(c)),f(this,rn).push(l)}undo(){if(f(this,Bt)===-1)return;I(this,Wc,!0);const{undo:e,post:t}=f(this,rn)[f(this,Bt)];e(),t==null||t(),I(this,Wc,!1),I(this,Bt,f(this,Bt)-1)}redo(){if(f(this,Bt)<f(this,rn).length-1){I(this,Bt,f(this,Bt)+1),I(this,Wc,!0);const{cmd:e,post:t}=f(this,rn)[f(this,Bt)];e(),t==null||t(),I(this,Wc,!1)}}hasSomethingToUndo(){return f(this,Bt)!==-1}hasSomethingToRedo(){return f(this,Bt)<f(this,rn).length-1}cleanType(e){if(f(this,Bt)!==-1){for(let t=f(this,Bt);t>=0;t--)if(f(this,rn)[t].type!==e){f(this,rn).splice(t+1,f(this,Bt)-t),I(this,Bt,t);return}f(this,rn).length=0,I(this,Bt,-1)}}destroy(){I(this,rn,null)}}rn=new WeakMap,Wc=new WeakMap,Q0=new WeakMap,Bt=new WeakMap;var NE,ZK;class Kx{constructor(e){O(this,NE);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=lr.platform;for(const[r,i,s={}]of e)for(const o of r){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(D(this,NE,ZK).call(this,t));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(i.bind(e,...o,t)(),s||gn(t))}}NE=new WeakSet,ZK=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const OE=class OE{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return xAe(e),ze(this,"_colors",e)}convert(e){const t=aL(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((s,o)=>s===t[o]))return OE._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?we.makeHexColor(...t):e}};J(OE,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let lR=OE;var Cm,Mi,Cn,Yn,Pm,il,Im,ys,Gc,qc,km,uh,Qo,no,dh,J0,Z0,Rm,ew,Jo,Kc,Nm,Yc,Zo,ME,Xc,tw,Qc,hh,fh,Jc,nw,Ln,st,sl,Zc,ph,rw,iw,eu,ea,ol,sw,ow,vs,le,aA,cR,eY,tY,lA,nY,rY,iY,uR,sY,dR,hR,oY,Lr,Xa,aY,lY,fR,cY,Ov,pR;const Yp=class Yp{constructor(e,t,r,i,s,o,a,l,c,u,d,h,m,y,g){O(this,le);O(this,Cm,new AbortController);O(this,Mi,null);O(this,Cn,new Map);O(this,Yn,new Map);O(this,Pm,null);O(this,il,null);O(this,Im,null);O(this,ys,new SAe);O(this,Gc,null);O(this,qc,null);O(this,km,0);O(this,uh,new Set);O(this,Qo,null);O(this,no,null);O(this,dh,new Set);J(this,"_editorUndoBar",null);O(this,J0,!1);O(this,Z0,!1);O(this,Rm,!1);O(this,ew,null);O(this,Jo,null);O(this,Kc,null);O(this,Nm,null);O(this,Yc,!1);O(this,Zo,null);O(this,ME,new AAe);O(this,Xc,!1);O(this,tw,!1);O(this,Qc,null);O(this,hh,null);O(this,fh,null);O(this,Jc,null);O(this,nw,null);O(this,Ln,Ce.NONE);O(this,st,new Set);O(this,sl,null);O(this,Zc,null);O(this,ph,null);O(this,rw,null);O(this,iw,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});O(this,eu,[0,0]);O(this,ea,null);O(this,ol,null);O(this,sw,null);O(this,ow,null);O(this,vs,null);const b=this._signal=f(this,Cm).signal;I(this,ol,e),I(this,sw,t),I(this,ow,r),I(this,Pm,i),I(this,Zc,s),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:b}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:b}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:b}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:b}),o._on("setpreference",this.onSetPreference.bind(this),{signal:b}),o._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:b}),D(this,le,nY).call(this),D(this,le,oY).call(this),D(this,le,uR).call(this),I(this,il,a.annotationStorage),I(this,ew,a.filterFactory),I(this,ph,l),I(this,Nm,c||null),I(this,J0,u),I(this,Z0,d),I(this,Rm,h),I(this,nw,m||null),this.viewParameters={realScale:ud.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=g!==!1}static get _keyboardManager(){const e=Yp.prototype,t=o=>f(o,ol).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return ze(this,"_keyboardManager",new Kx([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&f(o,ol).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&f(o,ol).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,r,i,s,o,a,l;(e=f(this,vs))==null||e.resolve(),I(this,vs,null),(t=f(this,Cm))==null||t.abort(),I(this,Cm,null),this._signal=null;for(const c of f(this,Yn).values())c.destroy();f(this,Yn).clear(),f(this,Cn).clear(),f(this,dh).clear(),(r=f(this,Jc))==null||r.clear(),I(this,Mi,null),f(this,st).clear(),f(this,ys).destroy(),(i=f(this,Pm))==null||i.destroy(),(s=f(this,Zc))==null||s.destroy(),(o=f(this,Zo))==null||o.hide(),I(this,Zo,null),(a=f(this,fh))==null||a.destroy(),I(this,fh,null),f(this,Jo)&&(clearTimeout(f(this,Jo)),I(this,Jo,null)),f(this,ea)&&(clearTimeout(f(this,ea)),I(this,ea,null)),(l=this._editorUndoBar)==null||l.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return f(this,nw)}get useNewAltTextFlow(){return f(this,Z0)}get useNewAltTextWhenAddingImage(){return f(this,Rm)}get hcmFilter(){return ze(this,"hcmFilter",f(this,ph)?f(this,ew).addHCMFilter(f(this,ph).foreground,f(this,ph).background):"none")}get direction(){return ze(this,"direction",getComputedStyle(f(this,ol)).direction)}get highlightColors(){return ze(this,"highlightColors",f(this,Nm)?new Map(f(this,Nm).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return ze(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),I(this,qc,e)}setMainHighlightColorPicker(e){I(this,fh,e)}editAltText(e,t=!1){var r;(r=f(this,Pm))==null||r.editAltText(this,e,t)}getSignature(e){var t;(t=f(this,Zc))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return f(this,Zc)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":I(this,Rm,t);break}}onPageChanging({pageNumber:e}){I(this,km,e-1)}focusMainContainer(){f(this,ol).focus()}findParent(e,t){for(const r of f(this,Yn).values()){const{x:i,y:s,width:o,height:a}=r.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=s&&t<=s+a)return r}return null}disableUserSelect(e=!1){f(this,sw).classList.toggle("noUserSelect",e)}addShouldRescale(e){f(this,dh).add(e)}removeShouldRescale(e){f(this,dh).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*ud.PDF_TO_CSS_UNITS;for(const r of f(this,dh))r.onScaleChanging();(t=f(this,qc))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}=t,a=t.toString(),c=D(this,le,aA).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;t.empty();const d=D(this,le,cR).call(this,c),h=f(this,Ln)===Ce.NONE,m=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o,text:a}),h&&this.showAllEditors("highlight",!0,!0)};if(h){this.switchToMode(Ce.HIGHLIGHT,m);return}m()}addToAnnotationStorage(e){!e.isEmpty()&&f(this,il)&&!f(this,il).has(e.id)&&f(this,il).setValue(e.id,e)}a11yAlert(e,t=null){const r=f(this,ow);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,f(this,Yc)&&(I(this,Yc,!1),D(this,le,lA).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of f(this,st))if(t.div.contains(e)){I(this,hh,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!f(this,hh))return;const[e,t]=f(this,hh);I(this,hh,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){D(this,le,uR).call(this),D(this,le,dR).call(this)}removeEditListeners(){D(this,le,sY).call(this),D(this,le,hR).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of f(this,no))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of f(this,no))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=f(this,Mi))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of f(this,st)){const s=i.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const o of f(this,no))if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){Pe(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const l of r){const c=await i.deserialize(l);if(!c)return;s.push(c)}const o=()=>{for(const l of s)D(this,le,fR).call(this,l);D(this,le,pR).call(this,s)},a=()=>{for(const l of s)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(s){Pe(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),f(this,Ln)!==Ce.NONE&&!this.isEditorHandlingKeyboard&&Yp._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,f(this,Yc)&&(I(this,Yc,!1),D(this,le,lA).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(D(this,le,rY).call(this),D(this,le,dR).call(this),D(this,le,Lr).call(this,{isEditing:f(this,Ln)!==Ce.NONE,isEmpty:D(this,le,Ov).call(this),hasSomethingToUndo:f(this,ys).hasSomethingToUndo(),hasSomethingToRedo:f(this,ys).hasSomethingToRedo(),hasSelectedEditor:!1})):(D(this,le,iY).call(this),D(this,le,hR).call(this),D(this,le,Lr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!f(this,no)){I(this,no,e);for(const t of f(this,no))D(this,le,Xa).call(this,t.defaultPropertiesToUpdate)}}getId(){return f(this,ME).id}get currentLayer(){return f(this,Yn).get(f(this,km))}getLayer(e){return f(this,Yn).get(e)}get currentPageIndex(){return f(this,km)}addLayer(e){f(this,Yn).set(e.pageIndex,e),f(this,Xc)?e.enable():e.disable()}removeLayer(e){f(this,Yn).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,i=!1){var s,o,a;if(f(this,Ln)!==e&&!(f(this,vs)&&(await f(this,vs).promise,!f(this,vs)))){if(I(this,vs,Promise.withResolvers()),(s=f(this,qc))==null||s.commitOrRemove(),I(this,Ln,e),e===Ce.NONE){this.setEditingState(!1),D(this,le,lY).call(this),(o=this._editorUndoBar)==null||o.hide(),f(this,vs).resolve();return}e===Ce.SIGNATURE&&await((a=f(this,Zc))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await D(this,le,aY).call(this),this.unselectAll();for(const l of f(this,Yn).values())l.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),f(this,vs).resolve();return}for(const l of f(this,Cn).values())l.annotationElementId===t||l.id===t?(this.setSelected(l),i&&l.enterInEditMode()):l.unselect();f(this,vs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==f(this,Ln)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){var r;if(f(this,no)){switch(e){case Ue.CREATE:this.currentLayer.addNewEditor(t);return;case Ue.HIGHLIGHT_DEFAULT_COLOR:(r=f(this,fh))==null||r.updateColor(t);break;case Ue.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(f(this,rw)||I(this,rw,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of f(this,st))i.updateParams(e,t);for(const i of f(this,no))i.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var s;for(const o of f(this,Cn).values())o.editorType===e&&o.show(t);(((s=f(this,rw))==null?void 0:s.get(Ue.HIGHLIGHT_SHOW_ALL))??!0)!==t&&D(this,le,Xa).call(this,[[Ue.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(f(this,tw)!==e){I(this,tw,e);for(const t of f(this,Yn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of f(this,Cn).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return f(this,Cn).get(e)}addEditor(e){f(this,Cn).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(f(this,Jo)&&clearTimeout(f(this,Jo)),I(this,Jo,setTimeout(()=>{this.focusMainContainer(),I(this,Jo,null)},0))),f(this,Cn).delete(e.id),e.annotationElementId&&((t=f(this,Jc))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!f(this,uh).has(e.annotationElementId))&&((r=f(this,il))==null||r.remove(e.id))}addDeletedAnnotationElement(e){f(this,uh).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return f(this,uh).has(e)}removeDeletedAnnotationElement(e){f(this,uh).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){f(this,Mi)!==e&&(I(this,Mi,e),e&&D(this,le,Xa).call(this,e.propertiesToUpdate))}updateUI(e){f(this,le,cY)===e&&D(this,le,Xa).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){D(this,le,Xa).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(f(this,st).has(e)){f(this,st).delete(e),e.unselect(),D(this,le,Lr).call(this,{hasSelectedEditor:this.hasSelection});return}f(this,st).add(e),e.select(),D(this,le,Xa).call(this,e.propertiesToUpdate),D(this,le,Lr).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=f(this,qc))==null||t.commitOrRemove();for(const r of f(this,st))r!==e&&r.unselect();f(this,st).clear(),f(this,st).add(e),e.select(),D(this,le,Xa).call(this,e.propertiesToUpdate),D(this,le,Lr).call(this,{hasSelectedEditor:!0})}isSelected(e){return f(this,st).has(e)}get firstSelectedEditor(){return f(this,st).values().next().value}unselect(e){e.unselect(),f(this,st).delete(e),D(this,le,Lr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return f(this,st).size!==0}get isEnterHandled(){return f(this,st).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;f(this,ys).undo(),D(this,le,Lr).call(this,{hasSomethingToUndo:f(this,ys).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:D(this,le,Ov).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){f(this,ys).redo(),D(this,le,Lr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:f(this,ys).hasSomethingToRedo(),isEmpty:D(this,le,Ov).call(this)})}addCommands(e){f(this,ys).add(e),D(this,le,Lr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:D(this,le,Ov).call(this)})}cleanUndoStack(e){f(this,ys).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...f(this,st)],r=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const o of t)D(this,le,fR).call(this,o)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=f(this,Mi))==null||e.commitOrRemove()}hasSomethingToControl(){return f(this,Mi)||this.hasSelection}selectAll(){for(const e of f(this,st))e.commit();D(this,le,pR).call(this,f(this,Cn).values())}unselectAll(){var e;if(!(f(this,Mi)&&(f(this,Mi).commitOrRemove(),f(this,Ln)!==Ce.NONE))&&!((e=f(this,qc))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of f(this,st))t.unselect();f(this,st).clear(),D(this,le,Lr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;f(this,eu)[0]+=e,f(this,eu)[1]+=t;const[i,s]=f(this,eu),o=[...f(this,st)],a=1e3;f(this,ea)&&clearTimeout(f(this,ea)),I(this,ea,setTimeout(()=>{I(this,ea,null),f(this,eu)[0]=f(this,eu)[1]=0,this.addCommands({cmd:()=>{for(const l of o)f(this,Cn).has(l.id)&&(l.translateInPage(i,s),l.translationDone())},undo:()=>{for(const l of o)f(this,Cn).has(l.id)&&(l.translateInPage(-i,-s),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),I(this,Qo,new Map);for(const e of f(this,st))f(this,Qo).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!f(this,Qo))return!1;this.disableUserSelect(!1);const e=f(this,Qo);I(this,Qo,null);let t=!1;for(const[{x:i,y:s,pageIndex:o},a]of e)a.newX=i,a.newY=s,a.newPageIndex=o,t||(t=i!==a.savedX||s!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const r=(i,s,o,a)=>{if(f(this,Cn).has(i.id)){const l=f(this,Yn).get(a);l?i._setParentAndPosition(l,s,o):(i.pageIndex=a,i.x=s,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:o,newPageIndex:a}]of e)r(i,s,o,a)},undo:()=>{for(const[i,{savedX:s,savedY:o,savedPageIndex:a}]of e)r(i,s,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(f(this,Qo))for(const r of f(this,Qo).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||f(this,st).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return f(this,Mi)===e}getActive(){return f(this,Mi)}getMode(){return f(this,Ln)}get imageManager(){return ze(this,"imageManager",new aR)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:r,y:i,width:s,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,u,d,h)=>({x:(u-i)/o,y:1-(c+d-r)/s,width:h/o,height:d/s});break;case"180":a=(c,u,d,h)=>({x:1-(c+d-r)/s,y:1-(u+h-i)/o,width:d/s,height:h/o});break;case"270":a=(c,u,d,h)=>({x:1-(u+h-i)/o,y:(c-r)/s,width:h/o,height:d/s});break;default:a=(c,u,d,h)=>({x:(c-r)/s,y:(u-i)/o,width:d/s,height:h/o});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const d=t.getRangeAt(c);if(!d.collapsed)for(const{x:h,y:m,width:y,height:g}of d.getClientRects())y===0||g===0||l.push(a(h,m,y,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(f(this,Im)||I(this,Im,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=f(this,Im))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=f(this,Im))==null?void 0:i.get(e.data.id);if(!t)return;const r=f(this,il).getRawValue(t);r&&(f(this,Ln)===Ce.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var s;const i=(s=f(this,Jc))==null?void 0:s.get(e);i&&(i.setCanvas(t,r),f(this,Jc).delete(e))}addMissingCanvas(e,t){(f(this,Jc)||I(this,Jc,new Map)).set(e,t)}};Cm=new WeakMap,Mi=new WeakMap,Cn=new WeakMap,Yn=new WeakMap,Pm=new WeakMap,il=new WeakMap,Im=new WeakMap,ys=new WeakMap,Gc=new WeakMap,qc=new WeakMap,km=new WeakMap,uh=new WeakMap,Qo=new WeakMap,no=new WeakMap,dh=new WeakMap,J0=new WeakMap,Z0=new WeakMap,Rm=new WeakMap,ew=new WeakMap,Jo=new WeakMap,Kc=new WeakMap,Nm=new WeakMap,Yc=new WeakMap,Zo=new WeakMap,ME=new WeakMap,Xc=new WeakMap,tw=new WeakMap,Qc=new WeakMap,hh=new WeakMap,fh=new WeakMap,Jc=new WeakMap,nw=new WeakMap,Ln=new WeakMap,st=new WeakMap,sl=new WeakMap,Zc=new WeakMap,ph=new WeakMap,rw=new WeakMap,iw=new WeakMap,eu=new WeakMap,ea=new WeakMap,ol=new WeakMap,sw=new WeakMap,ow=new WeakMap,vs=new WeakMap,le=new WeakSet,aA=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},cR=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of f(this,Yn).values())if(r.hasTextLayer(e))return r;return null},eY=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=D(this,le,aA).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(f(this,Zo)||I(this,Zo,new _Ae(this)),f(this,Zo).show(r,i,this.direction==="ltr"))},tY=function(){var s,o,a;const e=document.getSelection();if(!e||e.isCollapsed){f(this,sl)&&((s=f(this,Zo))==null||s.hide(),I(this,sl,null),D(this,le,Lr).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===f(this,sl))return;const i=D(this,le,aA).call(this,e).closest(".textLayer");if(!i){f(this,sl)&&((o=f(this,Zo))==null||o.hide(),I(this,sl,null),D(this,le,Lr).call(this,{hasSelectedText:!1}));return}if((a=f(this,Zo))==null||a.hide(),I(this,sl,t),D(this,le,Lr).call(this,{hasSelectedText:!0}),!(f(this,Ln)!==Ce.HIGHLIGHT&&f(this,Ln)!==Ce.NONE)&&(f(this,Ln)===Ce.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),I(this,Yc,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=f(this,Ln)===Ce.HIGHLIGHT?D(this,le,cR).call(this,i):null;l==null||l.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),d=h=>{h.type==="pointerup"&&h.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),h.type==="pointerup"&&D(this,le,lA).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}},lA=function(e=""){f(this,Ln)===Ce.HIGHLIGHT?this.highlightSelection(e):f(this,J0)&&D(this,le,eY).call(this)},nY=function(){document.addEventListener("selectionchange",D(this,le,tY).bind(this),{signal:this._signal})},rY=function(){if(f(this,Kc))return;I(this,Kc,new AbortController);const e=this.combinedSignal(f(this,Kc));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},iY=function(){var e;(e=f(this,Kc))==null||e.abort(),I(this,Kc,null)},uR=function(){if(f(this,Qc))return;I(this,Qc,new AbortController);const e=this.combinedSignal(f(this,Qc));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},sY=function(){var e;(e=f(this,Qc))==null||e.abort(),I(this,Qc,null)},dR=function(){if(f(this,Gc))return;I(this,Gc,new AbortController);const e=this.combinedSignal(f(this,Gc));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},hR=function(){var e;(e=f(this,Gc))==null||e.abort(),I(this,Gc,null)},oY=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Lr=function(e){Object.entries(e).some(([r,i])=>f(this,iw)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(f(this,iw),e)}),f(this,Ln)===Ce.HIGHLIGHT&&e.hasSelectedEditor===!1&&D(this,le,Xa).call(this,[[Ue.HIGHLIGHT_FREE,!0]]))},Xa=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},aY=async function(){if(!f(this,Xc)){I(this,Xc,!0);const e=[];for(const t of f(this,Yn).values())e.push(t.enable());await Promise.all(e);for(const t of f(this,Cn).values())t.enable()}},lY=function(){if(this.unselectAll(),f(this,Xc)){I(this,Xc,!1);for(const e of f(this,Yn).values())e.disable();for(const e of f(this,Cn).values())e.disable()}},fR=function(e){const t=f(this,Yn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},cY=function(){let e=null;for(e of f(this,st));return e},Ov=function(){if(f(this,Cn).size===0)return!0;if(f(this,Cn).size===1)for(const e of f(this,Cn).values())return e.isEmpty();return!1},pR=function(e){for(const t of f(this,st))t.unselect();f(this,st).clear();for(const t of e)t.isEmpty()||(f(this,st).add(t),t.select());D(this,le,Lr).call(this,{hasSelectedEditor:this.hasSelection})},J(Yp,"TRANSLATE_SMALL",1),J(Yp,"TRANSLATE_BIG",10);let Vf=Yp;var jn,ta,ro,Om,na,Di,Mm,ra,ci,al,mh,ia,tu,_o,Mv,cA;const jr=class jr{constructor(e){O(this,_o);O(this,jn,null);O(this,ta,!1);O(this,ro,null);O(this,Om,null);O(this,na,null);O(this,Di,null);O(this,Mm,!1);O(this,ra,null);O(this,ci,null);O(this,al,null);O(this,mh,null);O(this,ia,!1);I(this,ci,e),I(this,ia,e._uiManager.useNewAltTextFlow),f(jr,tu)||I(jr,tu,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){jr._l10n??(jr._l10n=e)}async render(){const e=I(this,ro,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=I(this,Om,document.createElement("span"));e.append(t),f(this,ia)?(e.classList.add("new"),e.setAttribute("data-l10n-id",f(jr,tu).missing),t.setAttribute("data-l10n-id",f(jr,tu)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=f(this,ci)._uiManager._signal;e.addEventListener("contextmenu",ko,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),f(this,ci)._uiManager.editAltText(f(this,ci)),f(this,ia)&&f(this,ci)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:f(this,_o,Mv)}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(I(this,Mm,!0),i(s))},{signal:r}),await D(this,_o,cA).call(this),e}finish(){f(this,ro)&&(f(this,ro).focus({focusVisible:f(this,Mm)}),I(this,Mm,!1))}isEmpty(){return f(this,ia)?f(this,jn)===null:!f(this,jn)&&!f(this,ta)}hasData(){return f(this,ia)?f(this,jn)!==null||!!f(this,al):this.isEmpty()}get guessedText(){return f(this,al)}async setGuessedText(e){f(this,jn)===null&&(I(this,al,e),I(this,mh,await jr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),D(this,_o,cA).call(this))}toggleAltTextBadge(e=!1){var t;if(!f(this,ia)||f(this,jn)){(t=f(this,ra))==null||t.remove(),I(this,ra,null);return}if(!f(this,ra)){const r=I(this,ra,document.createElement("div"));r.className="noAltTextBadge",f(this,ci).div.append(r)}f(this,ra).classList.toggle("hidden",!e)}serialize(e){let t=f(this,jn);return!e&&f(this,al)===t&&(t=f(this,mh)),{altText:t,decorative:f(this,ta),guessedText:f(this,al),textWithDisclaimer:f(this,mh)}}get data(){return{altText:f(this,jn),decorative:f(this,ta)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:s=!1}){r&&(I(this,al,r),I(this,mh,i)),!(f(this,jn)===e&&f(this,ta)===t)&&(s||(I(this,jn,e),I(this,ta,t)),D(this,_o,cA).call(this))}toggle(e=!1){f(this,ro)&&(!e&&f(this,Di)&&(clearTimeout(f(this,Di)),I(this,Di,null)),f(this,ro).disabled=!e)}shown(){f(this,ci)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:f(this,_o,Mv)}})}destroy(){var e,t;(e=f(this,ro))==null||e.remove(),I(this,ro,null),I(this,Om,null),I(this,na,null),(t=f(this,ra))==null||t.remove(),I(this,ra,null)}};jn=new WeakMap,ta=new WeakMap,ro=new WeakMap,Om=new WeakMap,na=new WeakMap,Di=new WeakMap,Mm=new WeakMap,ra=new WeakMap,ci=new WeakMap,al=new WeakMap,mh=new WeakMap,ia=new WeakMap,tu=new WeakMap,_o=new WeakSet,Mv=function(){return f(this,jn)&&"added"||f(this,jn)===null&&this.guessedText&&"review"||"missing"},cA=async function(){var i,s,o;const e=f(this,ro);if(!e)return;if(f(this,ia)){if(e.classList.toggle("done",!!f(this,jn)),e.setAttribute("data-l10n-id",f(jr,tu)[f(this,_o,Mv)]),(i=f(this,Om))==null||i.setAttribute("data-l10n-id",f(jr,tu)[`${f(this,_o,Mv)}-label`]),!f(this,jn)){(s=f(this,na))==null||s.remove();return}}else{if(!f(this,jn)&&!f(this,ta)){e.classList.remove("done"),(o=f(this,na))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=f(this,na);if(!t){I(this,na,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${f(this,ci).id}`;const a=100,l=f(this,ci)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(f(this,Di)),I(this,Di,null)},{once:!0}),e.addEventListener("mouseenter",()=>{I(this,Di,setTimeout(()=>{I(this,Di,null),f(this,na).classList.add("show"),f(this,ci)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;f(this,Di)&&(clearTimeout(f(this,Di)),I(this,Di,null)),(c=f(this,na))==null||c.classList.remove("show")},{signal:l})}f(this,ta)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=f(this,jn)),t.parentNode||e.append(t);const r=f(this,ci).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},O(jr,tu,null),J(jr,"_l10n",null);let KS=jr;var Dm,gh,aw,lw,cw,uw,dw,ll,yh,cl,vh,ul,hd,uY,dY,hY;const nj=class nj{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:o=null,signal:a}){O(this,hd);O(this,Dm);O(this,gh,!1);O(this,aw,null);O(this,lw);O(this,cw);O(this,uw);O(this,dw);O(this,ll,null);O(this,yh);O(this,cl,null);O(this,vh);O(this,ul,null);I(this,Dm,e),I(this,aw,r),I(this,lw,t),I(this,cw,i),I(this,uw,s),I(this,dw,o),I(this,vh,new AbortController),I(this,yh,AbortSignal.any([a,f(this,vh).signal])),e.addEventListener("touchstart",D(this,hd,uY).bind(this),{passive:!1,signal:f(this,yh)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ma.pixelRatio}destroy(){var e,t;(e=f(this,vh))==null||e.abort(),I(this,vh,null),(t=f(this,ll))==null||t.abort(),I(this,ll,null)}};Dm=new WeakMap,gh=new WeakMap,aw=new WeakMap,lw=new WeakMap,cw=new WeakMap,uw=new WeakMap,dw=new WeakMap,ll=new WeakMap,yh=new WeakMap,cl=new WeakMap,vh=new WeakMap,ul=new WeakMap,hd=new WeakSet,uY=function(e){var i,s,o;if((i=f(this,lw))!=null&&i.call(this))return;if(e.touches.length===1){if(f(this,ll))return;const a=I(this,ll,new AbortController),l=AbortSignal.any([f(this,yh),a.signal]),c=f(this,Dm),u={capture:!0,signal:l,passive:!1},d=h=>{var m;h.pointerType==="touch"&&((m=f(this,ll))==null||m.abort(),I(this,ll,null))};c.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(gn(h),d(h))},u),c.addEventListener("pointerup",d,u),c.addEventListener("pointercancel",d,u);return}if(!f(this,ul)){I(this,ul,new AbortController);const a=AbortSignal.any([f(this,yh),f(this,ul).signal]),l=f(this,Dm),c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",D(this,hd,dY).bind(this),c);const u=D(this,hd,hY).bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",gn,c),l.addEventListener("pointermove",gn,c),l.addEventListener("pointercancel",gn,c),l.addEventListener("pointerup",gn,c),(s=f(this,cw))==null||s.call(this)}if(gn(e),e.touches.length!==2||(o=f(this,aw))!=null&&o.call(this)){I(this,cl,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),I(this,cl,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},dY=function(e){var S;if(!f(this,cl)||e.touches.length!==2)return;gn(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:i,screenY:s}=t,{screenX:o,screenY:a}=r,l=f(this,cl),{touch0X:c,touch0Y:u,touch1X:d,touch1Y:h}=l,m=d-c,y=h-u,g=o-i,b=a-s,w=Math.hypot(g,b)||1,x=Math.hypot(m,y)||1;if(!f(this,gh)&&Math.abs(x-w)<=nj.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=o,l.touch1Y=a,!f(this,gh)){I(this,gh,!0);return}const _=[(i+o)/2,(s+a)/2];(S=f(this,uw))==null||S.call(this,_,x,w)},hY=function(e){var t;e.touches.length>=2||(f(this,ul)&&(f(this,ul).abort(),I(this,ul,null),(t=f(this,dw))==null||t.call(this)),f(this,cl)&&(gn(e),I(this,cl,null),I(this,gh,!1)))};let YS=nj;var bh,io,Dt,Lm,nu,hw,wh,Xn,xh,dl,ru,fw,_h,Li,pw,Ah,hl,sa,jm,Fm,bs,Sh,mw,DE,_e,mR,gw,gR,uA,fY,pY,yR,dA,vR,mY,gY,yY,bR,vY,wR,bY,wY,xY,xR,Dv;const De=class De{constructor(e){O(this,_e);O(this,bh,null);O(this,io,null);O(this,Dt,null);O(this,Lm,!1);O(this,nu,null);O(this,hw,"");O(this,wh,!1);O(this,Xn,null);O(this,xh,null);O(this,dl,null);O(this,ru,null);O(this,fw,"");O(this,_h,!1);O(this,Li,null);O(this,pw,!1);O(this,Ah,!1);O(this,hl,!1);O(this,sa,null);O(this,jm,0);O(this,Fm,0);O(this,bs,null);O(this,Sh,null);J(this,"isSelected",!1);J(this,"_isCopy",!1);J(this,"_editToolbar",null);J(this,"_initialOptions",Object.create(null));J(this,"_initialData",null);J(this,"_isVisible",!0);J(this,"_uiManager",null);J(this,"_focusEventsAllowed",!0);O(this,mw,!1);O(this,DE,De._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=De.prototype._resizeWithKeyboard,t=Vf.TRANSLATE_SMALL,r=Vf.TRANSLATE_BIG;return ze(this,"_resizerKeyboardManager",new Kx([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],De.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ze(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new EAe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(De._l10n??(De._l10n=e),De._l10nResizer||(De._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),De._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);De._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ft("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return f(this,mw)}set _isDraggable(e){var t;I(this,mw,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=f(this,DE)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):D(this,_e,Dv).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(f(this,_h)?I(this,_h,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[s,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(t+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i),this._onTranslated()}translate(e,t){D(this,_e,mR).call(this,this.parentDimensions,e,t)}translateInPage(e,t){f(this,Li)||I(this,Li,[this.x,this.y,this.width,this.height]),D(this,_e,mR).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){f(this,Li)||I(this,Li,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:u}=r;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!f(this,Li)&&(f(this,Li)[0]!==this.x||f(this,Li)[1]!==this.y)}get _hasBeenResized(){return!!f(this,Li)&&(f(this,Li)[2]!==this.width||f(this,Li)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=De,i=r/e,s=r/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,i]}=this;let{x:s,y:o,width:a,height:l}=this;if(a*=r,l*=i,s*=r,o*=i,this._mustFixPosition)switch(e){case 0:s=Ur(s,0,r-a),o=Ur(o,0,i-l);break;case 90:s=Ur(s,0,r-l),o=Ur(o,a,i);break;case 180:s=Ur(s,a,r),o=Ur(o,l,i);break;case 270:s=Ur(s,l,r),o=Ur(o,0,i-a);break}this.x=s/=r,this.y=o/=i;const[c,u]=this.getBaseTranslation();s+=c,o+=u,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return D(r=De,gw,gR).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return D(r=De,gw,gR).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,i]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*e/r).toFixed(2)}%`,f(this,wh)||(s.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,i=r.endsWith("%"),s=!f(this,wh)&&t.endsWith("%");if(i&&s)return;const[o,a]=this.parentDimensions;i||(e.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!f(this,wh)&&!s&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=f(this,Dt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||f(this,Ah))return this._editToolbar;this._editToolbar=new oR(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=f(this,Dt))==null||e.destroy())}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return f(this,Dt)||(KS.initialize(De._l10n),I(this,Dt,new KS(this)),f(this,bh)&&(f(this,Dt).data=f(this,bh),I(this,bh,null))),f(this,Dt)}get altTextData(){var e;return(e=f(this,Dt))==null?void 0:e.data}set altTextData(e){f(this,Dt)&&(f(this,Dt).data=e)}get guessedAltText(){var e;return(e=f(this,Dt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=f(this,Dt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=f(this,Dt))==null?void 0:t.serialize(e)}hasAltText(){return!!f(this,Dt)&&!f(this,Dt).isEmpty()}hasAltTextData(){var e;return((e=f(this,Dt))==null?void 0:e.hasData())??!1}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=f(this,Lm)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),D(this,_e,wR).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),JK(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(f(this,Sh)||I(this,Sh,new YS({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:D(this,_e,mY).bind(this),onPinching:D(this,_e,gY).bind(this),onPinchEnd:D(this,_e,yY).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=lr.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(I(this,_h,!0),this._isDraggable){D(this,_e,vY).call(this,e);return}D(this,_e,bR).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){f(this,sa)&&clearTimeout(f(this,sa)),I(this,sa,setTimeout(()=>{var e;I(this,sa,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const i=this.parentScale,[s,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/i,u=t/i,d=this.x*s,h=this.y*o,m=this.width*s,y=this.height*o;switch(r){case 0:return[d+c+a,o-h-u-y+l,d+c+m+a,o-h-u+l];case 90:return[d+u+a,o-h+c+l,d+u+y+a,o-h+c+m+l];case 180:return[d-c-m+a,o-h+u+l,d-c+a,o-h+u+y+l];case 270:return[d-u-y+a,o-h-c-m+l,d-u+a,o-h-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,s,o]=e,a=s-r,l=o-i;switch(this.rotation){case 0:return[r,t-o,a,l];case 90:return[r,t-i,l,a];case 180:return[s,t-i,a,l];case 270:return[s,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),I(this,Ah,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),I(this,Ah,!1),!0):!1}isInEditMode(){return f(this,Ah)}shouldGetKeyboardEvents(){return f(this,hl)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:o}=window;return t<o&&i>0&&e<s&&r>0}rebuild(){D(this,_e,wR).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){ft("An editor must be serializable")}static async deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId});i.rotation=e.rotation,I(i,bh,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,o]=i.pageDimensions,[a,l,c,u]=i.getRectInCurrentCoords(e.rect,o);return i.x=a/s,i.y=l/o,i.width=c/s,i.height=u/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=f(this,ru))==null||e.abort(),I(this,ru,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),f(this,sa)&&(clearTimeout(f(this,sa)),I(this,sa,null)),D(this,_e,Dv).call(this),this.removeEditToolbar(),f(this,bs)){for(const r of f(this,bs).values())clearTimeout(r);I(this,bs,null)}this.parent=null,(t=f(this,Sh))==null||t.destroy(),I(this,Sh,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(D(this,_e,fY).call(this),f(this,Xn).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),I(this,dl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=f(this,Xn).children;if(!f(this,io)){I(this,io,Array.from(t));const o=D(this,_e,bY).bind(this),a=D(this,_e,wY).bind(this),l=this._uiManager._signal;for(const c of f(this,io)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",D(this,_e,xY).bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",De._l10nResizer[u])}}const r=f(this,io)[0];let i=0;for(const o of t){if(o===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(f(this,io).length/4);if(s!==i){if(s<i)for(let a=0;a<i-s;a++)f(this,Xn).append(f(this,Xn).firstChild);else if(s>i)for(let a=0;a<s-i;a++)f(this,Xn).firstChild.before(f(this,Xn).lastChild);let o=0;for(const a of t){const c=f(this,io)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",De._l10nResizer[c])}}D(this,_e,xR).call(this,0),I(this,hl,!0),f(this,Xn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){f(this,hl)&&D(this,_e,vR).call(this,f(this,fw),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){D(this,_e,Dv).call(this),this.div.focus()}select(){var e,t,r;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(r=f(this,Dt))==null||r.toggleAltTextBadge(!1)}}unselect(){var e,t,r,i,s;this.isSelected&&(this.isSelected=!1,(e=f(this,Xn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(s=f(this,Dt))==null||s.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return f(this,pw)}set isEditing(e){I(this,pw,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){I(this,wh,!0);const r=e/t,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){f(this,bs)||I(this,bs,new Map);const{action:r}=e;let i=f(this,bs).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),f(this,bs).delete(r),f(this,bs).size===0&&I(this,bs,null)},De._telemetryTimeout),f(this,bs).set(r,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),I(this,Lm,!1)}disable(){this.div&&(this.div.tabIndex=-1),I(this,Lm,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};bh=new WeakMap,io=new WeakMap,Dt=new WeakMap,Lm=new WeakMap,nu=new WeakMap,hw=new WeakMap,wh=new WeakMap,Xn=new WeakMap,xh=new WeakMap,dl=new WeakMap,ru=new WeakMap,fw=new WeakMap,_h=new WeakMap,Li=new WeakMap,pw=new WeakMap,Ah=new WeakMap,hl=new WeakMap,sa=new WeakMap,jm=new WeakMap,Fm=new WeakMap,bs=new WeakMap,Sh=new WeakMap,mw=new WeakMap,DE=new WeakMap,_e=new WeakSet,mR=function([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},gw=new WeakSet,gR=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},uA=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},fY=function(){if(f(this,Xn))return;I(this,Xn,document.createElement("div")),f(this,Xn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");f(this,Xn).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",D(this,_e,pY).bind(this,r),{signal:t}),i.addEventListener("contextmenu",ko,{signal:t}),i.tabIndex=-1}this.div.prepend(f(this,Xn))},pY=function(e,t){var u;t.preventDefault();const{isMac:r}=lr.platform;if(t.button!==0||t.ctrlKey&&r)return;(u=f(this,Dt))==null||u.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,I(this,xh,[t.screenX,t.screenY]);const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",D(this,_e,vR).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",gn,{passive:!1,signal:o}),window.addEventListener("contextmenu",ko,{signal:o}),I(this,dl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var d;s.abort(),this.parent.togglePointerEvents(!0),(d=f(this,Dt))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,D(this,_e,dA).call(this)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},yR=function(e,t,r,i){this.width=r,this.height=i,this.x=e,this.y=t;const[s,o]=this.parentDimensions;this.setDims(s*r,o*i),this.fixAndSetPosition(),this._onResized()},dA=function(){if(!f(this,dl))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=f(this,dl);I(this,dl,null);const s=this.x,o=this.y,a=this.width,l=this.height;s===e&&o===t&&a===r&&l===i||this.addCommands({cmd:D(this,_e,yR).bind(this,s,o,a,l),undo:D(this,_e,yR).bind(this,e,t,r,i),mustExec:!0})},vR=function(e,t){const[r,i]=this.parentDimensions,s=this.x,o=this.y,a=this.width,l=this.height,c=De.MIN_SIZE/r,u=De.MIN_SIZE/i,d=D(this,_e,uA).call(this,this.rotation),h=(z,W)=>[d[0]*z+d[2]*W,d[1]*z+d[3]*W],m=D(this,_e,uA).call(this,360-this.rotation),y=(z,W)=>[m[0]*z+m[2]*W,m[1]*z+m[3]*W];let g,b,w=!1,x=!1;switch(e){case"topLeft":w=!0,g=(z,W)=>[0,0],b=(z,W)=>[z,W];break;case"topMiddle":g=(z,W)=>[z/2,0],b=(z,W)=>[z/2,W];break;case"topRight":w=!0,g=(z,W)=>[z,0],b=(z,W)=>[0,W];break;case"middleRight":x=!0,g=(z,W)=>[z,W/2],b=(z,W)=>[0,W/2];break;case"bottomRight":w=!0,g=(z,W)=>[z,W],b=(z,W)=>[0,0];break;case"bottomMiddle":g=(z,W)=>[z/2,W],b=(z,W)=>[z/2,0];break;case"bottomLeft":w=!0,g=(z,W)=>[0,W],b=(z,W)=>[z,0];break;case"middleLeft":x=!0,g=(z,W)=>[0,W/2],b=(z,W)=>[z,W/2];break}const _=g(a,l),S=b(a,l);let P=h(...S);const N=De._round(s+P[0]),T=De._round(o+P[1]);let C=1,k=1,M,L;if(t.fromKeyboard)({deltaX:M,deltaY:L}=t);else{const{screenX:z,screenY:W}=t,[V,U]=f(this,xh);[M,L]=this.screenToPageTranslation(z-V,W-U),f(this,xh)[0]=z,f(this,xh)[1]=W}if([M,L]=y(M/r,L/i),w){const z=Math.hypot(a,l);C=k=Math.max(Math.min(Math.hypot(S[0]-_[0]-M,S[1]-_[1]-L)/z,1/a,1/l),c/a,u/l)}else x?C=Ur(Math.abs(S[0]-_[0]-M),c,1)/a:k=Ur(Math.abs(S[1]-_[1]-L),u,1)/l;const F=De._round(a*C),j=De._round(l*k);P=h(...b(F,j));const q=N-P[0],H=T-P[1];f(this,Li)||I(this,Li,[this.x,this.y,this.width,this.height]),this.width=F,this.height=j,this.x=q,this.y=H,this.setDims(r*F,i*j),this.fixAndSetPosition(),this._onResizing()},mY=function(){var e;I(this,dl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=f(this,Dt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},gY=function(e,t,r){let s=.7*(r/t)+1-.7;if(s===1)return;const o=D(this,_e,uA).call(this,this.rotation),a=(N,T)=>[o[0]*N+o[2]*T,o[1]*N+o[3]*T],[l,c]=this.parentDimensions,u=this.x,d=this.y,h=this.width,m=this.height,y=De.MIN_SIZE/l,g=De.MIN_SIZE/c;s=Math.max(Math.min(s,1/h,1/m),y/h,g/m);const b=De._round(h*s),w=De._round(m*s);if(b===h&&w===m)return;f(this,Li)||I(this,Li,[u,d,h,m]);const x=a(h/2,m/2),_=De._round(u+x[0]),S=De._round(d+x[1]),P=a(b/2,w/2);this.x=_-P[0],this.y=S-P[1],this.width=b,this.height=w,this.setDims(l*b,c*w),this.fixAndSetPosition(),this._onResizing()},yY=function(){var e;(e=f(this,Dt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),D(this,_e,dA).call(this)},bR=function(e){const{isMac:t}=lr.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},vY=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:s},a=c=>{i.abort(),I(this,nu,null),I(this,_h,!1),this._uiManager.endDragSession()||D(this,_e,bR).call(this,c),r&&this._onStopDragging()};t&&(I(this,jm,e.clientX),I(this,Fm,e.clientY),I(this,nu,e.pointerId),I(this,hw,e.pointerType),window.addEventListener("pointermove",c=>{r||(r=!0,this._onStartDragging());const{clientX:u,clientY:d,pointerId:h}=c;if(h!==f(this,nu)){gn(c);return}const[m,y]=this.screenToPageTranslation(u-f(this,jm),d-f(this,Fm));I(this,jm,u),I(this,Fm,d),this._uiManager.dragSelectedEditors(m,y)},o),window.addEventListener("touchmove",gn,o),window.addEventListener("pointerdown",c=>{c.pointerType===f(this,hw)&&(f(this,Sh)||c.isPrimary)&&a(c),gn(c)},o));const l=c=>{if(!f(this,nu)||f(this,nu)===c.pointerId){a(c);return}gn(c)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},wR=function(){if(f(this,ru)||!this.div)return;I(this,ru,new AbortController);const e=this._uiManager.combinedSignal(f(this,ru));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},bY=function(e){De._resizerKeyboardManager.exec(this,e)},wY=function(e){var t;f(this,hl)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==f(this,Xn)&&D(this,_e,Dv).call(this)},xY=function(e){I(this,fw,f(this,hl)?e:"")},xR=function(e){if(f(this,io))for(const t of f(this,io))t.tabIndex=e},Dv=function(){I(this,hl,!1),D(this,_e,xR).call(this,-1),D(this,_e,dA).call(this)},O(De,gw),J(De,"_l10n",null),J(De,"_l10nResizer",null),J(De,"_borderLineWidth",-1),J(De,"_colorManager",new lR),J(De,"_zIndex",1),J(De,"_telemetryTimeout",1e3);let _t=De;class EAe extends _t{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const gV=3285377520,hs=4294901760,zo=65535;class _Y{constructor(e){this.h1=e?e&4294967295:gV,this.h2=e?e&4294967295:gV}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let g=0,b=e.length;g<b;g++){const w=e.charCodeAt(g);w<=255?t[r++]=w:(t[r++]=w>>>8,t[r++]=w&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,s=r-i*4,o=new Uint32Array(t.buffer,0,i);let a=0,l=0,c=this.h1,u=this.h2;const d=3432918353,h=461845907,m=d&zo,y=h&zo;for(let g=0;g<i;g++)g&1?(a=o[g],a=a*d&hs|a*m&zo,a=a<<15|a>>>17,a=a*h&hs|a*y&zo,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[g],l=l*d&hs|l*m&zo,l=l<<15|l>>>17,l=l*h&hs|l*y&zo,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,s){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*d&hs|a*m&zo,a=a<<15|a>>>17,a=a*h&hs|a*y&zo,i&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&hs|e*36045&zo,t=t*4283543511&hs|((t<<16|e>>>16)*2950163797&hs)>>>16,e^=t>>>1,e=e*444984403&hs|e*60499&zo,t=t*3301882366&hs|((t<<16|e>>>16)*3120437893&hs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const _R=Object.freeze({map:null,hash:"",transfer:void 0});var Eh,Th,Qn,LE,AY;class lL{constructor(){O(this,LE);O(this,Eh,!1);O(this,Th,null);O(this,Qn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=f(this,Qn).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return f(this,Qn).get(e)}remove(e){if(f(this,Qn).delete(e),f(this,Qn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of f(this,Qn).values())if(t instanceof _t)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=f(this,Qn).get(e);let i=!1;if(r!==void 0)for(const[s,o]of Object.entries(t))r[s]!==o&&(i=!0,r[s]=o);else i=!0,f(this,Qn).set(e,t);i&&D(this,LE,AY).call(this),t instanceof _t&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return f(this,Qn).has(e)}get size(){return f(this,Qn).size}resetModified(){f(this,Eh)&&(I(this,Eh,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new SY(this)}get serializable(){if(f(this,Qn).size===0)return _R;const e=new Map,t=new _Y,r=[],i=Object.create(null);let s=!1;for(const[o,a]of f(this,Qn)){const l=a instanceof _t?a.serialize(!1,i):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:_R}get editorStats(){let e=null;const t=new Map;for(const r of f(this,Qn).values()){if(!(r instanceof _t))continue;const i=r.telemetryFinalData;if(!i)continue;const{type:s}=i;t.has(s)||t.set(s,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const o=e[s]||(e[s]=new Map);for(const[a,l]of Object.entries(i)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[r,i]of t)e[r]=i.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){I(this,Th,null)}get modifiedIds(){if(f(this,Th))return f(this,Th);const e=[];for(const t of f(this,Qn).values())!(t instanceof _t)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return I(this,Th,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return f(this,Qn).entries()}}Eh=new WeakMap,Th=new WeakMap,Qn=new WeakMap,LE=new WeakSet,AY=function(){f(this,Eh)||(I(this,Eh,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var yw;class SY extends lL{constructor(t){super();O(this,yw);const{map:r,hash:i,transfer:s}=t.serializable,o=structuredClone(r,s?{transfer:s}:null);I(this,yw,{map:o,hash:i,transfer:s})}get print(){ft("Should not call PrintAnnotationStorage.print")}get serializable(){return f(this,yw)}get modifiedIds(){return ze(this,"modifiedIds",{ids:new Set,hash:""})}}yw=new WeakMap;var $m;class TAe{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){O(this,$m,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),f(this,$m).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||f(this,$m).has(e.loadedName))){if(bn(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:o}=e,a=new FontFace(i,s,o);this.addNativeFontFace(a);try{await a.load(),f(this,$m).add(i),r==null||r(e)}catch{Pe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}ft("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw Pe(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ze(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return ze(this,"isSyncFontLoadingSupported",zr||lr.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(bn(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ze(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(S,P){return S.charCodeAt(P)<<24|S.charCodeAt(P+1)<<16|S.charCodeAt(P+2)<<8|S.charCodeAt(P+3)&255}function i(S,P,N,T){const C=S.substring(0,P),k=S.substring(P+N);return C+T+k}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(S,P){if(++c>30){Pe("Load test font never loaded."),P();return}if(l.font="30px "+S,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(u.bind(null,S,P))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let h=this._loadTestFont;h=i(h,976,d.length,d);const y=16,g=1482184792;let b=r(h,y);for(s=0,o=d.length-3;s<o;s+=4)b=b-g+r(d,s)|0;s<d.length&&(b=b-g+r(d+"XXX",s)|0),h=i(h,y,4,uAe(b));const w=`url(data:font/opentype;base64,${btoa(h)});`,x=`@font-face {font-family:"${d}";src:${w}}`;this.insertRule(x);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const S of[e.loadedName,d]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=S,_.append(P)}this._document.body.append(_),u(d,()=>{_.remove(),t.complete()})}}$m=new WeakMap;class CAe{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${WK(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let i;try{i=e.get(r)}catch(o){Pe(`getPathGenerator - ignoring character: "${o}".`)}const s=new Path2D(i||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=s}}function PAe(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(zr)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function IAe(n){if(zr&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Wx(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function u1(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const AR=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,kAe=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",RAe=mAe.bind(null,AR,kAe);var fl,jE;class NAe{constructor(){O(this,fl,new Map);O(this,jE,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};f(this,jE).then(()=>{for(const[i]of f(this,fl))i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:s}=r;if(s.aborted){Pe("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}f(this,fl).set(t,i)}removeEventListener(e,t){const r=f(this,fl).get(t);r==null||r(),f(this,fl).delete(t)}terminate(){for(const[,e]of f(this,fl))e==null||e();f(this,fl).clear()}}fl=new WeakMap,jE=new WeakMap;const d1={DATA:1,ERROR:2},hn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function yV(){}function ai(n){if(n instanceof cd||n instanceof rR||n instanceof fV||n instanceof qS||n instanceof II)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||ft('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new cd(n.message);case"InvalidPDFException":return new rR(n.message);case"PasswordException":return new fV(n.message,n.code);case"ResponseException":return new qS(n.message,n.status,n.missing);case"UnknownErrorException":return new II(n.message,n.details)}return new II(n.message,n.toString())}var Vm,Ms,EY,TY,CY,hA;class Lv{constructor(e,t,r){O(this,Ms);O(this,Vm,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",D(this,Ms,EY).bind(this),{signal:f(this,Vm).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,r,i){const s=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:c.desiredSize},i),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:hn.PULL,streamId:s,desiredSize:c.desiredSize}),u.promise},cancel:c=>{bn(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:hn.CANCEL,streamId:s,reason:ai(c)}),u.promise}},r)}destroy(){var e;(e=f(this,Vm))==null||e.abort(),I(this,Vm,null)}}Vm=new WeakMap,Ms=new WeakSet,EY=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){D(this,Ms,CY).call(this,e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===d1.DATA)i.resolve(e.data);else if(e.callback===d1.ERROR)i.reject(ai(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(o){s.postMessage({sourceName:r,targetName:i,callback:d1.DATA,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:r,targetName:i,callback:d1.ERROR,callbackId:e.callbackId,reason:ai(o)})});return}if(e.streamId){D(this,Ms,TY).call(this,e);return}t(e.data)},TY=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=u,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:hn.ENQUEUE,streamId:t,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:hn.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){bn(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:hn.ERROR,streamId:t,reason:ai(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:hn.START_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:hn.START_COMPLETE,streamId:t,reason:ai(c)})})},CY=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case hn.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(ai(e.reason));break;case hn.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(ai(e.reason));break;case hn.PULL:if(!a){s.postMessage({sourceName:r,targetName:i,stream:hn.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||yV).then(function(){s.postMessage({sourceName:r,targetName:i,stream:hn.PULL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:hn.PULL_COMPLETE,streamId:t,reason:ai(c)})});break;case hn.ENQUEUE:if(bn(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case hn.CLOSE:if(bn(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),D(this,Ms,hA).call(this,o,t);break;case hn.ERROR:bn(o,"error should have stream controller"),o.controller.error(ai(e.reason)),D(this,Ms,hA).call(this,o,t);break;case hn.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(ai(e.reason)),D(this,Ms,hA).call(this,o,t);break;case hn.CANCEL:if(!a)break;const l=ai(e.reason);Promise.try(a.onCancel||yV,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:hn.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:hn.CANCEL_COMPLETE,streamId:t,reason:ai(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},hA=async function(e,t){var r,i,s;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(i=e.pullCall)==null?void 0:i.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var vw;class PY{constructor({enableHWA:e=!1}){O(this,vw,!1);I(this,vw,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!f(this,vw)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ft("Abstract method `_createCanvas` called.")}}vw=new WeakMap;class OAe extends PY{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class IY{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){ft("Abstract method `_fetch` called.")}}class vV extends IY{async _fetch(e){const t=await Gx(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Wx(t)}}class kY{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,s){return"none"}destroy(e=!1){}}var Ch,Bm,pl,ml,xr,Ph,Ih,he,vr,jv,Ep,fA,Tp,RY,SR,Cp,Fv,$v,ER,Vv;class MAe extends kY{constructor({docId:t,ownerDocument:r=globalThis.document}){super();O(this,he);O(this,Ch);O(this,Bm);O(this,pl);O(this,ml);O(this,xr);O(this,Ph);O(this,Ih,0);I(this,ml,t),I(this,xr,r)}addFilter(t){if(!t)return"none";let r=f(this,he,vr).get(t);if(r)return r;const[i,s,o]=D(this,he,fA).call(this,t),a=t.length===1?i:`${i}${s}${o}`;if(r=f(this,he,vr).get(a),r)return f(this,he,vr).set(t,r),r;const l=`g_${f(this,ml)}_transfer_map_${Dn(this,Ih)._++}`,c=D(this,he,Tp).call(this,l);f(this,he,vr).set(t,c),f(this,he,vr).set(a,c);const u=D(this,he,Cp).call(this,l);return D(this,he,$v).call(this,i,s,o,u),c}addHCMFilter(t,r){var y;const i=`${t}-${r}`,s="base";let o=f(this,he,jv).get(s);if((o==null?void 0:o.key)===i||(o?((y=o.filter)==null||y.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},f(this,he,jv).set(s,o)),!t||!r))return o.url;const a=D(this,he,Vv).call(this,t);t=we.makeHexColor(...a);const l=D(this,he,Vv).call(this,r);if(r=we.makeHexColor(...l),f(this,he,Ep).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return o.url;const c=new Array(256);for(let g=0;g<=255;g++){const b=g/255;c[g]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const u=c.join(","),d=`g_${f(this,ml)}_hcm_filter`,h=o.filter=D(this,he,Cp).call(this,d);D(this,he,$v).call(this,u,u,u,h),D(this,he,SR).call(this,h);const m=(g,b)=>{const w=a[g]/255,x=l[g]/255,_=new Array(b+1);for(let S=0;S<=b;S++)_[S]=w+S/b*(x-w);return _.join(",")};return D(this,he,$v).call(this,m(0,5),m(1,5),m(2,5),h),o.url=D(this,he,Tp).call(this,d),o.url}addAlphaFilter(t){let r=f(this,he,vr).get(t);if(r)return r;const[i]=D(this,he,fA).call(this,[t]),s=`alpha_${i}`;if(r=f(this,he,vr).get(s),r)return f(this,he,vr).set(t,r),r;const o=`g_${f(this,ml)}_alpha_map_${Dn(this,Ih)._++}`,a=D(this,he,Tp).call(this,o);f(this,he,vr).set(t,a),f(this,he,vr).set(s,a);const l=D(this,he,Cp).call(this,o);return D(this,he,ER).call(this,i,l),a}addLuminosityFilter(t){let r=f(this,he,vr).get(t||"luminosity");if(r)return r;let i,s;if(t?([i]=D(this,he,fA).call(this,[t]),s=`luminosity_${i}`):s="luminosity",r=f(this,he,vr).get(s),r)return f(this,he,vr).set(t,r),r;const o=`g_${f(this,ml)}_luminosity_map_${Dn(this,Ih)._++}`,a=D(this,he,Tp).call(this,o);f(this,he,vr).set(t,a),f(this,he,vr).set(s,a);const l=D(this,he,Cp).call(this,o);return D(this,he,RY).call(this,l),t&&D(this,he,ER).call(this,i,l),a}addHighlightHCMFilter(t,r,i,s,o){var x;const a=`${r}-${i}-${s}-${o}`;let l=f(this,he,jv).get(t);if((l==null?void 0:l.key)===a||(l?((x=l.filter)==null||x.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},f(this,he,jv).set(t,l)),!r||!i))return l.url;const[c,u]=[r,i].map(D(this,he,Vv).bind(this));let d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[m,y]=[s,o].map(D(this,he,Vv).bind(this));h<d&&([d,h,m,y]=[h,d,y,m]),f(this,he,Ep).style.color="";const g=(_,S,P)=>{const N=new Array(256),T=(h-d)/P,C=_/255,k=(S-_)/(255*P);let M=0;for(let L=0;L<=P;L++){const F=Math.round(d+L*T),j=C+L*k;for(let q=M;q<=F;q++)N[q]=j;M=F+1}for(let L=M;L<256;L++)N[L]=N[M-1];return N.join(",")},b=`g_${f(this,ml)}_hcm_${t}_filter`,w=l.filter=D(this,he,Cp).call(this,b);return D(this,he,SR).call(this,w),D(this,he,$v).call(this,g(m[0],y[0],5),g(m[1],y[1],5),g(m[2],y[2],5),w),l.url=D(this,he,Tp).call(this,b),l.url}destroy(t=!1){var r,i,s,o;t&&((r=f(this,Ph))!=null&&r.size)||((i=f(this,pl))==null||i.parentNode.parentNode.remove(),I(this,pl,null),(s=f(this,Bm))==null||s.clear(),I(this,Bm,null),(o=f(this,Ph))==null||o.clear(),I(this,Ph,null),I(this,Ih,0))}}Ch=new WeakMap,Bm=new WeakMap,pl=new WeakMap,ml=new WeakMap,xr=new WeakMap,Ph=new WeakMap,Ih=new WeakMap,he=new WeakSet,vr=function(){return f(this,Bm)||I(this,Bm,new Map)},jv=function(){return f(this,Ph)||I(this,Ph,new Map)},Ep=function(){if(!f(this,pl)){const t=f(this,xr).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const i=f(this,xr).createElementNS(Ya,"svg");i.setAttribute("width",0),i.setAttribute("height",0),I(this,pl,f(this,xr).createElementNS(Ya,"defs")),t.append(i),i.append(f(this,pl)),f(this,xr).body.append(t)}return f(this,pl)},fA=function(t){if(t.length===1){const c=t[0],u=new Array(256);for(let h=0;h<256;h++)u[h]=c[h]/255;const d=u.join(",");return[d,d,d]}const[r,i,s]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=r[c]/255,a[c]=i[c]/255,l[c]=s[c]/255;return[o.join(","),a.join(","),l.join(",")]},Tp=function(t){if(f(this,Ch)===void 0){I(this,Ch,"");const r=f(this,xr).URL;r!==f(this,xr).baseURI&&(hC(r)?Pe('#createUrl: ignore "data:"-URL for performance reasons.'):I(this,Ch,zK(r,"")))}return`url(${f(this,Ch)}#${t})`},RY=function(t){const r=f(this,xr).createElementNS(Ya,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},SR=function(t){const r=f(this,xr).createElementNS(Ya,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},Cp=function(t){const r=f(this,xr).createElementNS(Ya,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),f(this,he,Ep).append(r),r},Fv=function(t,r,i){const s=f(this,xr).createElementNS(Ya,r);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)},$v=function(t,r,i,s){const o=f(this,xr).createElementNS(Ya,"feComponentTransfer");s.append(o),D(this,he,Fv).call(this,o,"feFuncR",t),D(this,he,Fv).call(this,o,"feFuncG",r),D(this,he,Fv).call(this,o,"feFuncB",i)},ER=function(t,r){const i=f(this,xr).createElementNS(Ya,"feComponentTransfer");r.append(i),D(this,he,Fv).call(this,i,"feFuncA",t)},Vv=function(t){return f(this,he,Ep).style.color=t,aL(getComputedStyle(f(this,he,Ep)).getPropertyValue("color"))};class NY{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){ft("Abstract method `_fetch` called.")}}class bV extends NY{async _fetch(e){const t=await Gx(e,"arraybuffer");return new Uint8Array(t)}}class OY{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){ft("Abstract method `_fetch` called.")}}class wV extends OY{async _fetch(e){const t=await Gx(e,"arraybuffer");return new Uint8Array(t)}}zr&&Pe("Please use the `legacy` build in Node.js environments.");async function cL(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class DAe extends kY{}class LAe extends PY{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class jAe extends IY{async _fetch(e){return cL(e)}}class FAe extends NY{async _fetch(e){return cL(e)}}class $Ae extends OY{async _fetch(e){return cL(e)}}const ir={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function TR(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class uL{isModifyingCurrentTransform(){return!1}getPattern(){ft("Abstract method `getPattern` called.")}}class VAe extends uL{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let s;if(i===ir.STROKE||i===ir.FILL){const o=t.current.getClippedPathBoundingBox(i,zt(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),r=we.transform(r,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),TR(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=e.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(r);s.setTransform(d)}else TR(e,this._bbox),s=this._createGradient(e);return s}}function NI(n,e,t,r,i,s,o,a){const l=e.coords,c=e.colors,u=n.data,d=n.width*4;let h;l[t+1]>l[r+1]&&(h=t,t=r,r=h,h=s,s=o,o=h),l[r+1]>l[i+1]&&(h=r,r=i,i=h,h=o,o=a,a=h),l[t+1]>l[r+1]&&(h=t,t=r,r=h,h=s,s=o,o=h);const m=(l[t]+e.offsetX)*e.scaleX,y=(l[t+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,b=(l[r+1]+e.offsetY)*e.scaleY,w=(l[i]+e.offsetX)*e.scaleX,x=(l[i+1]+e.offsetY)*e.scaleY;if(y>=x)return;const _=c[s],S=c[s+1],P=c[s+2],N=c[o],T=c[o+1],C=c[o+2],k=c[a],M=c[a+1],L=c[a+2],F=Math.round(y),j=Math.round(x);let q,H,z,W,V,U,K,Q;for(let B=F;B<=j;B++){if(B<b){const ae=B<y?0:(y-B)/(y-b);q=m-(m-g)*ae,H=_-(_-N)*ae,z=S-(S-T)*ae,W=P-(P-C)*ae}else{let ae;B>x?ae=1:b===x?ae=0:ae=(b-B)/(b-x),q=g-(g-w)*ae,H=N-(N-k)*ae,z=T-(T-M)*ae,W=C-(C-L)*ae}let Y;B<y?Y=0:B>x?Y=1:Y=(y-B)/(y-x),V=m-(m-w)*Y,U=_-(_-k)*Y,K=S-(S-M)*Y,Q=P-(P-L)*Y;const re=Math.round(Math.min(q,V)),te=Math.round(Math.max(q,V));let ie=d*B+re*4;for(let ae=re;ae<=te;ae++)Y=(q-ae)/(q-V),Y<0?Y=0:Y>1&&(Y=1),u[ie++]=H-(H-U)*Y|0,u[ie++]=z-(z-K)*Y|0,u[ie++]=W-(W-Q)*Y|0,u[ie++]=255}}function BAe(n,e,t){const r=e.coords,i=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(r.length/a)-1,c=a-1;for(s=0;s<l;s++){let u=s*a;for(let d=0;d<c;d++,u++)NI(n,t,r[u],r[u+1],r[u+a],i[u],i[u+1],i[u+a]),NI(n,t,r[u+a+1],r[u+1],r[u+a],i[u+a+1],i[u+1],i[u+a])}break;case"triangles":for(s=0,o=r.length;s<o;s+=3)NI(n,t,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class zAe extends uL{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),m=c/d,y=u/h,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/m,scaleY:1/y},b=d+2*2,w=h+2*2,x=r.getCanvas("mesh",b,w),_=x.context,S=_.createImageData(d,h);if(t){const N=S.data;for(let T=0,C=N.length;T<C;T+=4)N[T]=t[0],N[T+1]=t[1],N[T+2]=t[2],N[T+3]=255}for(const N of this._figures)BAe(S,N,g);return _.putImageData(S,2,2),{canvas:x.canvas,offsetX:a-2*m,offsetY:l-2*y,scaleX:m,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,i){TR(e,this._bbox);const s=new Float32Array(2);if(i===ir.SHADING)we.singularValueDecompose2dScale(zt(e),s);else if(this.matrix){we.singularValueDecompose2dScale(this.matrix,s);const[a,l]=s;we.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=a,s[1]*=l}else we.singularValueDecompose2dScale(t.baseTransform,s);const o=this._createMeshCanvas(s,i===ir.SHADING?null:this._background,t.cachedCanvases);return i!==ir.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class UAe extends uL{getPattern(){return"hotpink"}}function HAe(n){switch(n[0]){case"RadialAxial":return new VAe(n);case"Mesh":return new zAe(n);case"Dummy":return new UAe}throw new Error(`Unknown IR type: ${n[0]}`)}const xV={COLORED:1,UNCOLORED:2},FE=class FE{constructor(e,t,r,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:i,tilingType:s,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),dC("TilingType: "+s);const u=t[0],d=t[1],h=t[2],m=t[3],y=h-u,g=m-d,b=new Float32Array(2);we.singularValueDecompose2dScale(this.matrix,b);const[w,x]=b;we.singularValueDecompose2dScale(this.baseTransform,b);const _=w*b[0],S=x*b[1];let P=y,N=g,T=!1,C=!1;const k=Math.ceil(l*_),M=Math.ceil(c*S),L=Math.ceil(y*_),F=Math.ceil(g*S);k>=L?P=l:T=!0,M>=F?N=c:C=!0;const j=this.getSizeAndScale(P,this.ctx.canvas.width,_),q=this.getSizeAndScale(N,this.ctx.canvas.height,S),H=e.cachedCanvases.getCanvas("pattern",j.size,q.size),z=H.context,W=a.createCanvasGraphics(z);if(W.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(W,i,o),z.translate(-j.scale*u,-q.scale*d),W.transform(j.scale,0,0,q.scale,0,0),z.save(),this.clipBbox(W,u,d,h,m),W.baseTransform=zt(W.ctx),W.executeOperatorList(r),W.endDrawing(),z.restore(),T||C){const V=H.canvas;T&&(P=l),C&&(N=c);const U=this.getSizeAndScale(P,this.ctx.canvas.width,_),K=this.getSizeAndScale(N,this.ctx.canvas.height,S),Q=U.size,B=K.size,Y=e.cachedCanvases.getCanvas("pattern-workaround",Q,B),re=Y.context,te=T?Math.floor(y/l):0,ie=C?Math.floor(g/c):0;for(let ae=0;ae<=te;ae++)for(let Ne=0;Ne<=ie;Ne++)re.drawImage(V,Q*ae,B*Ne,Q,B,0,0,Q,B);return{canvas:Y.canvas,scaleX:U.scale,scaleY:K.scale,offsetX:u,offsetY:d}}return{canvas:H.canvas,scaleX:j.scale,scaleY:q.scale,offsetX:u,offsetY:d}}getSizeAndScale(e,t,r){const i=Math.max(FE.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*r);return s>=i?s=i:r=s/e,{scale:r,size:s}}clipBbox(e,t,r,i,s){const o=i-t,a=s-r;e.ctx.rect(t,r,o,a),we.axialAlignedBoundingBox([t,r,i,s],zt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,s=e.current;switch(t){case xV.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;i.fillStyle=s.fillColor=o,i.strokeStyle=s.strokeColor=a;break;case xV.UNCOLORED:i.fillStyle=i.strokeStyle=r,s.fillColor=s.strokeColor=r;break;default:throw new cAe(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,i){let s=r;i!==ir.SHADING&&(s=we.transform(s,t.baseTransform),this.matrix&&(s=we.transform(s,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(s);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};J(FE,"MAX_PATTERN_SIZE",3e3);let CR=FE;function WAe({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=lr.isLittleEndian?4278190080:255,[l,c]=o?[s,a]:[a,s],u=r>>3,d=r&7,h=n.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<i;y++){for(const b=e+u;e<b;e++){const w=e<h?n[e]:255;t[m++]=w&128?c:l,t[m++]=w&64?c:l,t[m++]=w&32?c:l,t[m++]=w&16?c:l,t[m++]=w&8?c:l,t[m++]=w&4?c:l,t[m++]=w&2?c:l,t[m++]=w&1?c:l}if(d===0)continue;const g=e<h?n[e++]:255;for(let b=0;b<d;b++)t[m++]=g&1<<7-b?c:l}return{srcPos:e,destPos:m}}const _V=16,AV=100,GAe=15,SV=10,hi=16,OI=new DOMMatrix,Qi=new Float32Array(2),Wp=new Float32Array([1/0,1/0,-1/0,-1/0]);function qAe(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,i,s,o,a){e.transform(t,r,i,s,o,a),this.__originalTransform(t,r,i,s,o,a)},n.setTransform=function(t,r,i,s,o,a){e.setTransform(t,r,i,s,o,a),this.__originalSetTransform(t,r,i,s,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,s,o,a){e.bezierCurveTo(t,r,i,s,o,a),this.__originalBezierCurveTo(t,r,i,s,o,a)},n.rect=function(t,r,i,s){e.rect(t,r,i,s),this.__originalRect(t,r,i,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class KAe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function h1(n,e,t,r,i,s,o,a,l,c){const[u,d,h,m,y,g]=zt(n);if(d===0&&h===0){const x=o*u+y,_=Math.round(x),S=a*m+g,P=Math.round(S),N=(o+l)*u+y,T=Math.abs(Math.round(N)-_)||1,C=(a+c)*m+g,k=Math.abs(Math.round(C)-P)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(m),_,P),n.drawImage(e,t,r,i,s,0,0,T,k),n.setTransform(u,d,h,m,y,g),[T,k]}if(u===0&&m===0){const x=a*h+y,_=Math.round(x),S=o*d+g,P=Math.round(S),N=(a+c)*h+y,T=Math.abs(Math.round(N)-_)||1,C=(o+l)*d+g,k=Math.abs(Math.round(C)-P)||1;return n.setTransform(0,Math.sign(d),Math.sign(h),0,_,P),n.drawImage(e,t,r,i,s,0,0,k,T),n.setTransform(u,d,h,m,y,g),[k,T]}n.drawImage(e,t,r,i,s,o,a,l,c);const b=Math.hypot(u,d),w=Math.hypot(h,m);return[b*l,w*c]}class EV{constructor(e,t){J(this,"alphaIsShape",!1);J(this,"fontSize",0);J(this,"fontSizeScale",1);J(this,"textMatrix",null);J(this,"textMatrixScale",1);J(this,"fontMatrix",nR);J(this,"leading",0);J(this,"x",0);J(this,"y",0);J(this,"lineX",0);J(this,"lineY",0);J(this,"charSpacing",0);J(this,"wordSpacing",0);J(this,"textHScale",1);J(this,"textRenderingMode",yr.FILL);J(this,"textRise",0);J(this,"fillColor","#000000");J(this,"strokeColor","#000000");J(this,"patternFill",!1);J(this,"patternStroke",!1);J(this,"fillAlpha",1);J(this,"strokeAlpha",1);J(this,"lineWidth",1);J(this,"activeSMask",null);J(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Wp.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=ir.FILL,t=null){const r=this.minMax.slice();if(e===ir.STROKE){t||ft("Stroke bounding box must include transform."),we.singularValueDecompose2dScale(t,Qi);const i=Qi[0]*this.lineWidth/2,s=Qi[1]*this.lineWidth/2;r[0]-=i,r[1]-=s,r[2]+=i,r[3]+=s}return r}updateClipFromPath(){const e=we.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Wp,0)}getClippedPathBoundingBox(e=ir.FILL,t=null){return we.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function TV(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%hi,s=(t-i)/hi,o=i===0?s:s+1,a=n.createImageData(r,hi);let l=0,c;const u=e.data,d=a.data;let h,m,y,g;if(e.kind===rA.GRAYSCALE_1BPP){const b=u.byteLength,w=new Uint32Array(d.buffer,0,d.byteLength>>2),x=w.length,_=r+7>>3,S=4294967295,P=lr.isLittleEndian?4278190080:255;for(h=0;h<o;h++){for(y=h<s?hi:i,c=0,m=0;m<y;m++){const N=b-l;let T=0;const C=N>_?r:N*8-7,k=C&-8;let M=0,L=0;for(;T<k;T+=8)L=u[l++],w[c++]=L&128?S:P,w[c++]=L&64?S:P,w[c++]=L&32?S:P,w[c++]=L&16?S:P,w[c++]=L&8?S:P,w[c++]=L&4?S:P,w[c++]=L&2?S:P,w[c++]=L&1?S:P;for(;T<C;T++)M===0&&(L=u[l++],M=128),w[c++]=L&M?S:P,M>>=1}for(;c<x;)w[c++]=0;n.putImageData(a,0,h*hi)}}else if(e.kind===rA.RGBA_32BPP){for(m=0,g=r*hi*4,h=0;h<s;h++)d.set(u.subarray(l,l+g)),l+=g,n.putImageData(a,0,m),m+=hi;h<o&&(g=r*i*4,d.set(u.subarray(l,l+g)),n.putImageData(a,0,m))}else if(e.kind===rA.RGB_24BPP)for(y=hi,g=r*y,h=0;h<o;h++){for(h>=s&&(y=i,g=r*y),c=0,m=g;m--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;n.putImageData(a,0,h*hi)}else throw new Error(`bad image kind: ${e.kind}`)}function CV(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%hi,s=(t-i)/hi,o=i===0?s:s+1,a=n.createImageData(r,hi);let l=0;const c=e.data,u=a.data;for(let d=0;d<o;d++){const h=d<s?hi:i;({srcPos:l}=WAe({src:c,srcPos:l,dest:u,width:r,height:h,nonBlackColor:0})),n.putImageData(a,0,d*hi)}}function ov(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function f1(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function PV(n,e){if(e)return!0;we.singularValueDecompose2dScale(n,Qi);const t=Math.fround(Ma.pixelRatio*ud.PDF_TO_CSS_UNITS);return Qi[0]<=t&&Qi[1]<=t}const YAe=["butt","round","square"],XAe=["miter","round","bevel"],QAe={},IV={};var Ro,PR,IR,kR;const rj=class rj{constructor(e,t,r,i,s,{optionalContentConfig:o,markedContentStack:a=null},l,c){O(this,Ro);this.ctx=e,this.current=new EV(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new KAe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,r){const l=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...zt(this.compositeCtx))}this.ctx.save(),f1(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=zt(this.ctx)}executeOperatorList(e,t,r,i){const s=e.argsArray,o=e.fnArray;let a=t||0;const l=s.length;if(l===a)return a;const c=l-a>SV&&typeof r=="function",u=c?Date.now()+GAe:0;let d=0;const h=this.commonObjs,m=this.objs;let y;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,r),a;if(y=o[a],y!==GS.dependency)this[y].apply(this,s[a]);else for(const g of s[a]){const b=g.startsWith("g_")?h:m;if(!b.has(g))return b.get(g,r),a}if(a++,a===l)return a;if(c&&++d>SV){if(Date.now()>u)return r(),a;d=0}}}endDrawing(){D(this,Ro,PR).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),D(this,Ro,IR).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,l=i,c="prescale1",u,d;for(;s>2&&a>1||o>2&&l>1;){let h=a,m=l;s>2&&a>1&&(h=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/h),o>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/m),u=this.cachedCanvases.getCanvas(c,h,m),d=u.context,d.clearRect(0,0,h,m),d.drawImage(e,0,0,a,l,0,0,h,m),e=u.canvas,a=h,l=m,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:i}=e,s=this.current.fillColor,o=this.current.patternFill,a=zt(t);let l,c,u,d;if((e.bitmap||e.data)&&e.count>1){const k=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),s]),l=this._cachedBitmapsMap.get(k),l||(l=new Map,this._cachedBitmapsMap.set(k,l));const M=l.get(c);if(M&&!o){const L=Math.round(Math.min(a[0],a[2])+a[4]),F=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:M,offsetX:L,offsetY:F}}u=M}u||(d=this.cachedCanvases.getCanvas("maskCanvas",r,i),CV(d.context,e));let h=we.transform(a,[1/r,0,0,-1/i,0,0]);h=we.transform(h,[1,0,0,1,0,-i]);const m=Wp.slice();we.axialAlignedBoundingBox([0,0,r,i],h,m);const[y,g,b,w]=m,x=Math.round(b-y)||1,_=Math.round(w-g)||1,S=this.cachedCanvases.getCanvas("fillCanvas",x,_),P=S.context,N=y,T=g;P.translate(-N,-T),P.transform(...h),u||(u=this._scaleImage(d.canvas,Bo(P)),u=u.img,l&&o&&l.set(c,u)),P.imageSmoothingEnabled=PV(zt(P),e.interpolate),h1(P,u,0,0,u.width,u.height,0,0,r,i),P.globalCompositeOperation="source-in";const C=we.transform(Bo(P),[1,0,0,1,-N,-T]);return P.fillStyle=o?s.getPattern(t,this,C,ir.FILL):s,P.fillRect(0,0,r,i),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,S.canvas)),{canvas:S.canvas,offsetX:Math.round(N),offsetY:Math.round(T)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=YAe[e]}setLineJoin(e){this.ctx.lineJoin=XAe[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx;const s=this.ctx=i.context;s.setTransform(this.suspendedCtx.getTransform()),ov(this.suspendedCtx,s),qAe(s,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ov(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const s=i[0],o=i[1],a=i[2]-s,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,r,a,l,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,s,o,a,l,c,u,d){let h=e.canvas,m=l-u,y=c-d;if(o)if(m<0||y<0||m+r>h.width||y+i>h.height){const b=this.cachedCanvases.getCanvas("maskExtension",r,i),w=b.context;w.drawImage(h,-m,-y),w.globalCompositeOperation="destination-atop",w.fillStyle=o,w.fillRect(0,0,r,i),w.globalCompositeOperation="source-over",h=b.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(m,y,r,i),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(m,y,r,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(l,c,r,i),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(h,m,y,r,i,l,c,r,i),t.restore()}save(){this.inSMaskMode&&ov(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&ov(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,i,s,o){this.ctx.transform(e,t,r,i,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){let[i]=t;if(!r){i||(i=t[0]=new Path2D),this[e](i);return}if(!(i instanceof Path2D)){const s=t[0]=new Path2D;for(let o=0,a=i.length;o<a;)switch(i[o++]){case c1.moveTo:s.moveTo(i[o++],i[o++]);break;case c1.lineTo:s.lineTo(i[o++],i[o++]);break;case c1.curveTo:s.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case c1.closePath:s.closePath();break;default:Pe(`Unrecognized drawing path operator: ${i[o-1]}`);break}i=s}we.axialAlignedBoundingBox(r,zt(this.ctx),this.current.minMax),this[e](i)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const s=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,Bo(r),ir.STROKE),s){const o=new Path2D;o.addPath(e,r.getTransform().invertSelf().multiplySelf(s)),e=o}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(ir.STROKE,zt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const r=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let o=!1;if(s){const l=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.fillStyle=i.getPattern(r,this,Bo(r),ir.FILL),l){const c=new Path2D;c.addPath(e,r.getTransform().invertSelf().multiplySelf(l)),e=c}o=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),o&&r.restore(),t&&this.consumePath(e,a)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=QAe}eoClip(){this.pendingClip=IV}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const r=new Path2D,i=t.getTransform().invertSelf();for(const{transform:s,x:o,y:a,fontSize:l,path:c}of e)r.addPath(c,new DOMMatrix(s).preMultiplySelf(i).translate(o,a).scale(l,-l));t.clip(r),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const r=this.commonObjs.get(e),i=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=r.fontMatrix||nR,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Pe("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const s=r.loadedName||"sans-serif",o=((u=r.systemFontInfo)==null?void 0:u.css)||`"${s}", ${r.fallbackName}`;let a="normal";r.black?a="900":r.bold&&(a="bold");const l=r.italic?"italic":"normal";let c=t;t<_V?c=_V:t>AV&&(c=AV),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,i,s){const o=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,d=c&yr.FILL_STROKE_MASK,h=!!(c&yr.ADD_TO_PATH_FLAG),m=a.patternFill&&!l.missingFile,y=a.patternStroke&&!l.missingFile;let g;if((l.disableFontFace||h||m||y)&&(g=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||m||y){o.save(),o.translate(t,r),o.scale(u,-u);let b;if((d===yr.FILL||d===yr.FILL_STROKE)&&(i?(b=o.getTransform(),o.setTransform(...i),o.fill(D(this,Ro,kR).call(this,g,b,i))):o.fill(g)),d===yr.STROKE||d===yr.FILL_STROKE)if(s){b||(b=o.getTransform()),o.setTransform(...s);const{a:w,b:x,c:_,d:S}=b,P=we.inverseTransform(s),N=we.transform([w,x,_,S,0,0],P);we.singularValueDecompose2dScale(N,Qi),o.lineWidth*=Math.max(Qi[0],Qi[1])/u,o.stroke(D(this,Ro,kR).call(this,g,b,s))}else o.lineWidth/=u,o.stroke(g);o.restore()}else(d===yr.FILL||d===yr.FILL_STROKE)&&o.fillText(e,t,r),(d===yr.STROKE||d===yr.FILL_STROKE)&&o.strokeText(e,t,r);h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:zt(o),x:t,y:r,fontSize:u,path:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return ze(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const s=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,d=e.length,h=r.vertical,m=h?1:-1,y=r.defaultVMetrics,g=i*t.fontMatrix[0],b=t.textRenderingMode===yr.FILL&&!r.disableFontFace&&!t.patternFill;s.save(),t.textMatrix&&s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),c>0?s.scale(u,-1):s.scale(u,1);let w,x;if(t.patternFill){s.save();const T=t.fillColor.getPattern(s,this,Bo(s),ir.FILL);w=zt(s),s.restore(),s.fillStyle=T}if(t.patternStroke){s.save();const T=t.strokeColor.getPattern(s,this,Bo(s),ir.STROKE);x=zt(s),s.restore(),s.strokeStyle=T}let _=t.lineWidth;const S=t.textMatrixScale;if(S===0||_===0){const T=t.textRenderingMode&yr.FILL_STROKE_MASK;(T===yr.STROKE||T===yr.FILL_STROKE)&&(_=this.getSinglePixelWidth())}else _/=S;if(o!==1&&(s.scale(o,o),_/=o),s.lineWidth=_,r.isInvalidPDFjsFont){const T=[];let C=0;for(const k of e)T.push(k.unicode),C+=k.width;s.fillText(T.join(""),0,0),t.x+=C*g*u,s.restore(),this.compose();return}let P=0,N;for(N=0;N<d;++N){const T=e[N];if(typeof T=="number"){P+=m*T*i/1e3;continue}let C=!1;const k=(T.isSpace?l:0)+a,M=T.fontChar,L=T.accent;let F,j,q=T.width;if(h){const z=T.vmetric||y,W=-(T.vmetric?z[1]:q*.5)*g,V=z[2]*g;q=z?-z[0]:q,F=W/o,j=(P+V)/o}else F=P/o,j=0;if(r.remeasure&&q>0){const z=s.measureText(M).width*1e3/i*o;if(q<z&&this.isFontSubpixelAAEnabled){const W=q/z;C=!0,s.save(),s.scale(W,1),F/=W}else q!==z&&(F+=(q-z)/2e3*i/o)}if(this.contentVisible&&(T.isInFont||r.missingFile)){if(b&&!L)s.fillText(M,F,j);else if(this.paintChar(M,F,j,w,x),L){const z=F+i*L.offset.x/o,W=j-i*L.offset.y/o;this.paintChar(L.fontChar,z,W,w,x)}}const H=h?q*g-k*c:q*g+k*c;P+=H,C&&s.restore()}h?t.y-=P:t.x+=P*u,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,i=r.font,s=r.fontSize,o=r.fontDirection,a=i.vertical?1:-1,l=r.charSpacing,c=r.wordSpacing,u=r.textHScale*o,d=r.fontMatrix||nR,h=e.length,m=r.textRenderingMode===yr.INVISIBLE;let y,g,b,w;if(!(m||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),r.textMatrix&&t.transform(...r.textMatrix),t.translate(r.x,r.y+r.textRise),t.scale(u,o),y=0;y<h;++y){if(g=e[y],typeof g=="number"){w=a*g*s/1e3,this.ctx.translate(w,0),r.x+=w*u;continue}const x=(g.isSpace?c:0)+l,_=i.charProcOperatorList[g.operatorListId];_?this.contentVisible&&(this.save(),t.scale(s,s),t.transform(...d),this.executeOperatorList(_),this.restore()):Pe(`Type3 character "${g.operatorListId}" is not available.`);const S=[g.width,0];we.applyTransform(S,d),b=S[0]*s+x,t.translate(b,0),r.x+=b*u}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,i,s,o){const a=new Path2D;a.rect(r,i,s-r,o-i),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=this.baseTransform||zt(this.ctx),i={createCanvasGraphics:s=>new rj(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new CR(e,this.ctx,i,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=HAe(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,Bo(t),ir.SHADING);const i=Bo(t);if(i){const{width:s,height:o}=t.canvas,a=Wp.slice();we.axialAlignedBoundingBox([0,0,s,o],i,a);const[l,c,u,d]=a;this.ctx.fillRect(l,c,u-l,d-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ft("Should not call beginInlineImage")}beginImageData(){ft("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=zt(this.ctx),t)){we.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[r,i,s,o]=t,a=new Path2D;a.rect(r,i,s-r,o-i),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||dC("TODO: Support non-isolated groups."),e.knockout&&Pe("Knockout groups not supported.");const r=zt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=Wp.slice();we.axialAlignedBoundingBox(e.bbox,zt(t),i);const s=[0,0,t.canvas.width,t.canvas.height];i=we.intersect(i,s)||[0,0,0,0];const o=Math.floor(i[0]),a=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-o,1),c=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(u,l,c),h=d.context;h.translate(-o,-a),h.transform(...r);let m=new Path2D;const[y,g,b,w]=e.bbox;if(m.rect(y,g,b-y,w-g),e.matrix){const x=new Path2D;x.addPath(m,new DOMMatrix(e.matrix)),m=x}h.clip(m),e.smask?this.smaskStack.push({canvas:d.canvas,context:h,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),ov(t,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=zt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const s=Wp.slice();we.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i,s),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,r,i,s){if(D(this,Ro,PR).call(this),f1(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(s&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a,we.singularValueDecompose2dScale(zt(this.ctx),Qi);const{viewportScale:l}=this,c=Math.ceil(o*this.outputScaleX*l),u=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(c,u);const{canvas:d,context:h}=this.annotationCanvas;this.annotationCanvasMap.set(e,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=h,this.ctx.save(),this.ctx.setTransform(Qi[0],0,0,-Qi[1],0,a*Qi[1]),f1(this.ctx)}else{f1(this.ctx),this.endPath();const l=new Path2D;l.rect(t[0],t[1],o,a),this.ctx.clip(l)}}this.current=new EV(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),D(this,Ro,IR).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,i=this._createMaskCanvas(e),s=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(s,i.offsetX,i.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,i=0,s,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=zt(a);a.transform(t,r,i,s,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,d=o.length;u<d;u+=2){const h=we.transform(l,[t,r,i,s,o[u],o[u+1]]);a.drawImage(c.canvas,h[4],h[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;for(const s of e){const{data:o,width:a,height:l,transform:c}=s,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=u.context;d.save();const h=this.getObject(o,s);CV(d,h),d.globalCompositeOperation="source-in",d.fillStyle=i?r.getPattern(d,this,Bo(t),ir.FILL):r,d.fillRect(0,0,a,l),d.restore(),t.save(),t.transform(...c),t.scale(1,-1),h1(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Pe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,i){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){Pe("Dependent image isn't ready yet");return}const o=s.width,a=s.height,l=[];for(let c=0,u=i.length;c<u;c+=2)l.push({transform:[t,0,0,r,i[c],i[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,i=this.ctx;this.save();const{filter:s}=i;s!=="none"&&s!==""&&(i.filter="none"),i.scale(1/t,-1/r);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,r).context;TV(c,e),o=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(o,Bo(i));i.imageSmoothingEnabled=PV(zt(i),e.interpolate),h1(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const s=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",s,o).context;TV(l,e),i=this.applyTransferMapsToCanvas(l)}for(const s of t)r.save(),r.transform(...s.transform),r.scale(1,-1),h1(r,i,s.x,s.y,s.w,s.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(r||(this.pendingClip===IV?i.clip(e,"evenodd"):i.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=zt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:s}=this.ctx.getTransform();let o,a;if(r===0&&i===0){const l=Math.abs(t),c=Math.abs(s);if(l===c)if(e===0)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(e===0)o=1/l,a=1/c;else{const u=l*e,d=c*e;o=u<1?1/u:1,a=d<1?1/d:1}}else{const l=Math.abs(t*s-r*i),c=Math.hypot(t,r),u=Math.hypot(i,s);if(e===0)o=u/l,a=c/l;else{const d=e*l;o=u>d?u/d:1,a=c>d?c/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:i}}=this,[s,o]=this.getScaleForStroking();if(s===o){r.lineWidth=(i||1)*s,r.stroke(e);return}const a=r.getLineDash();t&&r.save(),r.scale(s,o),OI.a=1/s,OI.d=1/o;const l=new Path2D;if(l.addPath(e,OI),a.length>0){const c=Math.max(s,o);r.setLineDash(a.map(u=>u/c)),r.lineDashOffset/=c}r.lineWidth=i||1,r.stroke(l),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Ro=new WeakSet,PR=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},IR=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},kR=function(e,t,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),i};let pm=rj;for(const n in GS)pm.prototype[n]!==void 0&&(pm.prototype[GS[n]]=pm.prototype[n]);var bw,ww;class ya{static get workerPort(){return f(this,bw)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");I(this,bw,e)}static get workerSrc(){return f(this,ww)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");I(this,ww,e)}}bw=new WeakMap,ww=new WeakMap,O(ya,bw,null),O(ya,ww,"");var zm,xw;class JAe{constructor({parsedData:e,rawData:t}){O(this,zm);O(this,xw);I(this,zm,e),I(this,xw,t)}getRaw(){return f(this,xw)}get(e){return f(this,zm).get(e)??null}[Symbol.iterator](){return f(this,zm).entries()}}zm=new WeakMap,xw=new WeakMap;const Pp=Symbol("INTERNAL");var _w,Aw,Sw,Um;class ZAe{constructor(e,{name:t,intent:r,usage:i,rbGroups:s}){O(this,_w,!1);O(this,Aw,!1);O(this,Sw,!1);O(this,Um,!0);I(this,_w,!!(e&Yi.DISPLAY)),I(this,Aw,!!(e&Yi.PRINT)),this.name=t,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(f(this,Sw))return f(this,Um);if(!f(this,Um))return!1;const{print:e,view:t}=this.usage;return f(this,_w)?(t==null?void 0:t.viewState)!=="OFF":f(this,Aw)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==Pp&&ft("Internal method `_setVisible` called."),I(this,Sw,r),I(this,Um,t)}}_w=new WeakMap,Aw=new WeakMap,Sw=new WeakMap,Um=new WeakMap;var iu,dt,Hm,Wm,Ew,RR;class eSe{constructor(e,t=Yi.DISPLAY){O(this,Ew);O(this,iu,null);O(this,dt,new Map);O(this,Hm,null);O(this,Wm,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,I(this,Wm,e.order);for(const r of e.groups)f(this,dt).set(r.id,new ZAe(t,r));if(e.baseState==="OFF")for(const r of f(this,dt).values())r._setVisible(Pp,!1);for(const r of e.on)f(this,dt).get(r)._setVisible(Pp,!0);for(const r of e.off)f(this,dt).get(r)._setVisible(Pp,!1);I(this,Hm,this.getHash())}}isVisible(e){if(f(this,dt).size===0)return!0;if(!e)return dC("Optional content group not defined."),!0;if(e.type==="OCG")return f(this,dt).has(e.id)?f(this,dt).get(e.id).visible:(Pe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return D(this,Ew,RR).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!f(this,dt).has(t))return Pe(`Optional content group not found: ${t}`),!0;if(f(this,dt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!f(this,dt).has(t))return Pe(`Optional content group not found: ${t}`),!0;if(!f(this,dt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!f(this,dt).has(t))return Pe(`Optional content group not found: ${t}`),!0;if(!f(this,dt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!f(this,dt).has(t))return Pe(`Optional content group not found: ${t}`),!0;if(f(this,dt).get(t).visible)return!1}return!0}return Pe(`Unknown optional content policy ${e.policy}.`),!0}return Pe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var s;const i=f(this,dt).get(e);if(!i){Pe(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const a of o)a!==e&&((s=f(this,dt).get(a))==null||s._setVisible(Pp,!1,!0));i._setVisible(Pp,!!t,!0),I(this,iu,null)}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=f(this,dt).get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!s.visible,t);break}}I(this,iu,null)}get hasInitialVisibility(){return f(this,Hm)===null||this.getHash()===f(this,Hm)}getOrder(){return f(this,dt).size?f(this,Wm)?f(this,Wm).slice():[...f(this,dt).keys()]:null}getGroup(e){return f(this,dt).get(e)||null}getHash(){if(f(this,iu)!==null)return f(this,iu);const e=new _Y;for(const[t,r]of f(this,dt))e.update(`${t}:${r.visible}`);return I(this,iu,e.hexdigest())}[Symbol.iterator](){return f(this,dt).entries()}}iu=new WeakMap,dt=new WeakMap,Hm=new WeakMap,Wm=new WeakMap,Ew=new WeakSet,RR=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const s=e[i];let o;if(Array.isArray(s))o=D(this,Ew,RR).call(this,s);else if(f(this,dt).has(s))o=f(this,dt).get(s).visible;else return Pe(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class tSe{constructor(e,{disableRange:t=!1,disableStream:r=!1}){bn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(r),!0)});bn(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,i,s;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(s=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){bn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new nSe(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new rSe(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class nSe{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=sL(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class rSe{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function iSe(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),s(u)}if(t=o(n),t){const u=c(t);return s(u)}if(t=r("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),s(u)}function r(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const h=new TextDecoder(u,{fatal:!0}),m=Wx(d);d=h.decode(m),e=!1}catch{}}return d}function s(u){return e&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),e&&(u=i("iso-8859-1",u))),u}function o(u){const d=[];let h;const m=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=m.exec(u))!==null;){let[,g,b,w]=h;if(g=parseInt(g,10),g in d){if(g===0)break;continue}d[g]=[b,w]}const y=[];for(let g=0;g<d.length&&g in d;++g){let[b,w]=d[g];w=a(w),b&&(w=unescape(w),g===0&&(w=l(w))),y.push(w)}return y.join("")}function a(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let h=0;h<d.length;++h){const m=d[h].indexOf('"');m!==-1&&(d[h]=d[h].slice(0,m),d.length=h+1),d[h]=d[h].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){const d=u.indexOf("'");if(d===-1)return u;const h=u.slice(0,d),y=u.slice(d+1).replace(/^[^']*'/,"");return i(h,y)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,h,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,b){return String.fromCharCode(parseInt(b,16))}),i(h,y);try{y=atob(y)}catch{}return i(h,y)})}return""}function MY(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const i=e[r];i!==void 0&&t.append(r,i)}return t}function fC(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function DY({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function LY(n){const e=n.get("Content-Disposition");if(e){let t=iSe(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(sL(t))return t}return null}function Yx(n,e){return new qS(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function jY(n){return n===200||n===206}function FY(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function $Y(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Pe(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class sSe{constructor(e){J(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=MY(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return bn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new oSe(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new aSe(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class oSe{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),i=t.url;fetch(i,FY(r,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=fC(s.url),!jY(s.status))throw Yx(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:a,suggestedLength:l}=DY({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=LY(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new cd("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:$Y(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class aSe{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${r-1}`);const o=i.url;fetch(o,FY(s,this._withCredentials,this._abortController)).then(a=>{const l=fC(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!jY(a.status))throw Yx(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:$Y(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const MI=200,DI=206;function lSe(n){const e=n.response;return typeof e!="string"?e:Wx(e).buffer}class cSe{constructor({url:e,httpHeaders:t,withCredentials:r}){J(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=MY(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,o]of this.headers)t.setRequestHeader(s,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=DI):i.expectedStatus=MI,t.responseType="arraybuffer",bn(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var i;const r=this.pendingRequests[e];r&&((i=r.onProgress)==null||i.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const s=i.status||MI;if(!(s===MI&&r.expectedStatus===DI)&&s!==r.expectedStatus){r.onError(i.status);return}const a=lSe(i);if(s===DI){const l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?r.onDone({begin:parseInt(c[1],10),chunk:a}):(Pe('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone({begin:0,chunk:a}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class uSe{constructor(e){this._source=e,this._manager=new cSe(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return bn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new dSe(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new hSe(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class dSe{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=fC(t.responseURL);const r=t.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:o}=DY({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=LY(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Yx(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class hSe{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=fC((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Yx(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const fSe=/^[a-z][a-z0-9\-+.]+:/i;function pSe(n){if(fSe.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class mSe{constructor(e){this.source=e,this.url=pSe(e.url),bn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return bn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new gSe(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new ySe(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class gSe{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Yx(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new cd("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ySe{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const av=Symbol("INITIAL_DATA");var ji,Tw,NR;class VY{constructor(){O(this,Tw);O(this,ji,Object.create(null))}get(e,t=null){if(t){const i=D(this,Tw,NR).call(this,e);return i.promise.then(()=>t(i.data)),null}const r=f(this,ji)[e];if(!r||r.data===av)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=f(this,ji)[e];return!!t&&t.data!==av}delete(e){const t=f(this,ji)[e];return!t||t.data===av?!1:(delete f(this,ji)[e],!0)}resolve(e,t=null){const r=D(this,Tw,NR).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in f(this,ji)){const{data:r}=f(this,ji)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}I(this,ji,Object.create(null))}*[Symbol.iterator](){for(const e in f(this,ji)){const{data:t}=f(this,ji)[e];t!==av&&(yield[e,t])}}}ji=new WeakMap,Tw=new WeakSet,NR=function(e){var t;return(t=f(this,ji))[e]||(t[e]={...Promise.withResolvers(),data:av})};const vSe=1e5,kV=30;var qB,su,ui,Cw,Pw,kh,gl,Iw,kw,Rh,Gm,qm,ou,Km,Rw,Ym,Nh,Nw,Ow,Xm,Oh,Mw,au,Qm,sc,BY,zY,OR,os,pA,MR,UY,HY;const En=class En{constructor({textContentSource:e,container:t,viewport:r}){O(this,sc);O(this,su,Promise.withResolvers());O(this,ui,null);O(this,Cw,!1);O(this,Pw,!!((qB=globalThis.FontInspector)!=null&&qB.enabled));O(this,kh,null);O(this,gl,null);O(this,Iw,0);O(this,kw,0);O(this,Rh,null);O(this,Gm,null);O(this,qm,0);O(this,ou,0);O(this,Km,Object.create(null));O(this,Rw,[]);O(this,Ym,null);O(this,Nh,[]);O(this,Nw,new WeakMap);O(this,Ow,null);var l;if(e instanceof ReadableStream)I(this,Ym,e);else if(typeof e=="object")I(this,Ym,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');I(this,ui,I(this,Gm,t)),I(this,ou,r.scale*Ma.pixelRatio),I(this,qm,r.rotation),I(this,gl,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:o,pageY:a}=r.rawDims;I(this,Ow,[1,0,0,-1,-o,a+s]),I(this,kw,i),I(this,Iw,s),D(l=En,os,UY).call(l),$f(t,r),f(this,su).promise.finally(()=>{f(En,Qm).delete(this),I(this,gl,null),I(this,Km,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=lr.platform;return ze(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{f(this,Rh).read().then(({value:t,done:r})=>{if(r){f(this,su).resolve();return}f(this,kh)??I(this,kh,t.lang),Object.assign(f(this,Km),t.styles),D(this,sc,BY).call(this,t.items),e()},f(this,su).reject)};return I(this,Rh,f(this,Ym).getReader()),f(En,Qm).add(this),e(),f(this,su).promise}update({viewport:e,onBefore:t=null}){var s;const r=e.scale*Ma.pixelRatio,i=e.rotation;if(i!==f(this,qm)&&(t==null||t(),I(this,qm,i),$f(f(this,Gm),{rotation:i})),r!==f(this,ou)){t==null||t(),I(this,ou,r);const o={div:null,properties:null,ctx:D(s=En,os,pA).call(s,f(this,kh))};for(const a of f(this,Nh))o.properties=f(this,Nw).get(a),o.div=a,D(this,sc,OR).call(this,o)}}cancel(){var t;const e=new cd("TextLayer task cancelled.");(t=f(this,Rh))==null||t.cancel(e).catch(()=>{}),I(this,Rh,null),f(this,su).reject(e)}get textDivs(){return f(this,Nh)}get textContentItemsStr(){return f(this,Rw)}static cleanup(){if(!(f(this,Qm).size>0)){f(this,Xm).clear();for(const{canvas:e}of f(this,Oh).values())e.remove();f(this,Oh).clear()}}};su=new WeakMap,ui=new WeakMap,Cw=new WeakMap,Pw=new WeakMap,kh=new WeakMap,gl=new WeakMap,Iw=new WeakMap,kw=new WeakMap,Rh=new WeakMap,Gm=new WeakMap,qm=new WeakMap,ou=new WeakMap,Km=new WeakMap,Rw=new WeakMap,Ym=new WeakMap,Nh=new WeakMap,Nw=new WeakMap,Ow=new WeakMap,Xm=new WeakMap,Oh=new WeakMap,Mw=new WeakMap,au=new WeakMap,Qm=new WeakMap,sc=new WeakSet,BY=function(e){var i,s;if(f(this,Cw))return;(s=f(this,gl)).ctx??(s.ctx=D(i=En,os,pA).call(i,f(this,kh)));const t=f(this,Nh),r=f(this,Rw);for(const o of e){if(t.length>vSe){Pe("Ignoring additional textDivs for performance reasons."),I(this,Cw,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=f(this,ui);I(this,ui,document.createElement("span")),f(this,ui).classList.add("markedContent"),o.id!==null&&f(this,ui).setAttribute("id",`${o.id}`),a.append(f(this,ui))}else o.type==="endMarkedContent"&&I(this,ui,f(this,ui).parentNode);continue}r.push(o.str),D(this,sc,zY).call(this,o)}},zY=function(e){var g;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};f(this,Nh).push(t);const i=we.transform(f(this,Ow),e.transform);let s=Math.atan2(i[1],i[0]);const o=f(this,Km)[e.fontName];o.vertical&&(s+=Math.PI/2);let a=f(this,Pw)&&o.fontSubstitution||o.fontFamily;a=En.fontFamilyMap.get(a)||a;const l=Math.hypot(i[2],i[3]),c=l*D(g=En,os,HY).call(g,a,o,f(this,kh));let u,d;s===0?(u=i[4],d=i[5]-c):(u=i[4]+c*Math.sin(s),d=i[5]-c*Math.cos(s));const h="calc(var(--total-scale-factor) *",m=t.style;f(this,ui)===f(this,Gm)?(m.left=`${(100*u/f(this,kw)).toFixed(2)}%`,m.top=`${(100*d/f(this,Iw)).toFixed(2)}%`):(m.left=`${h}${u.toFixed(2)}px)`,m.top=`${h}${d.toFixed(2)}px)`),m.fontSize=`${h}${(f(En,au)*l).toFixed(2)}px)`,m.fontFamily=a,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,f(this,Pw)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);b!==w&&Math.max(b,w)/Math.min(b,w)>1.5&&(y=!0)}if(y&&(r.canvasWidth=o.vertical?e.height:e.width),f(this,Nw).set(t,r),f(this,gl).div=t,f(this,gl).properties=r,D(this,sc,OR).call(this,f(this,gl)),r.hasText&&f(this,ui).append(t),r.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),f(this,ui).append(b)}},OR=function(e){var a;const{div:t,properties:r,ctx:i}=e,{style:s}=t;let o="";if(f(En,au)>1&&(o=`scale(${1/f(En,au)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=s,{canvasWidth:c,fontSize:u}=r;D(a=En,os,MR).call(a,i,u*f(this,ou),l);const{width:d}=i.measureText(t.textContent);d>0&&(o=`scaleX(${c*f(this,ou)/d}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(s.transform=o)},os=new WeakSet,pA=function(e=null){let t=f(this,Oh).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),f(this,Oh).set(e,t),f(this,Mw).set(t,{size:0,family:""})}return t},MR=function(e,t,r){const i=f(this,Mw).get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)},UY=function(){if(f(this,au)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),I(this,au,e.getBoundingClientRect().height),e.remove()},HY=function(e,t,r){const i=f(this,Xm).get(e);if(i)return i;const s=D(this,os,pA).call(this,r);s.canvas.width=s.canvas.height=kV,D(this,os,MR).call(this,s,kV,e);const o=s.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let c=.8;return a?c=a/(a+l):(lr.platform.isFirefox&&Pe("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),f(this,Xm).set(e,c),c},O(En,os),O(En,Xm,new Map),O(En,Oh,new Map),O(En,Mw,new WeakMap),O(En,au,null),O(En,Qm,new Set);let _0=En;class A0{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(s){var l;if(!s)return;let o=null;const a=s.name;if(a==="#text")o=s.value;else if(A0.shouldBuildText(a))(l=s==null?void 0:s.attributes)!=null&&l.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&t.push({str:o}),!!s.children)for(const c of s.children)i(c)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const bSe=100;function wSe(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new DR,{docId:t}=e,r=n.url?PAe(n.url):null,i=n.data?IAe(n.data):null,s=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof WY?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let u=n.worker instanceof S0?n.worker:null;const d=n.verbosity,h=typeof n.docBaseUrl=="string"&&!hC(n.docBaseUrl)?n.docBaseUrl:null,m=u1(n.cMapUrl),y=n.cMapPacked!==!1,g=n.CMapReaderFactory||(zr?jAe:vV),b=u1(n.iccUrl),w=u1(n.standardFontDataUrl),x=n.StandardFontDataFactory||(zr?FAe:bV),_=u1(n.wasmUrl),S=n.WasmFactory||(zr?$Ae:wV),P=n.stopAtErrors!==!0,N=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,T=n.isEvalSupported!==!1,C=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!zr,k=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!zr&&(lr.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,L=typeof n.disableFontFace=="boolean"?n.disableFontFace:zr,F=n.fontExtraProperties===!0,j=n.enableXfa===!0,q=n.ownerDocument||globalThis.document,H=n.disableRange===!0,z=n.disableStream===!0,W=n.disableAutoFetch===!0,V=n.pdfBug===!0,U=n.CanvasFactory||(zr?LAe:OAe),K=n.FilterFactory||(zr?DAe:MAe),Q=n.enableHWA===!0,B=n.useWasm!==!1,Y=l?l.length:n.length??NaN,re=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!zr&&!L,te=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===vV&&x===bV&&S===wV&&m&&w&&_&&Rv(m,document.baseURI)&&Rv(w,document.baseURI)&&Rv(_,document.baseURI)),ie=null;oAe(d);const ae={canvasFactory:new U({ownerDocument:q,enableHWA:Q}),filterFactory:new K({docId:t,ownerDocument:q}),cMapReaderFactory:te?null:new g({baseUrl:m,isCompressed:y}),standardFontDataFactory:te?null:new x({baseUrl:w}),wasmFactory:te?null:new S({baseUrl:_})};u||(u=S0.create({verbosity:d,port:ya.workerPort}),e._worker=u);const Ne={docId:t,apiVersion:"5.3.93",data:i,password:a,disableAutoFetch:W,rangeChunkSize:c,length:Y,docBaseUrl:h,enableXfa:j,evaluatorOptions:{maxImageSize:N,disableFontFace:L,ignoreErrors:P,isEvalSupported:T,isOffscreenCanvasSupported:C,isImageDecoderSupported:k,canvasMaxAreaInBytes:M,fontExtraProperties:F,useSystemFonts:re,useWasm:B,useWorkerFetch:te,cMapUrl:m,iccUrl:b,standardFontDataUrl:w,wasmUrl:_}},Le={ownerDocument:q,pdfBug:V,styleElement:ie,loadingParams:{disableAutoFetch:W,enableXfa:j}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const nn=u.messageHandler.sendWithPromise("GetDocRequest",Ne,i?[i.buffer]:null);let Pi;if(l)Pi=new tSe(l,{disableRange:H,disableStream:z});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const ri=Rv(r)?sSe:zr?mSe:uSe;Pi=new ri({url:r,length:Y,httpHeaders:s,withCredentials:o,rangeChunkSize:c,disableRange:H,disableStream:z})}return nn.then(ri=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const ii=new Lv(t,ri,u.port),qs=new ASe(ii,e,Pi,Le,ae);e._transport=qs,ii.send("Ready",null)})}).catch(e._capability.reject),e}var $E;const VE=class VE{constructor(){J(this,"_capability",Promise.withResolvers());J(this,"_transport",null);J(this,"_worker",null);J(this,"docId",`d${Dn(VE,$E)._++}`);J(this,"destroyed",!1);J(this,"onPassword",null);J(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,s}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};$E=new WeakMap,O(VE,$E,0);let DR=VE;var Mh,Dw,Lw,jw,Fw;class WY{constructor(e,t,r=!1,i=null){O(this,Mh,Promise.withResolvers());O(this,Dw,[]);O(this,Lw,[]);O(this,jw,[]);O(this,Fw,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){f(this,Fw).push(e)}addProgressListener(e){f(this,jw).push(e)}addProgressiveReadListener(e){f(this,Lw).push(e)}addProgressiveDoneListener(e){f(this,Dw).push(e)}onDataRange(e,t){for(const r of f(this,Fw))r(e,t)}onDataProgress(e,t){f(this,Mh).promise.then(()=>{for(const r of f(this,jw))r(e,t)})}onDataProgressiveRead(e){f(this,Mh).promise.then(()=>{for(const t of f(this,Lw))t(e)})}onDataProgressiveDone(){f(this,Mh).promise.then(()=>{for(const e of f(this,Dw))e()})}transportReady(){f(this,Mh).resolve()}requestDataRange(e,t){ft("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Mh=new WeakMap,Dw=new WeakMap,Lw=new WeakMap,jw=new WeakMap,Fw=new WeakMap;class xSe{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var yl,Dh,Bv;class _Se{constructor(e,t,r,i=!1){O(this,Dh);O(this,yl,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new mV:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new VY,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new qx({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:i=jc.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:d=!1}){var S,P;(S=this._stats)==null||S.time("Overall");const h=this._transport.getRenderingIntent(r,i,u,d),{renderingIntent:m,cacheKey:y}=h;I(this,yl,!1),a||(a=this._transport.getOptionalContentConfig(m));let g=this._intentStates.get(y);g||(g=Object.create(null),this._intentStates.set(y,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const b=!!(m&Yi.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(P=this._stats)==null||P.time("Page Request"),this._pumpOperatorList(h));const w=N=>{var T;g.renderTasks.delete(x),b&&I(this,yl,!0),D(this,Dh,Bv).call(this),N?(x.capability.reject(N),this._abortOperatorList({intentState:g,reason:N instanceof Error?N:new Error(N)})):x.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(T=globalThis.Stats)!=null&&T.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new LR({callback:w,params:{canvasContext:e,viewport:t,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:c});(g.renderTasks||(g.renderTasks=new Set)).add(x);const _=x.task;return Promise.all([g.displayReadyCapability.promise,a]).then(([N,T])=>{var C;if(this.destroyed){w();return}if((C=this._stats)==null||C.time("Rendering"),!(T.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:N,optionalContentConfig:T}),x.operatorListChanged()}).catch(w),_}getOperatorList({intent:e="display",annotationMode:t=jc.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){var c;function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,r,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>A0.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function s(){o.read().then(function({value:l,done:c}){if(c){r(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),s()},i)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),I(this,yl,!1),Promise.all(e)}cleanup(e=!1){I(this,yl,!0);const t=D(this,Dh,Bv).call(this);return e&&t&&this._stats&&(this._stats=new mV),t}_startRenderPage(e,t){var i,s;const r=this._intentStates.get(t);r&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=r.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&D(this,Dh,Bv).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:s,transfer:o}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:i},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;const u=()=>{l.read().then(({value:d,done:h})=>{if(h){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const h of c.renderTasks)h.operatorListChanged();D(this,Dh,Bv).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof iL){let i=bSe;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new cd(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}yl=new WeakMap,Dh=new WeakSet,Bv=function(){if(!f(this,yl)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),I(this,yl,!1),!0};var lu,so,vl,Lh,BE,jh,Fh,Yr,mA,GY,qY,zv,Jm,gA;const Mt=class Mt{constructor({name:e=null,port:t=null,verbosity:r=aAe()}={}){O(this,Yr);O(this,lu,Promise.withResolvers());O(this,so,null);O(this,vl,null);O(this,Lh,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(f(Mt,Fh).has(t))throw new Error("Cannot use more than one PDFWorker per port.");f(Mt,Fh).set(t,this),D(this,Yr,GY).call(this,t)}else D(this,Yr,qY).call(this)}get promise(){return f(this,lu).promise}get port(){return f(this,vl)}get messageHandler(){return f(this,so)}destroy(){var e,t;this.destroyed=!0,(e=f(this,Lh))==null||e.terminate(),I(this,Lh,null),f(Mt,Fh).delete(f(this,vl)),I(this,vl,null),(t=f(this,so))==null||t.destroy(),I(this,so,null)}static create(e){const t=f(this,Fh).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Mt(e)}static get workerSrc(){if(ya.workerSrc)return ya.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ze(this,"_setupFakeWorkerGlobal",(async()=>f(this,Jm,gA)?f(this,Jm,gA):(await import(this.workerSrc)).WorkerMessageHandler)())}};lu=new WeakMap,so=new WeakMap,vl=new WeakMap,Lh=new WeakMap,BE=new WeakMap,jh=new WeakMap,Fh=new WeakMap,Yr=new WeakSet,mA=function(){f(this,lu).resolve(),f(this,so).send("configure",{verbosity:this.verbosity})},GY=function(e){I(this,vl,e),I(this,so,new Lv("main","worker",e)),f(this,so).on("ready",()=>{}),D(this,Yr,mA).call(this)},qY=function(){if(f(Mt,jh)||f(Mt,Jm,gA)){D(this,Yr,zv).call(this);return}let{workerSrc:e}=Mt;try{Mt._isSameOrigin(window.location,e)||(e=Mt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Lv("main","worker",t),i=()=>{s.abort(),r.destroy(),t.terminate(),this.destroyed?f(this,lu).reject(new Error("Worker was destroyed")):D(this,Yr,zv).call(this)},s=new AbortController;t.addEventListener("error",()=>{f(this,Lh)||i()},{signal:s.signal}),r.on("test",a=>{if(s.abort(),this.destroyed||!a){i();return}I(this,so,r),I(this,vl,t),I(this,Lh,t),D(this,Yr,mA).call(this)}),r.on("ready",a=>{if(s.abort(),this.destroyed){i();return}try{o()}catch{D(this,Yr,zv).call(this)}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{dC("The worker has been disabled.")}D(this,Yr,zv).call(this)},zv=function(){f(Mt,jh)||(Pe("Setting up fake worker."),I(Mt,jh,!0)),Mt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){f(this,lu).reject(new Error("Worker was destroyed"));return}const t=new NAe;I(this,vl,t);const r=`fake${Dn(Mt,BE)._++}`,i=new Lv(r+"_worker",r,t);e.setup(i,t),I(this,so,new Lv(r,r+"_worker",t)),D(this,Yr,mA).call(this)}).catch(e=>{f(this,lu).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Jm=new WeakSet,gA=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},O(Mt,Jm),O(Mt,BE,0),O(Mt,jh,!1),O(Mt,Fh,new WeakMap),zr&&(I(Mt,jh,!0),ya.workerSrc||(ya.workerSrc="./pdf.worker.mjs")),Mt._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const i=new URL(t,r);return r.origin===i.origin},Mt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Mt.fromPort=e=>{if(bAe("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Mt.create(e)};let S0=Mt;var bl,oa,Zm,eg,wl,$h,Uv;class ASe{constructor(e,t,r,i,s){O(this,$h);O(this,bl,new Map);O(this,oa,new Map);O(this,Zm,new Map);O(this,eg,new Map);O(this,wl,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new VY,this.fontLoader=new TAe({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ze(this,"annotationStorage",new lL)}getRenderingIntent(e,t=jc.ENABLE,r=null,i=!1,s=!1){let o=Yi.DISPLAY,a=_R;switch(e){case"any":o=Yi.ANY;break;case"display":break;case"print":o=Yi.PRINT;break;default:Pe(`getRenderingIntent - invalid intent: ${e}`)}const l=o&Yi.PRINT&&r instanceof SY?r:this.annotationStorage;switch(t){case jc.DISABLE:o+=Yi.ANNOTATIONS_DISABLE;break;case jc.ENABLE:break;case jc.ENABLE_FORMS:o+=Yi.ANNOTATIONS_FORMS;break;case jc.ENABLE_STORAGE:o+=Yi.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Pe(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=Yi.IS_EDITING),s&&(o+=Yi.OPLIST);const{ids:c,hash:u}=l.modifiedIds,d=[o,a.hash,u];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=f(this,wl))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of f(this,oa).values())e.push(i._destroy());f(this,oa).clear(),f(this,Zm).clear(),f(this,eg).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,s;this.commonObjs.clear(),this.fontLoader.clear(),f(this,bl).clear(),this.filterFactory.destroy(),_0.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new cd("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{bn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){i.close();return}bn(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:o}=this._fullReader;return(!i||!s)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:o}}),e.on("GetRangeReader",(r,i)=>{bn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){i.close();return}bn(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new xSe(r,this))}),e.on("DocException",r=>{t._capability.reject(ai(r))}),e.on("PasswordRequest",r=>{I(this,wl,Promise.withResolvers());try{if(!t.onPassword)throw ai(r);const i=s=>{s instanceof Error?f(this,wl).reject(s):f(this,wl).resolve({password:s})};t.onPassword(i,r.code)}catch(i){f(this,wl).reject(i)}return f(this,wl).promise}),e.on("DataLoaded",r=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;f(this,oa).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in s){const u=s.error;Pe(`Error during font loading: ${u}`),this.commonObjs.resolve(r,u);break}const a=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,d)=>globalThis.FontInspector.fontAdded(u,d):null,l=new CAe(s,a);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(r,l)});break;case"CopyLocalImage":const{imageRef:c}=s;bn(c,"The imageRef must be defined.");for(const u of f(this,oa).values())for(const[,d]of u.objs)if((d==null?void 0:d.ref)===c)return d.dataLen?(this.commonObjs.resolve(r,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,o])=>{var l;if(this.destroyed)return;const a=f(this,oa).get(i);if(!a.objs.has(r)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(s){case"Image":case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&Pe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=f(this,Zm).get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&f(this,eg).set(s.refStr,e);const o=new _Se(t,s,this,this._params.pdfBug);return f(this,oa).set(t,o),o});return f(this,Zm).set(t,i),i}getPageIndex(e){return AR(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return D(this,$h,Uv).call(this,"GetFieldObjects")}hasJSActions(){return D(this,$h,Uv).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return D(this,$h,Uv).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return D(this,$h,Uv).call(this,"GetOptionalContentConfig").then(t=>new eSe(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=f(this,bl).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>{var s,o;return{info:i[0],metadata:i[1]?new JAe(i[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return f(this,bl).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of f(this,oa).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),f(this,bl).clear(),this.filterFactory.destroy(!0),_0.cleanup()}}cachedPageNumber(e){if(!AR(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return f(this,eg).get(t)??null}}bl=new WeakMap,oa=new WeakMap,Zm=new WeakMap,eg=new WeakMap,wl=new WeakMap,$h=new WeakSet,Uv=function(e,t=null){const r=f(this,bl).get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return f(this,bl).set(e,i),i};var cu;class SSe{constructor(e){O(this,cu,null);J(this,"onContinue",null);J(this,"onError",null);I(this,cu,e)}get promise(){return f(this,cu).capability.promise}cancel(e=0){f(this,cu).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=f(this,cu).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=f(this,cu);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}cu=new WeakMap;var uu,Vh;const Wd=class Wd{constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:h=null}){O(this,uu,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new SSe(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,l;if(this.cancelled)return;if(this._canvas){if(f(Wd,Vh).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");f(Wd,Vh).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:i,transform:s,background:o}=this.params;this.gfx=new pm(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var r,i,s;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),f(this,uu)&&(window.cancelAnimationFrame(f(this,uu)),I(this,uu,null)),f(Wd,Vh).delete(this._canvas),e||(e=new iL(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(s=(i=this.task).onError)==null||s.call(i,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?I(this,uu,window.requestAnimationFrame(()=>{I(this,uu,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),f(Wd,Vh).delete(this._canvas),this.callback())))}};uu=new WeakMap,Vh=new WeakMap,O(Wd,Vh,new WeakSet);let LR=Wd;const ESe="5.3.93",TSe="cbeef3233";function RV(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function lv(n){return Math.max(0,Math.min(255,255*n))}class NV{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=lv(e),[e,e,e]}static G_HTML([e]){const t=RV(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(lv)}static RGB_HTML(e){return`#${e.map(RV).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[lv(1-Math.min(1,e+i)),lv(1-Math.min(1,r+i)),lv(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,s=1-t,o=1-r,a=Math.min(i,s,o);return["CMYK",i,s,o,a]}}class CSe{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ft("Abstract method `_createSVG` called.")}}class XS extends CSe{_createSVG(e){return document.createElementNS(Ya,e)}}class KY{static setupStorage(e,t,r,i,s){const o=i.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:s}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&s.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var d,h;const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:s,linkService:r});const a=s!=="richText",l=e.div;if(l.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=m}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);o.append(m),a&&A0.shouldBuildText(i.name)&&c.push(m)}return{textDivs:c}}const u=[[i,-1,o]];for(;u.length>0;){const[m,y,g]=u.at(-1);if(y+1===m.children.length){u.pop();continue}const b=m.children[++u.at(-1)[1]];if(b===null)continue;const{name:w}=b;if(w==="#text"){const _=document.createTextNode(b.value);c.push(_),g.append(_);continue}const x=(d=b==null?void 0:b.attributes)!=null&&d.xmlns?document.createElementNS(b.attributes.xmlns,w):document.createElement(w);if(g.append(x),b.attributes&&this.setAttributes({html:x,element:b,storage:t,intent:s,linkService:r}),((h=b.children)==null?void 0:h.length)>0)u.push([b,-1,x]);else if(b.value){const _=document.createTextNode(b.value);a&&A0.shouldBuildText(w)&&c.push(_),x.append(_)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const PSe=9,Bf=new WeakSet;class OV{static create(e){switch(e.data.annotationType){case fn.LINK:return new YY(e);case fn.TEXT:return new ISe(e);case fn.WIDGET:switch(e.data.fieldType){case"Tx":return new kSe(e);case"Btn":return e.data.radioButton?new JY(e):e.data.checkBox?new NSe(e):new OSe(e);case"Ch":return new MSe(e);case"Sig":return new RSe(e)}return new op(e);case fn.POPUP:return new FR(e);case fn.FREETEXT:return new rX(e);case fn.LINE:return new LSe(e);case fn.SQUARE:return new jSe(e);case fn.CIRCLE:return new FSe(e);case fn.POLYLINE:return new iX(e);case fn.CARET:return new VSe(e);case fn.INK:return new dL(e);case fn.POLYGON:return new $Se(e);case fn.HIGHLIGHT:return new sX(e);case fn.UNDERLINE:return new BSe(e);case fn.SQUIGGLY:return new zSe(e);case fn.STRIKEOUT:return new USe(e);case fn.STAMP:return new oX(e);case fn.FILEATTACHMENT:return new HSe(e);default:return new cn(e)}}}var Bh,tg,ng,$w,jR;const ij=class ij{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){O(this,$w);O(this,Bh,null);O(this,tg,!1);O(this,ng,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ij._hasPopupData(this.data)}updateEdited(e){var r;if(!this.container)return;f(this,Bh)||I(this,Bh,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&D(this,$w,jR).call(this,t),(r=f(this,ng))==null||r.popup.updateEdited(e)}resetEdited(){var e;f(this,Bh)&&(D(this,$w,jR).call(this,f(this,Bh).rect),(e=f(this,ng))==null||e.popup.resetEdited(),I(this,Bh,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof op||(s.tabIndex=0);const{style:o}=s;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof FR){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}const{width:a,height:l}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(g>0||b>0){const x=`calc(${g}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;o.borderRadius=x}else if(this instanceof JY){const x=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=x}switch(t.borderStyle.style){case Sp.SOLID:o.borderStyle="solid";break;case Sp.DASHED:o.borderStyle="dashed";break;case Sp.BEVELED:Pe("Unimplemented border style: beveled");break;case Sp.INSET:Pe("Unimplemented border style: inset");break;case Sp.UNDERLINE:o.borderBottomStyle="solid";break}const w=t.borderColor||null;w?(I(this,tg,!0),o.borderColor=we.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):o.borderWidth=0}const c=we.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:u,pageHeight:d,pageX:h,pageY:m}=i.rawDims;o.left=`${100*(c[0]-h)/u}%`,o.top=`${100*(c[1]-m)/d}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(o.width=`${100*a/u}%`,o.height=`${100*l/d}%`):this.setRotation(y,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:o}=this;e%180!==0&&([s,o]=[o,s]),t.style.width=`${100*s/r}%`,t.style.height=`${100*o/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const s=i.detail[t],o=s[0],a=s.slice(1);i.target.style[r]=NV[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:NV[`${o}_rgb`](a)})};return ze(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail)){const s=e[i]||r[i];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,s]of Object.entries(t)){const o=r[i];if(o){const a={detail:{[i]:s},target:e};o(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,s]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,b,w,x]=e.subarray(2,6);if(i===g&&s===b&&t===w&&r===x)return}const{style:o}=this.container;let a;if(f(this,tg)){const{borderColor:g,borderWidth:b}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const l=i-t,c=s-r,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const h=u.createElement("defs");d.append(h);const m=u.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),h.append(m);for(let g=2,b=e.length;g<b;g+=8){const w=e[g],x=e[g+1],_=e[g+2],S=e[g+3],P=u.createElement("rect"),N=(_-t)/l,T=(s-x)/c,C=(w-_)/l,k=(x-S)/c;P.setAttribute("x",N),P.setAttribute("y",T),P.setAttribute("width",C),P.setAttribute("height",k),m.append(P),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${T}" width="${C}" height="${k}"/>`)}f(this,tg)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{data:e}=this,t=I(this,ng,new FR({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){ft("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:o,exportValues:a}of i){if(s===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Bf.has(c)){Pe(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:l,domElement:c})}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,o=i.getAttribute("data-element-id");o!==t&&Bf.has(i)&&r.push({id:o,exportValue:s,domElement:i})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Bh=new WeakMap,tg=new WeakMap,ng=new WeakMap,$w=new WeakSet,jR=function(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-a)/s}%`,t.top=`${100*(o-e[3]+l)/o}%`,i===0?(t.width=`${100*(e[2]-e[0])/s}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)};let cn=ij;var Zi,jd,XY,QY;class YY extends cn{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});O(this,Zi);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(r.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action),s=!0):t.attachment?(D(this,Zi,XY).call(this,i,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(D(this,Zi,QY).call(this,i,t.setOCGState),s=!0):t.dest?(this._bindLink(i,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}_bindLink(t,r){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&D(this,Zi,jd).call(this)}_bindNamedAction(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),D(this,Zi,jd).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(r.actions)){const o=i.get(s);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),D(this,Zi,jd).call(this)}_bindResetFormAction(t,r){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),D(this,Zi,jd).call(this),!this._fieldObjects){Pe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var d;i==null||i();const{fields:s,refs:o,include:a}=r,l=[];if(s.length!==0||o.length!==0){const h=new Set(o);for(const m of s){const y=this._fieldObjects[m]||[];for(const{id:g}of y)h.add(g)}for(const m of Object.values(this._fieldObjects))for(const y of m)h.has(y.id)===a&&l.push(y)}else for(const h of Object.values(this._fieldObjects))l.push(...h);const c=this.annotationStorage,u=[];for(const h of l){const{id:m}=h;switch(u.push(m),h.type){case"text":{const g=h.defaultValue||"";c.setValue(m,{value:g});break}case"checkbox":case"radiobutton":{const g=h.defaultValue===h.exportValues;c.setValue(m,{value:g});break}case"combobox":case"listbox":{const g=h.defaultValue||"";c.setValue(m,{value:g});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!Bf.has(y)){Pe(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Zi=new WeakSet,jd=function(){this.container.setAttribute("data-internal-link","")},XY=function(t,r,i=null){t.href=this.linkService.getAnchorUrl(""),r.description&&(t.title=r.description),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(r.content,r.filename,i),!1},D(this,Zi,jd).call(this)},QY=function(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),D(this,Zi,jd).call(this)};class ISe extends cn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class op extends cn{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return lr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,s){r.includes("mouse")?e.addEventListener(r,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var a;if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}s&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o)}}))})}_setEventListeners(e,t,r,i){var s,o,a;for(const[l,c]of r)(c==="Action"||(s=this.data.actions)!=null&&s[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,i),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":we.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||PSe,s=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(PI*i))||1,d=c/u;o=Math.min(i,l(d/PI))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(c/PI))}s.fontSize=`calc(${o}px * var(--total-scale-factor))`,s.color=we.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class kSe extends op{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),s.setValue(o.id,{[i]:r})}render(){var i,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",c??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Bf.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const d=this.data.dateFormat||this.data.timeFormat;d&&(r.title=d),this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",m=>{e.setValue(t,{value:m.target.value}),this.setPropertyOnSiblings(r,"value",m.target.value,"value"),u.formattedValue=null}),r.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue??"";r.value=u.userValue=y,u.formattedValue=null});let h=m=>{const{formattedValue:y}=u;y!=null&&(m.target.value=y),m.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",y=>{var b;if(u.focused)return;const{target:g}=y;u.userValue&&(g.value=u.userValue),u.lastCommittedValue=g.value,u.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(u.focused=!0)}),r.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const g={value(b){u.userValue=b.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),b.target.value=u.userValue},formattedValue(b){const{formattedValue:w}=b.detail;u.formattedValue=w,w!=null&&b.target!==document.activeElement&&(b.target.value=w),e.setValue(t,{formattedValue:w})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var S;const{charLimit:w}=b.detail,{target:x}=b;if(w===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",w);let _=u.userValue;!_||_.length<=w||(_=_.slice(0,w),x.value=u.userValue=_,e.setValue(t,{value:_}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(g,y)}),r.addEventListener("keydown",y=>{var w;u.commitKey=1;let g=-1;if(y.key==="Escape"?g=0:y.key==="Enter"&&!this.data.multiLine?g=2:y.key==="Tab"&&(u.commitKey=3),g===-1)return;const{value:b}=y.target;u.lastCommittedValue!==b&&(u.lastCommittedValue=b,u.userValue=b,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:g,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const m=h;h=null,r.addEventListener("blur",y=>{var b,w;if(!u.focused||!y.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(u.focused=!1);const{value:g}=y.target;u.userValue=g,u.lastCommittedValue!==g&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:u.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}})),m(y)}),(s=this.data.actions)!=null&&s.Keystroke&&r.addEventListener("beforeinput",y=>{var N;u.lastCommittedValue=null;const{data:g,target:b}=y,{value:w,selectionStart:x,selectionEnd:_}=b;let S=x,P=_;switch(y.inputType){case"deleteWordBackward":{const T=w.substring(0,x).match(/\w*[^\w]*$/);T&&(S-=T[0].length);break}case"deleteWordForward":{const T=w.substring(x).match(/^[^\w]*\w*/);T&&(P+=T[0].length);break}case"deleteContentBackward":x===_&&(S-=1);break;case"deleteContentForward":x===_&&(P+=1);break}y.preventDefault(),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,change:g||"",willCommit:!1,selStart:S,selEnd:P}})}),this._setEventListeners(r,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(h&&r.addEventListener("blur",h),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${y}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class RSe extends op{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class NSe extends op{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Bf.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class JY extends op{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(Bf.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const h=u&&d.id===r;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class OSe extends YY{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class MSe extends op{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Bf.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const h of i.options)h.selected=h.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,r.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),s=!1),i.append(d)}let o=null;if(s){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=u=>{const d=u?"value":"textContent",{options:h,multiple:m}=i;return m?Array.prototype.filter.call(h,y=>y.selected).map(y=>y[d]):h.selectedIndex===-1?null:h[h.selectedIndex][d]};let l=a(!1);const c=u=>{const d=u.target.options;return Array.prototype.map.call(d,h=>({displayValue:h.textContent,exportValue:h.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const d={value(h){o==null||o();const m=h.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const g of i.options)g.selected=y.has(g.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(h){i.multiple=!0},remove(h){const m=i.options,y=h.detail.remove;m[y].selected=!1,i.remove(y),m.length>0&&Array.prototype.findIndex.call(m,b=>b.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},clear(h){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(h){const{index:m,displayValue:y,exportValue:g}=h.detail.insert,b=i.children[m],w=document.createElement("option");w.textContent=y,w.value=g,b?b.before(w):i.append(w),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},items(h){const{items:m}=h.detail;for(;i.length!==0;)i.remove(0);for(const y of m){const{displayValue:g,exportValue:b}=y,w=document.createElement("option");w.textContent=g,w.value=b,i.append(w)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},indices(h){const m=new Set(h.detail.indices);for(const y of h.target.options)y.selected=m.has(y.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(h){h.target.disabled=!h.detail.editable}};this._dispatchEventFromSandbox(d,u)}),i.addEventListener("input",u=>{var m;const d=a(!0),h=a(!1);e.setValue(t,{value:d}),u.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:h,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class FR extends cn{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:cn._hasPopupData(t)}),this.elements=r,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new DSe({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),r=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${rL}${i}`).join(",")),this.container}}var rg,zE,UE,ig,sg,Jt,xl,zh,Vw,Bw,og,_l,oo,Al,zw,Sl,Uw,Uh,Hh,pt,yA,$R,ZY,eX,tX,nX,vA,bA,VR;class DSe{constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:d}){O(this,pt);O(this,rg,D(this,pt,tX).bind(this));O(this,zE,D(this,pt,VR).bind(this));O(this,UE,D(this,pt,bA).bind(this));O(this,ig,D(this,pt,vA).bind(this));O(this,sg,null);O(this,Jt,null);O(this,xl,null);O(this,zh,null);O(this,Vw,null);O(this,Bw,null);O(this,og,null);O(this,_l,!1);O(this,oo,null);O(this,Al,null);O(this,zw,null);O(this,Sl,null);O(this,Uw,null);O(this,Uh,null);O(this,Hh,!1);var h;I(this,Jt,e),I(this,Uw,i),I(this,xl,o),I(this,Sl,a),I(this,Bw,l),I(this,sg,t),I(this,zw,c),I(this,og,u),I(this,Vw,r),I(this,zh,oL.toDateObject(s)),this.trigger=r.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",f(this,ig)),m.addEventListener("mouseenter",f(this,UE)),m.addEventListener("mouseleave",f(this,zE)),m.classList.add("popupTriggerArea");for(const m of r)(h=m.container)==null||h.addEventListener("keydown",f(this,rg));f(this,Jt).hidden=!0,d&&D(this,pt,vA).call(this)}render(){if(f(this,oo))return;const e=I(this,oo,document.createElement("div"));if(e.className="popup",f(this,sg)){const s=e.style.outlineColor=we.makeHexColor(...f(this,sg));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=f(this,Uw),e.append(t),f(this,zh)){const s=document.createElement("time");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:f(this,zh).valueOf()})),s.dateTime=f(this,zh).toISOString(),t.append(s)}const i=f(this,pt,yA);if(i)KY.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(f(this,xl));e.append(s)}f(this,Jt).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let s=0,o=i.length;s<o;++s){const a=i[s];r.append(document.createTextNode(a)),s<o-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popupContent:t}){var r;f(this,Uh)||I(this,Uh,{contentsObj:f(this,xl),richText:f(this,Sl)}),e&&I(this,Al,null),t&&(I(this,Sl,D(this,pt,eX).call(this,t)),I(this,xl,null)),(r=f(this,oo))==null||r.remove(),I(this,oo,null)}resetEdited(){var e;f(this,Uh)&&({contentsObj:Dn(this,xl)._,richText:Dn(this,Sl)._}=f(this,Uh),I(this,Uh,null),(e=f(this,oo))==null||e.remove(),I(this,oo,null),I(this,Al,null))}forceHide(){I(this,Hh,this.isVisible),f(this,Hh)&&(f(this,Jt).hidden=!0)}maybeShow(){f(this,Hh)&&(f(this,oo)||D(this,pt,bA).call(this),I(this,Hh,!1),f(this,Jt).hidden=!1)}get isVisible(){return f(this,Jt).hidden===!1}}rg=new WeakMap,zE=new WeakMap,UE=new WeakMap,ig=new WeakMap,sg=new WeakMap,Jt=new WeakMap,xl=new WeakMap,zh=new WeakMap,Vw=new WeakMap,Bw=new WeakMap,og=new WeakMap,_l=new WeakMap,oo=new WeakMap,Al=new WeakMap,zw=new WeakMap,Sl=new WeakMap,Uw=new WeakMap,Uh=new WeakMap,Hh=new WeakMap,pt=new WeakSet,yA=function(){const e=f(this,Sl),t=f(this,xl);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&f(this,Sl).html||null},$R=function(){var e,t,r;return((r=(t=(e=f(this,pt,yA))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},ZY=function(){var e,t,r;return((r=(t=(e=f(this,pt,yA))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},eX=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:f(this,pt,ZY),fontSize:f(this,pt,$R)?`calc(${f(this,pt,$R)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:i});return r},tX=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&f(this,_l))&&D(this,pt,vA).call(this)},nX=function(){if(f(this,Al)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:s}}}=f(this,Bw);let o=!!f(this,og),a=o?f(this,og):f(this,zw);for(const y of f(this,Vw))if(!a||we.intersect(y.data.rect,a)!==null){a=y.data.rect,o=!0;break}const l=we.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=o?a[2]-a[0]+5:0,d=l[0]+u,h=l[1];I(this,Al,[100*(d-i)/t,100*(h-s)/r]);const{style:m}=f(this,Jt);m.left=`${f(this,Al)[0]}%`,m.top=`${f(this,Al)[1]}%`},vA=function(){I(this,_l,!f(this,_l)),f(this,_l)?(D(this,pt,bA).call(this),f(this,Jt).addEventListener("click",f(this,ig)),f(this,Jt).addEventListener("keydown",f(this,rg))):(D(this,pt,VR).call(this),f(this,Jt).removeEventListener("click",f(this,ig)),f(this,Jt).removeEventListener("keydown",f(this,rg)))},bA=function(){f(this,oo)||this.render(),this.isVisible?f(this,_l)&&f(this,Jt).classList.add("focused"):(D(this,pt,nX).call(this),f(this,Jt).hidden=!1,f(this,Jt).style.zIndex=parseInt(f(this,Jt).style.zIndex)+1e3)},VR=function(){f(this,Jt).classList.remove("focused"),!(f(this,_l)||!this.isVisible)&&(f(this,Jt).hidden=!0,f(this,Jt).style.zIndex=parseInt(f(this,Jt).style.zIndex)-1e3)};class rX extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ce.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Hw;class LSe extends cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});O(this,Hw,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),o=I(this,Hw,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Hw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hw=new WeakMap;var Ww;class jSe extends cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});O(this,Ww,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),o=t.borderStyle.width,a=I(this,Ww,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",r-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Ww)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ww=new WeakMap;var Gw;class FSe extends cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});O(this,Gw,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),o=t.borderStyle.width,a=I(this,Gw,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",i/2),a.setAttribute("rx",r/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Gw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gw=new WeakMap;var qw;class iX extends cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});O(this,qw,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:i,popupRef:s},width:o,height:a}=this;if(!r)return this.container;const l=this.svgFactory.create(o,a,!0);let c=[];for(let d=0,h=r.length;d<h;d+=2){const m=r[d]-t[0],y=t[3]-r[d+1];c.push(`${m},${y}`)}c=c.join(" ");const u=I(this,qw,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,qw)}addHighlightArea(){this.container.classList.add("highlightArea")}}qw=new WeakMap;class $Se extends iX{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class VSe extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Kw,Wh,Yw,BR;class dL extends cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});O(this,Yw);O(this,Kw,null);O(this,Wh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ce.HIGHLIGHT:Ce.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:i,borderStyle:s,popupRef:o}}=this,{transform:a,width:l,height:c}=D(this,Yw,BR).call(this,r,t),u=this.svgFactory.create(l,c,!0),d=I(this,Kw,this.svgFactory.createElement("svg:g"));u.append(d),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",a);for(let h=0,m=i.length;h<m;h++){const y=this.svgFactory.createElement(this.svgElementName);f(this,Wh).push(y),y.setAttribute("points",i[h].join(",")),d.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:i,rect:s}=t,o=f(this,Kw);if(r>=0&&o.setAttribute("stroke-width",r||1),i)for(let a=0,l=f(this,Wh).length;a<l;a++)f(this,Wh)[a].setAttribute("points",i[a].join(","));if(s){const{transform:a,width:l,height:c}=D(this,Yw,BR).call(this,this.data.rotation,s);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return f(this,Wh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kw=new WeakMap,Wh=new WeakMap,Yw=new WeakSet,BR=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class sX extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ce.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class BSe extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class zSe extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class USe extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class oX extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ce.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Xw,Qw,zR;class HSe extends cn{constructor(t){var i;super(t,{isRenderable:!0});O(this,Qw);O(this,Xw,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",D(this,Qw,zR).bind(this)),I(this,Xw,i);const{isMac:s}=lr.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&D(this,Qw,zR).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return f(this,Xw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xw=new WeakMap,Qw=new WeakSet,zR=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Jw,Gh,du,Zw,fd,HR,WR;const sj=class sj{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:o,structTreeLayer:a}){O(this,fd);O(this,Jw,null);O(this,Gh,null);O(this,du,new Map);O(this,Zw,null);this.div=e,I(this,Jw,t),I(this,Gh,r),I(this,Zw,a||null),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return f(this,du).size>0}async render(e){var o;const{annotations:t}=e,r=this.div;$f(r,this.viewport);const i=new Map,s={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new XS,annotationStorage:e.annotationStorage||new lL,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===fn.POPUP;if(l){const d=i.get(a.id);if(!d)continue;s.elements=d}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;s.data=a;const c=OV.create(s);if(!c.isRenderable)continue;if(!l&&a.popupRef){const d=i.get(a.popupRef);d?d.push(c):i.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),await D(this,fd,HR).call(this,u,a.id,s.elements),c._isEditable&&(f(this,du).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}D(this,fd,WR).call(this)}async addLinkAnnotations(e,t){const r={data:null,layer:this.div,linkService:t,svgFactory:new XS,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=sj._defaultBorderStyle),r.data=i;const s=OV.create(r);if(!s.isRenderable)continue;const o=s.render();await D(this,fd,HR).call(this,o,i.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,$f(t,{rotation:e.rotation}),D(this,fd,WR).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(f(this,du).values())}getEditableAnnotation(e){return f(this,du).get(e)}static get _defaultBorderStyle(){return ze(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Sp.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Jw=new WeakMap,Gh=new WeakMap,du=new WeakMap,Zw=new WeakMap,fd=new WeakSet,HR=async function(e,t,r){var a,l;const i=e.firstChild||e,s=i.id=`${rL}${t}`,o=await((a=f(this,Zw))==null?void 0:a.getAriaAttributes(s));if(o)for(const[c,u]of o)i.setAttribute(c,u);r?r.at(-1).container.after(e):(this.div.append(e),(l=f(this,Jw))==null||l.moveElementInDOM(this.div,e,i,!1))},WR=function(){var t;if(!f(this,Gh))return;const e=this.div;for(const[r,i]of f(this,Gh)){const s=e.querySelector(`[data-annotation-id="${r}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:o}=s;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):s.append(i);const a=f(this,du).get(r);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,s.id,i),a._hasNoCanvas=!1):a.canvas=i)}f(this,Gh).clear()};let UR=sj;const p1=/\r\n?|\n/g;var ao,Fi,ex,qh,$i,An,aX,lX,cX,wA,ql,xA,_A,uX,qR,dX;const vt=class vt extends _t{constructor(t){super({...t,name:"freeTextEditor"});O(this,An);O(this,ao);O(this,Fi,"");O(this,ex,`${this.id}-editor`);O(this,qh,null);O(this,$i);I(this,ao,t.color||vt._defaultColor||_t._defaultLineColor),I(this,$i,t.fontSize||vt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=vt.prototype,r=o=>o.isEmpty(),i=Vf.TRANSLATE_SMALL,s=Vf.TRANSLATE_BIG;return ze(this,"_keyboardManager",new Kx([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}]]))}static initialize(t,r){_t.initialize(t,r);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case Ue.FREETEXT_SIZE:vt._defaultFontSize=r;break;case Ue.FREETEXT_COLOR:vt._defaultColor=r;break}}updateParams(t,r){switch(t){case Ue.FREETEXT_SIZE:D(this,An,aX).call(this,r);break;case Ue.FREETEXT_COLOR:D(this,An,lX).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Ue.FREETEXT_SIZE,vt._defaultFontSize],[Ue.FREETEXT_COLOR,vt._defaultColor||_t._defaultLineColor]]}get propertiesToUpdate(){return[[Ue.FREETEXT_SIZE,f(this,$i)],[Ue.FREETEXT_COLOR,f(this,ao)]]}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-vt._internalPadding*t,-(vt._internalPadding+f(this,$i))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),I(this,qh,new AbortController);const t=this._uiManager.combinedSignal(f(this,qh));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",f(this,ex)),this._isDraggable=!0,(t=f(this,qh))==null||t.abort(),I(this,qh,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=f(this,Fi),r=I(this,Fi,D(this,An,cX).call(this).trimEnd());if(t===r)return;const i=s=>{if(I(this,Fi,s),!s){this.remove();return}D(this,An,_A).call(this),this._uiManager.rebuild(this),D(this,An,wA).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(t)},mustExec:!1}),D(this,An,wA).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){vt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",f(this,ex)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${f(this,$i)}px * var(--total-scale-factor))`,i.color=f(this,ao),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,d]=this.pageDimensions,[h,m]=this.pageTranslation;let y,g;switch(this.rotation){case 0:y=t+(a[0]-h)/u,g=r+this.height-(a[1]-m)/d;break;case 90:y=t+(a[0]-h)/u,g=r-(a[1]-m)/d,[l,c]=[c,-l];break;case 180:y=t-this.width+(a[0]-h)/u,g=r-(a[1]-m)/d,[l,c]=[-l,-c];break;case 270:y=t+(a[0]-h-this.height*d)/u,g=r+(a[1]-m-this.width*u)/d,[l,c]=[-c,l];break}this.setAt(y*s,g*o,l,c)}else this._moveAfterPaste(t,r);D(this,An,_A).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,g,b;const r=t.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const s=D(y=vt,ql,qR).call(y,r.getData("text")||"").replaceAll(p1,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,u=[],d=[];if(l.nodeType===Node.TEXT_NODE){const w=l.parentElement;if(d.push(l.nodeValue.slice(c).replaceAll(p1,"")),w!==this.editorDiv){let x=u;for(const _ of this.editorDiv.childNodes){if(_===w){x=d;continue}x.push(D(g=vt,ql,xA).call(g,_))}}u.push(l.nodeValue.slice(0,c).replaceAll(p1,""))}else if(l===this.editorDiv){let w=u,x=0;for(const _ of this.editorDiv.childNodes)x++===c&&(w=d),w.push(D(b=vt,ql,xA).call(b,_))}I(this,Fi,`${u.join(`
`)}${s}${d.join(`
`)}`),D(this,An,_A).call(this);const h=new Range;let m=Math.sumPrecise(u.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const x=w.nodeValue.length;if(m<=x){h.setStart(w,m),h.setEnd(w,m);break}m-=x}o.removeAllRanges(),o.addRange(h)}get contentDiv(){return this.editorDiv}static async deserialize(t,r,i){var a;let s=null;if(t instanceof rX){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:d,id:h,popupRef:m},textContent:y,textPosition:g,parent:{page:{pageNumber:b}}}=t;if(!y||y.length===0)return null;s=t={annotationType:Ce.FREETEXT,color:Array.from(c),fontSize:l,value:y.join(`
`),position:g,pageIndex:b-1,rect:u.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:m}}const o=await super.deserialize(t,r,i);return I(o,$i,t.fontSize),I(o,ao,we.makeHexColor(...t.color)),I(o,Fi,D(a=vt,ql,qR).call(a,t.value)),o._initialData=s,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=vt._internalPadding*this.parentScale,i=this.getRect(r,r),s=_t._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:f(this,ao)),o={annotationType:Ce.FREETEXT,color:s,fontSize:f(this,$i),value:D(this,An,uX).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.isCopy=!0,o):this.annotationElementId&&!D(this,An,dX).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(this.deleted)return r;const{style:i}=r;i.fontSize=`calc(${f(this,$i)}px * var(--total-scale-factor))`,i.color=f(this,ao),r.replaceChildren();for(const o of f(this,Fi).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),r.append(a)}const s=vt._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:f(this,Fi)}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ao=new WeakMap,Fi=new WeakMap,ex=new WeakMap,qh=new WeakMap,$i=new WeakMap,An=new WeakSet,aX=function(t){const r=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-f(this,$i))*this.parentScale),I(this,$i,s),D(this,An,wA).call(this)},i=f(this,$i);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},lX=function(t){const r=s=>{I(this,ao,this.editorDiv.style.color=s)},i=f(this,ao);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},cX=function(){var i;const t=[];this.editorDiv.normalize();let r=null;for(const s of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(D(i=vt,ql,xA).call(i,s)),r=s);return t.join(`
`)},wA=function(){const[t,r]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/r):(this.width=i.height/t,this.height=i.width/r),this.fixAndSetPosition()},ql=new WeakSet,xA=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(p1,"")},_A=function(){if(this.editorDiv.replaceChildren(),!!f(this,Fi))for(const t of f(this,Fi).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},uX=function(){return f(this,Fi).replaceAll(" "," ")},qR=function(t){return t.replaceAll(" "," ")},dX=function(t){const{value:r,fontSize:i,color:s,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==r||t.fontSize!==i||t.color.some((a,l)=>a!==s[l])||t.pageIndex!==o},O(vt,ql),J(vt,"_freeTextDefaultContent",""),J(vt,"_internalPadding",0),J(vt,"_defaultColor",null),J(vt,"_defaultFontSize",10),J(vt,"_type","freetext"),J(vt,"_editorType",Ce.FREETEXT);let GR=vt;class pe{toSVGPath(){ft("Abstract method `toSVGPath` must be implemented.")}get box(){ft("Abstract getter `box` must be implemented.")}serialize(e,t){ft("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,i,s,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*i,o[a+1]=r+e[a+1]*s;return o}static _rescaleAndSwap(e,t,r,i,s,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*i,o[a+1]=r+e[a]*s;return o}static _translate(e,t,r,i){i||(i=new Float32Array(e.length));for(let s=0,o=e.length;s<o;s+=2)i[s]=t+e[s],i[s+1]=r+e[s+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,i,s){switch(s){case 90:return[1-t/r,e/i];case 180:return[1-e/r,1-t/i];case 270:return[t/r,1-e/i];default:return[e/r,t/i]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,i,s,o){return[(e+5*r)/6,(t+5*i)/6,(5*r+s)/6,(5*i+o)/6,(r+s)/2,(i+o)/2]}}J(pe,"PRECISION",1e-4);var Vi,lo,ag,lg,aa,je,Kh,Yh,tx,nx,cg,ug,hu,rx,HE,WE,On,Hv,hX,fX,pX,mX,gX,yX;const tl=class tl{constructor({x:e,y:t},r,i,s,o,a=0){O(this,On);O(this,Vi);O(this,lo,[]);O(this,ag);O(this,lg);O(this,aa,[]);O(this,je,new Float32Array(18));O(this,Kh);O(this,Yh);O(this,tx);O(this,nx);O(this,cg);O(this,ug);O(this,hu,[]);I(this,Vi,r),I(this,ug,s*i),I(this,lg,o),f(this,je).set([NaN,NaN,NaN,NaN,e,t],6),I(this,ag,a),I(this,nx,f(tl,rx)*i),I(this,tx,f(tl,WE)*i),I(this,cg,i),f(this,hu).push(e,t)}isEmpty(){return isNaN(f(this,je)[8])}add({x:e,y:t}){var k;I(this,Kh,e),I(this,Yh,t);const[r,i,s,o]=f(this,Vi);let[a,l,c,u]=f(this,je).subarray(8,12);const d=e-c,h=t-u,m=Math.hypot(d,h);if(m<f(this,tx))return!1;const y=m-f(this,nx),g=y/m,b=g*d,w=g*h;let x=a,_=l;a=c,l=u,c+=b,u+=w,(k=f(this,hu))==null||k.push(e,t);const S=-w/y,P=b/y,N=S*f(this,ug),T=P*f(this,ug);return f(this,je).set(f(this,je).subarray(2,8),0),f(this,je).set([c+N,u+T],4),f(this,je).set(f(this,je).subarray(14,18),12),f(this,je).set([c-N,u-T],16),isNaN(f(this,je)[6])?(f(this,aa).length===0&&(f(this,je).set([a+N,l+T],2),f(this,aa).push(NaN,NaN,NaN,NaN,(a+N-r)/s,(l+T-i)/o),f(this,je).set([a-N,l-T],14),f(this,lo).push(NaN,NaN,NaN,NaN,(a-N-r)/s,(l-T-i)/o)),f(this,je).set([x,_,a,l,c,u],6),!this.isEmpty()):(f(this,je).set([x,_,a,l,c,u],6),Math.abs(Math.atan2(_-l,x-a)-Math.atan2(w,b))<Math.PI/2?([a,l,c,u]=f(this,je).subarray(2,6),f(this,aa).push(NaN,NaN,NaN,NaN,((a+c)/2-r)/s,((l+u)/2-i)/o),[a,l,x,_]=f(this,je).subarray(14,18),f(this,lo).push(NaN,NaN,NaN,NaN,((x+a)/2-r)/s,((_+l)/2-i)/o),!0):([x,_,a,l,c,u]=f(this,je).subarray(0,6),f(this,aa).push(((x+5*a)/6-r)/s,((_+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+u)/6-i)/o,((a+c)/2-r)/s,((l+u)/2-i)/o),[c,u,a,l,x,_]=f(this,je).subarray(12,18),f(this,lo).push(((x+5*a)/6-r)/s,((_+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+u)/6-i)/o,((a+c)/2-r)/s,((l+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=f(this,aa),t=f(this,lo);if(isNaN(f(this,je)[6])&&!this.isEmpty())return D(this,On,hX).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);D(this,On,pX).call(this,r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return D(this,On,fX).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,i,s,o){return new vX(e,t,r,i,s,o)}getOutlines(){var d;const e=f(this,aa),t=f(this,lo),r=f(this,je),[i,s,o,a]=f(this,Vi),l=new Float32Array((((d=f(this,hu))==null?void 0:d.length)??0)+2);for(let h=0,m=l.length-2;h<m;h+=2)l[h]=(f(this,hu)[h]-i)/o,l[h+1]=(f(this,hu)[h+1]-s)/a;if(l[l.length-2]=(f(this,Kh)-i)/o,l[l.length-1]=(f(this,Yh)-s)/a,isNaN(r[6])&&!this.isEmpty())return D(this,On,mX).call(this,l);const c=new Float32Array(f(this,aa).length+24+f(this,lo).length);let u=e.length;for(let h=0;h<u;h+=2){if(isNaN(e[h])){c[h]=c[h+1]=NaN;continue}c[h]=e[h],c[h+1]=e[h+1]}u=D(this,On,yX).call(this,c,u);for(let h=t.length-6;h>=6;h-=6)for(let m=0;m<6;m+=2){if(isNaN(t[h+m])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=t[h+m],c[u+1]=t[h+m+1],u+=2}return D(this,On,gX).call(this,c,u),this.newFreeDrawOutline(c,l,f(this,Vi),f(this,cg),f(this,ag),f(this,lg))}};Vi=new WeakMap,lo=new WeakMap,ag=new WeakMap,lg=new WeakMap,aa=new WeakMap,je=new WeakMap,Kh=new WeakMap,Yh=new WeakMap,tx=new WeakMap,nx=new WeakMap,cg=new WeakMap,ug=new WeakMap,hu=new WeakMap,rx=new WeakMap,HE=new WeakMap,WE=new WeakMap,On=new WeakSet,Hv=function(){const e=f(this,je).subarray(4,6),t=f(this,je).subarray(16,18),[r,i,s,o]=f(this,Vi);return[(f(this,Kh)+(e[0]-t[0])/2-r)/s,(f(this,Yh)+(e[1]-t[1])/2-i)/o,(f(this,Kh)+(t[0]-e[0])/2-r)/s,(f(this,Yh)+(t[1]-e[1])/2-i)/o]},hX=function(){const[e,t,r,i]=f(this,Vi),[s,o,a,l]=D(this,On,Hv).call(this);return`M${(f(this,je)[2]-e)/r} ${(f(this,je)[3]-t)/i} L${(f(this,je)[4]-e)/r} ${(f(this,je)[5]-t)/i} L${s} ${o} L${a} ${l} L${(f(this,je)[16]-e)/r} ${(f(this,je)[17]-t)/i} L${(f(this,je)[14]-e)/r} ${(f(this,je)[15]-t)/i} Z`},fX=function(e){const t=f(this,lo);e.push(`L${t[4]} ${t[5]} Z`)},pX=function(e){const[t,r,i,s]=f(this,Vi),o=f(this,je).subarray(4,6),a=f(this,je).subarray(16,18),[l,c,u,d]=D(this,On,Hv).call(this);e.push(`L${(o[0]-t)/i} ${(o[1]-r)/s} L${l} ${c} L${u} ${d} L${(a[0]-t)/i} ${(a[1]-r)/s}`)},mX=function(e){const t=f(this,je),[r,i,s,o]=f(this,Vi),[a,l,c,u]=D(this,On,Hv).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-r)/s,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-r)/s,(t[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(t[16]-r)/s,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-r)/s,(t[15]-i)/o],0),this.newFreeDrawOutline(d,e,f(this,Vi),f(this,cg),f(this,ag),f(this,lg))},gX=function(e,t){const r=f(this,lo);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},yX=function(e,t){const r=f(this,je).subarray(4,6),i=f(this,je).subarray(16,18),[s,o,a,l]=f(this,Vi),[c,u,d,h]=D(this,On,Hv).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/a,(r[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-o)/l],t),t+=24},O(tl,rx,8),O(tl,HE,2),O(tl,WE,f(tl,rx)+f(tl,HE));let QS=tl;var dg,Xh,El,ix,Bi,sx,sn,GE,bX;class vX extends pe{constructor(t,r,i,s,o,a){super();O(this,GE);O(this,dg);O(this,Xh,new Float32Array(4));O(this,El);O(this,ix);O(this,Bi);O(this,sx);O(this,sn);I(this,sn,t),I(this,Bi,r),I(this,dg,i),I(this,sx,s),I(this,El,o),I(this,ix,a),this.lastPoint=[NaN,NaN],D(this,GE,bX).call(this,a);const[l,c,u,d]=f(this,Xh);for(let h=0,m=t.length;h<m;h+=2)t[h]=(t[h]-l)/u,t[h+1]=(t[h+1]-c)/d;for(let h=0,m=r.length;h<m;h+=2)r[h]=(r[h]-l)/u,r[h+1]=(r[h+1]-c)/d}toSVGPath(){const t=[`M${f(this,sn)[4]} ${f(this,sn)[5]}`];for(let r=6,i=f(this,sn).length;r<i;r+=6){if(isNaN(f(this,sn)[r])){t.push(`L${f(this,sn)[r+4]} ${f(this,sn)[r+5]}`);continue}t.push(`C${f(this,sn)[r]} ${f(this,sn)[r+1]} ${f(this,sn)[r+2]} ${f(this,sn)[r+3]} ${f(this,sn)[r+4]} ${f(this,sn)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,i,s],o){const a=i-t,l=s-r;let c,u;switch(o){case 0:c=pe._rescale(f(this,sn),t,s,a,-l),u=pe._rescale(f(this,Bi),t,s,a,-l);break;case 90:c=pe._rescaleAndSwap(f(this,sn),t,r,a,l),u=pe._rescaleAndSwap(f(this,Bi),t,r,a,l);break;case 180:c=pe._rescale(f(this,sn),i,r,-a,l),u=pe._rescale(f(this,Bi),i,r,-a,l);break;case 270:c=pe._rescaleAndSwap(f(this,sn),i,s,-a,-l),u=pe._rescaleAndSwap(f(this,Bi),i,s,-a,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return f(this,Xh)}newOutliner(t,r,i,s,o,a=0){return new QS(t,r,i,s,o,a)}getNewOutline(t,r){const[i,s,o,a]=f(this,Xh),[l,c,u,d]=f(this,dg),h=o*u,m=a*d,y=i*u+l,g=s*d+c,b=this.newOutliner({x:f(this,Bi)[0]*h+y,y:f(this,Bi)[1]*m+g},f(this,dg),f(this,sx),t,f(this,ix),r??f(this,El));for(let w=2;w<f(this,Bi).length;w+=2)b.add({x:f(this,Bi)[w]*h+y,y:f(this,Bi)[w+1]*m+g});return b.getOutlines()}}dg=new WeakMap,Xh=new WeakMap,El=new WeakMap,ix=new WeakMap,Bi=new WeakMap,sx=new WeakMap,sn=new WeakMap,GE=new WeakSet,bX=function(t){const r=f(this,sn);let i=r[4],s=r[5];const o=[i,s,i,s];let a=i,l=s;const c=t?Math.max:Math.min;for(let d=6,h=r.length;d<h;d+=6){const m=r[d+4],y=r[d+5];if(isNaN(r[d]))we.pointBoundingBox(m,y,o),l<y?(a=m,l=y):l===y&&(a=c(a,m));else{const g=[1/0,1/0,-1/0,-1/0];we.bezierBoundingBox(i,s,...r.slice(d,d+6),g),we.rectBoundingBox(...g,o),l<g[3]?(a=g[2],l=g[3]):l===g[3]&&(a=c(a,g[2]))}i=m,s=y}const u=f(this,Xh);u[0]=o[0]-f(this,El),u[1]=o[1]-f(this,El),u[2]=o[2]-o[0]+2*f(this,El),u[3]=o[3]-o[1]+2*f(this,El),this.lastPoint=[a,l]};var ox,ax,fu,co,Qr,wX,AA,xX,_X,YR;class KR{constructor(e,t=0,r=0,i=!0){O(this,Qr);O(this,ox);O(this,ax);O(this,fu,[]);O(this,co,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:y,y:g,width:b,height:w}of e){const x=Math.floor((y-t)/a)*a,_=Math.ceil((y+b+t)/a)*a,S=Math.floor((g-t)/a)*a,P=Math.ceil((g+w+t)/a)*a,N=[x,S,P,!0],T=[_,S,P,!1];f(this,fu).push(N,T),we.rectBoundingBox(x,S,_,P,s)}const l=s[2]-s[0]+2*r,c=s[3]-s[1]+2*r,u=s[0]-r,d=s[1]-r,h=f(this,fu).at(i?-1:-2),m=[h[0],h[2]];for(const y of f(this,fu)){const[g,b,w]=y;y[0]=(g-u)/l,y[1]=(b-d)/c,y[2]=(w-d)/c}I(this,ox,new Float32Array([u,d,l,c])),I(this,ax,m)}getOutlines(){f(this,fu).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of f(this,fu))t[3]?(e.push(...D(this,Qr,YR).call(this,t)),D(this,Qr,xX).call(this,t)):(D(this,Qr,_X).call(this,t),e.push(...D(this,Qr,YR).call(this,t)));return D(this,Qr,wX).call(this,e)}}ox=new WeakMap,ax=new WeakMap,fu=new WeakMap,co=new WeakMap,Qr=new WeakSet,wX=function(e){const t=[],r=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const i=[];let s;for(;r.size>0;){const o=r.values().next().value;let[a,l,c,u,d]=o;r.delete(o);let h=a,m=l;for(s=[a,c],i.push(s);;){let y;if(r.has(u))y=u;else if(r.has(d))y=d;else break;r.delete(y),[a,l,c,u,d]=y,h!==a&&(s.push(h,m,a,m===l?l:c),h=a),m=m===l?c:l}s.push(h,m)}return new WSe(i,f(this,ox),f(this,ax))},AA=function(e){const t=f(this,co);let r=0,i=t.length-1;for(;r<=i;){const s=r+i>>1,o=t[s][0];if(o===e)return s;o<e?r=s+1:i=s-1}return i+1},xX=function([,e,t]){const r=D(this,Qr,AA).call(this,e);f(this,co).splice(r,0,[e,t])},_X=function([,e,t]){const r=D(this,Qr,AA).call(this,e);for(let i=r;i<f(this,co).length;i++){const[s,o]=f(this,co)[i];if(s!==e)break;if(s===e&&o===t){f(this,co).splice(i,1);return}}for(let i=r-1;i>=0;i--){const[s,o]=f(this,co)[i];if(s!==e)break;if(s===e&&o===t){f(this,co).splice(i,1);return}}},YR=function(e){const[t,r,i]=e,s=[[t,r,i]],o=D(this,Qr,AA).call(this,i);for(let a=0;a<o;a++){const[l,c]=f(this,co)[a];for(let u=0,d=s.length;u<d;u++){const[,h,m]=s[u];if(!(c<=h||m<=l)){if(h>=l){if(m>c)s[u][1]=c;else{if(d===1)return[];s.splice(u,1),u--,d--}continue}s[u][2]=l,m>c&&s.push([t,c,m])}}}return s};var lx,hg;class WSe extends pe{constructor(t,r,i){super();O(this,lx);O(this,hg);I(this,hg,t),I(this,lx,r),this.lastPoint=i}toSVGPath(){const t=[];for(const r of f(this,hg)){let[i,s]=r;t.push(`M${i} ${s}`);for(let o=2;o<r.length;o+=2){const a=r[o],l=r[o+1];a===i?(t.push(`V${l}`),s=l):l===s&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,r,i,s],o){const a=[],l=i-t,c=s-r;for(const u of f(this,hg)){const d=new Array(u.length);for(let h=0;h<u.length;h+=2)d[h]=t+u[h]*l,d[h+1]=s-u[h+1]*c;a.push(d)}return a}get box(){return f(this,lx)}get classNamesForOutlining(){return["highlightOutline"]}}lx=new WeakMap,hg=new WeakMap;class XR extends QS{newFreeDrawOutline(e,t,r,i,s,o){return new GSe(e,t,r,i,s,o)}}class GSe extends vX{newOutliner(e,t,r,i,s,o=0){return new XR(e,t,r,i,s,o)}}var zi,Qh,fg,Pn,cx,pg,Tl,ux,pu,uo,mg,dx,ht,QR,JR,ZR,Fd,AX,Pc;const li=class li{constructor({editor:e=null,uiManager:t=null}){O(this,ht);O(this,zi,null);O(this,Qh,null);O(this,fg);O(this,Pn,null);O(this,cx,!1);O(this,pg,!1);O(this,Tl,null);O(this,ux);O(this,pu,null);O(this,uo,null);O(this,mg);var r,i;e?(I(this,pg,!1),I(this,mg,Ue.HIGHLIGHT_COLOR),I(this,Tl,e)):(I(this,pg,!0),I(this,mg,Ue.HIGHLIGHT_DEFAULT_COLOR)),I(this,uo,(e==null?void 0:e._uiManager)||t),I(this,ux,f(this,uo)._eventBus),I(this,fg,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((i=f(this,uo))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),f(li,dx)||I(li,dx,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ze(this,"_keyboardManager",new Kx([[["Escape","mac+Escape"],li.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],li.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],li.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],li.prototype._moveToPrevious],[["Home","mac+Home"],li.prototype._moveToBeginning],[["End","mac+End"],li.prototype._moveToEnd]]))}renderButton(){const e=I(this,zi,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",f(this,Tl)&&(e.ariaControls=`${f(this,Tl).id}_colorpicker_dropdown`);const t=f(this,uo)._signal;e.addEventListener("click",D(this,ht,Fd).bind(this),{signal:t}),e.addEventListener("keydown",D(this,ht,ZR).bind(this),{signal:t});const r=I(this,Qh,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=f(this,fg),e.append(r),e}renderMainDropdown(){const e=I(this,Pn,D(this,ht,QR).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===f(this,zi)){D(this,ht,Fd).call(this,e);return}const t=e.target.getAttribute("data-color");t&&D(this,ht,JR).call(this,t,e)}_moveToNext(e){var t,r;if(!f(this,ht,Pc)){D(this,ht,Fd).call(this,e);return}if(e.target===f(this,zi)){(t=f(this,Pn).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=f(this,Pn))==null?void 0:t.firstChild)||e.target===f(this,zi)){f(this,ht,Pc)&&this._hideDropdownFromKeyboard();return}f(this,ht,Pc)||D(this,ht,Fd).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!f(this,ht,Pc)){D(this,ht,Fd).call(this,e);return}(t=f(this,Pn).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!f(this,ht,Pc)){D(this,ht,Fd).call(this,e);return}(t=f(this,Pn).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=f(this,Pn))==null||e.classList.add("hidden"),f(this,zi).ariaExpanded="false",(t=f(this,pu))==null||t.abort(),I(this,pu,null)}_hideDropdownFromKeyboard(){var e;if(!f(this,pg)){if(!f(this,ht,Pc)){(e=f(this,Tl))==null||e.unselect();return}this.hideDropdown(),f(this,zi).focus({preventScroll:!0,focusVisible:f(this,cx)})}}updateColor(e){if(f(this,Qh)&&(f(this,Qh).style.backgroundColor=e),!f(this,Pn))return;const t=f(this,uo).highlightColors.values();for(const r of f(this,Pn).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=f(this,zi))==null||e.remove(),I(this,zi,null),I(this,Qh,null),(t=f(this,Pn))==null||t.remove(),I(this,Pn,null)}};zi=new WeakMap,Qh=new WeakMap,fg=new WeakMap,Pn=new WeakMap,cx=new WeakMap,pg=new WeakMap,Tl=new WeakMap,ux=new WeakMap,pu=new WeakMap,uo=new WeakMap,mg=new WeakMap,dx=new WeakMap,ht=new WeakSet,QR=function(){const e=document.createElement("div"),t=f(this,uo)._signal;e.addEventListener("contextmenu",ko,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),f(this,Tl)&&(e.id=`${f(this,Tl).id}_colorpicker_dropdown`);for(const[r,i]of f(this,uo).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",f(li,dx)[r]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=i,s.ariaSelected=i===f(this,fg),s.addEventListener("click",D(this,ht,JR).bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",D(this,ht,ZR).bind(this),{signal:t}),e},JR=function(e,t){t.stopPropagation(),f(this,ux).dispatch("switchannotationeditorparams",{source:this,type:f(this,mg),value:e})},ZR=function(e){li._keyboardManager.exec(this,e)},Fd=function(e){if(f(this,ht,Pc)){this.hideDropdown();return}if(I(this,cx,e.detail===0),f(this,pu)||(I(this,pu,new AbortController),window.addEventListener("pointerdown",D(this,ht,AX).bind(this),{signal:f(this,uo).combinedSignal(f(this,pu))})),f(this,zi).ariaExpanded="true",f(this,Pn)){f(this,Pn).classList.remove("hidden");return}const t=I(this,Pn,D(this,ht,QR).call(this));f(this,zi).append(t)},AX=function(e){var t;(t=f(this,Pn))!=null&&t.contains(e.target)||this.hideDropdown()},Pc=function(){return f(this,Pn)&&!f(this,Pn).classList.contains("hidden")},O(li,dx,null);let JS=li;var gg,hx,Cl,Jh,fx,di,px,mx,Zh,ws,Ui,Jn,yg,Pl,_r,vg,xs,gx,ke,eN,SA,SX,EX,TX,tN,$d,Is,Ip,CX,EA,Wv,PX,IX,kX,RX,NX;const Je=class Je extends _t{constructor(t){super({...t,name:"highlightEditor"});O(this,ke);O(this,gg,null);O(this,hx,0);O(this,Cl);O(this,Jh,null);O(this,fx,null);O(this,di,null);O(this,px,null);O(this,mx,0);O(this,Zh,null);O(this,ws,null);O(this,Ui,null);O(this,Jn,!1);O(this,yg,null);O(this,Pl);O(this,_r,null);O(this,vg,"");O(this,xs);O(this,gx,"");this.color=t.color||Je._defaultColor,I(this,xs,t.thickness||Je._defaultThickness),I(this,Pl,t.opacity||Je._defaultOpacity),I(this,Cl,t.boxes||null),I(this,gx,t.methodOfCreation||""),I(this,vg,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(I(this,Jn,!0),D(this,ke,SA).call(this,t),D(this,ke,$d).call(this)):f(this,Cl)&&(I(this,gg,t.anchorNode),I(this,hx,t.anchorOffset),I(this,px,t.focusNode),I(this,mx,t.focusOffset),D(this,ke,eN).call(this),D(this,ke,$d).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Je.prototype;return ze(this,"_keyboardManager",new Kx([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:f(this,Jn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:f(this,xs),methodOfCreation:f(this,gx)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var i;_t.initialize(t,r),Je._defaultColor||(Je._defaultColor=((i=r.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case Ue.HIGHLIGHT_DEFAULT_COLOR:Je._defaultColor=r;break;case Ue.HIGHLIGHT_THICKNESS:Je._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return f(this,yg)}updateParams(t,r){switch(t){case Ue.HIGHLIGHT_COLOR:D(this,ke,SX).call(this,r);break;case Ue.HIGHLIGHT_THICKNESS:D(this,ke,EX).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Ue.HIGHLIGHT_DEFAULT_COLOR,Je._defaultColor],[Ue.HIGHLIGHT_THICKNESS,Je._defaultThickness]]}get propertiesToUpdate(){return[[Ue.HIGHLIGHT_COLOR,this.color||Je._defaultColor],[Ue.HIGHLIGHT_THICKNESS,f(this,xs)||Je._defaultThickness],[Ue.HIGHLIGHT_FREE,f(this,Jn)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",I(this,fx,new JS({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(D(this,ke,Wv).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,D(this,ke,Wv).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){D(this,ke,tN).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,ke,$d).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let r=!1;this.parent&&!t?D(this,ke,tN).call(this):t&&(D(this,ke,$d).call(this,t),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var s,o,a;const{drawLayer:r}=this.parent;let i;f(this,Jn)?(t=(t-this.rotation+360)%360,i=D(s=Je,Is,Ip).call(s,f(this,ws).box,t)):i=D(o=Je,Is,Ip).call(o,[this.x,this.y,this.width,this.height],t),r.updateProperties(f(this,Ui),{bbox:i,root:{"data-main-rotation":t}}),r.updateProperties(f(this,_r),{bbox:D(a=Je,Is,Ip).call(a,f(this,di).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();f(this,vg)&&(t.setAttribute("aria-label",f(this,vg)),t.setAttribute("role","mark")),f(this,Jn)?t.classList.add("free"):this.div.addEventListener("keydown",D(this,ke,CX).bind(this),{signal:this._uiManager._signal});const r=I(this,Zh,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=f(this,Jh);const[i,s]=this.parentDimensions;return this.setDims(this.width*i,this.height*s),JK(this,f(this,Zh),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(f(this,_r),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(f(this,_r),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:D(this,ke,EA).call(this,!0);break;case 1:case 3:D(this,ke,EA).call(this,!1);break}}select(){var t;super.select(),f(this,_r)&&((t=this.parent)==null||t.drawLayer.updateProperties(f(this,_r),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),f(this,_r)&&((t=this.parent)==null||t.drawLayer.updateProperties(f(this,_r),{rootClass:{selected:!1}}),f(this,Jn)||D(this,ke,EA).call(this,!1))}get _mustFixPosition(){return!f(this,Jn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(f(this,Ui),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(f(this,_r),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:i,x:s,y:o}){const{x:a,y:l,width:c,height:u}=i.getBoundingClientRect(),d=new AbortController,h=t.combinedSignal(d),m=y=>{d.abort(),D(this,Is,RX).call(this,t,y)};window.addEventListener("blur",m,{signal:h}),window.addEventListener("pointerup",m,{signal:h}),window.addEventListener("pointerdown",gn,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",ko,{signal:h}),i.addEventListener("pointermove",D(this,Is,kX).bind(this,t),{signal:h}),this._freeHighlight=new XR({x:s,y:o},[a,l,c,u],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,i){var g,b,w,x;let s=null;if(t instanceof sX){const{data:{quadPoints:_,rect:S,rotation:P,id:N,color:T,opacity:C,popupRef:k},parent:{page:{pageNumber:M}}}=t;s=t={annotationType:Ce.HIGHLIGHT,color:Array.from(T),opacity:C,quadPoints:_,boxes:null,pageIndex:M-1,rect:S.slice(0),rotation:P,annotationElementId:N,id:N,deleted:!1,popupRef:k}}else if(t instanceof dL){const{data:{inkLists:_,rect:S,rotation:P,id:N,color:T,borderStyle:{rawWidth:C},popupRef:k},parent:{page:{pageNumber:M}}}=t;s=t={annotationType:Ce.HIGHLIGHT,color:Array.from(T),thickness:C,inkLists:_,boxes:null,pageIndex:M-1,rect:S.slice(0),rotation:P,annotationElementId:N,id:N,deleted:!1,popupRef:k}}const{color:o,quadPoints:a,inkLists:l,opacity:c}=t,u=await super.deserialize(t,r,i);u.color=we.makeHexColor(...o),I(u,Pl,c||1),l&&I(u,xs,t.thickness),u._initialData=s;const[d,h]=u.pageDimensions,[m,y]=u.pageTranslation;if(a){const _=I(u,Cl,[]);for(let S=0;S<a.length;S+=8)_.push({x:(a[S]-m)/d,y:1-(a[S+1]-y)/h,width:(a[S+2]-a[S])/d,height:(a[S+1]-a[S+5])/h});D(g=u,ke,eN).call(g),D(b=u,ke,$d).call(b),u.rotate(u.rotation)}else if(l){I(u,Jn,!0);const _=l[0],S={x:_[0]-m,y:h-(_[1]-y)},P=new XR(S,[0,0,d,h],1,f(u,xs)/2,!0,.001);for(let C=0,k=_.length;C<k;C+=2)S.x=_[C]-m,S.y=h-(_[C+1]-y),P.add(S);const{id:N,clipPathId:T}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:P.toSVGPath()}},!0,!0);D(w=u,ke,SA).call(w,{highlightOutlines:P.getOutlines(),highlightId:N,clipPathId:T}),D(x=u,ke,$d).call(x),u.rotate(u.parentRotation)}return u}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=this.getRect(0,0),i=_t._colorManager.convert(this.color),s={annotationType:Ce.HIGHLIGHT,color:i,opacity:f(this,Pl),thickness:f(this,xs),quadPoints:D(this,ke,PX).call(this),outlines:D(this,ke,IX).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:D(this,ke,Wv).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!D(this,ke,NX).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};gg=new WeakMap,hx=new WeakMap,Cl=new WeakMap,Jh=new WeakMap,fx=new WeakMap,di=new WeakMap,px=new WeakMap,mx=new WeakMap,Zh=new WeakMap,ws=new WeakMap,Ui=new WeakMap,Jn=new WeakMap,yg=new WeakMap,Pl=new WeakMap,_r=new WeakMap,vg=new WeakMap,xs=new WeakMap,gx=new WeakMap,ke=new WeakSet,eN=function(){const t=new KR(f(this,Cl),.001);I(this,ws,t.getOutlines()),[this.x,this.y,this.width,this.height]=f(this,ws).box;const r=new KR(f(this,Cl),.0025,.001,this._uiManager.direction==="ltr");I(this,di,r.getOutlines());const{lastPoint:i}=f(this,di);I(this,yg,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},SA=function({highlightOutlines:t,highlightId:r,clipPathId:i}){var d,h;if(I(this,ws,t),I(this,di,t.getNewOutline(f(this,xs)/2+1.5,.0025)),r>=0)I(this,Ui,r),I(this,Jh,i),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),I(this,_r,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:f(this,di).box,path:{d:f(this,di).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(f(this,Ui),{bbox:D(d=Je,Is,Ip).call(d,f(this,ws).box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(f(this,_r),{bbox:D(h=Je,Is,Ip).call(h,f(this,di).box,m),path:{d:f(this,di).toSVGPath()}})}const[o,a,l,c]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[m,y]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*y/m,this.height=c*m/y;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*y/m,this.height=c*m/y;break}}const{lastPoint:u}=f(this,di);I(this,yg,[(u[0]-o)/l,(u[1]-a)/c])},SX=function(t){const r=(o,a)=>{var l,c;this.color=o,I(this,Pl,a),(l=this.parent)==null||l.drawLayer.updateProperties(f(this,Ui),{root:{fill:o,"fill-opacity":a}}),(c=f(this,fx))==null||c.updateColor(o)},i=this.color,s=f(this,Pl);this.addCommands({cmd:r.bind(this,t,Je._defaultOpacity),undo:r.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},EX=function(t){const r=f(this,xs),i=s=>{I(this,xs,s),D(this,ke,TX).call(this,s)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},TX=function(t){if(!f(this,Jn))return;D(this,ke,SA).call(this,{highlightOutlines:f(this,ws).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,i]=this.parentDimensions;this.setDims(this.width*r,this.height*i)},tN=function(){f(this,Ui)===null||!this.parent||(this.parent.drawLayer.remove(f(this,Ui)),I(this,Ui,null),this.parent.drawLayer.remove(f(this,_r)),I(this,_r,null))},$d=function(t=this.parent){f(this,Ui)===null&&({id:Dn(this,Ui)._,clipPathId:Dn(this,Jh)._}=t.drawLayer.draw({bbox:f(this,ws).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":f(this,Pl)},rootClass:{highlight:!0,free:f(this,Jn)},path:{d:f(this,ws).toSVGPath()}},!1,!0),I(this,_r,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:f(this,Jn)},bbox:f(this,di).box,path:{d:f(this,di).toSVGPath()}},f(this,Jn))),f(this,Zh)&&(f(this,Zh).style.clipPath=f(this,Jh)))},Is=new WeakSet,Ip=function([t,r,i,s],o){switch(o){case 90:return[1-r-s,t,s,i];case 180:return[1-t-i,1-r-s,i,s];case 270:return[r,1-t-i,s,i]}return[t,r,i,s]},CX=function(t){Je._keyboardManager.exec(this,t)},EA=function(t){if(!f(this,gg))return;const r=window.getSelection();t?r.setPosition(f(this,gg),f(this,hx)):r.setPosition(f(this,px),f(this,mx))},Wv=function(){return f(this,Jn)?this.rotation:0},PX=function(){if(f(this,Jn))return null;const[t,r]=this.pageDimensions,[i,s]=this.pageTranslation,o=f(this,Cl),a=new Float32Array(o.length*8);let l=0;for(const{x:c,y:u,width:d,height:h}of o){const m=c*t+i,y=(1-u)*r+s;a[l]=a[l+4]=m,a[l+1]=a[l+3]=y,a[l+2]=a[l+6]=m+d*t,a[l+5]=a[l+7]=y-h*r,l+=8}return a},IX=function(t){return f(this,ws).serialize(t,D(this,ke,Wv).call(this))},kX=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},RX=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},NX=function(t){const{color:r}=this._initialData;return t.color.some((i,s)=>i!==r[s])},O(Je,Is),J(Je,"_defaultColor",null),J(Je,"_defaultOpacity",1),J(Je,"_defaultThickness",12),J(Je,"_type","highlight"),J(Je,"_editorType",Ce.HIGHLIGHT),J(Je,"_freeHighlightId",-1),J(Je,"_freeHighlight",null),J(Je,"_freeHighlightClipId","");let ZS=Je;var ef;class OX{constructor(){O(this,ef,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){f(this,ef)[e]=t}toSVGProperties(){const e=f(this,ef);return I(this,ef,Object.create(null)),{root:e}}reset(){I(this,ef,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){ft("Not implemented")}}ef=new WeakMap;var Hi,bg,Fn,tf,nf,mu,gu,yu,rf,qe,nN,rN,iN,Gv,MX,TA,qv,kp;const ye=class ye extends _t{constructor(t){super(t);O(this,qe);O(this,Hi,null);O(this,bg);J(this,"_drawId",null);I(this,bg,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(D(this,qe,nN).call(this,t),D(this,qe,Gv).call(this))}static _mergeSVGProperties(t,r){const i=new Set(Object.keys(t));for(const[s,o]of Object.entries(r))i.has(s)?Object.assign(t[s],o):t[s]=o;return t}static getDefaultDrawingOptions(t){ft("Not implemented")}static get typesMap(){ft("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(f(ye,Fn).updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)t.push([i,r[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[i,s]of this.constructor.typesMap)t.push([i,r[s]]);return t}_updateProperty(t,r,i){const s=this._drawingOptions,o=s[r],a=l=>{var u;s.updateProperty(r,l);const c=f(this,Hi).updateProperty(r,l);c&&D(this,qe,qv).call(this,c),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ye._mergeSVGProperties(f(this,Hi).getPathResizingSVGProperties(D(this,qe,TA).call(this)),{bbox:D(this,qe,kp).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ye._mergeSVGProperties(f(this,Hi).getPathResizedSVGProperties(D(this,qe,TA).call(this)),{bbox:D(this,qe,kp).call(this)}))}_onTranslating(t,r){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:D(this,qe,kp).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ye._mergeSVGProperties(f(this,Hi).getPathTranslatedSVGProperties(D(this,qe,TA).call(this),this.parentDimensions),{bbox:D(this,qe,kp).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,f(this,bg)&&(I(this,bg,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){D(this,qe,iN).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,qe,Gv).call(this),D(this,qe,qv).call(this,f(this,Hi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),D(this,qe,iN).call(this)):t&&(this._uiManager.addShouldRescale(this),D(this,qe,Gv).call(this,t),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ye._mergeSVGProperties({bbox:D(this,qe,kp).call(this)},f(this,Hi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&D(this,qe,qv).call(this,f(this,Hi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),i}static createDrawerInstance(t,r,i,s,o){ft("Not implemented")}static startDrawing(t,r,i,s){var b;const{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:u}=s;if(f(ye,gu)&&f(ye,gu)!==u)return;const{viewport:{rotation:d}}=t,{width:h,height:m}=o.getBoundingClientRect(),y=I(ye,tf,new AbortController),g=t.combinedSignal(y);if(f(ye,mu)||I(ye,mu,c),f(ye,gu)??I(ye,gu,u),window.addEventListener("pointerup",w=>{var x;f(ye,mu)===w.pointerId?this._endDraw(w):(x=f(ye,yu))==null||x.delete(w.pointerId)},{signal:g}),window.addEventListener("pointercancel",w=>{var x;f(ye,mu)===w.pointerId?this._currentParent.endDrawingSession():(x=f(ye,yu))==null||x.delete(w.pointerId)},{signal:g}),window.addEventListener("pointerdown",w=>{f(ye,gu)===w.pointerType&&((f(ye,yu)||I(ye,yu,new Set)).add(w.pointerId),f(ye,Fn).isCancellable()&&(f(ye,Fn).removeLastElement(),f(ye,Fn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",ko,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",w=>{w.timeStamp===f(ye,rf)&&gn(w)},{signal:g}),t.toggleDrawing(),(b=r._editorUndoBar)==null||b.hide(),f(ye,Fn)){t.drawLayer.updateProperties(this._currentDrawId,f(ye,Fn).startNew(a,l,h,m,d));return}r.updateUIForDefaultProperties(this),I(ye,Fn,this.createDrawerInstance(a,l,h,m,d)),I(ye,nf,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(f(ye,nf).toSVGProperties(),f(ye,Fn).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(I(ye,rf,-1),!f(ye,Fn))return;const{offsetX:r,offsetY:i,pointerId:s}=t;if(f(ye,mu)===s){if(((o=f(ye,yu))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,f(ye,Fn).add(r,i)),I(ye,rf,t.timeStamp),gn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,I(ye,Fn,null),I(ye,nf,null),I(ye,gu,null),I(ye,rf,NaN)),f(ye,tf)&&(f(ye,tf).abort(),I(ye,tf,null),I(ye,mu,NaN),I(ye,yu,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,f(ye,Fn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=f(ye,Fn),s=this._currentDrawId,o=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(s,i.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Ue.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Ue.DRAW_STEP),!f(ye,Fn).isEmpty()){const{pageDimensions:[i,s],scale:o}=r,a=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:f(ye,Fn).getOutlines(i*o,s*o,o,this._INNER_MARGIN),drawingOptions:f(ye,nf),mustBeCommitted:!t});return this._cleanup(!0),a}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,i,s,o,a){ft("Not implemented")}static async deserialize(t,r,i){var d,h;const{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}=r.viewport,c=this.deserializeDraw(a,l,s,o,this._INNER_MARGIN,t),u=await super.deserialize(t,r,i);return u.createDrawingOptions(t),D(d=u,qe,nN).call(d,{drawOutlines:c}),D(h=u,qe,Gv).call(h),u.onScaleChanging(),u.rotate(),u}serializeDraw(t){const[r,i]=this.pageTranslation,[s,o]=this.pageDimensions;return f(this,Hi).serialize([r,i,s,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Hi=new WeakMap,bg=new WeakMap,Fn=new WeakMap,tf=new WeakMap,nf=new WeakMap,mu=new WeakMap,gu=new WeakMap,yu=new WeakMap,rf=new WeakMap,qe=new WeakSet,nN=function({drawOutlines:t,drawId:r,drawingOptions:i}){I(this,Hi,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=D(this,qe,rN).call(this,t,this.parent),D(this,qe,qv).call(this,t.box)},rN=function(t,r){const{id:i}=r.drawLayer.draw(ye._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},iN=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Gv=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=D(this,qe,rN).call(this,f(this,Hi),t)}},MX=function([t,r,i,s]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[r,1-t,i*(a/o),s*(o/a)];case 180:return[1-t,1-r,i,s];case 270:return[1-r,t,i*(a/o),s*(o/a)];default:return[t,r,i,s]}},TA=function(){const{x:t,y:r,width:i,height:s,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-r,t,i*(o/a),s*(a/o)];case 180:return[1-t,1-r,i,s];case 270:return[r,1-t,i*(o/a),s*(a/o)];default:return[t,r,i,s]}},qv=function(t){if([this.x,this.y,this.width,this.height]=D(this,qe,MX).call(this,t),this.div){this.fixAndSetPosition();const[r,i]=this.parentDimensions;this.setDims(this.width*r,this.height*i)}this._onResized()},kp=function(){const{x:t,y:r,width:i,height:s,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((o*4+a)/90){case 1:return[1-r-s,t,s,i];case 2:return[1-t-i,1-r-s,i,s];case 3:return[r,1-t-i,s,i];case 4:return[t,r-i*(l/c),s*(c/l),i*(l/c)];case 5:return[1-r,t,i*(l/c),s*(c/l)];case 6:return[1-t-s*(c/l),1-r,s*(c/l),i*(l/c)];case 7:return[r-i*(l/c),1-t-s*(c/l),i*(l/c),s*(c/l)];case 8:return[t-i,r-s,i,s];case 9:return[1-r,t-i,s,i];case 10:return[1-t,1-r,i,s];case 11:return[r-s,1-t,s,i];case 12:return[t-s*(c/l),r,s*(c/l),i*(l/c)];case 13:return[1-r-i*(l/c),t-s*(c/l),i*(l/c),s*(c/l)];case 14:return[1-t,1-r-i*(l/c),s*(c/l),i*(l/c)];case 15:return[r,1-t,i*(l/c),s*(c/l)];default:return[t,r,i,s]}},J(ye,"_currentDrawId",-1),J(ye,"_currentParent",null),O(ye,Fn,null),O(ye,tf,null),O(ye,nf,null),O(ye,mu,NaN),O(ye,gu,null),O(ye,yu,null),O(ye,rf,NaN),J(ye,"_INNER_MARGIN",3);let eE=ye;var la,$n,Vn,sf,wg,$r,Zn,_s,of,af,lf,xg,CA;class qSe{constructor(e,t,r,i,s,o){O(this,xg);O(this,la,new Float64Array(6));O(this,$n);O(this,Vn);O(this,sf);O(this,wg);O(this,$r);O(this,Zn,"");O(this,_s,0);O(this,of,new Xx);O(this,af);O(this,lf);I(this,af,r),I(this,lf,i),I(this,sf,s),I(this,wg,o),[e,t]=D(this,xg,CA).call(this,e,t);const a=I(this,$n,[NaN,NaN,NaN,NaN,e,t]);I(this,$r,[e,t]),I(this,Vn,[{line:a,points:f(this,$r)}]),f(this,la).set(a,0)}updateProperty(e,t){e==="stroke-width"&&I(this,wg,t)}isEmpty(){return!f(this,Vn)||f(this,Vn).length===0}isCancellable(){return f(this,$r).length<=10}add(e,t){[e,t]=D(this,xg,CA).call(this,e,t);const[r,i,s,o]=f(this,la).subarray(2,6),a=e-s,l=t-o;return Math.hypot(f(this,af)*a,f(this,lf)*l)<=2?null:(f(this,$r).push(e,t),isNaN(r)?(f(this,la).set([s,o,e,t],2),f(this,$n).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(f(this,la)[0])&&f(this,$n).splice(6,6),f(this,la).set([r,i,s,o,e,t],0),f(this,$n).push(...pe.createBezierPoints(r,i,s,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(f(this,$r).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,i,s){I(this,af,r),I(this,lf,i),I(this,sf,s),[e,t]=D(this,xg,CA).call(this,e,t);const o=I(this,$n,[NaN,NaN,NaN,NaN,e,t]);I(this,$r,[e,t]);const a=f(this,Vn).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),f(this,Vn).push({line:o,points:f(this,$r)}),f(this,la).set(o,0),I(this,_s,0),this.toSVGPath(),null}getLastElement(){return f(this,Vn).at(-1)}setLastElement(e){return f(this,Vn)?(f(this,Vn).push(e),I(this,$n,e.line),I(this,$r,e.points),I(this,_s,0),{path:{d:this.toSVGPath()}}):f(this,of).setLastElement(e)}removeLastElement(){if(!f(this,Vn))return f(this,of).removeLastElement();f(this,Vn).pop(),I(this,Zn,"");for(let e=0,t=f(this,Vn).length;e<t;e++){const{line:r,points:i}=f(this,Vn)[e];I(this,$n,r),I(this,$r,i),I(this,_s,0),this.toSVGPath()}return{path:{d:f(this,Zn)}}}toSVGPath(){const e=pe.svgRound(f(this,$n)[4]),t=pe.svgRound(f(this,$n)[5]);if(f(this,$r).length===2)return I(this,Zn,`${f(this,Zn)} M ${e} ${t} Z`),f(this,Zn);if(f(this,$r).length<=6){const i=f(this,Zn).lastIndexOf("M");I(this,Zn,`${f(this,Zn).slice(0,i)} M ${e} ${t}`),I(this,_s,6)}if(f(this,$r).length===4){const i=pe.svgRound(f(this,$n)[10]),s=pe.svgRound(f(this,$n)[11]);return I(this,Zn,`${f(this,Zn)} L ${i} ${s}`),I(this,_s,12),f(this,Zn)}const r=[];f(this,_s)===0&&(r.push(`M ${e} ${t}`),I(this,_s,6));for(let i=f(this,_s),s=f(this,$n).length;i<s;i+=6){const[o,a,l,c,u,d]=f(this,$n).slice(i,i+6).map(pe.svgRound);r.push(`C${o} ${a} ${l} ${c} ${u} ${d}`)}return I(this,Zn,f(this,Zn)+r.join(" ")),I(this,_s,f(this,$n).length),f(this,Zn)}getOutlines(e,t,r,i){const s=f(this,Vn).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),f(this,of).build(f(this,Vn),e,t,r,f(this,sf),f(this,wg),i),I(this,la,null),I(this,$n,null),I(this,Vn,null),I(this,Zn,null),f(this,of)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}la=new WeakMap,$n=new WeakMap,Vn=new WeakMap,sf=new WeakMap,wg=new WeakMap,$r=new WeakMap,Zn=new WeakMap,_s=new WeakMap,of=new WeakMap,af=new WeakMap,lf=new WeakMap,xg=new WeakSet,CA=function(e,t){return pe._normalizePoint(e,t,f(this,af),f(this,lf),f(this,sf))};var Vr,yx,vx,Wi,ca,ua,_g,Ag,cf,sr,Qa,DX,LX,jX;class Xx extends pe{constructor(){super(...arguments);O(this,sr);O(this,Vr);O(this,yx,0);O(this,vx);O(this,Wi);O(this,ca);O(this,ua);O(this,_g);O(this,Ag);O(this,cf)}build(t,r,i,s,o,a,l){I(this,ca,r),I(this,ua,i),I(this,_g,s),I(this,Ag,o),I(this,cf,a),I(this,vx,l??0),I(this,Wi,t),D(this,sr,LX).call(this)}get thickness(){return f(this,cf)}setLastElement(t){return f(this,Wi).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return f(this,Wi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of f(this,Wi)){if(t.push(`M${pe.svgRound(r[4])} ${pe.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${pe.svgRound(r[10])} ${pe.svgRound(r[11])}`);continue}for(let i=6,s=r.length;i<s;i+=6){const[o,a,l,c,u,d]=r.subarray(i,i+6).map(pe.svgRound);t.push(`C${o} ${a} ${l} ${c} ${u} ${d}`)}}return t.join("")}serialize([t,r,i,s],o){const a=[],l=[],[c,u,d,h]=D(this,sr,DX).call(this);let m,y,g,b,w,x,_,S,P;switch(f(this,Ag)){case 0:P=pe._rescale,m=t,y=r+s,g=i,b=-s,w=t+c*i,x=r+(1-u-h)*s,_=t+(c+d)*i,S=r+(1-u)*s;break;case 90:P=pe._rescaleAndSwap,m=t,y=r,g=i,b=s,w=t+u*i,x=r+c*s,_=t+(u+h)*i,S=r+(c+d)*s;break;case 180:P=pe._rescale,m=t+i,y=r,g=-i,b=s,w=t+(1-c-d)*i,x=r+u*s,_=t+(1-c)*i,S=r+(u+h)*s;break;case 270:P=pe._rescaleAndSwap,m=t+i,y=r+s,g=-i,b=-s,w=t+(1-u-h)*i,x=r+(1-c-d)*s,_=t+(1-u)*i,S=r+(1-c)*s;break}for(const{line:N,points:T}of f(this,Wi))a.push(P(N,m,y,g,b,o?new Array(N.length):null)),l.push(P(T,m,y,g,b,o?new Array(T.length):null));return{lines:a,points:l,rect:[w,x,_,S]}}static deserialize(t,r,i,s,o,{paths:{lines:a,points:l},rotation:c,thickness:u}){const d=[];let h,m,y,g,b;switch(c){case 0:b=pe._rescale,h=-t/i,m=r/s+1,y=1/i,g=-1/s;break;case 90:b=pe._rescaleAndSwap,h=-r/s,m=-t/i,y=1/s,g=1/i;break;case 180:b=pe._rescale,h=t/i+1,m=-r/s,y=-1/i,g=1/s;break;case 270:b=pe._rescaleAndSwap,h=r/s+1,m=t/i+1,y=-1/s,g=-1/i;break}if(!a){a=[];for(const x of l){const _=x.length;if(_===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(_===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const S=new Float32Array(3*(_-2));a.push(S);let[P,N,T,C]=x.subarray(0,4);S.set([NaN,NaN,NaN,NaN,P,N],0);for(let k=4;k<_;k+=2){const M=x[k],L=x[k+1];S.set(pe.createBezierPoints(P,N,T,C,M,L),(k-2)*3),[P,N,T,C]=[T,C,M,L]}}}for(let x=0,_=a.length;x<_;x++)d.push({line:b(a[x].map(S=>S??NaN),h,m,y,g),points:b(l[x].map(S=>S??NaN),h,m,y,g)});const w=new this.prototype.constructor;return w.build(d,i,s,1,c,u,o),w}get box(){return f(this,Vr)}updateProperty(t,r){return t==="stroke-width"?D(this,sr,jX).call(this,r):null}updateParentDimensions([t,r],i){const[s,o]=D(this,sr,Qa).call(this);I(this,ca,t),I(this,ua,r),I(this,_g,i);const[a,l]=D(this,sr,Qa).call(this),c=a-s,u=l-o,d=f(this,Vr);return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateRotation(t){return I(this,yx,t),{path:{transform:this.rotationTransform}}}get viewBox(){return f(this,Vr).map(pe.svgRound).join(" ")}get defaultProperties(){const[t,r]=f(this,Vr);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${pe.svgRound(t)} ${pe.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=f(this,Vr);let i=0,s=0,o=0,a=0,l=0,c=0;switch(f(this,yx)){case 90:s=r/t,o=-t/r,l=t;break;case 180:i=-1,a=-1,l=t,c=r;break;case 270:s=-r/t,o=t/r,c=r;break;default:return""}return`matrix(${i} ${s} ${o} ${a} ${pe.svgRound(l)} ${pe.svgRound(c)})`}getPathResizingSVGProperties([t,r,i,s]){const[o,a]=D(this,sr,Qa).call(this),[l,c,u,d]=f(this,Vr);if(Math.abs(u-o)<=pe.PRECISION||Math.abs(d-a)<=pe.PRECISION){const b=t+i/2-(l+u/2),w=r+s/2-(c+d/2);return{path:{"transform-origin":`${pe.svgRound(t)} ${pe.svgRound(r)}`,transform:`${this.rotationTransform} translate(${b} ${w})`}}}const h=(i-2*o)/(u-2*o),m=(s-2*a)/(d-2*a),y=u/i,g=d/s;return{path:{"transform-origin":`${pe.svgRound(l)} ${pe.svgRound(c)}`,transform:`${this.rotationTransform} scale(${y} ${g}) translate(${pe.svgRound(o)} ${pe.svgRound(a)}) scale(${h} ${m}) translate(${pe.svgRound(-o)} ${pe.svgRound(-a)})`}}}getPathResizedSVGProperties([t,r,i,s]){const[o,a]=D(this,sr,Qa).call(this),l=f(this,Vr),[c,u,d,h]=l;if(l[0]=t,l[1]=r,l[2]=i,l[3]=s,Math.abs(d-o)<=pe.PRECISION||Math.abs(h-a)<=pe.PRECISION){const w=t+i/2-(c+d/2),x=r+s/2-(u+h/2);for(const{line:_,points:S}of f(this,Wi))pe._translate(_,w,x,_),pe._translate(S,w,x,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${pe.svgRound(t)} ${pe.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(i-2*o)/(d-2*o),y=(s-2*a)/(h-2*a),g=-m*(c+o)+t+o,b=-y*(u+a)+r+a;if(m!==1||y!==1||g!==0||b!==0)for(const{line:w,points:x}of f(this,Wi))pe._rescale(w,g,b,m,y,w),pe._rescale(x,g,b,m,y,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${pe.svgRound(t)} ${pe.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],i){const[s,o]=i,a=f(this,Vr),l=t-a[0],c=r-a[1];if(f(this,ca)===s&&f(this,ua)===o)for(const{line:u,points:d}of f(this,Wi))pe._translate(u,l,c,u),pe._translate(d,l,c,d);else{const u=f(this,ca)/s,d=f(this,ua)/o;I(this,ca,s),I(this,ua,o);for(const{line:h,points:m}of f(this,Wi))pe._rescale(h,l,c,u,d,h),pe._rescale(m,l,c,u,d,m);a[2]*=u,a[3]*=d}return a[0]=t,a[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${pe.svgRound(t)} ${pe.svgRound(r)}`}}}get defaultSVGProperties(){const t=f(this,Vr);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${pe.svgRound(t[0])} ${pe.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Vr=new WeakMap,yx=new WeakMap,vx=new WeakMap,Wi=new WeakMap,ca=new WeakMap,ua=new WeakMap,_g=new WeakMap,Ag=new WeakMap,cf=new WeakMap,sr=new WeakSet,Qa=function(t=f(this,cf)){const r=f(this,vx)+t/2*f(this,_g);return f(this,Ag)%180===0?[r/f(this,ca),r/f(this,ua)]:[r/f(this,ua),r/f(this,ca)]},DX=function(){const[t,r,i,s]=f(this,Vr),[o,a]=D(this,sr,Qa).call(this,0);return[t+o,r+a,i-2*o,s-2*a]},LX=function(){const t=I(this,Vr,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of f(this,Wi)){if(s.length<=12){for(let l=4,c=s.length;l<c;l+=6)we.pointBoundingBox(s[l],s[l+1],t);continue}let o=s[4],a=s[5];for(let l=6,c=s.length;l<c;l+=6){const[u,d,h,m,y,g]=s.subarray(l,l+6);we.bezierBoundingBox(o,a,u,d,h,m,y,g,t),o=y,a=g}}const[r,i]=D(this,sr,Qa).call(this);t[0]=Ur(t[0]-r,0,1),t[1]=Ur(t[1]-i,0,1),t[2]=Ur(t[2]+r,0,1),t[3]=Ur(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},jX=function(t){const[r,i]=D(this,sr,Qa).call(this);I(this,cf,t);const[s,o]=D(this,sr,Qa).call(this),[a,l]=[s-r,o-i],c=f(this,Vr);return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c};class pC extends OX{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:_t._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new pC(this._viewParameters);return e.updateAll(this),e}}var qE,FX;const Xp=class Xp extends eE{constructor(t){super({...t,name:"inkEditor"});O(this,qE);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){_t.initialize(t,r),this._defaultDrawingOptions=new pC(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return ze(this,"typesMap",new Map([[Ue.INK_THICKNESS,"stroke-width"],[Ue.INK_COLOR,"stroke"],[Ue.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,i,s,o){return new qSe(t,r,i,s,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,i,s,o,a){return Xx.deserialize(t,r,i,s,o,a)}static async deserialize(t,r,i){let s=null;if(t instanceof dL){const{data:{inkLists:a,rect:l,rotation:c,id:u,color:d,opacity:h,borderStyle:{rawWidth:m},popupRef:y},parent:{page:{pageNumber:g}}}=t;s=t={annotationType:Ce.INK,color:Array.from(d),thickness:m,opacity:h,paths:{points:a},boxes:null,pageIndex:g-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:y}}const o=await super.deserialize(t,r,i);return o._initialData=s,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:i}=this;r.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:i}){this._drawingOptions=Xp.getDefaultDrawingOptions({stroke:we.makeHexColor(...t),"stroke-width":r,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:i,rect:s}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":l}}=this,c={annotationType:Ce.INK,color:_t._colorManager.convert(o),opacity:a,thickness:l,paths:{lines:r,points:i},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(c.isCopy=!0,c):this.annotationElementId&&!D(this,qE,FX).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const{points:r,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:r}),null}};qE=new WeakSet,FX=function(t){const{color:r,thickness:i,opacity:s,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((a,l)=>a!==r[l])||t.thickness!==i||t.opacity!==s||t.pageIndex!==o},J(Xp,"_type","ink"),J(Xp,"_editorType",Ce.INK),J(Xp,"_defaultDrawingOptions",null);let sN=Xp;class oN extends Xx{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const m1=8,cv=3;var uf,rt,aN,ho,$X,VX,lN,PA,BX,zX,UX,cN,uN,HX;class Ml{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:i},s,o,a,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const d=200,h=u.font=`${r} ${i} ${d}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:y,actualBoundingBoxAscent:g,actualBoundingBoxDescent:b,fontBoundingBoxAscent:w,fontBoundingBoxDescent:x,width:_}=u.measureText(e),S=1.5,P=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||0,_)*S),N=Math.ceil(Math.max(Math.abs(g)+Math.abs(b)||d,Math.abs(w)+Math.abs(x)||d)*S);c=new OffscreenCanvas(P,N),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=h,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,P,N),u.fillStyle="black",u.fillText(e,P*(S-1)/2,N*(3-S)/2);const T=D(this,rt,cN).call(this,u.getImageData(0,0,P,N).data),C=D(this,rt,UX).call(this,T),k=D(this,rt,uN).call(this,C),M=D(this,rt,lN).call(this,T,P,N,k);return this.processDrawnLines({lines:{curves:M,width:P,height:N},pageWidth:s,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,r,i,s){const[o,a,l]=D(this,rt,HX).call(this,e),[c,u]=D(this,rt,zX).call(this,o,a,l,Math.hypot(a,l)*f(this,uf).sigmaSFactor,f(this,uf).sigmaR,f(this,uf).kernelSize),d=D(this,rt,uN).call(this,u),h=D(this,rt,lN).call(this,c,a,l,d);return this.processDrawnLines({lines:{curves:h,width:a,height:l},pageWidth:t,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:o,areContours:a}){i%180!==0&&([t,r]=[r,t]);const{curves:l,width:c,height:u}=e,d=e.thickness??0,h=[],m=Math.min(t/c,r/u),y=m/t,g=m/r,b=[];for(const{points:x}of l){const _=o?D(this,rt,BX).call(this,x):x;if(!_)continue;b.push(_);const S=_.length,P=new Float32Array(S),N=new Float32Array(3*(S===2?2:S-2));if(h.push({line:N,points:P}),S===2){P[0]=_[0]*y,P[1]=_[1]*g,N.set([NaN,NaN,NaN,NaN,P[0],P[1]],0);continue}let[T,C,k,M]=_;T*=y,C*=g,k*=y,M*=g,P.set([T,C,k,M],0),N.set([NaN,NaN,NaN,NaN,T,C],0);for(let L=4;L<S;L+=2){const F=P[L]=_[L]*y,j=P[L+1]=_[L+1]*g;N.set(pe.createBezierPoints(T,C,k,M,F,j),(L-2)*3),[T,C,k,M]=[k,M,F,j]}}if(h.length===0)return null;const w=a?new oN:new Xx;return w.build(h,t,r,1,i,a?0:d,s),{outline:w,newCurves:b,areContours:a,thickness:d,width:c,height:u}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:i,height:s}){let o=1/0,a=-1/0,l=0;for(const _ of e){l+=_.length;for(let S=2,P=_.length;S<P;S++){const N=_[S]-_[S-2];o=Math.min(o,N),a=Math.max(a,N)}}let c;o>=-128&&a<=127?c=Int8Array:o>=-32768&&a<=32767?c=Int16Array:c=Int32Array;const u=e.length,d=m1+cv*u,h=new Uint32Array(d);let m=0;h[m++]=d*Uint32Array.BYTES_PER_ELEMENT+(l-2*u)*c.BYTES_PER_ELEMENT,h[m++]=0,h[m++]=i,h[m++]=s,h[m++]=t?0:1,h[m++]=Math.max(0,Math.floor(r??0)),h[m++]=u,h[m++]=c.BYTES_PER_ELEMENT;for(const _ of e)h[m++]=_.length-2,h[m++]=_[0],h[m++]=_[1];const y=new CompressionStream("deflate-raw"),g=y.writable.getWriter();await g.ready,g.write(h);const b=c.prototype.constructor;for(const _ of e){const S=new b(_.length-2);for(let P=2,N=_.length;P<N;P++)S[P-2]=_[P]-_[P-2];g.write(S)}g.close();const w=await new Response(y.readable).arrayBuffer(),x=new Uint8Array(w);return WK(x)}static async decompressSignature(e){try{const t=gAe(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),s=i.getWriter();await s.ready,s.write(t).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let o=null,a=0;for await(const _ of r)o||(o=new Uint8Array(new Uint32Array(_.buffer,0,4)[0])),o.set(_,a),a+=_.length;const l=new Uint32Array(o.buffer,0,o.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const u=l[2],d=l[3],h=l[4]===0,m=l[5],y=l[6],g=l[7],b=[],w=(m1+cv*y)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(g){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(o.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(o.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(o.buffer,w);break}a=0;for(let _=0;_<y;_++){const S=l[cv*_+m1],P=new Float32Array(S+2);b.push(P);for(let N=0;N<cv-1;N++)P[N]=l[cv*_+m1+N+1];for(let N=0;N<S;N++)P[N+2]=P[N]+x[a++]}return{areContours:h,thickness:m,outlines:b,width:u,height:d}}catch(t){return Pe(`decompressSignature: ${t}`),null}}}uf=new WeakMap,rt=new WeakSet,aN=function(e,t,r,i){return r-=e,i-=t,r===0?i>0?0:4:r===1?i+6:2-i},ho=new WeakMap,$X=function(e,t,r,i,s,o,a){const l=D(this,rt,aN).call(this,r,i,s,o);for(let c=0;c<8;c++){const u=(-c+l-a+16)%8,d=f(this,ho)[2*u],h=f(this,ho)[2*u+1];if(e[(r+d)*t+(i+h)]!==0)return u}return-1},VX=function(e,t,r,i,s,o,a){const l=D(this,rt,aN).call(this,r,i,s,o);for(let c=0;c<8;c++){const u=(c+l+a+16)%8,d=f(this,ho)[2*u],h=f(this,ho)[2*u+1];if(e[(r+d)*t+(i+h)]!==0)return u}return-1},lN=function(e,t,r,i){const s=e.length,o=new Int32Array(s);for(let u=0;u<s;u++)o[u]=e[u]<=i?1:0;for(let u=1;u<r-1;u++)o[u*t]=o[u*t+t-1]=0;for(let u=0;u<t;u++)o[u]=o[t*r-1-u]=0;let a=1,l;const c=[];for(let u=1;u<r-1;u++){l=1;for(let d=1;d<t-1;d++){const h=u*t+d,m=o[h];if(m===0)continue;let y=u,g=d;if(m===1&&o[h-1]===0)a+=1,g-=1;else if(m>=1&&o[h+1]===0)a+=1,g+=1,m>1&&(l=m);else{m!==1&&(l=Math.abs(m));continue}const b=[d,u],w=g===d+1,x={isHole:w,points:b,id:a,parent:0};c.push(x);let _;for(const L of c)if(L.id===l){_=L;break}_?_.isHole?x.parent=w?_.parent:l:x.parent=w?l:_.parent:x.parent=w?l:0;const S=D(this,rt,$X).call(this,o,t,u,d,y,g,0);if(S===-1){o[h]=-a,o[h]!==1&&(l=Math.abs(o[h]));continue}let P=f(this,ho)[2*S],N=f(this,ho)[2*S+1];const T=u+P,C=d+N;y=T,g=C;let k=u,M=d;for(;;){const L=D(this,rt,VX).call(this,o,t,k,M,y,g,1);P=f(this,ho)[2*L],N=f(this,ho)[2*L+1];const F=k+P,j=M+N;b.push(j,F);const q=k*t+M;if(o[q+1]===0?o[q]=-a:o[q]===1&&(o[q]=a),F===u&&j===d&&k===T&&M===C){o[h]!==1&&(l=Math.abs(o[h]));break}else y=k,g=M,k=F,M=j}}}return c},PA=function(e,t,r,i){if(r-t<=4){for(let T=t;T<r-2;T+=2)i.push(e[T],e[T+1]);return}const s=e[t],o=e[t+1],a=e[r-4]-s,l=e[r-3]-o,c=Math.hypot(a,l),u=a/c,d=l/c,h=u*o-d*s,m=l/a,y=1/c,g=Math.atan(m),b=Math.cos(g),w=Math.sin(g),x=y*(Math.abs(b)+Math.abs(w)),_=y*(1-x+x**2),S=Math.max(Math.atan(Math.abs(w+b)*_),Math.atan(Math.abs(w-b)*_));let P=0,N=t;for(let T=t+2;T<r-2;T+=2){const C=Math.abs(h-u*e[T+1]+d*e[T]);C>P&&(N=T,P=C)}P>(c*S)**2?(D(this,rt,PA).call(this,e,t,N+2,i),D(this,rt,PA).call(this,e,N,r,i)):i.push(s,o)},BX=function(e){const t=[],r=e.length;return D(this,rt,PA).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},zX=function(e,t,r,i,s,o){const a=new Float32Array(o**2),l=-2*i**2,c=o>>1;for(let g=0;g<o;g++){const b=(g-c)**2;for(let w=0;w<o;w++)a[g*o+w]=Math.exp((b+(w-c)**2)/l)}const u=new Float32Array(256),d=-2*s**2;for(let g=0;g<256;g++)u[g]=Math.exp(g**2/d);const h=e.length,m=new Uint8Array(h),y=new Uint32Array(256);for(let g=0;g<r;g++)for(let b=0;b<t;b++){const w=g*t+b,x=e[w];let _=0,S=0;for(let N=0;N<o;N++){const T=g+N-c;if(!(T<0||T>=r))for(let C=0;C<o;C++){const k=b+C-c;if(k<0||k>=t)continue;const M=e[T*t+k],L=a[N*o+C]*u[Math.abs(M-x)];_+=M*L,S+=L}}const P=m[w]=Math.round(_/S);y[P]++}return[m,y]},UX=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},cN=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let i=-1/0,s=1/0;for(let a=0,l=r.length;a<l;a++){if(e[(a<<2)+3]===0){i=r[a]=255;continue}const u=r[a]=e[a<<2];u>i&&(i=u),u<s&&(s=u)}const o=255/(i-s);for(let a=0;a<t;a++)r[a]=(r[a]-s)*o;return r},uN=function(e){let t,r=-1/0,i=-1/0;const s=e.findIndex(l=>l!==0);let o=s,a=s;for(t=s;t<256;t++){const l=e[t];l>r&&(t-o>i&&(i=t-o,a=t-1),r=l,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},HX=function(e){const t=e,{width:r,height:i}=e,{maxDim:s}=f(this,uf);let o=r,a=i;if(r>s||i>s){let h=r,m=i,y=Math.log2(Math.max(r,i)/s);const g=Math.floor(y);y=y===g?g-1:g;for(let w=0;w<y;w++){o=Math.ceil(h/2),a=Math.ceil(m/2);const x=new OffscreenCanvas(o,a);x.getContext("2d").drawImage(e,0,0,h,m,0,0,o,a),h=o,m=a,e!==t&&e.close(),e=x.transferToImageBitmap()}const b=Math.min(s/o,s/a);o=Math.round(o*b),a=Math.round(a*b)}const c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,o,a);const u=c.getImageData(0,0,o,a).data;return[D(this,rt,cN).call(this,u),o,a]},O(Ml,rt),O(Ml,uf,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),O(Ml,ho,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class hL extends OX{constructor(){super(),super.updateProperties({fill:_t._defaultLineColor,"stroke-width":0})}clone(){const e=new hL;return e.updateAll(this),e}}class fL extends pC{constructor(e){super(e),super.updateProperties({stroke:_t._defaultLineColor,"stroke-width":1})}clone(){const e=new fL(this._viewParameters);return e.updateAll(this),e}}var vu,da,bu,df;const Ni=class Ni extends eE{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});O(this,vu,!1);O(this,da,null);O(this,bu,null);O(this,df,null);this._willKeepAspectRatio=!0,I(this,bu,t.signatureData||null),I(this,da,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){_t.initialize(t,r),this._defaultDrawingOptions=new hL,this._defaultDrawnSignatureOptions=new fL(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return ze(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!f(this,da)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(f(this,bu)){const{lines:s,mustSmooth:o,areContours:a,description:l,uuid:c,heightInPage:u}=f(this,bu),{rawDims:{pageWidth:d,pageHeight:h},rotation:m}=this.parent.viewport,y=Ml.processDrawnLines({lines:s,pageWidth:d,pageHeight:h,rotation:m,innerMargin:Ni._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(y,u,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return i&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){I(this,df,t),this.addEditToolbar()}getUuid(){return f(this,df)}get description(){return f(this,da)}set description(t){I(this,da,t),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:i,width:s,height:o}=f(this,bu),a=Math.max(s,o),l=Ml.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:i,width:s,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,i,s){const{x:o,y:a}=this,{outline:l}=I(this,bu,t);I(this,vu,l instanceof oN),this.description=i,this.div.setAttribute("data-l10n-args",JSON.stringify({description:i}));let c;f(this,vu)?c=Ni.getDefaultDrawingOptions():(c=Ni._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[u,d]=this.parentDimensions,[,h]=this.pageDimensions;let m=r/h;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(u*this.width,d*this.height),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return Ml.process(t,r,i,s,Ni._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:i,pageHeight:s},rotation:o}=this.parent.viewport;return Ml.extractContoursFromText(t,r,i,s,o,Ni._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return Ml.processDrawnLines({lines:t,pageWidth:r,pageHeight:i,rotation:s,innerMargin:Ni._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=Ni.getDefaultDrawingOptions():(this._drawingOptions=Ni._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:i,rect:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,a={annotationType:Ce.SIGNATURE,isSignature:!0,areContours:f(this,vu),color:[0,0,0],thickness:f(this,vu)?0:o,pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(a.paths={lines:r,points:i},a.uuid=f(this,df),a.isCopy=!0):a.lines=r,f(this,da)&&(a.accessibilityData={type:"Figure",alt:f(this,da)}),a}static deserializeDraw(t,r,i,s,o,a){return a.areContours?oN.deserialize(t,r,i,s,o,a):Xx.deserialize(t,r,i,s,o,a)}static async deserialize(t,r,i){var o;const s=await super.deserialize(t,r,i);return I(s,vu,t.areContours),I(s,da,((o=t.accessibilityData)==null?void 0:o.alt)||""),I(s,df,t.uuid),s}};vu=new WeakMap,da=new WeakMap,bu=new WeakMap,df=new WeakMap,J(Ni,"_type","signature"),J(Ni,"_editorType",Ce.SIGNATURE),J(Ni,"_defaultDrawingOptions",null);let dN=Ni;var Lt,Bn,wu,Il,xu,Sg,kl,hf,ha,Gi,Eg,Ke,Kv,Yv,IA,kA,RA,fN,NA,WX;class hN extends _t{constructor(t){super({...t,name:"stampEditor"});O(this,Ke);O(this,Lt,null);O(this,Bn,null);O(this,wu,null);O(this,Il,null);O(this,xu,null);O(this,Sg,"");O(this,kl,null);O(this,hf,!1);O(this,ha,null);O(this,Gi,!1);O(this,Eg,!1);I(this,Il,t.bitmapUrl),I(this,xu,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){_t.initialize(t,r)}static isHandlingMimeForPasting(t){return sR.includes(t)}static paste(t,r){r.pasteEditor({mode:Ce.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:s,width:o,height:a,channels:s.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),r&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t;f(this,Bn)&&(I(this,Lt,null),this._uiManager.imageManager.deleteId(f(this,Bn)),(t=f(this,kl))==null||t.remove(),I(this,kl,null),f(this,ha)&&(clearTimeout(f(this,ha)),I(this,ha,null))),super.remove()}rebuild(){if(!this.parent){f(this,Bn)&&D(this,Ke,IA).call(this);return}super.rebuild(),this.div!==null&&(f(this,Bn)&&f(this,kl)===null&&D(this,Ke,IA).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(f(this,wu)||f(this,Lt)||f(this,Il)||f(this,xu)||f(this,Bn)||f(this,hf))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),f(this,hf)||(f(this,Lt)?D(this,Ke,kA).call(this):D(this,Ke,IA).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(I(this,Bn,i),s&&I(this,Lt,s),I(this,hf,!1),D(this,Ke,kA).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;f(this,ha)!==null&&clearTimeout(f(this,ha)),I(this,ha,setTimeout(()=>{I(this,ha,null),D(this,Ke,fN).call(this)},200))}copyCanvas(t,r,i=!1){var m;t||(t=224);const{width:s,height:o}=f(this,Lt),a=new Ma;let l=f(this,Lt),c=s,u=o,d=null;if(r){if(s>r||o>r){const C=Math.min(r/s,r/o);c=Math.floor(s*C),u=Math.floor(o*C)}d=document.createElement("canvas");const y=d.width=Math.ceil(c*a.sx),g=d.height=Math.ceil(u*a.sy);f(this,Gi)||(l=D(this,Ke,RA).call(this,y,g));const b=d.getContext("2d");b.filter=this._uiManager.hcmFilter;let w="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":(m=window.matchMedia)!=null&&m.call(window,"(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",x="#42414d");const _=15,S=_*a.sx,P=_*a.sy,N=new OffscreenCanvas(S*2,P*2),T=N.getContext("2d");T.fillStyle=w,T.fillRect(0,0,S*2,P*2),T.fillStyle=x,T.fillRect(0,0,S,P),T.fillRect(S,P,S,P),b.fillStyle=b.createPattern(N,"repeat"),b.fillRect(0,0,y,g),b.drawImage(l,0,0,l.width,l.height,0,0,y,g)}let h=null;if(i){let y,g;if(a.symmetric&&l.width<t&&l.height<t)y=l.width,g=l.height;else if(l=f(this,Lt),s>t||o>t){const x=Math.min(t/s,t/o);y=Math.floor(s*x),g=Math.floor(o*x),f(this,Gi)||(l=D(this,Ke,RA).call(this,y,g))}const w=new OffscreenCanvas(y,g).getContext("2d",{willReadFrequently:!0});w.drawImage(l,0,0,l.width,l.height,0,0,y,g),h={width:y,height:g,data:w.getImageData(0,0,y,g).data}}return{canvas:d,width:c,height:u,imageData:h}}static async deserialize(t,r,i){var b;let s=null,o=!1;if(t instanceof oX){const{data:{rect:w,rotation:x,id:_,structParent:S,popupRef:P},container:N,parent:{page:{pageNumber:T}},canvas:C}=t;let k,M;C?(delete t.canvas,{id:k,bitmap:M}=i.imageManager.getFromCanvas(N.id,C),C.remove()):(o=!0,t._hasNoCanvas=!0);const L=((b=await r._structTree.getAriaAttributes(`${rL}${_}`))==null?void 0:b.get("aria-label"))||"";s=t={annotationType:Ce.STAMP,bitmapId:k,bitmap:M,pageIndex:T-1,rect:w.slice(0),rotation:x,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:L},isSvg:!1,structParent:S,popupRef:P}}const a=await super.deserialize(t,r,i),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:d,isSvg:h,accessibilityData:m}=t;o?(i.addMissingCanvas(t.id,a),I(a,hf,!0)):d&&i.imageManager.isValidId(d)?(I(a,Bn,d),c&&I(a,Lt,c)):I(a,Il,u),I(a,Gi,h);const[y,g]=a.pageDimensions;return a.width=(l[2]-l[0])/y,a.height=(l[3]-l[1])/g,m&&(a.altTextData=m),a._initialData=s,I(a,Eg,!!s),a}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:Ce.STAMP,bitmapId:f(this,Bn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:f(this,Gi),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=D(this,Ke,NA).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:o}=this.serializeAltText(!1);if(!s&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=D(this,Ke,WX).call(this,i);if(l.isSame)return null;l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,r===null)return i;r.stamps||(r.stamps=new Map);const a=f(this,Gi)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(f(this,Bn)))r.stamps.set(f(this,Bn),{area:a,serialized:i}),i.bitmap=D(this,Ke,NA).call(this,!1);else if(f(this,Gi)){const l=r.stamps.get(f(this,Bn));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=D(this,Ke,NA).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}Lt=new WeakMap,Bn=new WeakMap,wu=new WeakMap,Il=new WeakMap,xu=new WeakMap,Sg=new WeakMap,kl=new WeakMap,hf=new WeakMap,ha=new WeakMap,Gi=new WeakMap,Eg=new WeakMap,Ke=new WeakSet,Kv=function(t,r=!1){if(!t){this.remove();return}I(this,Lt,t.bitmap),r||(I(this,Bn,t.id),I(this,Gi,t.isSvg)),t.file&&I(this,Sg,t.file.name),D(this,Ke,kA).call(this)},Yv=function(){if(I(this,wu,null),this._uiManager.enableWaiting(!1),!!f(this,kl)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,Lt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,Lt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},IA=function(){if(f(this,Bn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(f(this,Bn)).then(i=>D(this,Ke,Kv).call(this,i,!0)).finally(()=>D(this,Ke,Yv).call(this));return}if(f(this,Il)){const i=f(this,Il);I(this,Il,null),this._uiManager.enableWaiting(!0),I(this,wu,this._uiManager.imageManager.getFromUrl(i).then(s=>D(this,Ke,Kv).call(this,s)).finally(()=>D(this,Ke,Yv).call(this)));return}if(f(this,xu)){const i=f(this,xu);I(this,xu,null),this._uiManager.enableWaiting(!0),I(this,wu,this._uiManager.imageManager.getFromFile(i).then(s=>D(this,Ke,Kv).call(this,s)).finally(()=>D(this,Ke,Yv).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=sR.join(",");const r=this._uiManager._signal;I(this,wu,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),D(this,Ke,Kv).call(this,s)}i()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>D(this,Ke,Yv).call(this))),t.click()},kA=function(){var d;const{div:t}=this;let{width:r,height:i}=f(this,Lt);const[s,o]=this.pageDimensions,a=.75;if(this.width)r=this.width*s,i=this.height*o;else if(r>a*s||i>a*o){const h=Math.min(a*s/r,a*o/i);r*=h,i*=h}const[l,c]=this.parentDimensions;this.setDims(r*l/s,i*c/o),this._uiManager.enableWaiting(!1);const u=I(this,kl,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=r/s,this.height=i/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),D(this,Ke,fN).call(this),f(this,Eg)||(this.parent.addUndoableEditor(this),I(this,Eg,!0)),this._reportTelemetry({action:"inserted_image"}),f(this,Sg)&&this.div.setAttribute("aria-description",f(this,Sg)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},RA=function(t,r){const{width:i,height:s}=f(this,Lt);let o=i,a=s,l=f(this,Lt);for(;o>2*t||a>2*r;){const c=o,u=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(l,0,0,c,u,0,0,o,a),l=d.transferToImageBitmap()}return l},fN=function(){const[t,r]=this.parentDimensions,{width:i,height:s}=this,o=new Ma,a=Math.ceil(i*t*o.sx),l=Math.ceil(s*r*o.sy),c=f(this,kl);if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const u=f(this,Gi)?f(this,Lt):D(this,Ke,RA).call(this,a,l),d=c.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(u,0,0,u.width,u.height,0,0,a,l)},NA=function(t){if(t){if(f(this,Gi)){const s=this._uiManager.imageManager.getSvgUrl(f(this,Bn));if(s)return s}const r=document.createElement("canvas");return{width:r.width,height:r.height}=f(this,Lt),r.getContext("2d").drawImage(f(this,Lt),0,0),r.toDataURL()}if(f(this,Gi)){const[r,i]=this.pageDimensions,s=Math.round(this.width*r*ud.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*ud.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,o);return a.getContext("2d").drawImage(f(this,Lt),0,0,f(this,Lt).width,f(this,Lt).height,0,0,s,o),a.transferToImageBitmap()}return structuredClone(f(this,Lt))},WX=function(t){var a;const{pageIndex:r,accessibilityData:{altText:i}}=this._initialData,s=t.pageIndex===r,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&o,isSameAltText:o}},J(hN,"_type","stamp"),J(hN,"_editorType",Ce.STAMP);var ff,Tg,fa,_u,Rl,qi,Au,Cg,pf,fo,Nl,zn,Ol,Su,Pg,be,Eu,jt,GX,Ho,mN,gN,OA;const Js=class Js{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:s,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:u}){O(this,jt);O(this,ff);O(this,Tg,!1);O(this,fa,null);O(this,_u,null);O(this,Rl,null);O(this,qi,new Map);O(this,Au,!1);O(this,Cg,!1);O(this,pf,!1);O(this,fo,null);O(this,Nl,null);O(this,zn,null);O(this,Ol,null);O(this,Su,null);O(this,Pg,-1);O(this,be);const d=[...f(Js,Eu).values()];if(!Js._initialized){Js._initialized=!0;for(const h of d)h.initialize(u,e)}e.registerEditorTypes(d),I(this,be,e),this.pageIndex=t,this.div=r,I(this,ff,s),I(this,fa,o),this.viewport=c,I(this,zn,l),this.drawLayer=a,this._structTree=i,f(this,be).addLayer(this)}get isEmpty(){return f(this,qi).size===0}get isInvisible(){return this.isEmpty&&f(this,be).getMode()===Ce.NONE}updateToolbar(e){f(this,be).updateToolbar(e)}updateMode(e=f(this,be).getMode()){switch(D(this,jt,OA).call(this),e){case Ce.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ce.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ce.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of f(Js,Eu).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=f(this,zn))==null?void 0:t.div)}setEditingState(e){f(this,be).setEditingState(e)}addCommands(e){f(this,be).addCommands(e)}cleanUndoStack(e){f(this,be).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=f(this,fa))==null||t.div.classList.toggle("disabled",!e)}async enable(){var r;I(this,pf,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(r=f(this,Su))==null||r.abort(),I(this,Su,null);const e=new Set;for(const i of f(this,qi).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(f(this,be).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!f(this,fa)){I(this,pf,!1);return}const t=f(this,fa).getEditableAnnotations();for(const i of t){if(i.hide(),f(this,be).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}I(this,pf,!1)}disable(){var i;if(I(this,Cg,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),f(this,zn)&&!f(this,Su)){I(this,Su,new AbortController);const s=f(this,be).combinedSignal(f(this,Su));f(this,zn).div.addEventListener("pointerdown",o=>{const{clientX:l,clientY:c,timeStamp:u}=o,d=f(this,Pg);if(u-d>500){I(this,Pg,u);return}I(this,Pg,-1);const{classList:h}=this.div;h.toggle("getElements",!0);const m=document.elementsFromPoint(l,c);if(h.toggle("getElements",!1),!this.div.contains(m[0]))return;let y;const g=new RegExp(`^${VK}[0-9]+$`);for(const w of m)if(g.test(w.id)){y=w.id;break}if(!y)return;const b=f(this,qi).get(y);(b==null?void 0:b.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),b.dblclick())},{signal:s,capture:!0})}const e=new Map,t=new Map;for(const s of f(this,qi).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(i=this.getEditableAnnotation(s.annotationElementId))==null||i.show(),s.remove()}if(f(this,fa)){const s=f(this,fa).getEditableAnnotations();for(const o of s){const{id:a}=o.data;if(f(this,be).isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(f(this,be).addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}D(this,jt,OA).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of f(Js,Eu).values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),I(this,Cg,!1)}getEditableAnnotation(e){var t;return((t=f(this,fa))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){f(this,be).getActive()!==e&&f(this,be).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=f(this,zn))!=null&&e.div&&!f(this,Ol)){I(this,Ol,new AbortController);const t=f(this,be).combinedSignal(f(this,Ol));f(this,zn).div.addEventListener("pointerdown",D(this,jt,GX).bind(this),{signal:t}),f(this,zn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=f(this,zn))!=null&&e.div&&f(this,Ol)&&(f(this,Ol).abort(),I(this,Ol,null),f(this,zn).div.classList.remove("highlighting"))}enableClick(){if(f(this,_u))return;I(this,_u,new AbortController);const e=f(this,be).combinedSignal(f(this,_u));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=f(this,_u))==null||e.abort(),I(this,_u,null)}attach(e){f(this,qi).set(e.id,e);const{annotationElementId:t}=e;t&&f(this,be).isDeletedAnnotationElement(t)&&f(this,be).removeDeletedAnnotationElement(e)}detach(e){var t;f(this,qi).delete(e.id),(t=f(this,ff))==null||t.removePointerInTextLayer(e.contentDiv),!f(this,Cg)&&e.annotationElementId&&f(this,be).addDeletedAnnotationElement(e)}remove(e){this.detach(e),f(this,be).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(f(this,be).addDeletedAnnotationElement(e.annotationElementId),_t.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),f(this,be).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!f(this,pf)),f(this,be).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!f(this,Rl)&&(e._focusEventsAllowed=!1,I(this,Rl,setTimeout(()=>{I(this,Rl,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:f(this,be)._signal}),t.focus())},0))),e._structTreeParentId=(r=f(this,ff))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return f(this,be).getId()}combinedSignal(e){return f(this,be).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=f(this,jt,Ho))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await f(this,be).updateMode(e.mode);const{offsetX:r,offsetY:i}=D(this,jt,gN).call(this),s=this.getNextId(),o=D(this,jt,mN).call(this,{parent:this,id:s,x:r,y:i,uiManager:f(this,be),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=f(Js,Eu).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,f(this,be)))||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),s=D(this,jt,mN).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:f(this,be),isCentered:t,...r});return s&&this.add(s),s}addNewEditor(e={}){this.createAndAddNewEditor(D(this,jt,gN).call(this),!0,e)}setSelected(e){f(this,be).setSelected(e)}toggleSelected(e){f(this,be).toggleSelected(e)}unselect(e){f(this,be).unselect(e)}pointerup(e){var i;const{isMac:t}=lr.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!f(this,Au)||(I(this,Au,!1),(i=f(this,jt,Ho))!=null&&i.isDrawer&&f(this,jt,Ho).supportMultipleDrawings))return;if(!f(this,Tg)){I(this,Tg,!0);return}const r=f(this,be).getMode();if(r===Ce.STAMP||r===Ce.SIGNATURE){f(this,be).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(f(this,be).getMode()===Ce.HIGHLIGHT&&this.enableTextSelection(),f(this,Au)){I(this,Au,!1);return}const{isMac:t}=lr.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(I(this,Au,!0),(i=f(this,jt,Ho))!=null&&i.isDrawer){this.startDrawingSession(e);return}const r=f(this,be).getActive();I(this,Tg,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),f(this,fo)){f(this,jt,Ho).startDrawing(this,f(this,be),!1,e);return}f(this,be).setCurrentDrawingSession(this),I(this,fo,new AbortController);const t=f(this,be).combinedSignal(f(this,fo));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(I(this,Nl,null),this.commitOrRemove())},{signal:t}),f(this,jt,Ho).startDrawing(this,f(this,be),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&I(this,Nl,t);return}f(this,Nl)&&setTimeout(()=>{var t;(t=f(this,Nl))==null||t.focus(),I(this,Nl,null)},0)}endDrawingSession(e=!1){return f(this,fo)?(f(this,be).setCurrentDrawingSession(null),f(this,fo).abort(),I(this,fo,null),I(this,Nl,null),f(this,jt,Ho).endDrawing(e)):null}findNewParent(e,t,r){const i=f(this,be).findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return f(this,fo)?(this.endDrawingSession(),!0):!1}onScaleChanging(){f(this,fo)&&f(this,jt,Ho).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=f(this,be).getActive())==null?void 0:e.parent)===this&&(f(this,be).commitOrRemove(),f(this,be).setActiveEditor(null)),f(this,Rl)&&(clearTimeout(f(this,Rl)),I(this,Rl,null));for(const r of f(this,qi).values())(t=f(this,ff))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,f(this,qi).clear(),f(this,be).removeLayer(this)}render({viewport:e}){this.viewport=e,$f(this.div,e);for(const t of f(this,be).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){f(this,be).commitOrRemove(),D(this,jt,OA).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,$f(this.div,{rotation:r}),t!==r)for(const i of f(this,qi).values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return f(this,be).viewParameters.realScale}};ff=new WeakMap,Tg=new WeakMap,fa=new WeakMap,_u=new WeakMap,Rl=new WeakMap,qi=new WeakMap,Au=new WeakMap,Cg=new WeakMap,pf=new WeakMap,fo=new WeakMap,Nl=new WeakMap,zn=new WeakMap,Ol=new WeakMap,Su=new WeakMap,Pg=new WeakMap,be=new WeakMap,Eu=new WeakMap,jt=new WeakSet,GX=function(e){f(this,be).unselectAll();const{target:t}=e;if(t===f(this,zn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&f(this,zn).div.contains(t)){const{isMac:r}=lr.platform;if(e.button!==0||e.ctrlKey&&r)return;f(this,be).showAllEditors("highlight",!0,!0),f(this,zn).div.classList.add("free"),this.toggleDrawing(),ZS.startHighlighting(this,f(this,be).direction==="ltr",{target:f(this,zn).div,x:e.x,y:e.y}),f(this,zn).div.addEventListener("pointerup",()=>{f(this,zn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:f(this,be)._signal}),e.preventDefault()}},Ho=function(){return f(Js,Eu).get(f(this,be).getMode())},mN=function(e){const t=f(this,jt,Ho);return t?new t.prototype.constructor(e):null},gN=function(){const{x:e,y:t,width:r,height:i}=this.div.getBoundingClientRect(),s=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+i),c=(s+a)/2-e,u=(o+l)/2-t,[d,h]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:d,offsetY:h}},OA=function(){for(const e of f(this,qi).values())e.isEmpty()&&e.remove()},J(Js,"_initialized",!1),O(Js,Eu,new Map([GR,sN,hN,ZS,dN].map(e=>[e._editorType,e])));let pN=Js;var po,Br,mf,bx,KE,qX,La,vN,KX,bN;const Tn=class Tn{constructor({pageIndex:e}){O(this,La);O(this,po,null);O(this,Br,new Map);O(this,mf,new Map);this.pageIndex=e}setParent(e){if(!f(this,po)){I(this,po,e);return}if(f(this,po)!==e){if(f(this,Br).size>0)for(const t of f(this,Br).values())t.remove(),e.append(t);I(this,po,e)}}static get _svgFactory(){return ze(this,"_svgFactory",new XS)}draw(e,t=!1,r=!1){const i=Dn(Tn,bx)._++,s=D(this,La,vN).call(this),o=Tn._svgFactory.createElement("defs");s.append(o);const a=Tn._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&f(this,mf).set(i,a);const c=r?D(this,La,KX).call(this,o,l):null,u=Tn._svgFactory.createElement("use");return s.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(s,e),f(this,Br).set(i,s),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,t){const r=Dn(Tn,bx)._++,i=D(this,La,vN).call(this),s=Tn._svgFactory.createElement("defs");i.append(s);const o=Tn._svgFactory.createElement("path");s.append(o);const a=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const d=Tn._svgFactory.createElement("mask");s.append(d),l=`mask_p${this.pageIndex}_${r}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const h=Tn._svgFactory.createElement("rect");d.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");const m=Tn._svgFactory.createElement("use");d.append(m),m.setAttribute("href",`#${a}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const c=Tn._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,e),f(this,Br).set(r,i),r}finalizeDraw(e,t){f(this,mf).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:r,bbox:i,rootClass:s,path:o}=t,a=typeof e=="number"?f(this,Br).get(e):e;if(a){if(r&&D(this,La,bN).call(this,a,r),i&&D(l=Tn,KE,qX).call(l,a,i),s){const{classList:c}=a;for(const[u,d]of Object.entries(s))c.toggle(u,d)}if(o){const u=a.firstChild.firstChild;D(this,La,bN).call(this,u,o)}}}updateParent(e,t){if(t===this)return;const r=f(this,Br).get(e);r&&(f(t,po).append(r),f(this,Br).delete(e),f(t,Br).set(e,r))}remove(e){f(this,mf).delete(e),f(this,po)!==null&&(f(this,Br).get(e).remove(),f(this,Br).delete(e))}destroy(){I(this,po,null);for(const e of f(this,Br).values())e.remove();f(this,Br).clear(),f(this,mf).clear()}};po=new WeakMap,Br=new WeakMap,mf=new WeakMap,bx=new WeakMap,KE=new WeakSet,qX=function(e,[t,r,i,s]){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*s}%`},La=new WeakSet,vN=function(){const e=Tn._svgFactory.create(1,1,!0);return f(this,po).append(e),e.setAttribute("aria-hidden",!0),e},KX=function(e,t){const r=Tn._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=Tn._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i},bN=function(e,t){for(const[r,i]of Object.entries(t))i===null?e.removeAttribute(r):e.setAttribute(r,i)},O(Tn,KE),O(Tn,bx,0);let yN=Tn;globalThis._pdfjsTestingUtils={HighlightOutliner:KR};globalThis.pdfjsLib={AbortException:cd,AnnotationEditorLayer:pN,AnnotationEditorParamsType:Ue,AnnotationEditorType:Ce,AnnotationEditorUIManager:Vf,AnnotationLayer:UR,AnnotationMode:jc,AnnotationType:fn,build:TSe,ColorPicker:JS,createValidAbsoluteUrl:BK,DOMSVGFactory:XS,DrawLayer:yN,FeatureTest:lr,fetchData:Gx,getDocument:wSe,getFilenameFromUrl:yAe,getPdfFilenameFromUrl:vAe,getUuid:HK,getXfaPageViewport:wAe,GlobalWorkerOptions:ya,ImageKind:rA,InvalidPDFException:rR,isDataScheme:hC,isPdfFile:sL,isValidExplicitDest:RAe,MathClamp:Ur,noContextMenu:ko,normalizeUnicode:pAe,OPS:GS,OutputScale:Ma,PasswordResponses:sAe,PDFDataRangeTransport:WY,PDFDateString:oL,PDFWorker:S0,PermissionFlag:iAe,PixelsPerInch:ud,RenderingCancelledException:iL,ResponseException:qS,setLayerDimensions:$f,shadow:ze,SignatureExtractor:Ml,stopEvent:gn,SupportedImageMimeTypes:sR,TextLayer:_0,TouchManager:YS,updateUrlHash:zK,Util:we,VerbosityLevel:cC,version:ESe,XfaLayer:KY};const KSe=()=>{const{portfolio:n,updatePortfolio:e}=nL(),t=n.reduce((u,d)=>u+d.currentPrice*d.quantity,0),r=n.reduce((u,d)=>u+d.avgPrice*d.quantity,0),i=t-r,s=r>0?i/r*100:0,o=[...n].sort((u,d)=>d.currentPrice*d.quantity-u.currentPrice*u.quantity),a=[...n].sort((u,d)=>d.percentChange-u.percentChange).slice(0,3),l=[...n].sort((u,d)=>u.percentChange-d.percentChange).slice(0,3),c=(u,d)=>{const h=n.map(m=>m.symbol===u?{...m,quantity:Math.max(1,d)}:m);e(h)};return p.jsxs("div",{className:"space-y-6",children:[p.jsx(wi,{className:"bg-gradient-to-br from-zinc-900 to-zinc-800 border-zinc-700",children:p.jsxs(Ru,{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Stocks Summary"}),p.jsx("p",{className:"text-zinc-400",children:"Your stocks overview"})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("div",{className:"text-3xl font-bold mb-1",children:["$",t.toFixed(2)]}),p.jsxs("div",{className:`text-sm font-medium ${i>=0?"text-green-500":"text-red-500"}`,children:[i>=0?"+":"",i.toFixed(2)," (",s.toFixed(2),"%)"]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsx(pS,{className:"text-blue-500"}),p.jsx("span",{className:"text-zinc-400",children:"Total Investment"})]}),p.jsxs("div",{className:"text-xl font-bold",children:["$",r.toFixed(2)]})]}),p.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsx(Xb,{className:i>=0?"text-green-500":"text-red-500"}),p.jsx("span",{className:"text-zinc-400",children:"Total Gain/Loss"})]}),p.jsxs("div",{className:`text-xl font-bold ${i>=0?"text-green-500":"text-red-500"}`,children:[i>=0?"+":"",i.toFixed(2)]})]}),p.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsx(ple,{className:"text-purple-500"}),p.jsx("span",{className:"text-zinc-400",children:"Number of Stocks"})]}),p.jsx("div",{className:"text-xl font-bold",children:n.length})]})]})]})}),p.jsx(wi,{className:"bg-zinc-900 border-zinc-700",children:p.jsxs(Ru,{className:"p-6",children:[p.jsx("h3",{className:"text-xl font-bold mb-4",children:"Your Holdings"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"border-b border-zinc-800",children:[p.jsx("th",{className:"text-left py-3 px-4",children:"Stock"}),p.jsx("th",{className:"text-right py-3 px-4",children:"Quantity"}),p.jsx("th",{className:"text-right py-3 px-4",children:"Avg Price"}),p.jsx("th",{className:"text-right py-3 px-4",children:"Current Price"}),p.jsx("th",{className:"text-right py-3 px-4",children:"Total Value"}),p.jsx("th",{className:"text-right py-3 px-4",children:"Total Gain/Loss"}),p.jsx("th",{className:"text-right py-3 px-4",children:"Actions"})]})}),p.jsx("tbody",{children:o.map(u=>{const d=u.currentPrice*u.quantity,h=u.avgPrice*u.quantity,m=d-h,y=m/h*100;return p.jsxs("tr",{className:"border-b border-zinc-800 hover:bg-zinc-800/50",children:[p.jsxs("td",{className:"py-3 px-4",children:[p.jsx("div",{className:"font-medium",children:u.symbol}),p.jsx("div",{className:"text-sm text-zinc-400",children:u.name})]}),p.jsx("td",{className:"py-3 px-4",children:p.jsxs("div",{className:"flex items-center justify-end gap-2",children:[p.jsx(qr,{type:"number",min:"1",value:u.quantity,onChange:g=>c(u.symbol,parseInt(g.target.value)||1),className:"w-24 text-right bg-zinc-800 border-zinc-700"}),p.jsx("span",{className:"text-sm text-zinc-400",children:"shares"})]})}),p.jsxs("td",{className:"text-right py-3 px-4",children:["$",u.avgPrice.toFixed(2)]}),p.jsxs("td",{className:"text-right py-3 px-4",children:[p.jsxs("div",{children:["$",u.currentPrice.toFixed(2)]}),p.jsxs("div",{className:`text-sm ${u.change>=0?"text-green-500":"text-red-500"}`,children:[u.change>=0?"+":"",u.change.toFixed(2)," (",u.percentChange.toFixed(2),"%)"]})]}),p.jsxs("td",{className:"text-right py-3 px-4",children:["$",d.toFixed(2)]}),p.jsxs("td",{className:`text-right py-3 px-4 ${m>=0?"text-green-500":"text-red-500"}`,children:[p.jsxs("div",{children:[m>=0?"+":"",m.toFixed(2)]}),p.jsxs("div",{className:"text-sm",children:["(",y.toFixed(2),"%)"]})]}),p.jsx("td",{className:"text-right py-3 px-4",children:p.jsx(Ze,{variant:"destructive",size:"sm",onClick:()=>c(u.symbol,0),className:"w-full",children:"Remove"})})]},u.symbol)})}),p.jsx("tfoot",{className:"border-t-2 border-zinc-700",children:p.jsxs("tr",{children:[p.jsx("td",{className:"py-3 px-4 font-bold",children:"Total"}),p.jsxs("td",{className:"text-right py-3 px-4 font-bold",children:[n.reduce((u,d)=>u+d.quantity,0)," shares"]}),p.jsx("td",{className:"text-right py-3 px-4"}),p.jsx("td",{className:"text-right py-3 px-4"}),p.jsxs("td",{className:"text-right py-3 px-4 font-bold",children:["$",t.toFixed(2)]}),p.jsxs("td",{className:`text-right py-3 px-4 font-bold ${i>=0?"text-green-500":"text-red-500"}`,children:[i>=0?"+":"",i.toFixed(2)]}),p.jsx("td",{className:"text-right py-3 px-4"})]})})]})})]})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsx(wi,{className:"bg-zinc-900 border-zinc-700",children:p.jsxs(Ru,{className:"p-6",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx(PT,{className:"text-green-500"}),p.jsx("h3",{className:"text-xl font-bold",children:"Top Gainers"})]}),p.jsx("div",{className:"space-y-3",children:a.map(u=>p.jsx("div",{className:"bg-zinc-800 rounded-lg p-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-medium",children:u.symbol}),p.jsx("div",{className:"text-sm text-zinc-400",children:u.name})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("div",{className:"text-green-500",children:["+",u.percentChange.toFixed(2),"%"]}),p.jsxs("div",{className:"text-sm text-zinc-400",children:["$",u.currentPrice.toFixed(2)]})]})]})},u.symbol))})]})}),p.jsx(wi,{className:"bg-zinc-900 border-zinc-700",children:p.jsxs(Ru,{className:"p-6",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx(SM,{className:"text-red-500"}),p.jsx("h3",{className:"text-xl font-bold",children:"Top Losers"})]}),p.jsx("div",{className:"space-y-3",children:l.map(u=>p.jsx("div",{className:"bg-zinc-800 rounded-lg p-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-medium",children:u.symbol}),p.jsx("div",{className:"text-sm text-zinc-400",children:u.name})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("div",{className:"text-red-500",children:[u.percentChange.toFixed(2),"%"]}),p.jsxs("div",{className:"text-sm text-zinc-400",children:["$",u.currentPrice.toFixed(2)]})]})]})},u.symbol))})]})})]})]})};ya.workerSrc="";const YSe=()=>{const{portfolio:n}=nL(),[e,t]=A.useState([]),[r,i]=A.useState({});A.useEffect(()=>{const u=new Date,d=[];let h=n.reduce((y,g)=>y+g.currentPrice*g.quantity,0);for(let y=30;y>=0;y--){const g=new Date(u);g.setDate(g.getDate()-y),h=h*(1+(Math.random()*.02-.01)),d.push({date:g.toLocaleDateString(),value:h})}t(d);const m={};n.forEach(y=>{const g=[];let b=y.currentPrice;for(let w=30;w>=0;w--){const x=new Date(u);x.setDate(x.getDate()-w),b=b*(1+(Math.random()*.02-.01)),g.push({date:x.toLocaleDateString(),price:b,value:b*y.quantity})}m[y.symbol]=g}),i(m)},[n]);const s=n.map(u=>{var x;const d=r[u.symbol]||[],h=((x=d[0])==null?void 0:x.price)||u.avgPrice,m=u.currentPrice,y=m-h,g=y/h*100,b=(m-u.avgPrice)*u.quantity,w=(m-u.avgPrice)/u.avgPrice*100;return{...u,priceChange:y,priceChangePercent:g,valueChange:b,valueChangePercent:w,history:d}}).sort((u,d)=>d.valueChangePercent-u.valueChangePercent),o=n.reduce((u,d)=>u+d.currentPrice*d.quantity,0),a=n.reduce((u,d)=>u+d.avgPrice*d.quantity,0),l=o-a,c=a>0?l/a*100:0;return p.jsxs("div",{className:"space-y-8",children:[p.jsxs(wi,{className:"p-6 mb-6 bg-gradient-to-r from-indigo-900/80 to-zinc-900/80 border-0 shadow-xl",children:[p.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-0",children:[p.jsx(Xb,{className:"text-indigo-400 text-3xl"}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold tracking-tight mb-1",children:"Stocks Performance"}),p.jsx("div",{className:"text-zinc-400 text-sm",children:"30-Day Value Trend"})]})]}),p.jsxs("div",{className:"flex flex-wrap gap-4",children:[p.jsxs("div",{className:"bg-zinc-800 rounded-lg px-6 py-3 text-center",children:[p.jsx("div",{className:"text-xs text-zinc-400 mb-1",children:"Total Value"}),p.jsxs("div",{className:"text-xl font-bold",children:["$",o.toFixed(2)]})]}),p.jsxs("div",{className:"bg-zinc-800 rounded-lg px-6 py-3 text-center",children:[p.jsx("div",{className:"text-xs text-zinc-400 mb-1",children:"Total Gain/Loss"}),p.jsxs("div",{className:`text-xl font-bold ${l>=0?"text-green-500":"text-red-500"}`,children:[l>=0?"+":"",l.toFixed(2)," (",c.toFixed(2),"%)"]})]}),p.jsxs("div",{className:"bg-zinc-800 rounded-lg px-6 py-3 text-center",children:[p.jsx("div",{className:"text-xs text-zinc-400 mb-1",children:"Stocks"}),p.jsx("div",{className:"text-xl font-bold",children:n.length})]})]})]}),p.jsxs("div",{className:"mt-8",children:[p.jsx("div",{className:"font-semibold mb-2 text-zinc-200",children:"30-Day Stocks Value"}),e.length>0&&p.jsx("div",{className:"h-64 w-full",children:p.jsx(eR,{data:{labels:e.map(u=>u.date),datasets:[{label:"Portfolio Value",data:e.map(u=>u.value),borderColor:"#6366f1",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!1,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{callback:u=>`$${Number(u).toFixed(0)}`}},x:{grid:{display:!1}}}}})})]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(u=>p.jsxs(wi,{className:"p-6 bg-zinc-900/90 border-0 shadow-lg hover:shadow-2xl transition-all duration-200",children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("span",{className:"font-bold text-lg",children:u.symbol}),u.valueChange>=0?p.jsxs(Ul,{className:"bg-green-500/20 text-green-400 font-bold",children:[p.jsx(PT,{className:"inline mr-1"}),"+",u.valueChangePercent.toFixed(2),"%"]}):p.jsxs(Ul,{className:"bg-red-500/20 text-red-400 font-bold",children:[p.jsx(SM,{className:"inline mr-1"}),u.valueChangePercent.toFixed(2),"%"]})]}),p.jsx("div",{className:"text-sm text-gray-400 mb-2",children:u.name})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("div",{className:`text-lg font-semibold ${u.valueChange>=0?"text-green-500":"text-red-500"}`,children:[u.valueChange>=0?"+":"",u.valueChange.toFixed(2)," USD"]}),p.jsxs("div",{className:"text-xs text-zinc-400",children:[u.quantity," shares"]})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[p.jsxs("div",{className:"bg-zinc-800 rounded-lg p-3",children:[p.jsx("div",{className:"text-xs text-gray-400",children:"Current Price"}),p.jsxs("div",{className:"font-medium",children:["$",u.currentPrice.toFixed(2)]})]}),p.jsxs("div",{className:"bg-zinc-800 rounded-lg p-3",children:[p.jsx("div",{className:"text-xs text-gray-400",children:"Avg Price"}),p.jsxs("div",{className:"font-medium",children:["$",u.avgPrice.toFixed(2)]})]})]}),p.jsx("div",{className:"h-32",children:p.jsx(eR,{data:{labels:u.history.map(d=>d.date),datasets:[{label:"Stock Price",data:u.history.map(d=>d.price),borderColor:"#6366f1",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4,yAxisID:"y"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{type:"linear",display:!0,position:"left",grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#9ca3af",callback:d=>`$${Number(d).toFixed(2)}`}},x:{grid:{display:!1},ticks:{color:"#9ca3af"}}}}})})]},u.symbol))})]})},XSe=()=>{const[n,e]=A.useState([]);A.useEffect(()=>{const s=JSON.parse(localStorage.getItem("stockPrices")||"{}"),a=[{symbol:"AAPL",name:"Apple Inc."},{symbol:"MSFT",name:"Microsoft Corporation"},{symbol:"GOOGL",name:"Alphabet Inc."},{symbol:"AMZN",name:"Amazon.com Inc."},{symbol:"META",name:"Meta Platforms Inc."},{symbol:"TSLA",name:"Tesla Inc."},{symbol:"NVDA",name:"NVIDIA Corporation"},{symbol:"JPM",name:"JPMorgan Chase & Co."},{symbol:"V",name:"Visa Inc."},{symbol:"JNJ",name:"Johnson & Johnson"},{symbol:"WMT",name:"Walmart Inc."},{symbol:"MA",name:"Mastercard Inc."},{symbol:"UNH",name:"UnitedHealth Group Inc."},{symbol:"HD",name:"The Home Depot Inc."},{symbol:"BAC",name:"Bank of America Corp."},{symbol:"PG",name:"Procter & Gamble Co."},{symbol:"DIS",name:"The Walt Disney Co."},{symbol:"ADBE",name:"Adobe Inc."},{symbol:"NFLX",name:"Netflix Inc."},{symbol:"CRM",name:"Salesforce Inc."},{symbol:"CSCO",name:"Cisco Systems Inc."},{symbol:"INTC",name:"Intel Corporation"},{symbol:"VZ",name:"Verizon Communications Inc."},{symbol:"KO",name:"The Coca-Cola Co."},{symbol:"PEP",name:"PepsiCo Inc."},{symbol:"CMCSA",name:"Comcast Corporation"},{symbol:"ABT",name:"Abbott Laboratories"},{symbol:"MRK",name:"Merck & Co. Inc."},{symbol:"PFE",name:"Pfizer Inc."},{symbol:"NKE",name:"Nike Inc."},{symbol:"TMO",name:"Thermo Fisher Scientific Inc."},{symbol:"COST",name:"Costco Wholesale Corp."},{symbol:"DHR",name:"Danaher Corporation"},{symbol:"NEE",name:"NextEra Energy Inc."},{symbol:"T",name:"AT&T Inc."},{symbol:"LLY",name:"Eli Lilly and Co."},{symbol:"PYPL",name:"PayPal Holdings Inc."},{symbol:"UNP",name:"Union Pacific Corporation"},{symbol:"MS",name:"Morgan Stanley"},{symbol:"RTX",name:"Raytheon Technologies Corp."},{symbol:"C",name:"Citigroup Inc."},{symbol:"SCHW",name:"Charles Schwab Corp."},{symbol:"AMD",name:"Advanced Micro Devices Inc."},{symbol:"IBM",name:"International Business Machines"},{symbol:"GS",name:"Goldman Sachs Group Inc."},{symbol:"UBER",name:"Uber Technologies Inc."},{symbol:"SBUX",name:"Starbucks Corporation"},{symbol:"GE",name:"General Electric Co."},{symbol:"BA",name:"Boeing Co."},{symbol:"CVX",name:"Chevron Corporation"},{symbol:"ABNB",name:"Airbnb Inc."},{symbol:"SNOW",name:"Snowflake Inc."},{symbol:"ORCL",name:"Oracle Corporation"},{symbol:"COIN",name:"Coinbase Global Inc."},{symbol:"SHOP",name:"Shopify Inc."}].map(l=>{var c,u,d;return{...l,price:((c=s[l.symbol])==null?void 0:c.price)??null,change:((u=s[l.symbol])==null?void 0:u.change)??null,percentChange:((d=s[l.symbol])==null?void 0:d.percentChange)??null}});e(a)},[]);const t=[...n].filter(s=>s.percentChange!==null&&s.percentChange>2).sort((s,o)=>o.percentChange-s.percentChange).slice(0,10),r=[...n].filter(s=>s.percentChange!==null&&s.percentChange<=2&&s.percentChange>=-1).sort((s,o)=>Math.abs(o.percentChange)-Math.abs(s.percentChange)).slice(0,10),i=[...n].filter(s=>s.percentChange!==null&&s.percentChange<-1).sort((s,o)=>s.percentChange-o.percentChange).slice(0,10);return p.jsxs(wi,{className:"p-6 mb-6 shadow-lg hover:shadow-2xl transition-all duration-200",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-center tracking-tight",children:"Stock Recommendations"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"bg-zinc-900 rounded-xl shadow-lg p-4 flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(PT,{className:"text-green-400"}),p.jsx("h3",{className:"font-semibold text-green-400 text-lg",children:"Buy"})]}),p.jsx("span",{className:"text-xs text-gray-400",children:"Top 10"})]}),t.length===0&&p.jsx("p",{className:"text-sm text-gray-400",children:"No strong buy recommendations right now."}),p.jsx("div",{className:"flex flex-col gap-2",children:t.map(s=>p.jsxs("div",{className:"flex items-center justify-between bg-zinc-800 rounded-lg px-3 py-2 hover:bg-zinc-700 transition",children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-semibold text-base",children:s.symbol}),p.jsx("div",{className:"text-xs text-gray-400",children:s.name})]}),p.jsxs("div",{className:"flex flex-col items-end",children:[p.jsxs(Ul,{variant:"default",className:"bg-green-500/20 text-green-400 font-bold mb-1",children:["+",s.percentChange.toFixed(2),"%"]}),p.jsx("span",{className:"text-xs text-gray-400",children:"Quantity: 1"}),p.jsxs("span",{className:"text-sm text-gray-200 font-mono",children:["$",s.price!==null?s.price.toFixed(2):"N/A"]})]})]},s.symbol))})]}),p.jsxs("div",{className:"bg-zinc-900 rounded-xl shadow-lg p-4 flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(gle,{className:"text-yellow-400"}),p.jsx("h3",{className:"font-semibold text-yellow-400 text-lg",children:"Hold"})]}),p.jsx("span",{className:"text-xs text-gray-400",children:"Top 10"})]}),r.length===0&&p.jsx("p",{className:"text-sm text-gray-400",children:"No hold recommendations right now."}),p.jsx("div",{className:"flex flex-col gap-2",children:r.map(s=>p.jsxs("div",{className:"flex items-center justify-between bg-zinc-800 rounded-lg px-3 py-2 hover:bg-zinc-700 transition",children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-semibold text-base",children:s.symbol}),p.jsx("div",{className:"text-xs text-gray-400",children:s.name})]}),p.jsxs("div",{className:"flex flex-col items-end",children:[p.jsxs(Ul,{variant:"default",className:"bg-yellow-500/20 text-yellow-400 font-bold mb-1",children:[s.percentChange.toFixed(2),"%"]}),p.jsx("span",{className:"text-xs text-gray-400",children:"Quantity: 1"}),p.jsxs("span",{className:"text-sm text-gray-200 font-mono",children:["$",s.price!==null?s.price.toFixed(2):"N/A"]})]})]},s.symbol))})]}),p.jsxs("div",{className:"bg-zinc-900 rounded-xl shadow-lg p-4 flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(mle,{className:"text-blue-400"}),p.jsx("h3",{className:"font-semibold text-blue-400 text-lg",children:"Watch List"})]}),p.jsx("span",{className:"text-xs text-gray-400",children:"Top 10"})]}),i.length===0&&p.jsx("p",{className:"text-sm text-gray-400",children:"No watch list recommendations right now."}),p.jsx("div",{className:"flex flex-col gap-2",children:i.map(s=>p.jsxs("div",{className:"flex items-center justify-between bg-zinc-800 rounded-lg px-3 py-2 hover:bg-zinc-700 transition",children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-semibold text-base",children:s.symbol}),p.jsx("div",{className:"text-xs text-gray-400",children:s.name})]}),p.jsxs("div",{className:"flex flex-col items-end",children:[p.jsxs(Ul,{variant:"default",className:"bg-blue-500/20 text-blue-400 font-bold mb-1",children:[s.percentChange.toFixed(2),"%"]}),p.jsx("span",{className:"text-xs text-gray-400",children:"Quantity: 1"}),p.jsxs("span",{className:"text-sm text-gray-200 font-mono",children:["$",s.price!==null?s.price.toFixed(2):"N/A"]})]})]},s.symbol))})]})]})]})},YX=()=>p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-950 to-indigo-950 p-0 md:p-8 flex flex-col items-center font-sans pb-32 md:pb-16",children:p.jsxs("div",{className:"w-full max-w-7xl rounded-none md:rounded-2xl shadow-2xl bg-white/10 backdrop-blur-md border border-zinc-800 p-0 md:p-8 mt-0 md:mt-8 min-h-screen md:min-h-0",children:[p.jsxs("div",{className:"w-full flex flex-col items-center mb-6 mt-2",children:[p.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-1 drop-shadow-lg",children:"Welcome back!"}),p.jsx("p",{className:"text-zinc-300 text-base md:text-lg",children:"Here’s your portfolio at a glance."})]}),p.jsxs(N0e,{defaultValue:"stocks",className:"w-full",children:[p.jsx("div",{className:"md:hidden w-full overflow-x-auto pb-2 no-scrollbar",children:p.jsxs(zk,{className:"flex w-max min-w-full bg-zinc-900/80 rounded-none shadow-md p-1 gap-1 border-b border-zinc-800",children:[p.jsxs(Ga,{value:"stocks",className:"flex-1 min-w-[100px] flex items-center gap-2 justify-center px-3 py-2 rounded-lg font-medium text-sm data-[state=active]:bg-indigo-600 data-[state=active]:text-white data-[state=inactive]:text-zinc-200 hover:bg-indigo-700/60 transition",children:[p.jsx(Xb,{className:"w-4 h-4"})," Stocks"]}),p.jsxs(Ga,{value:"mystocks",className:"flex-1 min-w-[100px] flex items-center gap-2 justify-center px-3 py-2 rounded-lg font-medium text-sm data-[state=active]:bg-green-600 data-[state=active]:text-white data-[state=inactive]:text-zinc-200 hover:bg-green-700/60 transition",children:[p.jsx(pS,{className:"w-4 h-4"})," MyStocks"]}),p.jsxs(Ga,{value:"performance",className:"flex-1 min-w-[100px] flex items-center gap-2 justify-center px-3 py-2 rounded-lg font-medium text-sm data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=inactive]:text-zinc-200 hover:bg-blue-700/60 transition",children:[p.jsx(H4,{className:"w-4 h-4"})," Performance"]}),p.jsxs(Ga,{value:"recommendations",className:"flex-1 min-w-[100px] flex items-center gap-2 justify-center px-3 py-2 rounded-lg font-medium text-sm data-[state=active]:bg-amber-600 data-[state=active]:text-white data-[state=inactive]:text-zinc-200 hover:bg-amber-700/60 transition",children:[p.jsx(U4,{className:"w-4 h-4"})," Recommendations"]})]})}),p.jsx("div",{className:"hidden md:block",children:p.jsxs(zk,{className:"flex w-full bg-zinc-900/80 rounded-xl shadow-md p-1 gap-1.5 border-b border-zinc-800",children:[p.jsxs(Ga,{value:"stocks",className:"flex-1 flex items-center gap-2 justify-center px-3 py-1.5 rounded-lg font-medium text-sm data-[state=active]:bg-indigo-600 data-[state=active]:text-white data-[state=inactive]:text-zinc-200 hover:bg-indigo-700/60 transition",children:[p.jsx(Xb,{className:"w-4 h-4"})," Stocks"]}),p.jsxs(Ga,{value:"mystocks",className:"flex-1 flex items-center gap-2 justify-center px-3 py-1.5 rounded-lg font-medium text-sm data-[state=active]:bg-green-600 data-[state=active]:text-white data-[state=inactive]:text-zinc-200 hover:bg-green-700/60 transition",children:[p.jsx(pS,{className:"w-4 h-4"})," MyStocks"]}),p.jsxs(Ga,{value:"performance",className:"flex-1 flex items-center gap-2 justify-center px-3 py-1.5 rounded-lg font-medium text-sm data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=inactive]:text-zinc-200 hover:bg-blue-700/60 transition",children:[p.jsx(H4,{className:"w-4 h-4"})," Performance"]}),p.jsxs(Ga,{value:"recommendations",className:"flex-1 flex items-center gap-2 justify-center px-3 py-1.5 rounded-lg font-medium text-sm data-[state=active]:bg-amber-600 data-[state=active]:text-white data-[state=inactive]:text-zinc-200 hover:bg-amber-700/60 transition",children:[p.jsx(U4,{className:"w-4 h-4"})," Recommendations"]})]})}),p.jsx("div",{className:"block md:hidden text-xs text-zinc-400 text-center mt-2",children:"Swipe left/right to see more options"}),p.jsxs("div",{className:"space-y-6 md:space-y-8 p-4 md:p-0 mb-8 md:mb-12",children:[p.jsx(Tv,{value:"stocks",children:p.jsx("div",{className:"w-full overflow-x-auto md:overflow-visible pb-2 relative",children:p.jsx(nAe,{})})}),p.jsx(Tv,{value:"mystocks",children:p.jsx("div",{className:"w-full overflow-x-auto md:overflow-visible pb-2 relative",children:p.jsx(KSe,{})})}),p.jsx(Tv,{value:"performance",children:p.jsx("div",{className:"w-full overflow-x-auto md:overflow-visible pb-2 relative",children:p.jsx(YSe,{})})}),p.jsx(Tv,{value:"recommendations",children:p.jsx("div",{className:"w-full overflow-x-auto md:overflow-visible pb-2 relative",children:p.jsx(XSe,{})})})]})]})]})}),LI=768;function QSe(){const[n,e]=A.useState(void 0);return A.useEffect(()=>{const t=window.matchMedia(`(max-width: ${LI-1}px)`),r=()=>{e(window.innerWidth<LI)};return t.addEventListener("change",r),e(window.innerWidth<LI),()=>t.removeEventListener("change",r)},[]),!!n}var JSe="Separator",MV="horizontal",ZSe=["horizontal","vertical"],XX=A.forwardRef((n,e)=>{const{decorative:t,orientation:r=MV,...i}=n,s=eEe(r)?r:MV,a=t?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return p.jsx(Re.div,{"data-orientation":s,...a,...i,ref:e})});XX.displayName=JSe;function eEe(n){return ZSe.includes(n)}var QX=XX;const pL=A.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...r},i)=>p.jsx(QX,{ref:i,decorative:t,orientation:e,className:ce("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...r}));pL.displayName=QX.displayName;var mL="Dialog",[JX,o6e]=ac(mL),[tEe,Mo]=JX(mL),ZX=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=n,a=A.useRef(null),l=A.useRef(null),[c=!1,u]=lc({prop:r,defaultProp:i,onChange:s});return p.jsx(tEe,{scope:e,triggerRef:a,contentRef:l,contentId:Aa(),titleId:Aa(),descriptionId:Aa(),open:c,onOpenChange:u,onOpenToggle:A.useCallback(()=>u(d=>!d),[u]),modal:o,children:t})};ZX.displayName=mL;var eQ="DialogTrigger",nEe=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Mo(eQ,t),s=qt(e,i.triggerRef);return p.jsx(Re.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":vL(i.open),...r,ref:s,onClick:ve(n.onClick,i.onOpenToggle)})});nEe.displayName=eQ;var gL="DialogPortal",[rEe,tQ]=JX(gL,{forceMount:void 0}),nQ=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,s=Mo(gL,e);return p.jsx(rEe,{scope:e,forceMount:t,children:A.Children.map(r,o=>p.jsx(Us,{present:t||s.open,children:p.jsx(fT,{asChild:!0,container:i,children:o})}))})};nQ.displayName=gL;var tE="DialogOverlay",rQ=A.forwardRef((n,e)=>{const t=tQ(tE,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Mo(tE,n.__scopeDialog);return s.modal?p.jsx(Us,{present:r||s.open,children:p.jsx(iEe,{...i,ref:e})}):null});rQ.displayName=tE;var iEe=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Mo(tE,t);return p.jsx(ND,{as:js,allowPinchZoom:!0,shards:[i.contentRef],children:p.jsx(Re.div,{"data-state":vL(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),zf="DialogContent",iQ=A.forwardRef((n,e)=>{const t=tQ(zf,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Mo(zf,n.__scopeDialog);return p.jsx(Us,{present:r||s.open,children:s.modal?p.jsx(sEe,{...i,ref:e}):p.jsx(oEe,{...i,ref:e})})});iQ.displayName=zf;var sEe=A.forwardRef((n,e)=>{const t=Mo(zf,n.__scopeDialog),r=A.useRef(null),i=qt(e,t.contentRef,r);return A.useEffect(()=>{const s=r.current;if(s)return PG(s)},[]),p.jsx(sQ,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(n.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ve(n.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:ve(n.onFocusOutside,s=>s.preventDefault())})}),oEe=A.forwardRef((n,e)=>{const t=Mo(zf,n.__scopeDialog),r=A.useRef(!1),i=A.useRef(!1);return p.jsx(sQ,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,s),s.defaultPrevented||(r.current||(a=t.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=n.onInteractOutside)==null||l.call(n,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=t.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),sQ=A.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=n,a=Mo(zf,t),l=A.useRef(null),c=qt(e,l);return vG(),p.jsxs(p.Fragment,{children:[p.jsx(RD,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(Tx,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":vL(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(aEe,{titleId:a.titleId}),p.jsx(cEe,{contentRef:l,descriptionId:a.descriptionId})]})]})}),yL="DialogTitle",oQ=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Mo(yL,t);return p.jsx(Re.h2,{id:i.titleId,...r,ref:e})});oQ.displayName=yL;var aQ="DialogDescription",lQ=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Mo(aQ,t);return p.jsx(Re.p,{id:i.descriptionId,...r,ref:e})});lQ.displayName=aQ;var cQ="DialogClose",uQ=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Mo(cQ,t);return p.jsx(Re.button,{type:"button",...r,ref:e,onClick:ve(n.onClick,()=>i.onOpenChange(!1))})});uQ.displayName=cQ;function vL(n){return n?"open":"closed"}var dQ="DialogTitleWarning",[a6e,hQ]=Qne(dQ,{contentName:zf,titleName:yL,docsSlug:"dialog"}),aEe=({titleId:n})=>{const e=hQ(dQ),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return A.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},lEe="DialogDescriptionWarning",cEe=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${hQ(lEe).contentName}}.`;return A.useEffect(()=>{var s;const i=(s=n.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},uEe=ZX,dEe=nQ,fQ=rQ,pQ=iQ,mQ=oQ,gQ=lQ,hEe=uQ;const fEe=uEe,pEe=dEe,yQ=A.forwardRef(({className:n,...e},t)=>p.jsx(fQ,{className:ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e,ref:t}));yQ.displayName=fQ.displayName;const mEe=Kf("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),vQ=A.forwardRef(({side:n="right",className:e,children:t,...r},i)=>p.jsxs(pEe,{children:[p.jsx(yQ,{}),p.jsxs(pQ,{ref:i,className:ce(mEe({side:n}),e),...r,children:[t,p.jsxs(hEe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[p.jsx(uM,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));vQ.displayName=pQ.displayName;const gEe=A.forwardRef(({className:n,...e},t)=>p.jsx(mQ,{ref:t,className:ce("text-lg font-semibold text-foreground",n),...e}));gEe.displayName=mQ.displayName;const yEe=A.forwardRef(({className:n,...e},t)=>p.jsx(gQ,{ref:t,className:ce("text-sm text-muted-foreground",n),...e}));yEe.displayName=gQ.displayName;const vEe="sidebar:state",bEe=60*60*24*7,wEe="16rem",xEe="18rem",_Ee="3rem",AEe="b",bQ=A.createContext(null);function mC(){const n=A.useContext(bQ);if(!n)throw new Error("useSidebar must be used within a SidebarProvider.");return n}const bL=A.forwardRef(({defaultOpen:n=!0,open:e,onOpenChange:t,className:r,style:i,children:s,...o},a)=>{const l=QSe(),[c,u]=A.useState(!1),[d,h]=A.useState(n),m=e??d,y=A.useCallback(x=>{const _=typeof x=="function"?x(m):x;t?t(_):h(_),document.cookie=`${vEe}=${_}; path=/; max-age=${bEe}`},[t,m]),g=A.useCallback(()=>l?u(x=>!x):y(x=>!x),[l,y,u]);A.useEffect(()=>{const x=_=>{_.key===AEe&&(_.metaKey||_.ctrlKey)&&(_.preventDefault(),g())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[g]);const b=m?"expanded":"collapsed",w=A.useMemo(()=>({state:b,open:m,setOpen:y,isMobile:l,openMobile:c,setOpenMobile:u,toggleSidebar:g}),[b,m,y,l,c,u,g]);return p.jsx(bQ.Provider,{value:w,children:p.jsx(E9,{delayDuration:0,children:p.jsx("div",{style:{"--sidebar-width":wEe,"--sidebar-width-icon":_Ee,...i},className:ce("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:a,...o,children:s})})})});bL.displayName="SidebarProvider";const SEe=A.forwardRef(({side:n="left",variant:e="sidebar",collapsible:t="offcanvas",className:r,children:i,...s},o)=>{const{isMobile:a,state:l,openMobile:c,setOpenMobile:u}=mC();return t==="none"?p.jsx("div",{className:ce("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...s,children:i}):a?p.jsx(fEe,{open:c,onOpenChange:u,...s,children:p.jsx(vQ,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden z-[60]",style:{"--sidebar-width":xEe},side:n,children:p.jsx("div",{className:"flex h-full w-full flex-col",children:i})})}):p.jsxs("div",{ref:o,className:"group peer hidden md:block text-sidebar-foreground","data-state":l,"data-collapsible":l==="collapsed"?t:"","data-variant":e,"data-side":n,children:[p.jsx("div",{className:ce("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),p.jsx("div",{className:ce("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",n==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...s,children:p.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});SEe.displayName="Sidebar";const EEe=A.forwardRef(({className:n,onClick:e,...t},r)=>{const{toggleSidebar:i}=mC();return p.jsxs(Ze,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:ce("h-7 w-7",n),onClick:s=>{e==null||e(s),i()},...t,children:[p.jsx(Jre,{}),p.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});EEe.displayName="SidebarTrigger";const TEe=A.forwardRef(({className:n,...e},t)=>{const{toggleSidebar:r}=mC();return p.jsx("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:ce("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",n),...e})});TEe.displayName="SidebarRail";const CEe=A.forwardRef(({className:n,...e},t)=>p.jsx("main",{ref:t,className:ce("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",n),...e}));CEe.displayName="SidebarInset";const PEe=A.forwardRef(({className:n,...e},t)=>p.jsx(qr,{ref:t,"data-sidebar":"input",className:ce("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",n),...e}));PEe.displayName="SidebarInput";const IEe=A.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,"data-sidebar":"header",className:ce("flex flex-col gap-2 p-2",n),...e}));IEe.displayName="SidebarHeader";const kEe=A.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,"data-sidebar":"footer",className:ce("flex flex-col gap-2 p-2",n),...e}));kEe.displayName="SidebarFooter";const REe=A.forwardRef(({className:n,...e},t)=>p.jsx(pL,{ref:t,"data-sidebar":"separator",className:ce("mx-2 w-auto bg-sidebar-border",n),...e}));REe.displayName="SidebarSeparator";const NEe=A.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,"data-sidebar":"content",className:ce("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",n),...e}));NEe.displayName="SidebarContent";const OEe=A.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,"data-sidebar":"group",className:ce("relative flex w-full min-w-0 flex-col p-2",n),...e}));OEe.displayName="SidebarGroup";const MEe=A.forwardRef(({className:n,asChild:e=!1,...t},r)=>{const i=e?js:"div";return p.jsx(i,{ref:r,"data-sidebar":"group-label",className:ce("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",n),...t})});MEe.displayName="SidebarGroupLabel";const DEe=A.forwardRef(({className:n,asChild:e=!1,...t},r)=>{const i=e?js:"button";return p.jsx(i,{ref:r,"data-sidebar":"group-action",className:ce("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",n),...t})});DEe.displayName="SidebarGroupAction";const LEe=A.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,"data-sidebar":"group-content",className:ce("w-full text-sm",n),...e}));LEe.displayName="SidebarGroupContent";const jEe=A.forwardRef(({className:n,...e},t)=>p.jsx("ul",{ref:t,"data-sidebar":"menu",className:ce("flex w-full min-w-0 flex-col gap-1",n),...e}));jEe.displayName="SidebarMenu";const FEe=A.forwardRef(({className:n,...e},t)=>p.jsx("li",{ref:t,"data-sidebar":"menu-item",className:ce("group/menu-item relative",n),...e}));FEe.displayName="SidebarMenuItem";const $Ee=Kf("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),VEe=A.forwardRef(({asChild:n=!1,isActive:e=!1,variant:t="default",size:r="default",tooltip:i,className:s,...o},a)=>{const l=n?js:"button",{isMobile:c,state:u}=mC(),d=p.jsx(l,{ref:a,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:ce($Ee({variant:t,size:r}),s),...o});return i?(typeof i=="string"&&(i={children:i}),p.jsxs(zoe,{children:[p.jsx(Uoe,{asChild:!0,children:d}),p.jsx(T9,{side:"right",align:"center",hidden:u!=="collapsed"||c,...i})]})):d});VEe.displayName="SidebarMenuButton";const BEe=A.forwardRef(({className:n,asChild:e=!1,showOnHover:t=!1,...r},i)=>{const s=e?js:"button";return p.jsx(s,{ref:i,"data-sidebar":"menu-action",className:ce("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",n),...r})});BEe.displayName="SidebarMenuAction";const zEe=A.forwardRef(({className:n,...e},t)=>p.jsx("div",{ref:t,"data-sidebar":"menu-badge",className:ce("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n),...e}));zEe.displayName="SidebarMenuBadge";const UEe=A.forwardRef(({className:n,showIcon:e=!1,...t},r)=>{const i=A.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return p.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:ce("rounded-md h-8 flex gap-2 px-2 items-center",n),...t,children:[e&&p.jsx(Hp,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),p.jsx(Hp,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})});UEe.displayName="SidebarMenuSkeleton";const HEe=A.forwardRef(({className:n,...e},t)=>p.jsx("ul",{ref:t,"data-sidebar":"menu-sub",className:ce("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",n),...e}));HEe.displayName="SidebarMenuSub";const WEe=A.forwardRef(({...n},e)=>p.jsx("li",{ref:e,...n}));WEe.displayName="SidebarMenuSubItem";const GEe=A.forwardRef(({asChild:n=!1,size:e="md",isActive:t,className:r,...i},s)=>{const o=n?js:"a";return p.jsx(o,{ref:s,"data-sidebar":"menu-sub-button","data-size":e,"data-active":t,className:ce("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...i})});GEe.displayName="SidebarMenuSubButton";var qEe=Array.isArray,Do=qEe,KEe=typeof g_=="object"&&g_&&g_.Object===Object&&g_,wQ=KEe,YEe=wQ,XEe=typeof self=="object"&&self&&self.Object===Object&&self,QEe=YEe||XEe||Function("return this")(),Fa=QEe,JEe=Fa,ZEe=JEe.Symbol,Qx=ZEe,DV=Qx,xQ=Object.prototype,eTe=xQ.hasOwnProperty,tTe=xQ.toString,uv=DV?DV.toStringTag:void 0;function nTe(n){var e=eTe.call(n,uv),t=n[uv];try{n[uv]=void 0;var r=!0}catch{}var i=tTe.call(n);return r&&(e?n[uv]=t:delete n[uv]),i}var rTe=nTe,iTe=Object.prototype,sTe=iTe.toString;function oTe(n){return sTe.call(n)}var aTe=oTe,LV=Qx,lTe=rTe,cTe=aTe,uTe="[object Null]",dTe="[object Undefined]",jV=LV?LV.toStringTag:void 0;function hTe(n){return n==null?n===void 0?dTe:uTe:jV&&jV in Object(n)?lTe(n):cTe(n)}var uc=hTe;function fTe(n){return n!=null&&typeof n=="object"}var dc=fTe,pTe=uc,mTe=dc,gTe="[object Symbol]";function yTe(n){return typeof n=="symbol"||mTe(n)&&pTe(n)==gTe}var Jx=yTe,vTe=Do,bTe=Jx,wTe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xTe=/^\w*$/;function _Te(n,e){if(vTe(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||bTe(n)?!0:xTe.test(n)||!wTe.test(n)||e!=null&&n in Object(e)}var wL=_Te;function ATe(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var xd=ATe;const vy=Or(xd);var STe=uc,ETe=xd,TTe="[object AsyncFunction]",CTe="[object Function]",PTe="[object GeneratorFunction]",ITe="[object Proxy]";function kTe(n){if(!ETe(n))return!1;var e=STe(n);return e==CTe||e==PTe||e==TTe||e==ITe}var xL=kTe;const Rn=Or(xL);var RTe=Fa,NTe=RTe["__core-js_shared__"],OTe=NTe,jI=OTe,FV=function(){var n=/[^.]+$/.exec(jI&&jI.keys&&jI.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function MTe(n){return!!FV&&FV in n}var DTe=MTe,LTe=Function.prototype,jTe=LTe.toString;function FTe(n){if(n!=null){try{return jTe.call(n)}catch{}try{return n+""}catch{}}return""}var _Q=FTe,$Te=xL,VTe=DTe,BTe=xd,zTe=_Q,UTe=/[\\^$.*+?()[\]{}|]/g,HTe=/^\[object .+?Constructor\]$/,WTe=Function.prototype,GTe=Object.prototype,qTe=WTe.toString,KTe=GTe.hasOwnProperty,YTe=RegExp("^"+qTe.call(KTe).replace(UTe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function XTe(n){if(!BTe(n)||VTe(n))return!1;var e=$Te(n)?YTe:HTe;return e.test(zTe(n))}var QTe=XTe;function JTe(n,e){return n==null?void 0:n[e]}var ZTe=JTe,eCe=QTe,tCe=ZTe;function nCe(n,e){var t=tCe(n,e);return eCe(t)?t:void 0}var ap=nCe,rCe=ap,iCe=rCe(Object,"create"),gC=iCe,$V=gC;function sCe(){this.__data__=$V?$V(null):{},this.size=0}var oCe=sCe;function aCe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var lCe=aCe,cCe=gC,uCe="__lodash_hash_undefined__",dCe=Object.prototype,hCe=dCe.hasOwnProperty;function fCe(n){var e=this.__data__;if(cCe){var t=e[n];return t===uCe?void 0:t}return hCe.call(e,n)?e[n]:void 0}var pCe=fCe,mCe=gC,gCe=Object.prototype,yCe=gCe.hasOwnProperty;function vCe(n){var e=this.__data__;return mCe?e[n]!==void 0:yCe.call(e,n)}var bCe=vCe,wCe=gC,xCe="__lodash_hash_undefined__";function _Ce(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=wCe&&e===void 0?xCe:e,this}var ACe=_Ce,SCe=oCe,ECe=lCe,TCe=pCe,CCe=bCe,PCe=ACe;function by(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}by.prototype.clear=SCe;by.prototype.delete=ECe;by.prototype.get=TCe;by.prototype.has=CCe;by.prototype.set=PCe;var ICe=by;function kCe(){this.__data__=[],this.size=0}var RCe=kCe;function NCe(n,e){return n===e||n!==n&&e!==e}var _L=NCe,OCe=_L;function MCe(n,e){for(var t=n.length;t--;)if(OCe(n[t][0],e))return t;return-1}var yC=MCe,DCe=yC,LCe=Array.prototype,jCe=LCe.splice;function FCe(n){var e=this.__data__,t=DCe(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():jCe.call(e,t,1),--this.size,!0}var $Ce=FCe,VCe=yC;function BCe(n){var e=this.__data__,t=VCe(e,n);return t<0?void 0:e[t][1]}var zCe=BCe,UCe=yC;function HCe(n){return UCe(this.__data__,n)>-1}var WCe=HCe,GCe=yC;function qCe(n,e){var t=this.__data__,r=GCe(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var KCe=qCe,YCe=RCe,XCe=$Ce,QCe=zCe,JCe=WCe,ZCe=KCe;function wy(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}wy.prototype.clear=YCe;wy.prototype.delete=XCe;wy.prototype.get=QCe;wy.prototype.has=JCe;wy.prototype.set=ZCe;var vC=wy,ePe=ap,tPe=Fa,nPe=ePe(tPe,"Map"),AL=nPe,VV=ICe,rPe=vC,iPe=AL;function sPe(){this.size=0,this.__data__={hash:new VV,map:new(iPe||rPe),string:new VV}}var oPe=sPe;function aPe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var lPe=aPe,cPe=lPe;function uPe(n,e){var t=n.__data__;return cPe(e)?t[typeof e=="string"?"string":"hash"]:t.map}var bC=uPe,dPe=bC;function hPe(n){var e=dPe(this,n).delete(n);return this.size-=e?1:0,e}var fPe=hPe,pPe=bC;function mPe(n){return pPe(this,n).get(n)}var gPe=mPe,yPe=bC;function vPe(n){return yPe(this,n).has(n)}var bPe=vPe,wPe=bC;function xPe(n,e){var t=wPe(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var _Pe=xPe,APe=oPe,SPe=fPe,EPe=gPe,TPe=bPe,CPe=_Pe;function xy(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}xy.prototype.clear=APe;xy.prototype.delete=SPe;xy.prototype.get=EPe;xy.prototype.has=TPe;xy.prototype.set=CPe;var SL=xy,AQ=SL,PPe="Expected a function";function EL(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(PPe);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(EL.Cache||AQ),t}EL.Cache=AQ;var IPe=EL,kPe=IPe,RPe=500;function NPe(n){var e=kPe(n,function(r){return t.size===RPe&&t.clear(),r}),t=e.cache;return e}var OPe=NPe,MPe=OPe,DPe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,LPe=/\\(\\)?/g,jPe=MPe(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(DPe,function(t,r,i,s){e.push(i?s.replace(LPe,"$1"):r||t)}),e}),FPe=jPe;function $Pe(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var SQ=$Pe,BV=Qx,VPe=SQ,BPe=Do,zPe=Jx,UPe=1/0,zV=BV?BV.prototype:void 0,UV=zV?zV.toString:void 0;function EQ(n){if(typeof n=="string")return n;if(BPe(n))return VPe(n,EQ)+"";if(zPe(n))return UV?UV.call(n):"";var e=n+"";return e=="0"&&1/n==-UPe?"-0":e}var HPe=EQ,WPe=HPe;function GPe(n){return n==null?"":WPe(n)}var TQ=GPe,qPe=Do,KPe=wL,YPe=FPe,XPe=TQ;function QPe(n,e){return qPe(n)?n:KPe(n,e)?[n]:YPe(XPe(n))}var CQ=QPe,JPe=Jx,ZPe=1/0;function eIe(n){if(typeof n=="string"||JPe(n))return n;var e=n+"";return e=="0"&&1/n==-ZPe?"-0":e}var wC=eIe,tIe=CQ,nIe=wC;function rIe(n,e){e=tIe(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[nIe(e[t++])];return t&&t==r?n:void 0}var TL=rIe,iIe=TL;function sIe(n,e,t){var r=n==null?void 0:iIe(n,e);return r===void 0?t:r}var PQ=sIe;const Uf=Or(PQ);function oIe(n){return n==null}var aIe=oIe;const Vt=Or(aIe);var lIe=uc,cIe=Do,uIe=dc,dIe="[object String]";function hIe(n){return typeof n=="string"||!cIe(n)&&uIe(n)&&lIe(n)==dIe}var fIe=hIe;const CL=Or(fIe);var IQ={exports:{}},ct={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PL=Symbol.for("react.element"),IL=Symbol.for("react.portal"),xC=Symbol.for("react.fragment"),_C=Symbol.for("react.strict_mode"),AC=Symbol.for("react.profiler"),SC=Symbol.for("react.provider"),EC=Symbol.for("react.context"),pIe=Symbol.for("react.server_context"),TC=Symbol.for("react.forward_ref"),CC=Symbol.for("react.suspense"),PC=Symbol.for("react.suspense_list"),IC=Symbol.for("react.memo"),kC=Symbol.for("react.lazy"),mIe=Symbol.for("react.offscreen"),kQ;kQ=Symbol.for("react.module.reference");function Gs(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case PL:switch(n=n.type,n){case xC:case AC:case _C:case CC:case PC:return n;default:switch(n=n&&n.$$typeof,n){case pIe:case EC:case TC:case kC:case IC:case SC:return n;default:return e}}case IL:return e}}}ct.ContextConsumer=EC;ct.ContextProvider=SC;ct.Element=PL;ct.ForwardRef=TC;ct.Fragment=xC;ct.Lazy=kC;ct.Memo=IC;ct.Portal=IL;ct.Profiler=AC;ct.StrictMode=_C;ct.Suspense=CC;ct.SuspenseList=PC;ct.isAsyncMode=function(){return!1};ct.isConcurrentMode=function(){return!1};ct.isContextConsumer=function(n){return Gs(n)===EC};ct.isContextProvider=function(n){return Gs(n)===SC};ct.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===PL};ct.isForwardRef=function(n){return Gs(n)===TC};ct.isFragment=function(n){return Gs(n)===xC};ct.isLazy=function(n){return Gs(n)===kC};ct.isMemo=function(n){return Gs(n)===IC};ct.isPortal=function(n){return Gs(n)===IL};ct.isProfiler=function(n){return Gs(n)===AC};ct.isStrictMode=function(n){return Gs(n)===_C};ct.isSuspense=function(n){return Gs(n)===CC};ct.isSuspenseList=function(n){return Gs(n)===PC};ct.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===xC||n===AC||n===_C||n===CC||n===PC||n===mIe||typeof n=="object"&&n!==null&&(n.$$typeof===kC||n.$$typeof===IC||n.$$typeof===SC||n.$$typeof===EC||n.$$typeof===TC||n.$$typeof===kQ||n.getModuleId!==void 0)};ct.typeOf=Gs;IQ.exports=ct;var RQ=IQ.exports,gIe=uc,yIe=dc,vIe="[object Number]";function bIe(n){return typeof n=="number"||yIe(n)&&gIe(n)==vIe}var NQ=bIe;const wIe=Or(NQ);var xIe=NQ;function _Ie(n){return xIe(n)&&n!=+n}var AIe=_Ie;const kL=Or(AIe);var Hl=function(e){return e===0?0:e>0?1:-1},th=function(e){return CL(e)&&e.indexOf("%")===e.length-1},Xe=function(e){return wIe(e)&&!kL(e)},nE=function(e){return Xe(e)||CL(e)},SIe=0,RL=function(e){var t=++SIe;return"".concat(e||"").concat(t)},nh=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Xe(e)&&!CL(e))return r;var s;if(th(e)){var o=e.indexOf("%");s=t*parseFloat(e.slice(0,o))/100}else s=+e;return kL(s)&&(s=r),i&&s>t&&(s=t),s},Ud=function(e,t){return Xe(e)&&Xe(t)?function(r){return e+r*(t-e)}:function(){return t}};function EIe(n,e,t){return!n||!n.length?null:n.find(function(r){return r&&Uf(r,e)===t})}function FI(n,e){for(var t in n)if({}.hasOwnProperty.call(n,t)&&(!{}.hasOwnProperty.call(e,t)||n[t]!==e[t]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(n,r))return!1;return!0}function wN(n){"@babel/helpers - typeof";return wN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wN(n)}var TIe=["viewBox","children"],CIe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],HV=["points","pathLength"],$I={svg:TIe,polygon:HV,polyline:HV},NL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],OQ=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(A.isValidElement(e)&&(r=e.props),!vy(r))return null;var i={};return Object.keys(r).forEach(function(s){NL.includes(s)&&(i[s]=function(o){return r[s](r,o)})}),i},PIe=function(e,t,r){return function(i){return e(t,r,i),null}},MQ=function(e,t,r){if(!vy(e)||wN(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];NL.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=PIe(o,t,r))}),i};function xN(n){"@babel/helpers - typeof";return xN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xN(n)}var _N=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},WV=null,VI=null,IIe=function n(e){if(e===WV&&Array.isArray(VI))return VI;var t=[];return A.Children.forEach(e,function(r){Vt(r)||(RQ.isFragment(r)?t=t.concat(n(r.props.children)):t.push(r))}),VI=t,WV=e,t};function RC(n,e){var t=[],r=[];return Array.isArray(e)?r=e.map(function(i){return _N(i)}):r=[_N(e)],IIe(n).forEach(function(i){var s=Uf(i,"type.displayName")||Uf(i,"type.name");r.indexOf(s)!==-1&&t.push(i)}),t}var kIe=function(e){return e&&xN(e)==="object"&&"clipDot"in e},RIe=function(e,t,r,i){var s;return s=$I==null?void 0:$I[i],!Rn(e)&&CIe.includes(t)||r&&NL.includes(t)},At=function(e,t,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(A.isValidElement(e)&&(i=e.props),!vy(i))return null;var s={};return Object.keys(i).forEach(function(o){var a;RIe((a=i)===null||a===void 0?void 0:a[o],o,t,r)&&(s[o]=i[o])}),s},NIe=["children","className"];function AN(){return AN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},AN.apply(this,arguments)}function OIe(n,e){if(n==null)return{};var t=MIe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function MIe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var vi=G.forwardRef(function(n,e){var t=n.children,r=n.className,i=OIe(n,NIe),s=Wt("recharts-layer",r);return G.createElement("g",AN({className:s},At(i,!0),{ref:e}),t)}),_b=function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function DIe(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=n[r+e];return s}var LIe=DIe,jIe=LIe;function FIe(n,e,t){var r=n.length;return t=t===void 0?r:t,!e&&t>=r?n:jIe(n,e,t)}var $Ie=FIe,VIe="\\ud800-\\udfff",BIe="\\u0300-\\u036f",zIe="\\ufe20-\\ufe2f",UIe="\\u20d0-\\u20ff",HIe=BIe+zIe+UIe,WIe="\\ufe0e\\ufe0f",GIe="\\u200d",qIe=RegExp("["+GIe+VIe+HIe+WIe+"]");function KIe(n){return qIe.test(n)}var DQ=KIe;function YIe(n){return n.split("")}var XIe=YIe,LQ="\\ud800-\\udfff",QIe="\\u0300-\\u036f",JIe="\\ufe20-\\ufe2f",ZIe="\\u20d0-\\u20ff",e2e=QIe+JIe+ZIe,t2e="\\ufe0e\\ufe0f",n2e="["+LQ+"]",SN="["+e2e+"]",EN="\\ud83c[\\udffb-\\udfff]",r2e="(?:"+SN+"|"+EN+")",jQ="[^"+LQ+"]",FQ="(?:\\ud83c[\\udde6-\\uddff]){2}",$Q="[\\ud800-\\udbff][\\udc00-\\udfff]",i2e="\\u200d",VQ=r2e+"?",BQ="["+t2e+"]?",s2e="(?:"+i2e+"(?:"+[jQ,FQ,$Q].join("|")+")"+BQ+VQ+")*",o2e=BQ+VQ+s2e,a2e="(?:"+[jQ+SN+"?",SN,FQ,$Q,n2e].join("|")+")",l2e=RegExp(EN+"(?="+EN+")|"+a2e+o2e,"g");function c2e(n){return n.match(l2e)||[]}var u2e=c2e,d2e=XIe,h2e=DQ,f2e=u2e;function p2e(n){return h2e(n)?f2e(n):d2e(n)}var m2e=p2e,g2e=$Ie,y2e=DQ,v2e=m2e,b2e=TQ;function w2e(n){return function(e){e=b2e(e);var t=y2e(e)?v2e(e):void 0,r=t?t[0]:e.charAt(0),i=t?g2e(t,1).join(""):e.slice(1);return r[n]()+i}}var x2e=w2e,_2e=x2e,A2e=_2e("toUpperCase"),S2e=A2e;const OL=Or(S2e);function Zt(n){return function(){return n}}const zQ=Math.cos,rE=Math.sin,Lo=Math.sqrt,iE=Math.PI,NC=2*iE,TN=Math.PI,CN=2*TN,Vd=1e-6,E2e=CN-Vd;function UQ(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function T2e(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return UQ;const t=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}class C2e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?UQ:T2e(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,s,o){this._append`C${+e},${+t},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,t,r,i,s){if(e=+e,t=+t,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=i-t,u=o-e,d=a-t,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(h>Vd)if(!(Math.abs(d*l-c*u)>Vd)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let m=r-o,y=i-a,g=l*l+c*c,b=m*m+y*y,w=Math.sqrt(g),x=Math.sqrt(h),_=s*Math.tan((TN-Math.acos((g+h-b)/(2*w*x)))/2),S=_/x,P=_/w;Math.abs(S-1)>Vd&&this._append`L${e+S*u},${t+S*d}`,this._append`A${s},${s},0,0,${+(d*m>u*y)},${this._x1=e+P*l},${this._y1=t+P*c}`}}arc(e,t,r,i,s,o){if(e=+e,t=+t,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=t+l,d=1^o,h=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Vd||Math.abs(this._y1-u)>Vd)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%CN+CN),h>E2e?this._append`A${r},${r},0,1,${d},${e-a},${t-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:h>Vd&&this._append`A${r},${r},0,${+(h>=TN)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=t+r*Math.sin(s)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function ML(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new C2e(e)}function HQ(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function WQ(n){this._context=n}WQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function OC(n){return new WQ(n)}function GQ(n){return n[0]}function qQ(n){return n[1]}function KQ(n,e){var t=Zt(!0),r=null,i=OC,s=null,o=ML(a);n=typeof n=="function"?n:n===void 0?GQ:Zt(n),e=typeof e=="function"?e:e===void 0?qQ:Zt(e);function a(l){var c,u=(l=HQ(l)).length,d,h=!1,m;for(r==null&&(s=i(m=o())),c=0;c<=u;++c)!(c<u&&t(d=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+n(d,c,l),+e(d,c,l));if(m)return s=null,m+""||null}return a.x=function(l){return arguments.length?(n=typeof l=="function"?l:Zt(+l),a):n},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Zt(+l),a):e},a.defined=function(l){return arguments.length?(t=typeof l=="function"?l:Zt(!!l),a):t},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function g1(n,e,t){var r=null,i=Zt(!0),s=null,o=OC,a=null,l=ML(c);n=typeof n=="function"?n:n===void 0?GQ:Zt(+n),e=typeof e=="function"?e:Zt(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?qQ:Zt(+t);function c(d){var h,m,y,g=(d=HQ(d)).length,b,w=!1,x,_=new Array(g),S=new Array(g);for(s==null&&(a=o(x=l())),h=0;h<=g;++h){if(!(h<g&&i(b=d[h],h,d))===w)if(w=!w)m=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),y=h-1;y>=m;--y)a.point(_[y],S[y]);a.lineEnd(),a.areaEnd()}w&&(_[h]=+n(b,h,d),S[h]=+e(b,h,d),a.point(r?+r(b,h,d):_[h],t?+t(b,h,d):S[h]))}if(x)return a=null,x+""||null}function u(){return KQ().defined(i).curve(o).context(s)}return c.x=function(d){return arguments.length?(n=typeof d=="function"?d:Zt(+d),r=null,c):n},c.x0=function(d){return arguments.length?(n=typeof d=="function"?d:Zt(+d),c):n},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Zt(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Zt(+d),t=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Zt(+d),c):e},c.y1=function(d){return arguments.length?(t=d==null?null:typeof d=="function"?d:Zt(+d),c):t},c.lineX0=c.lineY0=function(){return u().x(n).y(e)},c.lineY1=function(){return u().x(n).y(t)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Zt(!!d),c):i},c.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),c):o},c.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),c):s},c}class YQ{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function P2e(n){return new YQ(n,!0)}function I2e(n){return new YQ(n,!1)}const DL={draw(n,e){const t=Lo(e/iE);n.moveTo(t,0),n.arc(0,0,t,0,NC)}},k2e={draw(n,e){const t=Lo(e/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}},XQ=Lo(1/3),R2e=XQ*2,N2e={draw(n,e){const t=Lo(e/R2e),r=t*XQ;n.moveTo(0,-t),n.lineTo(r,0),n.lineTo(0,t),n.lineTo(-r,0),n.closePath()}},O2e={draw(n,e){const t=Lo(e),r=-t/2;n.rect(r,r,t,t)}},M2e=.8908130915292852,QQ=rE(iE/10)/rE(7*iE/10),D2e=rE(NC/10)*QQ,L2e=-zQ(NC/10)*QQ,j2e={draw(n,e){const t=Lo(e*M2e),r=D2e*t,i=L2e*t;n.moveTo(0,-t),n.lineTo(r,i);for(let s=1;s<5;++s){const o=NC*s/5,a=zQ(o),l=rE(o);n.lineTo(l*t,-a*t),n.lineTo(a*r-l*i,l*r+a*i)}n.closePath()}},BI=Lo(3),F2e={draw(n,e){const t=-Lo(e/(BI*3));n.moveTo(0,t*2),n.lineTo(-BI*t,-t),n.lineTo(BI*t,-t),n.closePath()}},fs=-.5,ps=Lo(3)/2,PN=1/Lo(12),$2e=(PN/2+1)*3,V2e={draw(n,e){const t=Lo(e/$2e),r=t/2,i=t*PN,s=r,o=t*PN+t,a=-s,l=o;n.moveTo(r,i),n.lineTo(s,o),n.lineTo(a,l),n.lineTo(fs*r-ps*i,ps*r+fs*i),n.lineTo(fs*s-ps*o,ps*s+fs*o),n.lineTo(fs*a-ps*l,ps*a+fs*l),n.lineTo(fs*r+ps*i,fs*i-ps*r),n.lineTo(fs*s+ps*o,fs*o-ps*s),n.lineTo(fs*a+ps*l,fs*l-ps*a),n.closePath()}};function B2e(n,e){let t=null,r=ML(i);n=typeof n=="function"?n:Zt(n||DL),e=typeof e=="function"?e:Zt(e===void 0?64:+e);function i(){let s;if(t||(t=s=r()),n.apply(this,arguments).draw(t,+e.apply(this,arguments)),s)return t=null,s+""||null}return i.type=function(s){return arguments.length?(n=typeof s=="function"?s:Zt(s),i):n},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Zt(+s),i):e},i.context=function(s){return arguments.length?(t=s??null,i):t},i}function sE(){}function oE(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function JQ(n){this._context=n}JQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:oE(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:oE(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function z2e(n){return new JQ(n)}function ZQ(n){this._context=n}ZQ.prototype={areaStart:sE,areaEnd:sE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:oE(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function U2e(n){return new ZQ(n)}function eJ(n){this._context=n}eJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:oE(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function H2e(n){return new eJ(n)}function tJ(n){this._context=n}tJ.prototype={areaStart:sE,areaEnd:sE,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function W2e(n){return new tJ(n)}function GV(n){return n<0?-1:1}function qV(n,e,t){var r=n._x1-n._x0,i=e-n._x1,s=(n._y1-n._y0)/(r||i<0&&-0),o=(t-n._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(GV(s)+GV(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function KV(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function zI(n,e,t){var r=n._x0,i=n._y0,s=n._x1,o=n._y1,a=(s-r)/3;n._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*t,s,o)}function aE(n){this._context=n}aE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zI(this,this._t0,KV(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,zI(this,KV(this,t=qV(this,n,e)),t);break;default:zI(this,this._t0,t=qV(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function nJ(n){this._context=new rJ(n)}(nJ.prototype=Object.create(aE.prototype)).point=function(n,e){aE.prototype.point.call(this,e,n)};function rJ(n){this._context=n}rJ.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,s){this._context.bezierCurveTo(e,n,r,t,s,i)}};function G2e(n){return new aE(n)}function q2e(n){return new nJ(n)}function iJ(n){this._context=n}iJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=YV(n),i=YV(e),s=0,o=1;o<t;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],n[o],e[o]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function YV(n){var e,t=n.length-1,r,i=new Array(t),s=new Array(t),o=new Array(t);for(i[0]=0,s[0]=2,o[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,s[e]=4,o[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,s[t-1]=7,o[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[t-1]=o[t-1]/s[t-1],e=t-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)s[e]=2*n[e+1]-i[e+1];return[i,s]}function K2e(n){return new iJ(n)}function MC(n,e){this._context=n,this._t=e}MC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function Y2e(n){return new MC(n,.5)}function X2e(n){return new MC(n,0)}function Q2e(n){return new MC(n,1)}function E0(n){"@babel/helpers - typeof";return E0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E0(n)}var J2e=["type","size","sizeType"];function IN(){return IN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},IN.apply(this,arguments)}function XV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function QV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XV(Object(t),!0).forEach(function(r){Z2e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):XV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Z2e(n,e,t){return e=eke(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eke(n){var e=tke(n,"string");return E0(e)=="symbol"?e:e+""}function tke(n,e){if(E0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(E0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nke(n,e){if(n==null)return{};var t=rke(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function rke(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var sJ={symbolCircle:DL,symbolCross:k2e,symbolDiamond:N2e,symbolSquare:O2e,symbolStar:j2e,symbolTriangle:F2e,symbolWye:V2e},ike=Math.PI/180,ske=function(e){var t="symbol".concat(OL(e));return sJ[t]||DL},oke=function(e,t,r){if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*ike;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},ake=function(e,t){sJ["symbol".concat(OL(e))]=t},oJ=function(e){var t=e.type,r=t===void 0?"circle":t,i=e.size,s=i===void 0?64:i,o=e.sizeType,a=o===void 0?"area":o,l=nke(e,J2e),c=QV(QV({},l),{},{type:r,size:s,sizeType:a}),u=function(){var b=ske(r),w=B2e().type(b).size(oke(s,a,r));return w()},d=c.className,h=c.cx,m=c.cy,y=At(c,!0);return h===+h&&m===+m&&s===+s?G.createElement("path",IN({},y,{className:Wt("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(m,")"),d:u()})):null};oJ.registerSymbol=ake;var lke=vC;function cke(){this.__data__=new lke,this.size=0}var uke=cke;function dke(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var hke=dke;function fke(n){return this.__data__.get(n)}var pke=fke;function mke(n){return this.__data__.has(n)}var gke=mke,yke=vC,vke=AL,bke=SL,wke=200;function xke(n,e){var t=this.__data__;if(t instanceof yke){var r=t.__data__;if(!vke||r.length<wke-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new bke(r)}return t.set(n,e),this.size=t.size,this}var _ke=xke,Ake=vC,Ske=uke,Eke=hke,Tke=pke,Cke=gke,Pke=_ke;function _y(n){var e=this.__data__=new Ake(n);this.size=e.size}_y.prototype.clear=Ske;_y.prototype.delete=Eke;_y.prototype.get=Tke;_y.prototype.has=Cke;_y.prototype.set=Pke;var aJ=_y,Ike="__lodash_hash_undefined__";function kke(n){return this.__data__.set(n,Ike),this}var Rke=kke;function Nke(n){return this.__data__.has(n)}var Oke=Nke,Mke=SL,Dke=Rke,Lke=Oke;function lE(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Mke;++e<t;)this.add(n[e])}lE.prototype.add=lE.prototype.push=Dke;lE.prototype.has=Lke;var jke=lE;function Fke(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}var $ke=Fke;function Vke(n,e){return n.has(e)}var Bke=Vke,zke=jke,Uke=$ke,Hke=Bke,Wke=1,Gke=2;function qke(n,e,t,r,i,s){var o=t&Wke,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(n),u=s.get(e);if(c&&u)return c==e&&u==n;var d=-1,h=!0,m=t&Gke?new zke:void 0;for(s.set(n,e),s.set(e,n);++d<a;){var y=n[d],g=e[d];if(r)var b=o?r(g,y,d,e,n,s):r(y,g,d,n,e,s);if(b!==void 0){if(b)continue;h=!1;break}if(m){if(!Uke(e,function(w,x){if(!Hke(m,x)&&(y===w||i(y,w,t,r,s)))return m.push(x)})){h=!1;break}}else if(!(y===g||i(y,g,t,r,s))){h=!1;break}}return s.delete(n),s.delete(e),h}var lJ=qke,Kke=Fa,Yke=Kke.Uint8Array,Xke=Yke;function Qke(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}var Jke=Qke;function Zke(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var eRe=Zke,JV=Qx,ZV=Xke,tRe=_L,nRe=lJ,rRe=Jke,iRe=eRe,sRe=1,oRe=2,aRe="[object Boolean]",lRe="[object Date]",cRe="[object Error]",uRe="[object Map]",dRe="[object Number]",hRe="[object RegExp]",fRe="[object Set]",pRe="[object String]",mRe="[object Symbol]",gRe="[object ArrayBuffer]",yRe="[object DataView]",e6=JV?JV.prototype:void 0,UI=e6?e6.valueOf:void 0;function vRe(n,e,t,r,i,s,o){switch(t){case yRe:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case gRe:return!(n.byteLength!=e.byteLength||!s(new ZV(n),new ZV(e)));case aRe:case lRe:case dRe:return tRe(+n,+e);case cRe:return n.name==e.name&&n.message==e.message;case hRe:case pRe:return n==e+"";case uRe:var a=rRe;case fRe:var l=r&sRe;if(a||(a=iRe),n.size!=e.size&&!l)return!1;var c=o.get(n);if(c)return c==e;r|=oRe,o.set(n,e);var u=nRe(a(n),a(e),r,i,s,o);return o.delete(n),u;case mRe:if(UI)return UI.call(n)==UI.call(e)}return!1}var bRe=vRe;function wRe(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var cJ=wRe,xRe=cJ,_Re=Do;function ARe(n,e,t){var r=e(n);return _Re(n)?r:xRe(r,t(n))}var SRe=ARe;function ERe(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}var TRe=ERe;function CRe(){return[]}var PRe=CRe,IRe=TRe,kRe=PRe,RRe=Object.prototype,NRe=RRe.propertyIsEnumerable,t6=Object.getOwnPropertySymbols,ORe=t6?function(n){return n==null?[]:(n=Object(n),IRe(t6(n),function(e){return NRe.call(n,e)}))}:kRe,MRe=ORe;function DRe(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var LRe=DRe,jRe=uc,FRe=dc,$Re="[object Arguments]";function VRe(n){return FRe(n)&&jRe(n)==$Re}var BRe=VRe,n6=BRe,zRe=dc,uJ=Object.prototype,URe=uJ.hasOwnProperty,HRe=uJ.propertyIsEnumerable,WRe=n6(function(){return arguments}())?n6:function(n){return zRe(n)&&URe.call(n,"callee")&&!HRe.call(n,"callee")},LL=WRe,cE={exports:{}};function GRe(){return!1}var qRe=GRe;cE.exports;(function(n,e){var t=Fa,r=qRe,i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;n.exports=c})(cE,cE.exports);var dJ=cE.exports,KRe=9007199254740991,YRe=/^(?:0|[1-9]\d*)$/;function XRe(n,e){var t=typeof n;return e=e??KRe,!!e&&(t=="number"||t!="symbol"&&YRe.test(n))&&n>-1&&n%1==0&&n<e}var jL=XRe,QRe=9007199254740991;function JRe(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=QRe}var FL=JRe,ZRe=uc,eNe=FL,tNe=dc,nNe="[object Arguments]",rNe="[object Array]",iNe="[object Boolean]",sNe="[object Date]",oNe="[object Error]",aNe="[object Function]",lNe="[object Map]",cNe="[object Number]",uNe="[object Object]",dNe="[object RegExp]",hNe="[object Set]",fNe="[object String]",pNe="[object WeakMap]",mNe="[object ArrayBuffer]",gNe="[object DataView]",yNe="[object Float32Array]",vNe="[object Float64Array]",bNe="[object Int8Array]",wNe="[object Int16Array]",xNe="[object Int32Array]",_Ne="[object Uint8Array]",ANe="[object Uint8ClampedArray]",SNe="[object Uint16Array]",ENe="[object Uint32Array]",Pt={};Pt[yNe]=Pt[vNe]=Pt[bNe]=Pt[wNe]=Pt[xNe]=Pt[_Ne]=Pt[ANe]=Pt[SNe]=Pt[ENe]=!0;Pt[nNe]=Pt[rNe]=Pt[mNe]=Pt[iNe]=Pt[gNe]=Pt[sNe]=Pt[oNe]=Pt[aNe]=Pt[lNe]=Pt[cNe]=Pt[uNe]=Pt[dNe]=Pt[hNe]=Pt[fNe]=Pt[pNe]=!1;function TNe(n){return tNe(n)&&eNe(n.length)&&!!Pt[ZRe(n)]}var CNe=TNe;function PNe(n){return function(e){return n(e)}}var hJ=PNe,uE={exports:{}};uE.exports;(function(n,e){var t=wQ,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();n.exports=a})(uE,uE.exports);var INe=uE.exports,kNe=CNe,RNe=hJ,r6=INe,i6=r6&&r6.isTypedArray,NNe=i6?RNe(i6):kNe,fJ=NNe,ONe=LRe,MNe=LL,DNe=Do,LNe=dJ,jNe=jL,FNe=fJ,$Ne=Object.prototype,VNe=$Ne.hasOwnProperty;function BNe(n,e){var t=DNe(n),r=!t&&MNe(n),i=!t&&!r&&LNe(n),s=!t&&!r&&!i&&FNe(n),o=t||r||i||s,a=o?ONe(n.length,String):[],l=a.length;for(var c in n)(e||VNe.call(n,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||jNe(c,l)))&&a.push(c);return a}var zNe=BNe,UNe=Object.prototype;function HNe(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||UNe;return n===t}var WNe=HNe;function GNe(n,e){return function(t){return n(e(t))}}var pJ=GNe,qNe=pJ,KNe=qNe(Object.keys,Object),YNe=KNe,XNe=WNe,QNe=YNe,JNe=Object.prototype,ZNe=JNe.hasOwnProperty;function eOe(n){if(!XNe(n))return QNe(n);var e=[];for(var t in Object(n))ZNe.call(n,t)&&t!="constructor"&&e.push(t);return e}var tOe=eOe,nOe=xL,rOe=FL;function iOe(n){return n!=null&&rOe(n.length)&&!nOe(n)}var DC=iOe,sOe=zNe,oOe=tOe,aOe=DC;function lOe(n){return aOe(n)?sOe(n):oOe(n)}var $L=lOe,cOe=SRe,uOe=MRe,dOe=$L;function hOe(n){return cOe(n,dOe,uOe)}var fOe=hOe,s6=fOe,pOe=1,mOe=Object.prototype,gOe=mOe.hasOwnProperty;function yOe(n,e,t,r,i,s){var o=t&pOe,a=s6(n),l=a.length,c=s6(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var h=a[d];if(!(o?h in e:gOe.call(e,h)))return!1}var m=s.get(n),y=s.get(e);if(m&&y)return m==e&&y==n;var g=!0;s.set(n,e),s.set(e,n);for(var b=o;++d<l;){h=a[d];var w=n[h],x=e[h];if(r)var _=o?r(x,w,h,e,n,s):r(w,x,h,n,e,s);if(!(_===void 0?w===x||i(w,x,t,r,s):_)){g=!1;break}b||(b=h=="constructor")}if(g&&!b){var S=n.constructor,P=e.constructor;S!=P&&"constructor"in n&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof P=="function"&&P instanceof P)&&(g=!1)}return s.delete(n),s.delete(e),g}var vOe=yOe,bOe=ap,wOe=Fa,xOe=bOe(wOe,"DataView"),_Oe=xOe,AOe=ap,SOe=Fa,EOe=AOe(SOe,"Promise"),TOe=EOe,COe=ap,POe=Fa,IOe=COe(POe,"Set"),kOe=IOe,ROe=ap,NOe=Fa,OOe=ROe(NOe,"WeakMap"),MOe=OOe,kN=_Oe,RN=AL,NN=TOe,ON=kOe,MN=MOe,mJ=uc,Ay=_Q,o6="[object Map]",DOe="[object Object]",a6="[object Promise]",l6="[object Set]",c6="[object WeakMap]",u6="[object DataView]",LOe=Ay(kN),jOe=Ay(RN),FOe=Ay(NN),$Oe=Ay(ON),VOe=Ay(MN),Bd=mJ;(kN&&Bd(new kN(new ArrayBuffer(1)))!=u6||RN&&Bd(new RN)!=o6||NN&&Bd(NN.resolve())!=a6||ON&&Bd(new ON)!=l6||MN&&Bd(new MN)!=c6)&&(Bd=function(n){var e=mJ(n),t=e==DOe?n.constructor:void 0,r=t?Ay(t):"";if(r)switch(r){case LOe:return u6;case jOe:return o6;case FOe:return a6;case $Oe:return l6;case VOe:return c6}return e});var BOe=Bd,HI=aJ,zOe=lJ,UOe=bRe,HOe=vOe,d6=BOe,h6=Do,f6=dJ,WOe=fJ,GOe=1,p6="[object Arguments]",m6="[object Array]",y1="[object Object]",qOe=Object.prototype,g6=qOe.hasOwnProperty;function KOe(n,e,t,r,i,s){var o=h6(n),a=h6(e),l=o?m6:d6(n),c=a?m6:d6(e);l=l==p6?y1:l,c=c==p6?y1:c;var u=l==y1,d=c==y1,h=l==c;if(h&&f6(n)){if(!f6(e))return!1;o=!0,u=!1}if(h&&!u)return s||(s=new HI),o||WOe(n)?zOe(n,e,t,r,i,s):UOe(n,e,l,t,r,i,s);if(!(t&GOe)){var m=u&&g6.call(n,"__wrapped__"),y=d&&g6.call(e,"__wrapped__");if(m||y){var g=m?n.value():n,b=y?e.value():e;return s||(s=new HI),i(g,b,t,r,s)}}return h?(s||(s=new HI),HOe(n,e,t,r,i,s)):!1}var YOe=KOe,XOe=YOe,y6=dc;function gJ(n,e,t,r,i){return n===e?!0:n==null||e==null||!y6(n)&&!y6(e)?n!==n&&e!==e:XOe(n,e,t,r,gJ,i)}var VL=gJ,QOe=aJ,JOe=VL,ZOe=1,eMe=2;function tMe(n,e,t,r){var i=t.length,s=i,o=!r;if(n==null)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){a=t[i];var l=a[0],c=n[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in n))return!1}else{var d=new QOe;if(r)var h=r(c,u,l,n,e,d);if(!(h===void 0?JOe(u,c,ZOe|eMe,r,d):h))return!1}}return!0}var nMe=tMe,rMe=xd;function iMe(n){return n===n&&!rMe(n)}var yJ=iMe,sMe=yJ,oMe=$L;function aMe(n){for(var e=oMe(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,sMe(i)]}return e}var lMe=aMe;function cMe(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}var vJ=cMe,uMe=nMe,dMe=lMe,hMe=vJ;function fMe(n){var e=dMe(n);return e.length==1&&e[0][2]?hMe(e[0][0],e[0][1]):function(t){return t===n||uMe(t,n,e)}}var pMe=fMe;function mMe(n,e){return n!=null&&e in Object(n)}var gMe=mMe,yMe=CQ,vMe=LL,bMe=Do,wMe=jL,xMe=FL,_Me=wC;function AMe(n,e,t){e=yMe(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=_Me(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&xMe(i)&&wMe(o,i)&&(bMe(n)||vMe(n)))}var SMe=AMe,EMe=gMe,TMe=SMe;function CMe(n,e){return n!=null&&TMe(n,e,EMe)}var PMe=CMe,IMe=VL,kMe=PQ,RMe=PMe,NMe=wL,OMe=yJ,MMe=vJ,DMe=wC,LMe=1,jMe=2;function FMe(n,e){return NMe(n)&&OMe(e)?MMe(DMe(n),e):function(t){var r=kMe(t,n);return r===void 0&&r===e?RMe(t,n):IMe(e,r,LMe|jMe)}}var $Me=FMe;function VMe(n){return n}var LC=VMe;function BMe(n){return function(e){return e==null?void 0:e[n]}}var zMe=BMe,UMe=TL;function HMe(n){return function(e){return UMe(e,n)}}var WMe=HMe,GMe=zMe,qMe=WMe,KMe=wL,YMe=wC;function XMe(n){return KMe(n)?GMe(YMe(n)):qMe(n)}var QMe=XMe,JMe=pMe,ZMe=$Me,eDe=LC,tDe=Do,nDe=QMe;function rDe(n){return typeof n=="function"?n:n==null?eDe:typeof n=="object"?tDe(n)?ZMe(n[0],n[1]):JMe(n):nDe(n)}var iDe=rDe,v6=Qx,sDe=LL,oDe=Do,b6=v6?v6.isConcatSpreadable:void 0;function aDe(n){return oDe(n)||sDe(n)||!!(b6&&n&&n[b6])}var lDe=aDe,cDe=cJ,uDe=lDe;function bJ(n,e,t,r,i){var s=-1,o=n.length;for(t||(t=uDe),i||(i=[]);++s<o;){var a=n[s];e>0&&t(a)?e>1?bJ(a,e-1,t,r,i):cDe(i,a):r||(i[i.length]=a)}return i}var dDe=bJ;function hDe(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[n?a:++i];if(t(s[l],l,s)===!1)break}return e}}var fDe=hDe,pDe=fDe,mDe=pDe(),gDe=mDe,yDe=gDe,vDe=$L;function bDe(n,e){return n&&yDe(n,e,vDe)}var wDe=bDe,xDe=DC;function _De(n,e){return function(t,r){if(t==null)return t;if(!xDe(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return t}}var ADe=_De,SDe=wDe,EDe=ADe,TDe=EDe(SDe),CDe=TDe,PDe=CDe,IDe=DC;function kDe(n,e){var t=-1,r=IDe(n)?Array(n.length):[];return PDe(n,function(i,s,o){r[++t]=e(i,s,o)}),r}var RDe=kDe;function NDe(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}var ODe=NDe,w6=Jx;function MDe(n,e){if(n!==e){var t=n!==void 0,r=n===null,i=n===n,s=w6(n),o=e!==void 0,a=e===null,l=e===e,c=w6(e);if(!a&&!c&&!s&&n>e||s&&o&&l&&!a&&!c||r&&o&&l||!t&&l||!i)return 1;if(!r&&!s&&!c&&n<e||c&&t&&i&&!r&&!s||a&&t&&i||!o&&i||!l)return-1}return 0}var DDe=MDe,LDe=DDe;function jDe(n,e,t){for(var r=-1,i=n.criteria,s=e.criteria,o=i.length,a=t.length;++r<o;){var l=LDe(i[r],s[r]);if(l){if(r>=a)return l;var c=t[r];return l*(c=="desc"?-1:1)}}return n.index-e.index}var FDe=jDe,WI=SQ,$De=TL,VDe=iDe,BDe=RDe,zDe=ODe,UDe=hJ,HDe=FDe,WDe=LC,GDe=Do;function qDe(n,e,t){e.length?e=WI(e,function(s){return GDe(s)?function(o){return $De(o,s.length===1?s[0]:s)}:s}):e=[WDe];var r=-1;e=WI(e,UDe(VDe));var i=BDe(n,function(s,o,a){var l=WI(e,function(c){return c(s)});return{criteria:l,index:++r,value:s}});return zDe(i,function(s,o){return HDe(s,o,t)})}var KDe=qDe;function YDe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var XDe=YDe,QDe=XDe,x6=Math.max;function JDe(n,e,t){return e=x6(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=x6(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),QDe(n,this,a)}}var ZDe=JDe;function eLe(n){return function(){return n}}var tLe=eLe,nLe=ap,rLe=function(){try{var n=nLe(Object,"defineProperty");return n({},"",{}),n}catch{}}(),iLe=rLe,sLe=tLe,_6=iLe,oLe=LC,aLe=_6?function(n,e){return _6(n,"toString",{configurable:!0,enumerable:!1,value:sLe(e),writable:!0})}:oLe,lLe=aLe,cLe=800,uLe=16,dLe=Date.now;function hLe(n){var e=0,t=0;return function(){var r=dLe(),i=uLe-(r-t);if(t=r,i>0){if(++e>=cLe)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var fLe=hLe,pLe=lLe,mLe=fLe,gLe=mLe(pLe),yLe=gLe,vLe=LC,bLe=ZDe,wLe=yLe;function xLe(n,e){return wLe(bLe(n,e,vLe),n+"")}var _Le=xLe,ALe=_L,SLe=DC,ELe=jL,TLe=xd;function CLe(n,e,t){if(!TLe(t))return!1;var r=typeof e;return(r=="number"?SLe(t)&&ELe(e,t.length):r=="string"&&e in t)?ALe(t[e],n):!1}var PLe=CLe,ILe=dDe,kLe=KDe,RLe=_Le,A6=PLe;RLe(function(n,e){if(n==null)return[];var t=e.length;return t>1&&A6(n,e[0],e[1])?e=[]:t>2&&A6(e[0],e[1],e[2])&&(e=[e[0]]),kLe(n,ILe(e,1),[])});var NLe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},qu={isSsr:NLe(),get:function(e){return qu[e]},set:function(e,t){if(typeof e=="string")qu[e]=t;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){qu[i]=e[i]})}}},OLe=Fa,MLe=function(){return OLe.Date.now()},DLe=MLe,LLe=/\s/;function jLe(n){for(var e=n.length;e--&&LLe.test(n.charAt(e)););return e}var FLe=jLe,$Le=FLe,VLe=/^\s+/;function BLe(n){return n&&n.slice(0,$Le(n)+1).replace(VLe,"")}var zLe=BLe,ULe=zLe,S6=xd,HLe=Jx,E6=NaN,WLe=/^[-+]0x[0-9a-f]+$/i,GLe=/^0b[01]+$/i,qLe=/^0o[0-7]+$/i,KLe=parseInt;function YLe(n){if(typeof n=="number")return n;if(HLe(n))return E6;if(S6(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=S6(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=ULe(n);var t=GLe.test(n);return t||qLe.test(n)?KLe(n.slice(2),t?2:8):WLe.test(n)?E6:+n}var XLe=YLe,QLe=xd,GI=DLe,T6=XLe,JLe="Expected a function",ZLe=Math.max,eje=Math.min;function tje(n,e,t){var r,i,s,o,a,l,c=0,u=!1,d=!1,h=!0;if(typeof n!="function")throw new TypeError(JLe);e=T6(e)||0,QLe(t)&&(u=!!t.leading,d="maxWait"in t,s=d?ZLe(T6(t.maxWait)||0,e):s,h="trailing"in t?!!t.trailing:h);function m(N){var T=r,C=i;return r=i=void 0,c=N,o=n.apply(C,T),o}function y(N){return c=N,a=setTimeout(w,e),u?m(N):o}function g(N){var T=N-l,C=N-c,k=e-T;return d?eje(k,s-C):k}function b(N){var T=N-l,C=N-c;return l===void 0||T>=e||T<0||d&&C>=s}function w(){var N=GI();if(b(N))return x(N);a=setTimeout(w,g(N))}function x(N){return a=void 0,h&&r?m(N):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function S(){return a===void 0?o:x(GI())}function P(){var N=GI(),T=b(N);if(r=arguments,i=this,l=N,T){if(a===void 0)return y(l);if(d)return clearTimeout(a),a=setTimeout(w,e),m(l)}return a===void 0&&(a=setTimeout(w,e)),o}return P.cancel=_,P.flush=S,P}var nje=tje,rje=nje,ije=xd,sje="Expected a function";function oje(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(sje);return ije(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),rje(n,e,{leading:r,maxWait:e,trailing:i})}var aje=oje;const lje=Or(aje);function T0(n){"@babel/helpers - typeof";return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T0(n)}function C6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function v1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?C6(Object(t),!0).forEach(function(r){cje(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):C6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cje(n,e,t){return e=uje(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uje(n){var e=dje(n,"string");return T0(e)=="symbol"?e:e+""}function dje(n,e){if(T0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(T0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hje(n,e){return gje(n)||mje(n,e)||pje(n,e)||fje()}function fje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pje(n,e){if(n){if(typeof n=="string")return P6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P6(n,e)}}function P6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function mje(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function gje(n){if(Array.isArray(n))return n}var wJ=A.forwardRef(function(n,e){var t=n.aspect,r=n.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=n.width,o=s===void 0?"100%":s,a=n.height,l=a===void 0?"100%":a,c=n.minWidth,u=c===void 0?0:c,d=n.minHeight,h=n.maxHeight,m=n.children,y=n.debounce,g=y===void 0?0:y,b=n.id,w=n.className,x=n.onResize,_=n.style,S=_===void 0?{}:_,P=A.useRef(null),N=A.useRef();N.current=x,A.useImperativeHandle(e,function(){return Object.defineProperty(P.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),P.current},configurable:!0})});var T=A.useState({containerWidth:i.width,containerHeight:i.height}),C=hje(T,2),k=C[0],M=C[1],L=A.useCallback(function(j,q){M(function(H){var z=Math.round(j),W=Math.round(q);return H.containerWidth===z&&H.containerHeight===W?H:{containerWidth:z,containerHeight:W}})},[]);A.useEffect(function(){var j=function(U){var K,Q=U[0].contentRect,B=Q.width,Y=Q.height;L(B,Y),(K=N.current)===null||K===void 0||K.call(N,B,Y)};g>0&&(j=lje(j,g,{trailing:!0,leading:!1}));var q=new ResizeObserver(j),H=P.current.getBoundingClientRect(),z=H.width,W=H.height;return L(z,W),q.observe(P.current),function(){q.disconnect()}},[L,g]);var F=A.useMemo(function(){var j=k.containerWidth,q=k.containerHeight;if(j<0||q<0)return null;_b(th(o)||th(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),_b(!t||t>0,"The aspect(%s) must be greater than zero.",t);var H=th(o)?j:o,z=th(l)?q:l;t&&t>0&&(H?z=H/t:z&&(H=z*t),h&&z>h&&(z=h)),_b(H>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,H,z,o,l,u,d,t);var W=!Array.isArray(m)&&_N(m.type).endsWith("Chart");return G.Children.map(m,function(V){return RQ.isElement(V)?A.cloneElement(V,v1({width:H,height:z},W?{style:v1({height:"100%",width:"100%",maxHeight:z,maxWidth:H},V.props.style)}:{})):V})},[t,m,l,h,d,u,k,o]);return G.createElement("div",{id:b?"".concat(b):void 0,className:Wt("recharts-responsive-container",w),style:v1(v1({},S),{},{width:o,height:l,minWidth:u,minHeight:d,maxHeight:h}),ref:P},F)}),xJ=function(e){return null};xJ.displayName="Cell";function C0(n){"@babel/helpers - typeof";return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C0(n)}function I6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function DN(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?I6(Object(t),!0).forEach(function(r){yje(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):I6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function yje(n,e,t){return e=vje(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vje(n){var e=bje(n,"string");return C0(e)=="symbol"?e:e+""}function bje(n,e){if(C0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(C0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var vp={widthCache:{},cacheCount:0},wje=2e3,xje={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},k6="recharts_measurement_span";function _je(n){var e=DN({},n);return Object.keys(e).forEach(function(t){e[t]||delete e[t]}),e}var Ab=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||qu.isSsr)return{width:0,height:0};var r=_je(t),i=JSON.stringify({text:e,copyStyle:r});if(vp.widthCache[i])return vp.widthCache[i];try{var s=document.getElementById(k6);s||(s=document.createElement("span"),s.setAttribute("id",k6),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=DN(DN({},xje),r);Object.assign(s.style,o),s.textContent="".concat(e);var a=s.getBoundingClientRect(),l={width:a.width,height:a.height};return vp.widthCache[i]=l,++vp.cacheCount>wje&&(vp.cacheCount=0,vp.widthCache={}),l}catch{return{width:0,height:0}}};function P0(n){"@babel/helpers - typeof";return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P0(n)}function dE(n,e){return Tje(n)||Eje(n,e)||Sje(n,e)||Aje()}function Aje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sje(n,e){if(n){if(typeof n=="string")return R6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return R6(n,e)}}function R6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Eje(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function Tje(n){if(Array.isArray(n))return n}function Cje(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function N6(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Ije(r.key),r)}}function Pje(n,e,t){return e&&N6(n.prototype,e),t&&N6(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ije(n){var e=kje(n,"string");return P0(e)=="symbol"?e:e+""}function kje(n,e){if(P0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(P0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var O6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,M6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Rje=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Nje=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_J={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Oje=Object.keys(_J),Gp="NaN";function Mje(n,e){return n*_J[e]}var b1=function(){function n(e,t){Cje(this,n),this.num=e,this.unit=t,this.num=e,this.unit=t,Number.isNaN(e)&&(this.unit=""),t!==""&&!Rje.test(t)&&(this.num=NaN,this.unit=""),Oje.includes(t)&&(this.num=Mje(e,t),this.unit="px")}return Pje(n,[{key:"add",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var r,i=(r=Nje.exec(t))!==null&&r!==void 0?r:[],s=dE(i,3),o=s[1],a=s[2];return new n(parseFloat(o),a??"")}}])}();function AJ(n){if(n.includes(Gp))return Gp;for(var e=n;e.includes("*")||e.includes("/");){var t,r=(t=O6.exec(e))!==null&&t!==void 0?t:[],i=dE(r,4),s=i[1],o=i[2],a=i[3],l=b1.parse(s??""),c=b1.parse(a??""),u=o==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return Gp;e=e.replace(O6,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=M6.exec(e))!==null&&d!==void 0?d:[],m=dE(h,4),y=m[1],g=m[2],b=m[3],w=b1.parse(y??""),x=b1.parse(b??""),_=g==="+"?w.add(x):w.subtract(x);if(_.isNaN())return Gp;e=e.replace(M6,_.toString())}return e}var D6=/\(([^()]*)\)/;function Dje(n){for(var e=n;e.includes("(");){var t=D6.exec(e),r=dE(t,2),i=r[1];e=e.replace(D6,AJ(i))}return e}function Lje(n){var e=n.replace(/\s+/g,"");return e=Dje(e),e=AJ(e),e}function jje(n){try{return Lje(n)}catch{return Gp}}function qI(n){var e=jje(n.slice(5,-1));return e===Gp?"":e}var Fje=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],$je=["dx","dy","angle","className","breakAll"];function LN(){return LN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},LN.apply(this,arguments)}function L6(n,e){if(n==null)return{};var t=Vje(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Vje(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function j6(n,e){return Hje(n)||Uje(n,e)||zje(n,e)||Bje()}function Bje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zje(n,e){if(n){if(typeof n=="string")return F6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return F6(n,e)}}function F6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Uje(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function Hje(n){if(Array.isArray(n))return n}var SJ=/[ \f\n\r\t\v\u2028\u2029]+/,EJ=function(e){var t=e.children,r=e.breakAll,i=e.style;try{var s=[];Vt(t)||(r?s=t.toString().split(""):s=t.toString().split(SJ));var o=s.map(function(l){return{word:l,width:Ab(l,i).width}}),a=r?0:Ab(" ",i).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}},Wje=function(e,t,r,i,s){var o=e.maxLines,a=e.children,l=e.style,c=e.breakAll,u=Xe(o),d=a,h=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce(function(z,W){var V=W.word,U=W.width,K=z[z.length-1];if(K&&(i==null||s||K.width+U+r<Number(i)))K.words.push(V),K.width+=U+r;else{var Q={words:[V],width:U};z.push(Q)}return z},[])},m=h(t),y=function(H){return H.reduce(function(z,W){return z.width>W.width?z:W})};if(!u)return m;for(var g="…",b=function(H){var z=d.slice(0,H),W=EJ({breakAll:c,style:l,children:z+g}).wordsWithComputedWidth,V=h(W),U=V.length>o||y(V).width>Number(i);return[U,V]},w=0,x=d.length-1,_=0,S;w<=x&&_<=d.length-1;){var P=Math.floor((w+x)/2),N=P-1,T=b(N),C=j6(T,2),k=C[0],M=C[1],L=b(P),F=j6(L,1),j=F[0];if(!k&&!j&&(w=P+1),k&&j&&(x=P-1),!k&&j){S=M;break}_++}return S||m},$6=function(e){var t=Vt(e)?[]:e.toString().split(SJ);return[{words:t}]},Gje=function(e){var t=e.width,r=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,a=e.maxLines;if((t||r)&&!qu.isSsr){var l,c,u=EJ({breakAll:o,children:i,style:s});if(u){var d=u.wordsWithComputedWidth,h=u.spaceWidth;l=d,c=h}else return $6(i);return Wje({breakAll:o,children:i,maxLines:a,style:s},l,c,t,r)}return $6(i)},V6="#808080",BL=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,s=i===void 0?0:i,o=e.lineHeight,a=o===void 0?"1em":o,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,d=u===void 0?!1:u,h=e.textAnchor,m=h===void 0?"start":h,y=e.verticalAnchor,g=y===void 0?"end":y,b=e.fill,w=b===void 0?V6:b,x=L6(e,Fje),_=A.useMemo(function(){return Gje({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:d,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,d,x.style,x.width]),S=x.dx,P=x.dy,N=x.angle,T=x.className,C=x.breakAll,k=L6(x,$je);if(!nE(r)||!nE(s))return null;var M=r+(Xe(S)?S:0),L=s+(Xe(P)?P:0),F;switch(g){case"start":F=qI("calc(".concat(c,")"));break;case"middle":F=qI("calc(".concat((_.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:F=qI("calc(".concat(_.length-1," * -").concat(a,")"));break}var j=[];if(d){var q=_[0].width,H=x.width;j.push("scale(".concat((Xe(H)?H/q:1)/q,")"))}return N&&j.push("rotate(".concat(N,", ").concat(M,", ").concat(L,")")),j.length&&(k.transform=j.join(" ")),G.createElement("text",LN({},At(k,!0),{x:M,y:L,className:Wt("recharts-text",T),textAnchor:m,fill:w.includes("url")?V6:w}),_.map(function(z,W){var V=z.words.join(C?"":" ");return G.createElement("tspan",{x:M,dy:W===0?F:a,key:"".concat(V,"-").concat(W)},V)}))},qje=VL;function Kje(n,e){return qje(n,e)}var Yje=Kje;const TJ=Or(Yje);var Sy=1e9,Xje={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},NJ,$t=!0,zs="[DecimalError] ",_f=zs+"Invalid argument: ",zL=zs+"Exponent out of range: ",Ey=Math.floor,zd=Math.pow,Qje=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,es,Hn=1e7,kt=7,CJ=9007199254740991,hE=Ey(CJ/kt),ge={};ge.absoluteValue=ge.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};ge.comparedTo=ge.cmp=function(n){var e,t,r,i,s=this;if(n=new s.constructor(n),s.s!==n.s)return s.s||-n.s;if(s.e!==n.e)return s.e>n.e^s.s<0?1:-1;for(r=s.d.length,i=n.d.length,e=0,t=r<i?r:i;e<t;++e)if(s.d[e]!==n.d[e])return s.d[e]>n.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};ge.decimalPlaces=ge.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*kt;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};ge.dividedBy=ge.div=function(n){return Wl(this,new this.constructor(n))};ge.dividedToIntegerBy=ge.idiv=function(n){var e=this,t=e.constructor;return yt(Wl(e,new t(n),0,1),t.precision)};ge.equals=ge.eq=function(n){return!this.cmp(n)};ge.exponent=function(){return _n(this)};ge.greaterThan=ge.gt=function(n){return this.cmp(n)>0};ge.greaterThanOrEqualTo=ge.gte=function(n){return this.cmp(n)>=0};ge.isInteger=ge.isint=function(){return this.e>this.d.length-2};ge.isNegative=ge.isneg=function(){return this.s<0};ge.isPositive=ge.ispos=function(){return this.s>0};ge.isZero=function(){return this.s===0};ge.lessThan=ge.lt=function(n){return this.cmp(n)<0};ge.lessThanOrEqualTo=ge.lte=function(n){return this.cmp(n)<1};ge.logarithm=ge.log=function(n){var e,t=this,r=t.constructor,i=r.precision,s=i+5;if(n===void 0)n=new r(10);else if(n=new r(n),n.s<1||n.eq(es))throw Error(zs+"NaN");if(t.s<1)throw Error(zs+(t.s?"NaN":"-Infinity"));return t.eq(es)?new r(0):($t=!1,e=Wl(I0(t,s),I0(n,s),s),$t=!0,yt(e,i))};ge.minus=ge.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?kJ(e,n):PJ(e,(n.s=-n.s,n))};ge.modulo=ge.mod=function(n){var e,t=this,r=t.constructor,i=r.precision;if(n=new r(n),!n.s)throw Error(zs+"NaN");return t.s?($t=!1,e=Wl(t,n,0,1).times(n),$t=!0,t.minus(e)):yt(new r(t),i)};ge.naturalExponential=ge.exp=function(){return IJ(this)};ge.naturalLogarithm=ge.ln=function(){return I0(this)};ge.negated=ge.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};ge.plus=ge.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?PJ(e,n):kJ(e,(n.s=-n.s,n))};ge.precision=ge.sd=function(n){var e,t,r,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(_f+n);if(e=_n(i)+1,r=i.d.length-1,t=r*kt+1,r=i.d[r],r){for(;r%10==0;r/=10)t--;for(r=i.d[0];r>=10;r/=10)t++}return n&&e>t?e:t};ge.squareRoot=ge.sqrt=function(){var n,e,t,r,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(zs+"NaN")}for(n=_n(a),$t=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=ba(a.d),(e.length+n)%2==0&&(e+="0"),i=Math.sqrt(e),n=Ey((n+1)/2)-(n<0||n%2),i==1/0?e="5e"+n:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),r=new l(e)):r=new l(i.toString()),t=l.precision,i=o=t+3;;)if(s=r,r=s.plus(Wl(a,s,o+2)).times(.5),ba(s.d).slice(0,o)===(e=ba(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(yt(s,t+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return $t=!0,yt(r,t)};ge.times=ge.mul=function(n){var e,t,r,i,s,o,a,l,c,u=this,d=u.constructor,h=u.d,m=(n=new d(n)).d;if(!u.s||!n.s)return new d(0);for(n.s*=u.s,t=u.e+n.e,l=h.length,c=m.length,l<c&&(s=h,h=m,m=s,o=l,l=c,c=o),s=[],o=l+c,r=o;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+m[r]*h[i-r-1]+e,s[i--]=a%Hn|0,e=a/Hn|0;s[i]=(s[i]+e)%Hn|0}for(;!s[--o];)s.pop();return e?++t:s.shift(),n.d=s,n.e=t,$t?yt(n,d.precision):n};ge.toDecimalPlaces=ge.todp=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(Da(n,0,Sy),e===void 0?e=r.rounding:Da(e,0,8),yt(t,n+_n(t)+1,e))};ge.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Hf(r,!0):(Da(n,0,Sy),e===void 0?e=i.rounding:Da(e,0,8),r=yt(new i(r),n+1,e),t=Hf(r,!0,n+1)),t};ge.toFixed=function(n,e){var t,r,i=this,s=i.constructor;return n===void 0?Hf(i):(Da(n,0,Sy),e===void 0?e=s.rounding:Da(e,0,8),r=yt(new s(i),n+_n(i)+1,e),t=Hf(r.abs(),!1,n+_n(r)+1),i.isneg()&&!i.isZero()?"-"+t:t)};ge.toInteger=ge.toint=function(){var n=this,e=n.constructor;return yt(new e(n),_n(n)+1,e.rounding)};ge.toNumber=function(){return+this};ge.toPower=ge.pow=function(n){var e,t,r,i,s,o,a=this,l=a.constructor,c=12,u=+(n=new l(n));if(!n.s)return new l(es);if(a=new l(a),!a.s){if(n.s<1)throw Error(zs+"Infinity");return a}if(a.eq(es))return a;if(r=l.precision,n.eq(es))return yt(a,r);if(e=n.e,t=n.d.length-1,o=e>=t,s=a.s,o){if((t=u<0?-u:u)<=CJ){for(i=new l(es),e=Math.ceil(r/kt+4),$t=!1;t%2&&(i=i.times(a),z6(i.d,e)),t=Ey(t/2),t!==0;)a=a.times(a),z6(a.d,e);return $t=!0,n.s<0?new l(es).div(i):yt(i,r)}}else if(s<0)throw Error(zs+"NaN");return s=s<0&&n.d[Math.max(e,t)]&1?-1:1,a.s=1,$t=!1,i=n.times(I0(a,r+c)),$t=!0,i=IJ(i),i.s=s,i};ge.toPrecision=function(n,e){var t,r,i=this,s=i.constructor;return n===void 0?(t=_n(i),r=Hf(i,t<=s.toExpNeg||t>=s.toExpPos)):(Da(n,1,Sy),e===void 0?e=s.rounding:Da(e,0,8),i=yt(new s(i),n,e),t=_n(i),r=Hf(i,n<=t||t<=s.toExpNeg,n)),r};ge.toSignificantDigits=ge.tosd=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(Da(n,1,Sy),e===void 0?e=r.rounding:Da(e,0,8)),yt(new r(t),n,e)};ge.toString=ge.valueOf=ge.val=ge.toJSON=ge[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=_n(n),t=n.constructor;return Hf(n,e<=t.toExpNeg||e>=t.toExpPos)};function PJ(n,e){var t,r,i,s,o,a,l,c,u=n.constructor,d=u.precision;if(!n.s||!e.s)return e.s||(e=new u(n)),$t?yt(e,d):e;if(l=n.d,c=e.d,o=n.e,i=e.e,l=l.slice(),s=o-i,s){for(s<0?(r=l,s=-s,a=c.length):(r=c,i=o,a=l.length),o=Math.ceil(d/kt),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=c.length,a-s<0&&(s=a,r=c,c=l,l=r),t=0;s;)t=(l[--s]=l[s]+c[s]+t)/Hn|0,l[s]%=Hn;for(t&&(l.unshift(t),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,$t?yt(e,d):e}function Da(n,e,t){if(n!==~~n||n<e||n>t)throw Error(_f+n)}function ba(n){var e,t,r,i=n.length-1,s="",o=n[0];if(i>0){for(s+=o,e=1;e<i;e++)r=n[e]+"",t=kt-r.length,t&&(s+=Rc(t)),s+=r;o=n[e],r=o+"",t=kt-r.length,t&&(s+=Rc(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Wl=function(){function n(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%Hn|0,o=s/Hn|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function t(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*Hn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,l,c,u,d,h,m,y,g,b,w,x,_,S,P,N,T,C,k=r.constructor,M=r.s==i.s?1:-1,L=r.d,F=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(zs+"Division by zero");for(l=r.e-i.e,T=F.length,P=L.length,m=new k(M),y=m.d=[],c=0;F[c]==(L[c]||0);)++c;if(F[c]>(L[c]||0)&&--l,s==null?x=s=k.precision:o?x=s+(_n(r)-_n(i))+1:x=s,x<0)return new k(0);if(x=x/kt+2|0,c=0,T==1)for(u=0,F=F[0],x++;(c<P||u)&&x--;c++)_=u*Hn+(L[c]||0),y[c]=_/F|0,u=_%F|0;else{for(u=Hn/(F[0]+1)|0,u>1&&(F=n(F,u),L=n(L,u),T=F.length,P=L.length),S=T,g=L.slice(0,T),b=g.length;b<T;)g[b++]=0;C=F.slice(),C.unshift(0),N=F[0],F[1]>=Hn/2&&++N;do u=0,a=e(F,g,T,b),a<0?(w=g[0],T!=b&&(w=w*Hn+(g[1]||0)),u=w/N|0,u>1?(u>=Hn&&(u=Hn-1),d=n(F,u),h=d.length,b=g.length,a=e(d,g,h,b),a==1&&(u--,t(d,T<h?C:F,h))):(u==0&&(a=u=1),d=F.slice()),h=d.length,h<b&&d.unshift(0),t(g,d,b),a==-1&&(b=g.length,a=e(F,g,T,b),a<1&&(u++,t(g,T<b?C:F,b))),b=g.length):a===0&&(u++,g=[0]),y[c++]=u,a&&g[0]?g[b++]=L[S]||0:(g=[L[S]],b=1);while((S++<P||g[0]!==void 0)&&x--)}return y[0]||y.shift(),m.e=l,yt(m,o?s+_n(m)+1:s)}}();function IJ(n,e){var t,r,i,s,o,a,l=0,c=0,u=n.constructor,d=u.precision;if(_n(n)>16)throw Error(zL+_n(n));if(!n.s)return new u(es);for(e==null?($t=!1,a=d):a=e,o=new u(.03125);n.abs().gte(.1);)n=n.times(o),c+=5;for(r=Math.log(zd(2,c))/Math.LN10*2+5|0,a+=r,t=i=s=new u(es),u.precision=a;;){if(i=yt(i.times(n),a),t=t.times(++l),o=s.plus(Wl(i,t,a)),ba(o.d).slice(0,a)===ba(s.d).slice(0,a)){for(;c--;)s=yt(s.times(s),a);return u.precision=d,e==null?($t=!0,yt(s,d)):s}s=o}}function _n(n){for(var e=n.e*kt,t=n.d[0];t>=10;t/=10)e++;return e}function KI(n,e,t){if(e>n.LN10.sd())throw $t=!0,t&&(n.precision=t),Error(zs+"LN10 precision limit exceeded");return yt(new n(n.LN10),e)}function Rc(n){for(var e="";n--;)e+="0";return e}function I0(n,e){var t,r,i,s,o,a,l,c,u,d=1,h=10,m=n,y=m.d,g=m.constructor,b=g.precision;if(m.s<1)throw Error(zs+(m.s?"NaN":"-Infinity"));if(m.eq(es))return new g(0);if(e==null?($t=!1,c=b):c=e,m.eq(10))return e==null&&($t=!0),KI(g,c);if(c+=h,g.precision=c,t=ba(y),r=t.charAt(0),s=_n(m),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)m=m.times(n),t=ba(m.d),r=t.charAt(0),d++;s=_n(m),r>1?(m=new g("0."+t),s++):m=new g(r+"."+t.slice(1))}else return l=KI(g,c+2,b).times(s+""),m=I0(new g(r+"."+t.slice(1)),c-h).plus(l),g.precision=b,e==null?($t=!0,yt(m,b)):m;for(a=o=m=Wl(m.minus(es),m.plus(es),c),u=yt(m.times(m),c),i=3;;){if(o=yt(o.times(u),c),l=a.plus(Wl(o,new g(i),c)),ba(l.d).slice(0,c)===ba(a.d).slice(0,c))return a=a.times(2),s!==0&&(a=a.plus(KI(g,c+2,b).times(s+""))),a=Wl(a,new g(d),c),g.precision=b,e==null?($t=!0,yt(a,b)):a;a=l,i+=2}}function B6(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,t=t-r-1,n.e=Ey(t/kt),n.d=[],r=(t+1)%kt,t<0&&(r+=kt),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=kt;r<i;)n.d.push(+e.slice(r,r+=kt));e=e.slice(r),r=kt-e.length}else r-=i;for(;r--;)e+="0";if(n.d.push(+e),$t&&(n.e>hE||n.e<-hE))throw Error(zL+t)}else n.s=0,n.e=0,n.d=[0];return n}function yt(n,e,t){var r,i,s,o,a,l,c,u,d=n.d;for(o=1,s=d[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=kt,i=e,c=d[u=0];else{if(u=Math.ceil((r+1)/kt),s=d.length,u>=s)return n;for(c=s=d[u],o=1;s>=10;s/=10)o++;r%=kt,i=r-kt+o}if(t!==void 0&&(s=zd(10,o-i-1),a=c/s%10|0,l=e<0||d[u+1]!==void 0||c%s,l=t<4?(a||l)&&(t==0||t==(n.s<0?3:2)):a>5||a==5&&(t==4||l||t==6&&(r>0?i>0?c/zd(10,o-i):0:d[u-1])%10&1||t==(n.s<0?8:7))),e<1||!d[0])return l?(s=_n(n),d.length=1,e=e-s-1,d[0]=zd(10,(kt-e%kt)%kt),n.e=Ey(-e/kt)||0):(d.length=1,d[0]=n.e=n.s=0),n;if(r==0?(d.length=u,s=1,u--):(d.length=u+1,s=zd(10,kt-r),d[u]=i>0?(c/zd(10,o-i)%zd(10,i)|0)*s:0),l)for(;;)if(u==0){(d[0]+=s)==Hn&&(d[0]=1,++n.e);break}else{if(d[u]+=s,d[u]!=Hn)break;d[u--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if($t&&(n.e>hE||n.e<-hE))throw Error(zL+_n(n));return n}function kJ(n,e){var t,r,i,s,o,a,l,c,u,d,h=n.constructor,m=h.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new h(n),$t?yt(e,m):e;if(l=n.d,d=e.d,r=e.e,c=n.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(t=l,o=-o,a=d.length):(t=d,r=c,a=l.length),i=Math.max(Math.ceil(m/kt),a)+2,o>i&&(o=i,t.length=1),t.reverse(),i=o;i--;)t.push(0);t.reverse()}else{for(i=l.length,a=d.length,u=i<a,u&&(a=i),i=0;i<a;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}o=0}for(u&&(t=l,l=d,d=t,e.s=-e.s),a=l.length,i=d.length-a;i>0;--i)l[a++]=0;for(i=d.length;i>o;){if(l[--i]<d[i]){for(s=i;s&&l[--s]===0;)l[s]=Hn-1;--l[s],l[i]+=Hn}l[i]-=d[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,$t?yt(e,m):e):new h(0)}function Hf(n,e,t){var r,i=_n(n),s=ba(n.d),o=s.length;return e?(t&&(r=t-o)>0?s=s.charAt(0)+"."+s.slice(1)+Rc(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Rc(-i-1)+s,t&&(r=t-o)>0&&(s+=Rc(r))):i>=o?(s+=Rc(i+1-o),t&&(r=t-i-1)>0&&(s=s+"."+Rc(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),t&&(r=t-o)>0&&(i+1===o&&(s+="."),s+=Rc(r))),n.s<0?"-"+s:s}function z6(n,e){if(n.length>e)return n.length=e,!0}function RJ(n){var e,t,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(_f+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return B6(o,s.toString())}else if(typeof s!="string")throw Error(_f+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,Qje.test(s))B6(o,s);else throw Error(_f+s)}if(i.prototype=ge,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=RJ,i.config=i.set=Jje,n===void 0&&(n={}),n)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function Jje(n){if(!n||typeof n!="object")throw Error(zs+"Object expected");var e,t,r,i=["precision",1,Sy,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=n[t=i[e]])!==void 0)if(Ey(r)===r&&r>=i[e+1]&&r<=i[e+2])this[t]=r;else throw Error(_f+t+": "+r);if((r=n[t="LN10"])!==void 0)if(r==Math.LN10)this[t]=new this(r);else throw Error(_f+t+": "+r);return this}var NJ=RJ(Xje);es=new NJ(1);function Zje(n){return rFe(n)||nFe(n)||tFe(n)||eFe()}function eFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tFe(n,e){if(n){if(typeof n=="string")return jN(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return jN(n,e)}}function nFe(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function rFe(n){if(Array.isArray(n))return jN(n)}function jN(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var OJ={"@@functional/placeholder":!0},MJ=function(e){return e===OJ},U6=function(e){return function t(){return arguments.length===0||arguments.length===1&&MJ(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},iFe=function n(e,t){return e===1?t:U6(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.filter(function(a){return a!==OJ}).length;return o>=e?t.apply(void 0,i):n(e-o,U6(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=i.map(function(d){return MJ(d)?l.shift():d});return t.apply(void 0,Zje(u).concat(l))}))})},jC=function(e){return iFe(e.length,e)};jC(function(n,e){return Array.isArray(e)?e.map(n):Object.keys(e).map(function(t){return e[t]}).map(n)});jC(function(n,e,t){var r=+n,i=+e;return r+t*(i-r)});jC(function(n,e,t){var r=e-+n;return r=r||1/0,(t-n)/r});jC(function(n,e,t){var r=e-+n;return r=r||1/0,Math.max(0,Math.min(1,(t-n)/r))});var sFe="Invariant failed";function k0(n,e){throw new Error(sFe)}var oFe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Kg(n){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kg(n)}function fE(){return fE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fE.apply(this,arguments)}function aFe(n,e){return dFe(n)||uFe(n,e)||cFe(n,e)||lFe()}function lFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cFe(n,e){if(n){if(typeof n=="string")return H6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return H6(n,e)}}function H6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function uFe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function dFe(n){if(Array.isArray(n))return n}function hFe(n,e){if(n==null)return{};var t=fFe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function fFe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function pFe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function mFe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,jJ(r.key),r)}}function gFe(n,e,t){return e&&mFe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function yFe(n,e,t){return e=pE(e),vFe(n,DJ()?Reflect.construct(e,t||[],pE(n).constructor):e.apply(n,t))}function vFe(n,e){if(e&&(Kg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bFe(n)}function bFe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function DJ(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DJ=function(){return!!n})()}function pE(n){return pE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pE(n)}function wFe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&FN(n,e)}function FN(n,e){return FN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},FN(n,e)}function LJ(n,e,t){return e=jJ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jJ(n){var e=xFe(n,"string");return Kg(e)=="symbol"?e:e+""}function xFe(n,e){if(Kg(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Kg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var UL=function(n){function e(){return pFe(this,e),yFe(this,e,arguments)}return wFe(e,n),gFe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,o=r.width,a=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,d=r.yAxis,h=hFe(r,oFe),m=At(h,!1);this.props.direction==="x"&&u.type!=="number"&&k0();var y=l.map(function(g){var b=c(g,a),w=b.x,x=b.y,_=b.value,S=b.errorVal;if(!S)return null;var P=[],N,T;if(Array.isArray(S)){var C=aFe(S,2);N=C[0],T=C[1]}else N=T=S;if(s==="vertical"){var k=u.scale,M=x+i,L=M+o,F=M-o,j=k(_-N),q=k(_+T);P.push({x1:q,y1:L,x2:q,y2:F}),P.push({x1:j,y1:M,x2:q,y2:M}),P.push({x1:j,y1:L,x2:j,y2:F})}else if(s==="horizontal"){var H=d.scale,z=w+i,W=z-o,V=z+o,U=H(_-N),K=H(_+T);P.push({x1:W,y1:K,x2:V,y2:K}),P.push({x1:z,y1:U,x2:z,y2:K}),P.push({x1:W,y1:U,x2:V,y2:U})}return G.createElement(vi,fE({className:"recharts-errorBar",key:"bar-".concat(P.map(function(Q){return"".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))},m),P.map(function(Q){return G.createElement("line",fE({},Q,{key:"line-".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))}))});return G.createElement(vi,{className:"recharts-errorBars"},y)}}])}(G.Component);LJ(UL,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});LJ(UL,"displayName","ErrorBar");function va(n,e,t){return Vt(n)||Vt(e)?t:nE(e)?Uf(n,e,t):Rn(e)?e(n):t}var FJ=function(e,t,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?Hl(a[0]-a[1])*2*c:c,e.ticks||e.niceTicks){var u=(e.ticks||e.niceTicks).map(function(d){var h=s?s.indexOf(d):d;return{coordinate:i(h)+c,value:d,offset:c}});return u.filter(function(d){return!kL(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:i(d)+c,value:d,index:h,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,h){return{coordinate:i(d)+c,value:s?s[d]:d,index:h,offset:c}})};function W6(n){var e=n.axis,t=n.ticks,r=n.bandSize,i=n.entry,s=n.index,o=n.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Vt(i[e.dataKey])){var a=EIe(t,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return t[s]?t[s].coordinate+r/2:null}var l=va(i,Vt(o)?e.dataKey:o);return Vt(l)?null:e.scale(l)}var mE=Math.PI/180,xi=function(e,t,r,i){return{x:e+Math.cos(-mE*i)*r,y:t+Math.sin(-mE*i)*r}},_Fe=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2};function R0(n){"@babel/helpers - typeof";return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R0(n)}var AFe=["offset"];function SFe(n){return PFe(n)||CFe(n)||TFe(n)||EFe()}function EFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TFe(n,e){if(n){if(typeof n=="string")return $N(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $N(n,e)}}function CFe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function PFe(n){if(Array.isArray(n))return $N(n)}function $N(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function IFe(n,e){if(n==null)return{};var t=kFe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function kFe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function G6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Sn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G6(Object(t),!0).forEach(function(r){RFe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function RFe(n,e,t){return e=NFe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NFe(n){var e=OFe(n,"string");return R0(e)=="symbol"?e:e+""}function OFe(n,e){if(R0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(R0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function N0(){return N0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},N0.apply(this,arguments)}var MFe=function(e){var t=e.value,r=e.formatter,i=Vt(e.children)?t:e.children;return Rn(r)?r(i):i},DFe=function(e,t){var r=Hl(t-e),i=Math.min(Math.abs(t-e),360);return r*i},LFe=function(e,t,r){var i=e.position,s=e.viewBox,o=e.offset,a=e.className,l=s,c=l.cx,u=l.cy,d=l.innerRadius,h=l.outerRadius,m=l.startAngle,y=l.endAngle,g=l.clockWise,b=(d+h)/2,w=DFe(m,y),x=w>=0?1:-1,_,S;i==="insideStart"?(_=m+x*o,S=g):i==="insideEnd"?(_=y-x*o,S=!g):i==="end"&&(_=y+x*o,S=g),S=w<=0?S:!S;var P=xi(c,u,b,_),N=xi(c,u,b,_+(S?1:-1)*359),T="M".concat(P.x,",").concat(P.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(S?0:1,`,
    `).concat(N.x,",").concat(N.y),C=Vt(e.id)?RL("recharts-radial-line-"):e.id;return G.createElement("text",N0({},r,{dominantBaseline:"central",className:Wt("recharts-radial-bar-label",a)}),G.createElement("defs",null,G.createElement("path",{id:C,d:T})),G.createElement("textPath",{xlinkHref:"#".concat(C)},t))},jFe=function(e){var t=e.viewBox,r=e.offset,i=e.position,s=t,o=s.cx,a=s.cy,l=s.innerRadius,c=s.outerRadius,u=s.startAngle,d=s.endAngle,h=(u+d)/2;if(i==="outside"){var m=xi(o,a,c+r,h),y=m.x,g=m.y;return{x:y,y:g,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var b=(l+c)/2,w=xi(o,a,b,h),x=w.x,_=w.y;return{x,y:_,textAnchor:"middle",verticalAnchor:"middle"}},FFe=function(e){var t=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,o=t,a=o.x,l=o.y,c=o.width,u=o.height,d=u>=0?1:-1,h=d*i,m=d>0?"end":"start",y=d>0?"start":"end",g=c>=0?1:-1,b=g*i,w=g>0?"end":"start",x=g>0?"start":"end";if(s==="top"){var _={x:a+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:m};return Sn(Sn({},_),r?{height:Math.max(l-r.y,0),width:c}:{})}if(s==="bottom"){var S={x:a+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:y};return Sn(Sn({},S),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(s==="left"){var P={x:a-b,y:l+u/2,textAnchor:w,verticalAnchor:"middle"};return Sn(Sn({},P),r?{width:Math.max(P.x-r.x,0),height:u}:{})}if(s==="right"){var N={x:a+c+b,y:l+u/2,textAnchor:x,verticalAnchor:"middle"};return Sn(Sn({},N),r?{width:Math.max(r.x+r.width-N.x,0),height:u}:{})}var T=r?{width:c,height:u}:{};return s==="insideLeft"?Sn({x:a+b,y:l+u/2,textAnchor:x,verticalAnchor:"middle"},T):s==="insideRight"?Sn({x:a+c-b,y:l+u/2,textAnchor:w,verticalAnchor:"middle"},T):s==="insideTop"?Sn({x:a+c/2,y:l+h,textAnchor:"middle",verticalAnchor:y},T):s==="insideBottom"?Sn({x:a+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:m},T):s==="insideTopLeft"?Sn({x:a+b,y:l+h,textAnchor:x,verticalAnchor:y},T):s==="insideTopRight"?Sn({x:a+c-b,y:l+h,textAnchor:w,verticalAnchor:y},T):s==="insideBottomLeft"?Sn({x:a+b,y:l+u-h,textAnchor:x,verticalAnchor:m},T):s==="insideBottomRight"?Sn({x:a+c-b,y:l+u-h,textAnchor:w,verticalAnchor:m},T):vy(s)&&(Xe(s.x)||th(s.x))&&(Xe(s.y)||th(s.y))?Sn({x:a+nh(s.x,c),y:l+nh(s.y,u),textAnchor:"end",verticalAnchor:"end"},T):Sn({x:a+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},T)},$Fe=function(e){return"cx"in e&&Xe(e.cx)};function mi(n){var e=n.offset,t=e===void 0?5:e,r=IFe(n,AFe),i=Sn({offset:t},r),s=i.viewBox,o=i.position,a=i.value,l=i.children,c=i.content,u=i.className,d=u===void 0?"":u,h=i.textBreakAll;if(!s||Vt(a)&&Vt(l)&&!A.isValidElement(c)&&!Rn(c))return null;if(A.isValidElement(c))return A.cloneElement(c,i);var m;if(Rn(c)){if(m=A.createElement(c,i),A.isValidElement(m))return m}else m=MFe(i);var y=$Fe(s),g=At(i,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return LFe(i,m,g);var b=y?jFe(i):FFe(i);return G.createElement(BL,N0({className:Wt("recharts-label",d)},g,b,{breakAll:h}),m)}mi.displayName="Label";var $J=function(e){var t=e.cx,r=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,a=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,d=e.x,h=e.y,m=e.top,y=e.left,g=e.width,b=e.height,w=e.clockWise,x=e.labelViewBox;if(x)return x;if(Xe(g)&&Xe(b)){if(Xe(d)&&Xe(h))return{x:d,y:h,width:g,height:b};if(Xe(m)&&Xe(y))return{x:m,y,width:g,height:b}}return Xe(d)&&Xe(h)?{x:d,y:h,width:0,height:0}:Xe(t)&&Xe(r)?{cx:t,cy:r,startAngle:s||i||0,endAngle:o||i||0,innerRadius:c||0,outerRadius:u||l||a||0,clockWise:w}:e.viewBox?e.viewBox:{}},VFe=function(e,t){return e?e===!0?G.createElement(mi,{key:"label-implicit",viewBox:t}):nE(e)?G.createElement(mi,{key:"label-implicit",viewBox:t,value:e}):A.isValidElement(e)?e.type===mi?A.cloneElement(e,{key:"label-implicit",viewBox:t}):G.createElement(mi,{key:"label-implicit",content:e,viewBox:t}):Rn(e)?G.createElement(mi,{key:"label-implicit",content:e,viewBox:t}):vy(e)?G.createElement(mi,N0({viewBox:t},e,{key:"label-implicit"})):null:null},BFe=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=$J(e),o=RC(i,mi).map(function(l,c){return A.cloneElement(l,{viewBox:t||s,key:"label-".concat(c)})});if(!r)return o;var a=VFe(e.label,t||s);return[a].concat(SFe(o))};mi.parseViewBox=$J;mi.renderCallByParent=BFe;function zFe(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var UFe=zFe;const HFe=Or(UFe);function O0(n){"@babel/helpers - typeof";return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O0(n)}var WFe=["valueAccessor"],GFe=["data","dataKey","clockWise","id","textBreakAll"];function qFe(n){return QFe(n)||XFe(n)||YFe(n)||KFe()}function KFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YFe(n,e){if(n){if(typeof n=="string")return VN(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return VN(n,e)}}function XFe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function QFe(n){if(Array.isArray(n))return VN(n)}function VN(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function gE(){return gE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gE.apply(this,arguments)}function q6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function K6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?q6(Object(t),!0).forEach(function(r){JFe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):q6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function JFe(n,e,t){return e=ZFe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZFe(n){var e=e4e(n,"string");return O0(e)=="symbol"?e:e+""}function e4e(n,e){if(O0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(O0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Y6(n,e){if(n==null)return{};var t=t4e(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function t4e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var n4e=function(e){return Array.isArray(e.value)?HFe(e.value):e.value};function Ku(n){var e=n.valueAccessor,t=e===void 0?n4e:e,r=Y6(n,WFe),i=r.data,s=r.dataKey,o=r.clockWise,a=r.id,l=r.textBreakAll,c=Y6(r,GFe);return!i||!i.length?null:G.createElement(vi,{className:"recharts-label-list"},i.map(function(u,d){var h=Vt(s)?t(u,d):va(u&&u.payload,s),m=Vt(a)?{}:{id:"".concat(a,"-").concat(d)};return G.createElement(mi,gE({},At(u,!0),c,m,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:mi.parseViewBox(Vt(o)?u:K6(K6({},u),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}Ku.displayName="LabelList";function r4e(n,e){return n?n===!0?G.createElement(Ku,{key:"labelList-implicit",data:e}):G.isValidElement(n)||Rn(n)?G.createElement(Ku,{key:"labelList-implicit",data:e,content:n}):vy(n)?G.createElement(Ku,gE({data:e},n,{key:"labelList-implicit"})):null:null}function i4e(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!n||!n.children&&t&&!n.label)return null;var r=n.children,i=RC(r,Ku).map(function(o,a){return A.cloneElement(o,{data:e,key:"labelList-".concat(a)})});if(!t)return i;var s=r4e(n.label,e);return[s].concat(qFe(i))}Ku.renderCallByParent=i4e;function M0(n){"@babel/helpers - typeof";return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M0(n)}function BN(){return BN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},BN.apply(this,arguments)}function X6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Q6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?X6(Object(t),!0).forEach(function(r){s4e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):X6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function s4e(n,e,t){return e=o4e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o4e(n){var e=a4e(n,"string");return M0(e)=="symbol"?e:e+""}function a4e(n,e){if(M0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(M0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var l4e=function(e,t){var r=Hl(t-e),i=Math.min(Math.abs(t-e),359.999);return r*i},w1=function(e){var t=e.cx,r=e.cy,i=e.radius,s=e.angle,o=e.sign,a=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(a?1:-1)+i,d=Math.asin(l/u)/mE,h=c?s:s+o*d,m=xi(t,r,u,h),y=xi(t,r,i,h),g=c?s-o*d:s,b=xi(t,r,u*Math.cos(d*mE),g);return{center:m,circleTangency:y,lineTangency:b,theta:d}},VJ=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,a=e.endAngle,l=l4e(o,a),c=o+l,u=xi(t,r,s,o),d=xi(t,r,s,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var m=xi(t,r,i,o),y=xi(t,r,i,c);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},c4e=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,d=Hl(u-c),h=w1({cx:t,cy:r,radius:s,angle:c,sign:d,cornerRadius:o,cornerIsExternal:l}),m=h.circleTangency,y=h.lineTangency,g=h.theta,b=w1({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:o,cornerIsExternal:l}),w=b.circleTangency,x=b.lineTangency,_=b.theta,S=l?Math.abs(c-u):Math.abs(c-u)-g-_;if(S<0)return a?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):VJ({cx:t,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:u});var P="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(i>0){var N=w1({cx:t,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),T=N.circleTangency,C=N.lineTangency,k=N.theta,M=w1({cx:t,cy:r,radius:i,angle:u,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),L=M.circleTangency,F=M.lineTangency,j=M.theta,q=l?Math.abs(c-u):Math.abs(c-u)-k-j;if(q<0&&o===0)return"".concat(P,"L").concat(t,",").concat(r,"Z");P+="L".concat(F.x,",").concat(F.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(q>180),",").concat(+(d>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,"Z")}else P+="L".concat(t,",").concat(r,"Z");return P},u4e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},d4e=function(e){var t=Q6(Q6({},u4e),e),r=t.cx,i=t.cy,s=t.innerRadius,o=t.outerRadius,a=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=t.className;if(o<s||u===d)return null;var m=Wt("recharts-sector",h),y=o-s,g=nh(a,y,0,!0),b;return g>0&&Math.abs(u-d)<360?b=c4e({cx:r,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(g,y/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):b=VJ({cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:u,endAngle:d}),G.createElement("path",BN({},At(t,!0),{className:m,d:b,role:"img"}))};function D0(n){"@babel/helpers - typeof";return D0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D0(n)}function zN(){return zN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zN.apply(this,arguments)}function J6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Z6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?J6(Object(t),!0).forEach(function(r){h4e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):J6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function h4e(n,e,t){return e=f4e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function f4e(n){var e=p4e(n,"string");return D0(e)=="symbol"?e:e+""}function p4e(n,e){if(D0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(D0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var eB={curveBasisClosed:U2e,curveBasisOpen:H2e,curveBasis:z2e,curveBumpX:P2e,curveBumpY:I2e,curveLinearClosed:W2e,curveLinear:OC,curveMonotoneX:G2e,curveMonotoneY:q2e,curveNatural:K2e,curveStep:Y2e,curveStepAfter:Q2e,curveStepBefore:X2e},x1=function(e){return e.x===+e.x&&e.y===+e.y},dv=function(e){return e.x},hv=function(e){return e.y},m4e=function(e,t){if(Rn(e))return e;var r="curve".concat(OL(e));return(r==="curveMonotone"||r==="curveBump")&&t?eB["".concat(r).concat(t==="vertical"?"Y":"X")]:eB[r]||OC},g4e=function(e){var t=e.type,r=t===void 0?"linear":t,i=e.points,s=i===void 0?[]:i,o=e.baseLine,a=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=m4e(r,a),d=c?s.filter(function(g){return x1(g)}):s,h;if(Array.isArray(o)){var m=c?o.filter(function(g){return x1(g)}):o,y=d.map(function(g,b){return Z6(Z6({},g),{},{base:m[b]})});return a==="vertical"?h=g1().y(hv).x1(dv).x0(function(g){return g.base.x}):h=g1().x(dv).y1(hv).y0(function(g){return g.base.y}),h.defined(x1).curve(u),h(y)}return a==="vertical"&&Xe(o)?h=g1().y(hv).x1(dv).x0(o):Xe(o)?h=g1().x(dv).y1(hv).y0(o):h=KQ().x(dv).y(hv),h.defined(x1).curve(u),h(d)},BJ=function(e){var t=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?g4e(e):i;return G.createElement("path",zN({},At(e,!1),OQ(e),{className:Wt("recharts-curve",t),d:o,ref:s}))},zJ={exports:{}},y4e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",v4e=y4e,b4e=v4e;function UJ(){}function HJ(){}HJ.resetWarningCache=UJ;var w4e=function(){function n(r,i,s,o,a,l){if(l!==b4e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:HJ,resetWarningCache:UJ};return t.PropTypes=t,t};zJ.exports=w4e();var x4e=zJ.exports;const Me=Or(x4e);var _4e=Object.getOwnPropertyNames,A4e=Object.getOwnPropertySymbols,S4e=Object.prototype.hasOwnProperty;function tB(n,e){return function(r,i,s){return n(r,i,s)&&e(r,i,s)}}function _1(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);var s=i.cache,o=s.get(t),a=s.get(r);if(o&&a)return o===r&&a===t;s.set(t,r),s.set(r,t);var l=n(t,r,i);return s.delete(t),s.delete(r),l}}function nB(n){return _4e(n).concat(A4e(n))}var WJ=Object.hasOwn||function(n,e){return S4e.call(n,e)};function Ty(n,e){return n||e?n===e:n===e||n!==n&&e!==e}var GJ="_owner",rB=Object.getOwnPropertyDescriptor,iB=Object.keys;function E4e(n,e,t){var r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function T4e(n,e){return Ty(n.getTime(),e.getTime())}function sB(n,e,t){if(n.size!==e.size)return!1;for(var r={},i=n.entries(),s=0,o,a;(o=i.next())&&!o.done;){for(var l=e.entries(),c=!1,u=0;(a=l.next())&&!a.done;){var d=o.value,h=d[0],m=d[1],y=a.value,g=y[0],b=y[1];!c&&!r[u]&&(c=t.equals(h,g,s,u,n,e,t)&&t.equals(m,b,h,g,n,e,t))&&(r[u]=!0),u++}if(!c)return!1;s++}return!0}function C4e(n,e,t){var r=iB(n),i=r.length;if(iB(e).length!==i)return!1;for(var s;i-- >0;)if(s=r[i],s===GJ&&(n.$$typeof||e.$$typeof)&&n.$$typeof!==e.$$typeof||!WJ(e,s)||!t.equals(n[s],e[s],s,s,n,e,t))return!1;return!0}function fv(n,e,t){var r=nB(n),i=r.length;if(nB(e).length!==i)return!1;for(var s,o,a;i-- >0;)if(s=r[i],s===GJ&&(n.$$typeof||e.$$typeof)&&n.$$typeof!==e.$$typeof||!WJ(e,s)||!t.equals(n[s],e[s],s,s,n,e,t)||(o=rB(n,s),a=rB(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function P4e(n,e){return Ty(n.valueOf(),e.valueOf())}function I4e(n,e){return n.source===e.source&&n.flags===e.flags}function oB(n,e,t){if(n.size!==e.size)return!1;for(var r={},i=n.values(),s,o;(s=i.next())&&!s.done;){for(var a=e.values(),l=!1,c=0;(o=a.next())&&!o.done;)!l&&!r[c]&&(l=t.equals(s.value,o.value,s.value,o.value,n,e,t))&&(r[c]=!0),c++;if(!l)return!1}return!0}function k4e(n,e){var t=n.length;if(e.length!==t)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}var R4e="[object Arguments]",N4e="[object Boolean]",O4e="[object Date]",M4e="[object Map]",D4e="[object Number]",L4e="[object Object]",j4e="[object RegExp]",F4e="[object Set]",$4e="[object String]",V4e=Array.isArray,aB=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,lB=Object.assign,B4e=Object.prototype.toString.call.bind(Object.prototype.toString);function z4e(n){var e=n.areArraysEqual,t=n.areDatesEqual,r=n.areMapsEqual,i=n.areObjectsEqual,s=n.arePrimitiveWrappersEqual,o=n.areRegExpsEqual,a=n.areSetsEqual,l=n.areTypedArraysEqual;return function(u,d,h){if(u===d)return!0;if(u==null||d==null||typeof u!="object"||typeof d!="object")return u!==u&&d!==d;var m=u.constructor;if(m!==d.constructor)return!1;if(m===Object)return i(u,d,h);if(V4e(u))return e(u,d,h);if(aB!=null&&aB(u))return l(u,d,h);if(m===Date)return t(u,d,h);if(m===RegExp)return o(u,d,h);if(m===Map)return r(u,d,h);if(m===Set)return a(u,d,h);var y=B4e(u);return y===O4e?t(u,d,h):y===j4e?o(u,d,h):y===M4e?r(u,d,h):y===F4e?a(u,d,h):y===L4e?typeof u.then!="function"&&typeof d.then!="function"&&i(u,d,h):y===R4e?i(u,d,h):y===N4e||y===D4e||y===$4e?s(u,d,h):!1}}function U4e(n){var e=n.circular,t=n.createCustomConfig,r=n.strict,i={areArraysEqual:r?fv:E4e,areDatesEqual:T4e,areMapsEqual:r?tB(sB,fv):sB,areObjectsEqual:r?fv:C4e,arePrimitiveWrappersEqual:P4e,areRegExpsEqual:I4e,areSetsEqual:r?tB(oB,fv):oB,areTypedArraysEqual:r?fv:k4e};if(t&&(i=lB({},i,t(i))),e){var s=_1(i.areArraysEqual),o=_1(i.areMapsEqual),a=_1(i.areObjectsEqual),l=_1(i.areSetsEqual);i=lB({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return i}function H4e(n){return function(e,t,r,i,s,o,a){return n(e,t,a)}}function W4e(n){var e=n.circular,t=n.comparator,r=n.createState,i=n.equals,s=n.strict;if(r)return function(l,c){var u=r(),d=u.cache,h=d===void 0?e?new WeakMap:void 0:d,m=u.meta;return t(l,c,{cache:h,equals:i,meta:m,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,c){return t(l,c,o)}}var G4e=_d();_d({strict:!0});_d({circular:!0});_d({circular:!0,strict:!0});_d({createInternalComparator:function(){return Ty}});_d({strict:!0,createInternalComparator:function(){return Ty}});_d({circular:!0,createInternalComparator:function(){return Ty}});_d({circular:!0,createInternalComparator:function(){return Ty},strict:!0});function _d(n){n===void 0&&(n={});var e=n.circular,t=e===void 0?!1:e,r=n.createInternalComparator,i=n.createState,s=n.strict,o=s===void 0?!1:s,a=U4e(n),l=z4e(a),c=r?r(l):H4e(l);return W4e({circular:t,comparator:l,createState:i,equals:c,strict:o})}function q4e(n){typeof requestAnimationFrame<"u"&&requestAnimationFrame(n)}function cB(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,r=function i(s){t<0&&(t=s),s-t>e?(n(s),t=-1):q4e(i)};requestAnimationFrame(r)}function UN(n){"@babel/helpers - typeof";return UN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UN(n)}function K4e(n){return J4e(n)||Q4e(n)||X4e(n)||Y4e()}function Y4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X4e(n,e){if(n){if(typeof n=="string")return uB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return uB(n,e)}}function uB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Q4e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function J4e(n){if(Array.isArray(n))return n}function Z4e(){var n={},e=function(){return null},t=!1,r=function i(s){if(!t){if(Array.isArray(s)){if(!s.length)return;var o=s,a=K4e(o),l=a[0],c=a.slice(1);if(typeof l=="number"){cB(i.bind(null,c),l);return}i(l),cB(i.bind(null,c));return}UN(s)==="object"&&(n=s,e(n)),typeof s=="function"&&s()}};return{stop:function(){t=!0},start:function(s){t=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function L0(n){"@babel/helpers - typeof";return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L0(n)}function dB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function hB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dB(Object(t),!0).forEach(function(r){qJ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qJ(n,e,t){return e=e$e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function e$e(n){var e=t$e(n,"string");return L0(e)==="symbol"?e:String(e)}function t$e(n,e){if(L0(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(L0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var n$e=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},r$e=function(e){return e},i$e=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},Sb=function(e,t){return Object.keys(t).reduce(function(r,i){return hB(hB({},r),{},qJ({},i,e(i,t[i])))},{})},fB=function(e,t,r){return e.map(function(i){return"".concat(i$e(i)," ").concat(t,"ms ").concat(r)}).join(",")};function s$e(n,e){return l$e(n)||a$e(n,e)||KJ(n,e)||o$e()}function o$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a$e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function l$e(n){if(Array.isArray(n))return n}function c$e(n){return h$e(n)||d$e(n)||KJ(n)||u$e()}function u$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KJ(n,e){if(n){if(typeof n=="string")return HN(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return HN(n,e)}}function d$e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function h$e(n){if(Array.isArray(n))return HN(n)}function HN(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var yE=1e-4,YJ=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},XJ=function(e,t){return e.map(function(r,i){return r*Math.pow(t,i)}).reduce(function(r,i){return r+i})},pB=function(e,t){return function(r){var i=YJ(e,t);return XJ(i,r)}},f$e=function(e,t){return function(r){var i=YJ(e,t),s=[].concat(c$e(i.map(function(o,a){return o*a}).slice(1)),[0]);return XJ(s,r)}},mB=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],s=t[1],o=t[2],a=t[3];if(t.length===1)switch(t[0]){case"linear":i=0,s=0,o=1,a=1;break;case"ease":i=.25,s=.1,o=.25,a=1;break;case"ease-in":i=.42,s=0,o=1,a=1;break;case"ease-out":i=.42,s=0,o=.58,a=1;break;case"ease-in-out":i=0,s=0,o=.58,a=1;break;default:{var l=t[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),u=s$e(c,4);i=u[0],s=u[1],o=u[2],a=u[3]}}}var d=pB(i,o),h=pB(s,a),m=f$e(i,o),y=function(w){return w>1?1:w<0?0:w},g=function(w){for(var x=w>1?1:w,_=x,S=0;S<8;++S){var P=d(_)-x,N=m(_);if(Math.abs(P-x)<yE||N<yE)return h(_);_=y(_-P/N)}return h(_)};return g.isStepper=!1,g},p$e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,r=t===void 0?100:t,i=e.damping,s=i===void 0?8:i,o=e.dt,a=o===void 0?17:o,l=function(u,d,h){var m=-(u-d)*r,y=h*s,g=h+(m-y)*a/1e3,b=h*a/1e3+u;return Math.abs(b-d)<yE&&Math.abs(g)<yE?[d,0]:[b,g]};return l.isStepper=!0,l.dt=a,l},m$e=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return mB(i);case"spring":return p$e();default:if(i.split("(")[0]==="cubic-bezier")return mB(i)}return typeof i=="function"?i:null};function j0(n){"@babel/helpers - typeof";return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j0(n)}function gB(n){return v$e(n)||y$e(n)||QJ(n)||g$e()}function g$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y$e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function v$e(n){if(Array.isArray(n))return GN(n)}function yB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function er(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yB(Object(t),!0).forEach(function(r){WN(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function WN(n,e,t){return e=b$e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function b$e(n){var e=w$e(n,"string");return j0(e)==="symbol"?e:String(e)}function w$e(n,e){if(j0(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(j0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function x$e(n,e){return S$e(n)||A$e(n,e)||QJ(n,e)||_$e()}function _$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QJ(n,e){if(n){if(typeof n=="string")return GN(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return GN(n,e)}}function GN(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function A$e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function S$e(n){if(Array.isArray(n))return n}var vE=function(e,t,r){return e+(t-e)*r},qN=function(e){var t=e.from,r=e.to;return t!==r},E$e=function n(e,t,r){var i=Sb(function(s,o){if(qN(o)){var a=e(o.from,o.to,o.velocity),l=x$e(a,2),c=l[0],u=l[1];return er(er({},o),{},{from:c,velocity:u})}return o},t);return r<1?Sb(function(s,o){return qN(o)?er(er({},o),{},{velocity:vE(o.velocity,i[s].velocity,r),from:vE(o.from,i[s].from,r)}):o},t):n(e,i,r-1)};const T$e=function(n,e,t,r,i){var s=n$e(n,e),o=s.reduce(function(b,w){return er(er({},b),{},WN({},w,[n[w],e[w]]))},{}),a=s.reduce(function(b,w){return er(er({},b),{},WN({},w,{from:n[w],velocity:0,to:e[w]}))},{}),l=-1,c,u,d=function(){return null},h=function(){return Sb(function(w,x){return x.from},a)},m=function(){return!Object.values(a).filter(qN).length},y=function(w){c||(c=w);var x=w-c,_=x/t.dt;a=E$e(t,a,_),i(er(er(er({},n),e),h())),c=w,m()||(l=requestAnimationFrame(d))},g=function(w){u||(u=w);var x=(w-u)/r,_=Sb(function(P,N){return vE.apply(void 0,gB(N).concat([t(x)]))},o);if(i(er(er(er({},n),e),_)),x<1)l=requestAnimationFrame(d);else{var S=Sb(function(P,N){return vE.apply(void 0,gB(N).concat([t(1)]))},o);i(er(er(er({},n),e),S))}};return d=t.isStepper?y:g,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Yg(n){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yg(n)}var C$e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function P$e(n,e){if(n==null)return{};var t=I$e(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function I$e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function YI(n){return O$e(n)||N$e(n)||R$e(n)||k$e()}function k$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R$e(n,e){if(n){if(typeof n=="string")return KN(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KN(n,e)}}function N$e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function O$e(n){if(Array.isArray(n))return KN(n)}function KN(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function vB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Qs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vB(Object(t),!0).forEach(function(r){Xv(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Xv(n,e,t){return e=JJ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function M$e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function D$e(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,JJ(r.key),r)}}function L$e(n,e,t){return e&&D$e(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function JJ(n){var e=j$e(n,"string");return Yg(e)==="symbol"?e:String(e)}function j$e(n,e){if(Yg(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Yg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function F$e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&YN(n,e)}function YN(n,e){return YN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},YN(n,e)}function $$e(n){var e=V$e();return function(){var r=bE(n),i;if(e){var s=bE(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return XN(this,i)}}function XN(n,e){if(e&&(Yg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QN(n)}function QN(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function V$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bE(n){return bE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bE(n)}var ic=function(n){F$e(t,n);var e=$$e(t);function t(r,i){var s;M$e(this,t),s=e.call(this,r,i);var o=s.props,a=o.isActive,l=o.attributeName,c=o.from,u=o.to,d=o.steps,h=o.children,m=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(QN(s)),s.changeStyle=s.changeStyle.bind(QN(s)),!a||m<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:u}),XN(s);if(d&&d.length)s.state={style:d[0].style};else if(c){if(typeof h=="function")return s.state={style:c},XN(s);s.state={style:l?Xv({},l,c):c}}else s.state={style:{}};return s}return L$e(t,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,a=s.canBegin,l=s.attributeName,c=s.shouldReAnimate,u=s.to,d=s.from,h=this.state.style;if(a){if(!o){var m={style:l?Xv({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(m);return}if(!(G4e(i.to,u)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=y||c?d:i.to;if(this.state&&h){var b={style:l?Xv({},l,g):g};(l&&h[l]!==g||!l&&h!==g)&&this.setState(b)}this.runAnimation(Qs(Qs({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,a=i.to,l=i.duration,c=i.easing,u=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,m=T$e(o,a,m$e(c),l,this.changeStyle),y=function(){s.stopJSAnimation=m()};this.manager.start([h,u,y,l,d])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,a=i.begin,l=i.onAnimationStart,c=o[0],u=c.style,d=c.duration,h=d===void 0?0:d,m=function(g,b,w){if(w===0)return g;var x=b.duration,_=b.easing,S=_===void 0?"ease":_,P=b.style,N=b.properties,T=b.onAnimationEnd,C=w>0?o[w-1]:b,k=N||Object.keys(P);if(typeof S=="function"||S==="spring")return[].concat(YI(g),[s.runJSAnimation.bind(s,{from:C.style,to:P,duration:x,easing:S}),x]);var M=fB(k,x,S),L=Qs(Qs(Qs({},C.style),P),{},{transition:M});return[].concat(YI(g),[L,x,T]).filter(r$e)};return this.manager.start([l].concat(YI(o.reduce(m,[u,Math.max(h,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Z4e());var s=i.begin,o=i.duration,a=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,m=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof c=="function"||typeof m=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var g=a?Xv({},a,l):l,b=fB(Object.keys(g),o,c);y.start([u,s,Qs(Qs({},g),{},{transition:b}),o,d])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=P$e(i,C$e),c=A.Children.count(s),u=this.state.style;if(typeof s=="function")return s(u);if(!a||c===0||o<=0)return s;var d=function(m){var y=m.props,g=y.style,b=g===void 0?{}:g,w=y.className,x=A.cloneElement(m,Qs(Qs({},l),{},{style:Qs(Qs({},b),u),className:w}));return x};return c===1?d(A.Children.only(s)):G.createElement("div",null,A.Children.map(s,function(h){return d(h)}))}}]),t}(A.PureComponent);ic.displayName="Animate";ic.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ic.propTypes={from:Me.oneOfType([Me.object,Me.string]),to:Me.oneOfType([Me.object,Me.string]),attributeName:Me.string,duration:Me.number,begin:Me.number,easing:Me.oneOfType([Me.string,Me.func]),steps:Me.arrayOf(Me.shape({duration:Me.number.isRequired,style:Me.object.isRequired,easing:Me.oneOfType([Me.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Me.func]),properties:Me.arrayOf("string"),onAnimationEnd:Me.func})),children:Me.oneOfType([Me.node,Me.func]),isActive:Me.bool,canBegin:Me.bool,onAnimationEnd:Me.func,shouldReAnimate:Me.bool,onAnimationStart:Me.func,onAnimationReStart:Me.func};Me.object,Me.object,Me.object,Me.element;Me.object,Me.object,Me.object,Me.oneOfType([Me.array,Me.element]),Me.any;function F0(n){"@babel/helpers - typeof";return F0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F0(n)}function wE(){return wE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wE.apply(this,arguments)}function B$e(n,e){return W$e(n)||H$e(n,e)||U$e(n,e)||z$e()}function z$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U$e(n,e){if(n){if(typeof n=="string")return bB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return bB(n,e)}}function bB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function H$e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function W$e(n){if(Array.isArray(n))return n}function wB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function xB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wB(Object(t),!0).forEach(function(r){G$e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function G$e(n,e,t){return e=q$e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q$e(n){var e=K$e(n,"string");return F0(e)=="symbol"?e:e+""}function K$e(n,e){if(F0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(F0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var _B=function(e,t,r,i,s){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(o>0&&s instanceof Array){for(var d=[0,0,0,0],h=0,m=4;h<m;h++)d[h]=s[h]>o?o:s[h];u="M".concat(e,",").concat(t+a*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+a*d[1])),u+="L ".concat(e+r,",").concat(t+i-a*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+i)),u+="L ".concat(e+l*d[3],",").concat(t+i),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+i-a*d[3])),u+="Z"}else if(o>0&&s===+s&&s>0){var y=Math.min(o,s);u="M ".concat(e,",").concat(t+a*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+l*y,",").concat(t,`
            L `).concat(e+r-l*y,",").concat(t,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+r,",").concat(t+a*y,`
            L `).concat(e+r,",").concat(t+i-a*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+r-l*y,",").concat(t+i,`
            L `).concat(e+l*y,",").concat(t+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e,",").concat(t+i-a*y," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},Y$e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},X$e=function(e){var t=xB(xB({},Y$e),e),r=A.useRef(),i=A.useState(-1),s=B$e(i,2),o=s[0],a=s[1];A.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&a(S)}catch{}},[]);var l=t.x,c=t.y,u=t.width,d=t.height,h=t.radius,m=t.className,y=t.animationEasing,g=t.animationDuration,b=t.animationBegin,w=t.isAnimationActive,x=t.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var _=Wt("recharts-rectangle",m);return x?G.createElement(ic,{canBegin:o>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:g,animationEasing:y,isActive:x},function(S){var P=S.width,N=S.height,T=S.x,C=S.y;return G.createElement(ic,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:g,isActive:w,easing:y},G.createElement("path",wE({},At(t,!0),{className:_,d:_B(T,C,P,N,h),ref:r})))}):G.createElement("path",wE({},At(t,!0),{className:_,d:_B(l,c,u,d,h)}))};function JN(){return JN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},JN.apply(this,arguments)}var Q$e=function(e){var t=e.cx,r=e.cy,i=e.r,s=e.className,o=Wt("recharts-dot",s);return t===+t&&r===+r&&i===+i?G.createElement("circle",JN({},At(e,!1),OQ(e),{className:o,cx:t,cy:r,r:i})):null},J$e=pJ,Z$e=J$e(Object.getPrototypeOf,Object),e3e=Z$e,t3e=uc,n3e=e3e,r3e=dc,i3e="[object Object]",s3e=Function.prototype,o3e=Object.prototype,ZJ=s3e.toString,a3e=o3e.hasOwnProperty,l3e=ZJ.call(Object);function c3e(n){if(!r3e(n)||t3e(n)!=i3e)return!1;var e=n3e(n);if(e===null)return!0;var t=a3e.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&ZJ.call(t)==l3e}var u3e=c3e;const d3e=Or(u3e);var h3e=uc,f3e=dc,p3e="[object Boolean]";function m3e(n){return n===!0||n===!1||f3e(n)&&h3e(n)==p3e}var g3e=m3e;const y3e=Or(g3e);function $0(n){"@babel/helpers - typeof";return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$0(n)}function xE(){return xE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xE.apply(this,arguments)}function v3e(n,e){return _3e(n)||x3e(n,e)||w3e(n,e)||b3e()}function b3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w3e(n,e){if(n){if(typeof n=="string")return AB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return AB(n,e)}}function AB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function x3e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function _3e(n){if(Array.isArray(n))return n}function SB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function EB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?SB(Object(t),!0).forEach(function(r){A3e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):SB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function A3e(n,e,t){return e=S3e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function S3e(n){var e=E3e(n,"string");return $0(e)=="symbol"?e:e+""}function E3e(n,e){if($0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if($0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var TB=function(e,t,r,i,s){var o=r-i,a;return a="M ".concat(e,",").concat(t),a+="L ".concat(e+r,",").concat(t),a+="L ".concat(e+r-o/2,",").concat(t+s),a+="L ".concat(e+r-o/2-i,",").concat(t+s),a+="L ".concat(e,",").concat(t," Z"),a},T3e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},C3e=function(e){var t=EB(EB({},T3e),e),r=A.useRef(),i=A.useState(-1),s=v3e(i,2),o=s[0],a=s[1];A.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&a(_)}catch{}},[]);var l=t.x,c=t.y,u=t.upperWidth,d=t.lowerWidth,h=t.height,m=t.className,y=t.animationEasing,g=t.animationDuration,b=t.animationBegin,w=t.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||h!==+h||u===0&&d===0||h===0)return null;var x=Wt("recharts-trapezoid",m);return w?G.createElement(ic,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:h,x:l,y:c},duration:g,animationEasing:y,isActive:w},function(_){var S=_.upperWidth,P=_.lowerWidth,N=_.height,T=_.x,C=_.y;return G.createElement(ic,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:g,easing:y},G.createElement("path",xE({},At(t,!0),{className:x,d:TB(T,C,S,P,N),ref:r})))}):G.createElement("g",null,G.createElement("path",xE({},At(t,!0),{className:x,d:TB(l,c,u,d,h)})))},P3e=["option","shapeType","propTransformer","activeClassName","isActive"];function V0(n){"@babel/helpers - typeof";return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V0(n)}function I3e(n,e){if(n==null)return{};var t=k3e(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function k3e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function CB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _E(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?CB(Object(t),!0).forEach(function(r){R3e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):CB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function R3e(n,e,t){return e=N3e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function N3e(n){var e=O3e(n,"string");return V0(e)=="symbol"?e:e+""}function O3e(n,e){if(V0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(V0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function M3e(n,e){return _E(_E({},e),n)}function D3e(n,e){return n==="symbols"}function PB(n){var e=n.shapeType,t=n.elementProps;switch(e){case"rectangle":return G.createElement(X$e,t);case"trapezoid":return G.createElement(C3e,t);case"sector":return G.createElement(d4e,t);case"symbols":if(D3e(e))return G.createElement(oJ,t);break;default:return null}}function L3e(n){return A.isValidElement(n)?n.props:n}function j3e(n){var e=n.option,t=n.shapeType,r=n.propTransformer,i=r===void 0?M3e:r,s=n.activeClassName,o=s===void 0?"recharts-active-shape":s,a=n.isActive,l=I3e(n,P3e),c;if(A.isValidElement(e))c=A.cloneElement(e,_E(_E({},l),L3e(e)));else if(Rn(e))c=e(l);else if(d3e(e)&&!y3e(e)){var u=i(e,l);c=G.createElement(PB,{shapeType:t,elementProps:u})}else{var d=l;c=G.createElement(PB,{shapeType:t,elementProps:d})}return a?G.createElement(vi,{className:o},c):c}var MA;function Xg(n){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(n)}function qp(){return qp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qp.apply(this,arguments)}function IB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?IB(Object(t),!0).forEach(function(r){Ps(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):IB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function F3e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function kB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,tZ(r.key),r)}}function $3e(n,e,t){return e&&kB(n.prototype,e),t&&kB(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function V3e(n,e,t){return e=AE(e),B3e(n,eZ()?Reflect.construct(e,t||[],AE(n).constructor):e.apply(n,t))}function B3e(n,e){if(e&&(Xg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z3e(n)}function z3e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function eZ(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eZ=function(){return!!n})()}function AE(n){return AE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},AE(n)}function U3e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&ZN(n,e)}function ZN(n,e){return ZN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ZN(n,e)}function Ps(n,e,t){return e=tZ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tZ(n){var e=H3e(n,"string");return Xg(e)=="symbol"?e:e+""}function H3e(n,e){if(Xg(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Xg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Ad=function(n){function e(t){var r;return F3e(this,e),r=V3e(this,e,[t]),Ps(r,"pieRef",null),Ps(r,"sectorRefs",[]),Ps(r,"id",RL("recharts-pie-")),Ps(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Rn(i)&&i()}),Ps(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Rn(i)&&i()}),r.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},r}return U3e(e,n),$3e(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,a=s.labelLine,l=s.dataKey,c=s.valueKey,u=At(this.props,!1),d=At(o,!1),h=At(a,!1),m=o&&o.offsetRadius||20,y=r.map(function(g,b){var w=(g.startAngle+g.endAngle)/2,x=xi(g.cx,g.cy,g.outerRadius+m,w),_=bt(bt(bt(bt({},u),g),{},{stroke:"none"},d),{},{index:b,textAnchor:e.getTextAnchor(x.x,g.cx)},x),S=bt(bt(bt(bt({},u),g),{},{fill:"none",stroke:g.fill},h),{},{index:b,points:[xi(g.cx,g.cy,g.outerRadius,w),x]}),P=l;return Vt(l)&&Vt(c)?P="value":Vt(l)&&(P=c),G.createElement(vi,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(b)},a&&e.renderLabelLineItem(a,S,"line"),e.renderLabelItem(o,_,va(g,P)))});return G.createElement(vi,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(r){var i=this,s=this.props,o=s.activeShape,a=s.blendStroke,l=s.inactiveShape;return r.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&r.length!==1)return null;var d=i.isActiveIndex(u),h=l&&i.hasActiveIndex()?l:null,m=d?o:h,y=bt(bt({},c),{},{stroke:a?c.fill:c.stroke,tabIndex:-1});return G.createElement(vi,qp({ref:function(b){b&&!i.sectorRefs.includes(b)&&i.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},MQ(i.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),G.createElement(j3e,qp({option:m,isActive:d,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,s=i.sectors,o=i.isAnimationActive,a=i.animationBegin,l=i.animationDuration,c=i.animationEasing,u=i.animationId,d=this.state,h=d.prevSectors,m=d.prevIsAnimationActive;return G.createElement(ic,{begin:a,duration:l,isActive:o,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var g=y.t,b=[],w=s&&s[0],x=w.startAngle;return s.forEach(function(_,S){var P=h&&h[S],N=S>0?Uf(_,"paddingAngle",0):0;if(P){var T=Ud(P.endAngle-P.startAngle,_.endAngle-_.startAngle),C=bt(bt({},_),{},{startAngle:x+N,endAngle:x+T(g)+N});b.push(C),x=C.endAngle}else{var k=_.endAngle,M=_.startAngle,L=Ud(0,k-M),F=L(g),j=bt(bt({},_),{},{startAngle:x+N,endAngle:x+F+N});b.push(j),x=j.endAngle}}),G.createElement(vi,null,r.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var a=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,s=r.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!TJ(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,s=i.hide,o=i.sectors,a=i.className,l=i.label,c=i.cx,u=i.cy,d=i.innerRadius,h=i.outerRadius,m=i.isAnimationActive,y=this.state.isAnimationFinished;if(s||!o||!o.length||!Xe(c)||!Xe(u)||!Xe(d)||!Xe(h))return null;var g=Wt("recharts-pie",a);return G.createElement(vi,{tabIndex:this.props.rootTabIndex,className:g,ref:function(w){r.pieRef=w}},this.renderSectors(),l&&this.renderLabels(o),mi.renderCallByParent(this.props,null,!1),(!m||y)&&Ku.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,s){if(G.isValidElement(r))return G.cloneElement(r,i);if(Rn(r))return r(i);var o=Wt("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return G.createElement(BJ,qp({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,i,s){if(G.isValidElement(r))return G.cloneElement(r,i);var o=s;if(Rn(r)&&(o=r(i),G.isValidElement(o)))return o;var a=Wt("recharts-pie-label-text",typeof r!="boolean"&&!Rn(r)?r.className:"");return G.createElement(BL,qp({},i,{alignmentBaseline:"middle",className:a}),o)}}])}(A.PureComponent);MA=Ad;Ps(Ad,"displayName","Pie");Ps(Ad,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!qu.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ps(Ad,"parseDeltaAngle",function(n,e){var t=Hl(e-n),r=Math.min(Math.abs(e-n),360);return t*r});Ps(Ad,"getRealPieData",function(n){var e=n.data,t=n.children,r=At(n,!1),i=RC(t,xJ);return e&&e.length?e.map(function(s,o){return bt(bt(bt({payload:s},r),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return bt(bt({},r),s.props)}):[]});Ps(Ad,"parseCoordinateOfPie",function(n,e){var t=e.top,r=e.left,i=e.width,s=e.height,o=_Fe(i,s),a=r+nh(n.cx,i,i/2),l=t+nh(n.cy,s,s/2),c=nh(n.innerRadius,o,0),u=nh(n.outerRadius,o,o*.8),d=n.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:a,cy:l,innerRadius:c,outerRadius:u,maxRadius:d}});Ps(Ad,"getComposedData",function(n){var e=n.item,t=n.offset,r=e.type.defaultProps!==void 0?bt(bt({},e.type.defaultProps),e.props):e.props,i=MA.getRealPieData(r);if(!i||!i.length)return null;var s=r.cornerRadius,o=r.startAngle,a=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,d=r.valueKey,h=r.tooltipType,m=Math.abs(r.minAngle),y=MA.parseCoordinateOfPie(r,t),g=MA.parseDeltaAngle(o,a),b=Math.abs(g),w=c;Vt(c)&&Vt(d)?(_b(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w="value"):Vt(c)&&(_b(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w=d);var x=i.filter(function(C){return va(C,w,0)!==0}).length,_=(b>=360?x:x-1)*l,S=b-x*m-_,P=i.reduce(function(C,k){var M=va(k,w,0);return C+(Xe(M)?M:0)},0),N;if(P>0){var T;N=i.map(function(C,k){var M=va(C,w,0),L=va(C,u,k),F=(Xe(M)?M:0)/P,j;k?j=T.endAngle+Hl(g)*l*(M!==0?1:0):j=o;var q=j+Hl(g)*((M!==0?m:0)+F*S),H=(j+q)/2,z=(y.innerRadius+y.outerRadius)/2,W=[{name:L,value:M,payload:C,dataKey:w,type:h}],V=xi(y.cx,y.cy,z,H);return T=bt(bt(bt({percent:F,cornerRadius:s,name:L,tooltipPayload:W,midAngle:H,middleRadius:z,tooltipPosition:V},C),y),{},{value:va(C,w),startAngle:j,endAngle:q,payload:C,paddingAngle:Hl(g)*l}),T})}return bt(bt({},y),{},{sectors:N,data:i})});function B0(n){"@babel/helpers - typeof";return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B0(n)}function W3e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function RB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,nZ(r.key),r)}}function G3e(n,e,t){return e&&RB(n.prototype,e),t&&RB(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function q3e(n,e,t){return e=nZ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nZ(n){var e=K3e(n,"string");return B0(e)=="symbol"?e:e+""}function K3e(n,e){if(B0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(B0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Y3e=function(){function n(e){W3e(this,n),this.scale=e}return G3e(n,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}},{key:"isInRange",value:function(t){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?t>=i&&t<=s:t>=s&&t<=i}}],[{key:"create",value:function(t){return new n(t)}}])}();q3e(Y3e,"EPS",1e-4);function X3e(n){return(n%180+180)%180}var Q3e=function(e){var t=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=X3e(i),o=s*Math.PI/180,a=Math.atan(r/t),l=o>a&&o<Math.PI-a?r/Math.sin(o):t/Math.cos(o);return Math.abs(l)},J3e=A.createContext(void 0),Z3e=A.createContext(void 0),e5e=A.createContext(0),t5e=A.createContext(0),n5e=function(e){var t=A.useContext(J3e);t==null&&k0();var r=t[e];return r==null&&k0(),r},r5e=function(e){var t=A.useContext(Z3e);t==null&&k0();var r=t[e];return r==null&&k0(),r},rZ=function(){return A.useContext(t5e)},iZ=function(){return A.useContext(e5e)};function sZ(n,e,t){if(e<1)return[];if(e===1&&t===void 0)return n;for(var r=[],i=0;i<n.length;i+=e)r.push(n[i]);return r}function i5e(n,e,t){var r={width:n.width+e.width,height:n.height+e.height};return Q3e(r,t)}function s5e(n,e,t){var r=t==="width",i=n.x,s=n.y,o=n.width,a=n.height;return e===1?{start:r?i:s,end:r?i+o:s+a}:{start:r?i+o:s+a,end:r?i:s}}function SE(n,e,t,r,i){if(n*e<n*r||n*e>n*i)return!1;var s=t();return n*(e-n*s/2-r)>=0&&n*(e+n*s/2-i)<=0}function o5e(n,e){return sZ(n,e+1)}function a5e(n,e,t,r,i){for(var s=(r||[]).slice(),o=e.start,a=e.end,l=0,c=1,u=o,d=function(){var y=r==null?void 0:r[l];if(y===void 0)return{v:sZ(r,c)};var g=l,b,w=function(){return b===void 0&&(b=t(y,g)),b},x=y.coordinate,_=l===0||SE(n,x,w,u,a);_||(l=0,u=o,c+=1),_&&(u=x+n*(w()/2+i),l+=c)},h;c<=s.length;)if(h=d(),h)return h.v;return[]}function z0(n){"@babel/helpers - typeof";return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z0(n)}function NB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Sr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NB(Object(t),!0).forEach(function(r){l5e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function l5e(n,e,t){return e=c5e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c5e(n){var e=u5e(n,"string");return z0(e)=="symbol"?e:e+""}function u5e(n,e){if(z0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(z0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function d5e(n,e,t,r,i){for(var s=(r||[]).slice(),o=s.length,a=e.start,l=e.end,c=function(h){var m=s[h],y,g=function(){return y===void 0&&(y=t(m,h)),y};if(h===o-1){var b=n*(m.coordinate+n*g()/2-l);s[h]=m=Sr(Sr({},m),{},{tickCoord:b>0?m.coordinate-b*n:m.coordinate})}else s[h]=m=Sr(Sr({},m),{},{tickCoord:m.coordinate});var w=SE(n,m.tickCoord,g,a,l);w&&(l=m.tickCoord-n*(g()/2+i),s[h]=Sr(Sr({},m),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return s}function h5e(n,e,t,r,i,s){var o=(r||[]).slice(),a=o.length,l=e.start,c=e.end;if(s){var u=r[a-1],d=t(u,a-1),h=n*(u.coordinate+n*d/2-c);o[a-1]=u=Sr(Sr({},u),{},{tickCoord:h>0?u.coordinate-h*n:u.coordinate});var m=SE(n,u.tickCoord,function(){return d},l,c);m&&(c=u.tickCoord-n*(d/2+i),o[a-1]=Sr(Sr({},u),{},{isShow:!0}))}for(var y=s?a-1:a,g=function(x){var _=o[x],S,P=function(){return S===void 0&&(S=t(_,x)),S};if(x===0){var N=n*(_.coordinate-n*P()/2-l);o[x]=_=Sr(Sr({},_),{},{tickCoord:N<0?_.coordinate-N*n:_.coordinate})}else o[x]=_=Sr(Sr({},_),{},{tickCoord:_.coordinate});var T=SE(n,_.tickCoord,P,l,c);T&&(l=_.tickCoord+n*(P()/2+i),o[x]=Sr(Sr({},_),{},{isShow:!0}))},b=0;b<y;b++)g(b);return o}function f5e(n,e,t){var r=n.tick,i=n.ticks,s=n.viewBox,o=n.minTickGap,a=n.orientation,l=n.interval,c=n.tickFormatter,u=n.unit,d=n.angle;if(!i||!i.length||!r)return[];if(Xe(l)||qu.isSsr)return o5e(i,typeof l=="number"&&Xe(l)?l:0);var h=[],m=a==="top"||a==="bottom"?"width":"height",y=u&&m==="width"?Ab(u,{fontSize:e,letterSpacing:t}):{width:0,height:0},g=function(_,S){var P=Rn(c)?c(_.value,S):_.value;return m==="width"?i5e(Ab(P,{fontSize:e,letterSpacing:t}),y,d):Ab(P,{fontSize:e,letterSpacing:t})[m]},b=i.length>=2?Hl(i[1].coordinate-i[0].coordinate):1,w=s5e(s,b,m);return l==="equidistantPreserveStart"?a5e(b,w,g,i,o):(l==="preserveStart"||l==="preserveStartEnd"?h=h5e(b,w,g,i,o,l==="preserveStartEnd"):h=d5e(b,w,g,i,o),h.filter(function(x){return x.isShow}))}var p5e=["viewBox"],m5e=["viewBox"],g5e=["ticks"];function Qg(n){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qg(n)}function Kp(){return Kp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kp.apply(this,arguments)}function OB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Dr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OB(Object(t),!0).forEach(function(r){HL(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):OB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function XI(n,e){if(n==null)return{};var t=y5e(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function y5e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function v5e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function MB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,aZ(r.key),r)}}function b5e(n,e,t){return e&&MB(n.prototype,e),t&&MB(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function w5e(n,e,t){return e=EE(e),x5e(n,oZ()?Reflect.construct(e,t||[],EE(n).constructor):e.apply(n,t))}function x5e(n,e){if(e&&(Qg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _5e(n)}function _5e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function oZ(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oZ=function(){return!!n})()}function EE(n){return EE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},EE(n)}function A5e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&eO(n,e)}function eO(n,e){return eO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},eO(n,e)}function HL(n,e,t){return e=aZ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aZ(n){var e=S5e(n,"string");return Qg(e)=="symbol"?e:e+""}function S5e(n,e){if(Qg(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Qg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var FC=function(n){function e(t){var r;return v5e(this,e),r=w5e(this,e,[t]),r.state={fontSize:"",letterSpacing:""},r}return A5e(e,n),b5e(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,o=XI(r,p5e),a=this.props,l=a.viewBox,c=XI(a,m5e);return!FI(s,l)||!FI(o,c)||!FI(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,o=i.y,a=i.width,l=i.height,c=i.orientation,u=i.tickSize,d=i.mirror,h=i.tickMargin,m,y,g,b,w,x,_=d?-1:1,S=r.tickSize||u,P=Xe(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":m=y=r.coordinate,b=o+ +!d*l,g=b-_*S,x=g-_*h,w=P;break;case"left":g=b=r.coordinate,y=s+ +!d*a,m=y-_*S,w=m-_*h,x=P;break;case"right":g=b=r.coordinate,y=s+ +d*a,m=y+_*S,w=m+_*h,x=P;break;default:m=y=r.coordinate,b=o+ +d*l,g=b+_*S,x=g+_*h,w=P;break}return{line:{x1:m,y1:g,x2:y,y2:b},tick:{x:w,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,a=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,d=Dr(Dr(Dr({},At(this.props,!1)),At(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);d=Dr(Dr({},d),{},{x1:i,y1:s+h*a,x2:i+o,y2:s+h*a})}else{var m=+(l==="left"&&!c||l==="right"&&c);d=Dr(Dr({},d),{},{x1:i+m*o,y1:s,x2:i+m*o,y2:s+a})}return G.createElement("line",Kp({},d,{className:Wt("recharts-cartesian-axis-line",Uf(u,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var o=this,a=this.props,l=a.tickLine,c=a.stroke,u=a.tick,d=a.tickFormatter,h=a.unit,m=f5e(Dr(Dr({},this.props),{},{ticks:r}),i,s),y=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),b=At(this.props,!1),w=At(u,!1),x=Dr(Dr({},b),{},{fill:"none"},At(l,!1)),_=m.map(function(S,P){var N=o.getTickLineCoord(S),T=N.line,C=N.tick,k=Dr(Dr(Dr(Dr({textAnchor:y,verticalAnchor:g},b),{},{stroke:"none",fill:c},w),C),{},{index:P,payload:S,visibleTicksCount:m.length,tickFormatter:d});return G.createElement(vi,Kp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},MQ(o.props,S,P)),l&&G.createElement("line",Kp({},x,T,{className:Wt("recharts-cartesian-axis-tick-line",Uf(l,"className"))})),u&&e.renderTickItem(u,k,"".concat(Rn(d)?d(S.value,P):S.value).concat(h||"")))});return G.createElement("g",{className:"recharts-cartesian-axis-ticks"},_)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,o=i.width,a=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var d=this.props,h=d.ticks,m=XI(d,g5e),y=h;return Rn(l)&&(y=h&&h.length>0?l(this.props):l(m)),o<=0||a<=0||!y||!y.length?null:G.createElement(vi,{className:Wt("recharts-cartesian-axis",c),ref:function(b){r.layerReference=b}},s&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),mi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var o;return G.isValidElement(r)?o=G.cloneElement(r,i):Rn(r)?o=r(i):o=G.createElement(BL,Kp({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(A.Component);HL(FC,"displayName","CartesianAxis");HL(FC,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var E5e=["type","layout","connectNulls","ref"],T5e=["key"];function Jg(n){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jg(n)}function DB(n,e){if(n==null)return{};var t=C5e(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function C5e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Eb(){return Eb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Eb.apply(this,arguments)}function LB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ri(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LB(Object(t),!0).forEach(function(r){go(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):LB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function bp(n){return R5e(n)||k5e(n)||I5e(n)||P5e()}function P5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I5e(n,e){if(n){if(typeof n=="string")return tO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tO(n,e)}}function k5e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function R5e(n){if(Array.isArray(n))return tO(n)}function tO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function N5e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function jB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,cZ(r.key),r)}}function O5e(n,e,t){return e&&jB(n.prototype,e),t&&jB(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function M5e(n,e,t){return e=TE(e),D5e(n,lZ()?Reflect.construct(e,t||[],TE(n).constructor):e.apply(n,t))}function D5e(n,e){if(e&&(Jg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L5e(n)}function L5e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function lZ(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lZ=function(){return!!n})()}function TE(n){return TE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},TE(n)}function j5e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&nO(n,e)}function nO(n,e){return nO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nO(n,e)}function go(n,e,t){return e=cZ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cZ(n){var e=F5e(n,"string");return Jg(e)=="symbol"?e:e+""}function F5e(n,e){if(Jg(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Jg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var U0=function(n){function e(){var t;N5e(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=M5e(this,e,[].concat(i)),go(t,"state",{isAnimationFinished:!0,totalLength:0}),go(t,"generateSimpleStrokeDasharray",function(o,a){return"".concat(a,"px ").concat(o-a,"px")}),go(t,"getStrokeDasharray",function(o,a,l){var c=l.reduce(function(w,x){return w+x});if(!c)return t.generateSimpleStrokeDasharray(a,o);for(var u=Math.floor(o/c),d=o%c,h=a-o,m=[],y=0,g=0;y<l.length;g+=l[y],++y)if(g+l[y]>d){m=[].concat(bp(l.slice(0,y)),[d-g]);break}var b=m.length%2===0?[0,h]:[h];return[].concat(bp(e.repeat(l,u)),bp(m),b).map(function(w){return"".concat(w,"px")}).join(", ")}),go(t,"id",RL("recharts-line-")),go(t,"pathRef",function(o){t.mainCurve=o}),go(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),go(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return j5e(e,n),O5e(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,a=s.xAxis,l=s.yAxis,c=s.layout,u=s.children,d=RC(u,UL);if(!d)return null;var h=function(g,b){return{x:g.x,y:g.y,value:g.value,errorVal:va(g.payload,b)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return G.createElement(vi,m,d.map(function(y){return G.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:a,yAxis:l,layout:c,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var a=this.props,l=a.dot,c=a.points,u=a.dataKey,d=At(this.props,!1),h=At(l,!0),m=c.map(function(g,b){var w=Ri(Ri(Ri({key:"dot-".concat(b),r:3},d),h),{},{value:g.value,dataKey:u,cx:g.x,cy:g.y,index:b,payload:g.payload});return e.renderDotItem(l,w)}),y={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return G.createElement(vi,Eb({className:"recharts-line-dots",key:"dots"},y),m)}},{key:"renderCurveStatically",value:function(r,i,s,o){var a=this.props,l=a.type,c=a.layout,u=a.connectNulls;a.ref;var d=DB(a,E5e),h=Ri(Ri(Ri({},At(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},o),{},{type:l,layout:c,connectNulls:u});return G.createElement(BJ,Eb({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,o=this.props,a=o.points,l=o.strokeDasharray,c=o.isAnimationActive,u=o.animationBegin,d=o.animationDuration,h=o.animationEasing,m=o.animationId,y=o.animateNewValues,g=o.width,b=o.height,w=this.state,x=w.prevPoints,_=w.totalLength;return G.createElement(ic,{begin:u,duration:d,isActive:c,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var P=S.t;if(x){var N=x.length/a.length,T=a.map(function(F,j){var q=Math.floor(j*N);if(x[q]){var H=x[q],z=Ud(H.x,F.x),W=Ud(H.y,F.y);return Ri(Ri({},F),{},{x:z(P),y:W(P)})}if(y){var V=Ud(g*2,F.x),U=Ud(b/2,F.y);return Ri(Ri({},F),{},{x:V(P),y:U(P)})}return Ri(Ri({},F),{},{x:F.x,y:F.y})});return s.renderCurveStatically(T,r,i)}var C=Ud(0,_),k=C(P),M;if(l){var L="".concat(l).split(/[,\s]+/gim).map(function(F){return parseFloat(F)});M=s.getStrokeDasharray(k,_,L)}else M=s.generateSimpleStrokeDasharray(_,k);return s.renderCurveStatically(a,r,i,{strokeDasharray:M})})}},{key:"renderCurve",value:function(r,i){var s=this.props,o=s.points,a=s.isAnimationActive,l=this.state,c=l.prevPoints,u=l.totalLength;return a&&o&&o.length&&(!c&&u>0||!TJ(c,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,o=i.dot,a=i.points,l=i.className,c=i.xAxis,u=i.yAxis,d=i.top,h=i.left,m=i.width,y=i.height,g=i.isAnimationActive,b=i.id;if(s||!a||!a.length)return null;var w=this.state.isAnimationFinished,x=a.length===1,_=Wt("recharts-line",l),S=c&&c.allowDataOverflow,P=u&&u.allowDataOverflow,N=S||P,T=Vt(b)?this.id:b,C=(r=At(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=C.r,M=k===void 0?3:k,L=C.strokeWidth,F=L===void 0?2:L,j=kIe(o)?o:{},q=j.clipDot,H=q===void 0?!0:q,z=M*2+F;return G.createElement(vi,{className:_},S||P?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(T)},G.createElement("rect",{x:S?h:h-m/2,y:P?d:d-y/2,width:S?m:m*2,height:P?y:y*2})),!H&&G.createElement("clipPath",{id:"clipPath-dots-".concat(T)},G.createElement("rect",{x:h-z/2,y:d-z/2,width:m+z,height:y+z}))):null,!x&&this.renderCurve(N,T),this.renderErrorBar(N,T),(x||o)&&this.renderDots(N,H,T),(!g||w)&&Ku.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(bp(r),[0]):r,o=[],a=0;a<i;++a)o=[].concat(bp(o),bp(s));return o}},{key:"renderDotItem",value:function(r,i){var s;if(G.isValidElement(r))s=G.cloneElement(r,i);else if(Rn(r))s=r(i);else{var o=i.key,a=DB(i,T5e),l=Wt("recharts-line-dot",typeof r!="boolean"?r.className:"");s=G.createElement(Q$e,Eb({key:o},a,{className:l}))}return s}}])}(A.PureComponent);go(U0,"displayName","Line");go(U0,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!qu.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});go(U0,"getComposedData",function(n){var e=n.props,t=n.xAxis,r=n.yAxis,i=n.xAxisTicks,s=n.yAxisTicks,o=n.dataKey,a=n.bandSize,l=n.displayedData,c=n.offset,u=e.layout,d=l.map(function(h,m){var y=va(h,o);return u==="horizontal"?{x:W6({axis:t,ticks:i,bandSize:a,entry:h,index:m}),y:Vt(y)?null:r.scale(y),value:y,payload:h}:{x:Vt(y)?null:t.scale(y),y:W6({axis:r,ticks:s,bandSize:a,entry:h,index:m}),value:y,payload:h}});return Ri({points:d,layout:u},c)});function Zg(n){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zg(n)}function $5e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function V5e(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,hZ(r.key),r)}}function B5e(n,e,t){return e&&V5e(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function z5e(n,e,t){return e=CE(e),U5e(n,uZ()?Reflect.construct(e,t||[],CE(n).constructor):e.apply(n,t))}function U5e(n,e){if(e&&(Zg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H5e(n)}function H5e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function uZ(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uZ=function(){return!!n})()}function CE(n){return CE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},CE(n)}function W5e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&rO(n,e)}function rO(n,e){return rO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},rO(n,e)}function dZ(n,e,t){return e=hZ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hZ(n){var e=G5e(n,"string");return Zg(e)=="symbol"?e:e+""}function G5e(n,e){if(Zg(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Zg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function iO(){return iO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},iO.apply(this,arguments)}function q5e(n){var e=n.xAxisId,t=rZ(),r=iZ(),i=n5e(e);return i==null?null:G.createElement(FC,iO({},i,{className:Wt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:t,height:r},ticksGenerator:function(o){return FJ(o)}}))}var WL=function(n){function e(){return $5e(this,e),z5e(this,e,arguments)}return W5e(e,n),B5e(e,[{key:"render",value:function(){return G.createElement(q5e,this.props)}}])}(G.Component);dZ(WL,"displayName","XAxis");dZ(WL,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function ey(n){"@babel/helpers - typeof";return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ey(n)}function K5e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Y5e(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,mZ(r.key),r)}}function X5e(n,e,t){return e&&Y5e(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Q5e(n,e,t){return e=PE(e),J5e(n,fZ()?Reflect.construct(e,t||[],PE(n).constructor):e.apply(n,t))}function J5e(n,e){if(e&&(ey(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z5e(n)}function Z5e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function fZ(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fZ=function(){return!!n})()}function PE(n){return PE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},PE(n)}function eVe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&sO(n,e)}function sO(n,e){return sO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sO(n,e)}function pZ(n,e,t){return e=mZ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mZ(n){var e=tVe(n,"string");return ey(e)=="symbol"?e:e+""}function tVe(n,e){if(ey(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(ey(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function oO(){return oO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},oO.apply(this,arguments)}var nVe=function(e){var t=e.yAxisId,r=rZ(),i=iZ(),s=r5e(t);return s==null?null:G.createElement(FC,oO({},s,{className:Wt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return FJ(a)}}))},GL=function(n){function e(){return K5e(this,e),Q5e(this,e,arguments)}return eVe(e,n),X5e(e,[{key:"render",value:function(){return G.createElement(nVe,this.props)}}])}(G.Component);pZ(GL,"displayName","YAxis");pZ(GL,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});const rVe={light:"",dark:".dark"},gZ=A.createContext(null);function yZ(){const n=A.useContext(gZ);if(!n)throw new Error("useChart must be used within a <ChartContainer />");return n}const qL=A.forwardRef(({id:n,className:e,children:t,config:r,...i},s)=>{const o=A.useId(),a=`chart-${n||o.replace(/:/g,"")}`;return p.jsx(gZ.Provider,{value:{config:r},children:p.jsxs("div",{"data-chart":a,ref:s,className:ce("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",e),...i,children:[p.jsx(iVe,{id:a,config:r}),p.jsx(wJ,{children:t})]})})});qL.displayName="Chart";const iVe=({id:n,config:e})=>{const t=Object.entries(e).filter(([r,i])=>i.theme||i.color);return t.length?p.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(rVe).map(([r,i])=>`
${i} [data-chart=${n}] {
${t.map(([s,o])=>{var l;const a=((l=o.theme)==null?void 0:l[r])||o.color;return a?`  --color-${s}: ${a};`:null}).join(`
`)}
}
`).join(`
`)}}):null},sVe=A.forwardRef(({active:n,payload:e,className:t,indicator:r="dot",hideLabel:i=!1,hideIndicator:s=!1,label:o,labelFormatter:a,labelClassName:l,formatter:c,color:u,nameKey:d,labelKey:h},m)=>{const{config:y}=yZ(),g=A.useMemo(()=>{var P;if(i||!(e!=null&&e.length))return null;const[w]=e,x=`${h||w.dataKey||w.name||"value"}`,_=aO(y,w,x),S=!h&&typeof o=="string"?((P=y[o])==null?void 0:P.label)||o:_==null?void 0:_.label;return a?p.jsx("div",{className:ce("font-medium",l),children:a(S,e)}):S?p.jsx("div",{className:ce("font-medium",l),children:S}):null},[o,a,e,i,l,y,h]);if(!n||!(e!=null&&e.length))return null;const b=e.length===1&&r!=="dot";return p.jsxs("div",{ref:m,className:ce("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",t),children:[b?null:g,p.jsx("div",{className:"grid gap-1.5",children:e.map((w,x)=>{const _=`${d||w.name||w.dataKey||"value"}`,S=aO(y,w,_),P=u||w.payload.fill||w.color;return p.jsx("div",{className:ce("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",r==="dot"&&"items-center"),children:c&&(w==null?void 0:w.value)!==void 0&&w.name?c(w.value,w.name,w,x,w.payload):p.jsxs(p.Fragment,{children:[S!=null&&S.icon?p.jsx(S.icon,{}):!s&&p.jsx("div",{className:ce("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":r==="dot","w-1":r==="line","w-0 border-[1.5px] border-dashed bg-transparent":r==="dashed","my-0.5":b&&r==="dashed"}),style:{"--color-bg":P,"--color-border":P}}),p.jsxs("div",{className:ce("flex flex-1 justify-between leading-none",b?"items-end":"items-center"),children:[p.jsxs("div",{className:"grid gap-1.5",children:[b?g:null,p.jsx("span",{className:"text-muted-foreground",children:(S==null?void 0:S.label)||w.name})]}),w.value&&p.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:w.value.toLocaleString()})]})]})},w.dataKey)})})]})});sVe.displayName="ChartTooltip";const oVe=A.forwardRef(({className:n,hideIcon:e=!1,payload:t,verticalAlign:r="bottom",nameKey:i},s)=>{const{config:o}=yZ();return t!=null&&t.length?p.jsx("div",{ref:s,className:ce("flex items-center justify-center gap-4",r==="top"?"pb-3":"pt-3",n),children:t.map(a=>{const l=`${i||a.dataKey||"value"}`,c=aO(o,a,l);return p.jsxs("div",{className:ce("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[c!=null&&c.icon&&!e?p.jsx(c.icon,{}):p.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:a.color}}),c==null?void 0:c.label]},a.value)})}):null});oVe.displayName="ChartLegend";function aO(n,e,t){if(typeof e!="object"||e===null)return;const r="payload"in e&&typeof e.payload=="object"&&e.payload!==null?e.payload:void 0;let i=t;return t in e&&typeof e[t]=="string"?i=e[t]:r&&t in r&&typeof r[t]=="string"&&(i=r[t]),i in n?n[i]:n[t]}const QI=3,aVe=()=>{const[n,e]=A.useState([]),[t,r]=A.useState(""),[i,s]=A.useState(!1),[o,a]=A.useState(null),[l,c]=A.useState(!0),[u,d]=A.useState(0),[h,m]=A.useState(!1),[y,g]=A.useState(!0),[b,w]=A.useState(!0),[x,_]=A.useState({}),[S,P]=A.useState([]),[N,T]=A.useState(null),C=A.useRef(null),k=A.useRef(null),{toast:M}=qf(),L=cc(),{isPro:F}=Oo(),j=A.useCallback(()=>({id:"welcome",type:"ai",content:"Hello! I'm your FinSight AI advisor. Ask me anything about your investments or taxes.",timestamp:new Date}),[]),q=A.useCallback(B=>{const Y=B.trim().split(" ");return Y.slice(0,5).join(" ")+(Y.length>5?"...":"")},[]);A.useEffect(()=>{const B=Ox(nr,async Y=>{if(a(Y),c(!1),Y){m(!1);const re=tn(tt,"users",Y.uid),te=await Lf(re);d(te.exists()&&te.data().freeTrialCount||0)}});return()=>B()},[]),A.useEffect(()=>{if(l||!o){if(!l&&!o&&!N){const te="guest-chat";T(te),_({[te]:[j()]})}return}const B=Wr(tt,"users",o.uid,"chats"),Y=a0(B,l0("lastActivity","desc")),re=jf(Y,te=>{const ie=te.docs.map(ae=>{var Ne,Le;return{id:ae.id,title:ae.data().title||"Untitled Chat",createdAt:((Ne=ae.data().createdAt)==null?void 0:Ne.toDate())||new Date,lastActivity:((Le=ae.data().lastActivity)==null?void 0:Le.toDate())||new Date}});P(ie),(!N||!ie.some(ae=>ae.id===N))&&(ie.length>0?T(ie[0].id):z())},te=>{console.error("Error fetching chat metadata:",te),M({title:"Error loading chats",description:"Could not load previous conversations.",variant:"destructive"})});return()=>re()},[o,l]),A.useEffect(()=>{if(l||!o||!N||N==="guest-chat")return;const B=Wr(tt,"users",o.uid,"chats",N,"messages"),Y=a0(B,l0("createdAt","asc")),re=jf(Y,te=>{const ie=te.docs.map(ae=>{var Ne;return{id:ae.id,...ae.data(),timestamp:((Ne=ae.data().createdAt)==null?void 0:Ne.toDate())||new Date}});_(ae=>({...ae,[N]:ie.length>0?ie:[j()]}))},te=>{console.error(`Error fetching messages for chat ${N}:`,te),M({title:"Error loading chat history",description:"Could not load messages for this conversation.",variant:"destructive"})});return()=>re()},[o,N,l]),A.useEffect(()=>{if(!N){e([j()]);return}e(x[N]||[j()])},[N,x,j]),A.useEffect(()=>{y&&C.current&&(C.current.scrollTop=C.current.scrollHeight)},[n,y]);const H=()=>{const B=C.current;B&&g(B.scrollHeight-B.scrollTop-B.clientHeight<50)},z=async()=>{var re;r(""),s(!1);const B=`chat-${Date.now()}`,Y=j();if(_(te=>({...te,[B]:[Y]})),T(B),o){const te=tn(tt,"users",o.uid,"chats",B);await Nt(te,{title:"New Chat",createdAt:gt(),lastActivity:gt()}),await ma(Wr(te,"messages"),{...Y,createdAt:gt()})}(re=k.current)==null||re.focus()},W=async B=>{if(!B.trim())return;if(!o&&u>=QI){m(!0);return}let Y=N;(!Y||n.length===1&&n[0].id==="welcome")&&(Y=`chat-${Date.now()}`,T(Y)),r(""),s(!0);const re={id:Date.now().toString(),type:"user",content:B,timestamp:new Date};if(_(te=>({...te,[Y]:[...te[Y]||[],re]})),o){const te=tn(tt,"users",o.uid,"chats",Y),ie=Wr(te,"messages");n.filter(Le=>Le.type==="user").length===0?(await Nt(te,{title:q(B),lastActivity:gt()},{merge:!0}),await ma(ie,{...j(),createdAt:gt()})):await Nt(te,{lastActivity:gt()},{merge:!0}),await ma(ie,{...re,createdAt:gt()});const Ne=tn(tt,"users",o.uid);await Nt(Ne,{freeTrialCount:u+1},{merge:!0})}else d(te=>te+1);try{const te=await fetch("http://localhost:8000/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:B,user_id:(o==null?void 0:o.uid)||"guest_user",chat_id:Y})});if(!te.ok)throw new Error(`Backend responded with status: ${te.status}`);const ie=await te.json(),ae={id:(Date.now()+1).toString(),type:"ai",content:ie.response,timestamp:new Date,suggestions:ie.suggestions,showChart:ie.showChart},Ne={type:"ai",content:ie.response,createdAt:gt()};ie.suggestions&&(Ne.suggestions=ie.suggestions),typeof ie.showChart<"u"&&(Ne.showChart=ie.showChart),o&&await ma(Wr(tt,"users",o.uid,"chats",Y,"messages"),Ne),_(Le=>({...Le,[Y]:[...Le[Y]||[],ae]}))}catch(te){console.error("Backend call failed:",te);const ie={id:(Date.now()+1).toString(),type:"ai",content:"I'm having trouble connecting to my brain right now. Please make sure the backend server is running and try again.",timestamp:new Date};_(ae=>({...ae,[Y]:[...ae[Y]||[],ie]}))}finally{s(!1),!o&&u+1>=QI&&setTimeout(()=>m(!0),1e3)}},V=B=>{var Y;r(B),(Y=k.current)==null||Y.focus()},U=async()=>{const B=new vo;try{const Y=await $M(nr,B),re=tn(tt,"users",Y.user.uid);(await Lf(re)).exists()?(await Nt(re,{lastSignIn:gt()},{merge:!0}),M({title:"Welcome back!",description:"Signed in successfully."})):(await Nt(re,{email:Y.user.email,displayName:Y.user.displayName,photoURL:Y.user.photoURL,lastSignIn:gt(),createdAt:gt(),isPro:!1,freeTrialCount:0}),M({title:"Welcome to FinSight!",description:"Your account has been created."})),T(null),_({})}catch(Y){M({title:"Sign In Failed",description:Y.message,variant:"destructive"})}},K=()=>{L("/pro-subscription")};A.useEffect(()=>{o&&F&&L("/pro-ai-chat",{replace:!0})},[o,F,L]);const Q=i||!o&&u>=QI;return p.jsx(bL,{children:p.jsxs("div",{className:"flex h-screen w-full bg-gradient-to-br from-background to-zinc-900",children:[p.jsxs("div",{className:"hidden md:flex flex-col",style:{width:250},children:[b&&p.jsxs("div",{className:"w-full flex-shrink-0 border-r border-border bg-card/90 shadow-lg flex flex-col h-full",children:[p.jsxs("div",{className:"flex items-center justify-between font-bold text-base px-4 py-3 border-b border-border",children:[p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(sS,{className:"w-5 h-5 text-primary"}),"FinSight AI"]}),p.jsx("button",{className:"p-1 rounded-full hover:bg-accent/50",onClick:()=>w(!1),"aria-label":"Close sidebar",children:p.jsx(Ub,{className:"w-6 h-6 text-muted-foreground"})})]}),o&&p.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-border/60 bg-background/80",children:[p.jsx("img",{src:o.photoURL,alt:"User avatar",className:"w-8 h-8 rounded-full border border-border"}),p.jsx("span",{className:"font-medium text-sm text-foreground truncate",children:o.displayName||o.email})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto",children:[p.jsx("nav",{className:"flex flex-col gap-1 px-2 py-2",children:p.jsxs("button",{className:"flex items-center gap-2 text-left py-2 px-3 rounded-lg hover:bg-primary/10 font-medium transition group text-sm",onClick:z,children:[p.jsx(L8,{className:"w-4 h-4 text-primary group-hover:scale-110 transition"}),"New Chat"]})}),p.jsx("div",{className:"px-2",children:p.jsx("div",{className:"my-1 border-t border-border/60"})}),p.jsxs("div",{className:"px-2 pb-2",children:[p.jsx("div",{className:"text-xs text-muted-foreground font-semibold mb-1 mt-1 px-1",children:"Previous Chats"}),p.jsx("div",{className:"flex flex-col gap-0.5",children:S.length===0&&o?p.jsx("span",{className:"text-sm text-muted-foreground px-2 py-2",children:"No previous chats."}):S.map(B=>p.jsxs("button",{onClick:()=>T(B.id),className:`flex items-start gap-2 px-2 py-2 rounded-lg transition text-left w-full border-l-4 group text-sm ${N===B.id?"bg-primary/10 border-primary shadow-sm":"bg-transparent border-transparent hover:bg-accent/20 hover:border-primary/60"}`,children:[p.jsx(Pu,{className:"w-4 h-4 mt-0.5 text-muted-foreground group-hover:text-primary transition flex-shrink-0"}),p.jsx("span",{className:"truncate text-sm text-foreground group-hover:text-primary min-w-0",children:B.title})]},B.id))})]})]})]}),!b&&p.jsx("button",{className:"p-2 rounded-lg hover:bg-accent/50",onClick:()=>w(!0),"aria-label":"Open sidebar",children:p.jsx(Ub,{className:"w-6 h-6 text-primary"})})]}),p.jsxs("div",{className:"flex-1 flex flex-col h-full w-full min-h-0 px-0 md:px-8 py-2 md:py-6",children:[p.jsxs("div",{className:"relative flex flex-col items-center justify-center gap-1 py-2 px-4 border-b border-border/20",children:[p.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center shadow-lg",children:p.jsx(Pu,{className:"w-6 h-6 text-white"})}),p.jsx("h3",{className:"font-bold text-lg text-foreground",children:"FinSight AI"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),p.jsx("span",{className:"text-xs text-green-500 font-medium",children:"Online"})]}),p.jsx("div",{className:"absolute top-2 right-4 md:right-8",children:p.jsxs(Ze,{variant:"outline",className:"bg-gradient-to-r from-amber-400 to-amber-600 hover:from-amber-500 hover:to-amber-700 text-white flex items-center gap-2 rounded-full px-4 py-2 text-sm shadow-md transition-all duration-200 hover:scale-[1.02]",onClick:K,children:[p.jsx(_a,{className:"w-4 h-4 fill-white"}),"Go Pro"]})})]}),p.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[p.jsx("div",{className:"flex-1 flex flex-col gap-1 px-2 md:px-6 py-1 overflow-y-auto w-full",ref:C,style:{scrollBehavior:"smooth"},onScroll:H,children:p.jsxs("div",{className:"w-full",children:[n.length<=1&&!i?p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-muted-foreground",children:[p.jsx(sS,{className:"w-12 h-12 mb-4 text-primary/50"}),p.jsx("p",{className:"text-lg font-semibold",children:"Start a new conversation"}),p.jsx("p",{className:"text-sm",children:"Type a message below to begin."})]}):n.map((B,Y)=>p.jsxs("div",{className:`flex ${B.type==="user"?"justify-end":"justify-start"} items-end animate-fade-in mb-1 group`,children:[B.type==="ai"&&p.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center mr-2 flex-shrink-0 shadow-md",children:p.jsx(Pu,{className:"w-4 h-4 text-white"})}),p.jsxs("div",{className:`rounded-2xl px-4 py-2 text-sm shadow-lg break-words relative transition-all duration-200 ${B.type==="ai"?"bg-gradient-to-br from-background/90 to-accent/10 text-foreground border border-border/30":"bg-primary text-primary-foreground"}`,style:{maxWidth:"90%"},children:[B.content,p.jsx("span",{className:"block text-[10px] text-muted-foreground mt-1 text-right opacity-80 select-none",children:B.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),B.type==="ai"&&B.suggestions&&p.jsx("div",{className:"flex flex-wrap gap-2 mt-2 pt-2 border-t border-border/50",children:B.suggestions.map((re,te)=>p.jsx(Ul,{variant:"secondary",className:"cursor-pointer hover:bg-accent/80 transition-colors text-xs py-1 px-2 rounded-full",onClick:()=>V(re),children:re},te))}),B.type==="ai"&&B.showChart&&p.jsx("div",{className:"mt-4",children:p.jsx(qL,{config:{},className:"aspect-auto h-[250px] w-full",children:p.jsxs("div",{className:"flex items-center justify-center h-full border border-dashed rounded-lg bg-background/50 text-muted-foreground",children:[p.jsx(M8,{className:"w-8 h-8 mr-2"}),p.jsx("span",{children:"Chart Placeholder"})]})})})]}),B.type==="user"&&p.jsx("div",{className:"w-7 h-7 rounded-full bg-muted flex items-center justify-center ml-2 flex-shrink-0 shadow-md",children:o!=null&&o.photoURL?p.jsx("img",{src:o.photoURL,alt:"User avatar",className:"w-full h-full rounded-full"}):p.jsx(Vl,{className:"w-4 h-4 text-muted-foreground"})})]},B.id)),i&&p.jsxs("div",{className:"flex gap-2 items-center animate-fade-in mb-1",children:[p.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center flex-shrink-0 shadow-md",children:p.jsx(Pu,{className:"w-4 h-4 text-white"})}),p.jsxs("div",{className:"bg-background/90 border border-border/50 px-3 py-2 rounded-2xl flex items-center gap-1 shadow-md",children:[p.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full animate-bounce"}),p.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),p.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})]})}),p.jsxs("div",{className:"border-t border-border/20 bg-background/95 sticky bottom-0 z-10 shadow-2xl",children:[h&&p.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/30 text-orange-400 text-sm p-3 mx-3 md:mx-6 mb-2 rounded-lg flex items-center justify-between shadow-md",children:[p.jsx("span",{children:"Your free trial has ended. Please sign in or Go Pro for unlimited access!"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(Ze,{onClick:U,className:"ml-4 bg-orange-500 hover:bg-orange-600 text-white flex items-center gap-2 rounded-full px-4 py-2",size:"sm",children:[p.jsx(Qre,{className:"w-4 h-4"})," Sign In"]}),p.jsxs(Ze,{onClick:K,className:"bg-amber-500 hover:bg-amber-600 text-white flex items-center gap-2 rounded-full px-4 py-2",size:"sm",children:[p.jsx(_a,{className:"w-4 h-4 fill-white"})," Go Pro"]})]})]}),p.jsxs("form",{className:"flex items-center gap-3 w-full px-3 md:px-6 py-3 rounded-xl bg-background/95 shadow-lg mt-2",onSubmit:B=>{B.preventDefault(),W(t)},children:[p.jsx(qr,{ref:k,value:t,onChange:B=>r(B.target.value),placeholder:"Ask FinSight AI anything...",className:"flex-1 min-h-[44px] pr-12 text-base shadow-sm focus-visible:ring-offset-0 focus-visible:ring-primary/50",disabled:Q,autoFocus:!0}),p.jsx(Ze,{type:"submit",size:"icon",className:"w-10 h-10 rounded-full bg-primary hover:bg-primary/90 absolute right-6 md:right-9",disabled:Q,children:p.jsx(j8,{className:"w-5 h-5"})})]})]})]})]})]})})},vZ=({tabActiveKey:n})=>{const[e,t]=A.useState([]),[r,i]=A.useState(""),[s,o]=A.useState(!1),[a,l]=A.useState(null),c=A.useRef(null),[u,d]=A.useState(!0),[h,m]=A.useState(!1),[y,g]=A.useState(!0),[b,w]=A.useState({}),[x,_]=A.useState([]),[S,P]=A.useState(null),N=A.useRef(null),{toast:T}=qf(),C=cc(),{isPro:k}=Oo();A.useEffect(()=>{a&&!k&&C("/chat",{replace:!0})},[a,k,C]);const M=A.useCallback(()=>({id:"welcome-pro",type:"ai",content:"Welcome to FinSight Pro! You have unlimited access to advanced analytics, real-time data, and priority support. How can I assist you today?",timestamp:new Date}),[]),L=A.useCallback(V=>{const U=V.trim().split(" ");return U.slice(0,6).join(" ")+(U.length>6?"...":"")},[]);A.useEffect(()=>{const V=Ox(nr,U=>{l(U),U||t([M()])});return()=>V()},[M]),A.useEffect(()=>{if(!a)return;const V=Wr(tt,"users",a.uid,"chats"),U=jf(a0(V,l0("lastActivity","desc")),K=>{const Q=K.docs.map(B=>{var Y,re;return{id:B.id,title:B.data().title||"Untitled Chat",createdAt:((Y=B.data().createdAt)==null?void 0:Y.toDate())||new Date,lastActivity:((re=B.data().lastActivity)==null?void 0:re.toDate())||new Date}});if(_(Q),!(S&&Q.some(B=>B.id===S)))if(Q.length>0)P(Q[0].id);else{const B=`chat-${Date.now()}`;j(B)}},K=>{console.error("Error fetching chat metadata:",K),T({title:"Error loading chats",description:"Could not load your previous conversations.",variant:"destructive"})});return()=>U()},[a,M]),A.useEffect(()=>{if(!a||!S){t([]);return}const V=Wr(tt,"users",a.uid,"chats",S,"messages"),U=jf(a0(V,l0("createdAt","asc")),K=>{const Q=K.docs.map(Y=>{var te;const re=Y.data();return{id:Y.id,type:re.type,content:re.content,timestamp:(te=re.createdAt)!=null&&te.toDate?re.createdAt.toDate():new Date,suggestions:re.suggestions||void 0,showChart:re.showChart||!1}}),B=Q.length>0?Q:[M()];t(B),w(Y=>({...Y,[S]:B}))},K=>{console.error(`Error fetching messages for chat ${S}:`,K),T({title:"Error loading chat history",description:"Could not load messages for this conversation.",variant:"destructive"})});return()=>U()},[a,S,M]),A.useEffect(()=>{const V=c.current;V&&u&&(V.scrollTop=V.scrollHeight)},[e,u]);const F=()=>{const V=c.current;V&&d(V.scrollHeight-V.scrollTop-V.clientHeight<30)},j=async V=>{if(!a){T({title:"Authentication Required",description:"Please sign in to start a new chat.",variant:"destructive"});return}const U=V||`chat-${Date.now()}`,K=M();i(""),m(!1),o(!1),t([K]),w(B=>({...B,[U]:[K]})),P(U);const Q=tn(tt,"users",a.uid,"chats",U);await Nt(Q,{title:"New Pro Chat",createdAt:gt(),lastActivity:gt()},{merge:!0}),await ma(Wr(Q,"messages"),{...K,createdAt:gt()}),setTimeout(()=>{var B;(B=N.current)==null||B.focus()},100)},q=async V=>{var re;if(!V.trim()||!a)return;i(""),o(!0);const U={id:Date.now().toString(),type:"user",content:V,timestamp:new Date};let K=S;if(!K||a&&!((re=b[K])!=null&&re.length)){let te=L(V),ie=1;for(;x.some(ae=>ae.title===te);)te=`${L(V)} (${ie++})`;K=`chat-${Date.now()}`,P(K),w(ae=>({...ae,[K]:[M(),U]})),t([M(),U]),await Nt(tn(tt,"users",a.uid,"chats",K),{title:te,createdAt:gt(),lastActivity:gt()},{merge:!0}),await ma(Wr(tt,"users",a.uid,"chats",K,"messages"),{...M(),createdAt:gt()})}else t(te=>[...te,U]),w(te=>({...te,[K]:[...te[K]||[],U]}));const Q=tn(tt,"users",a.uid,"chats",K);await Nt(Q,{lastActivity:gt()},{merge:!0}),await ma(Wr(Q,"messages"),{...U,createdAt:gt()}),(b[K]||[]).filter(te=>te.type==="user").length===1&&await Nt(Q,{title:L(V)},{merge:!0});try{const ie=await(await fetch("http://localhost:8000/prochat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:V,user_id:a.uid,chat_id:K})})).json(),ae={type:"ai",content:ie.answer,timestamp:new Date,suggestions:ie.suggestions||["Run advanced portfolio simulation","Generate tax optimization report","Analyze specific stock (e.g., AAPL)","Show real-time market heat map"],showChart:ie.showChart||!1},Ne={...ae,id:(Date.now()+1).toString()};t(Le=>[...Le,Ne]),w(Le=>({...Le,[K]:[...Le[K]||[],Ne]})),await Nt(Q,{lastActivity:gt()},{merge:!0}),await ma(Wr(Q,"messages"),{...ae,createdAt:gt()}),ae.showChart&&m(!0)}catch(te){console.error("FastAPI call failed:",te);const ie=H(V),ae={...ie,id:(Date.now()+1).toString()};t(Ne=>[...Ne,ae]),w(Ne=>({...Ne,[K]:[...Ne[K]||[],ae]})),await Nt(Q,{lastActivity:gt()},{merge:!0}),await ma(Wr(Q,"messages"),{...ie,createdAt:gt()}),ie.showChart&&m(!0)}finally{o(!1)}},H=V=>V.toLowerCase().includes("chart")?{type:"ai",content:"Here is your advanced chart, rendered with real-time market data. You can customize the view and apply technical indicators.",timestamp:new Date,showChart:!0}:{type:"ai",content:"As a Pro user, I can provide a deep-dive analysis. Based on your portfolio and real-time market data, I suggest the following tax-loss harvesting opportunities...",timestamp:new Date,suggestions:["Run advanced portfolio simulation","Generate tax optimization report","Analyze specific stock (e.g., AAPL)","Show real-time market heat map"]},z=V=>{var U;i(V),(U=N.current)==null||U.focus()},W=s||!a;return p.jsx(bL,{children:p.jsxs("div",{className:"flex h-screen w-full bg-gradient-to-br from-background to-zinc-900",children:[p.jsxs("div",{className:"hidden md:flex flex-col",style:{width:250},children:[y&&p.jsxs("div",{className:"w-full flex-shrink-0 border-r border-border bg-card/90 shadow-lg flex flex-col h-full",children:[p.jsxs("div",{className:"flex items-center justify-between font-bold text-base px-4 py-3 border-b border-border",children:[p.jsxs("span",{className:"flex items-center gap-2 text-amber-500",children:[p.jsx(_a,{className:"w-5 h-5 fill-amber-500"}),"FinSight AI Pro"]}),p.jsx("button",{className:"p-1 rounded-full hover:bg-accent/50",onClick:()=>g(!1),"aria-label":"Close sidebar",children:p.jsx(Ub,{className:"w-6 h-6 text-muted-foreground"})})]}),a&&p.jsxs("div",{className:"flex items-center justify-between gap-3 px-4 py-3 border-b border-border/60 bg-background/80",children:[p.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[p.jsx("img",{src:a.photoURL,alt:"User avatar",className:"w-8 h-8 rounded-full border border-amber-500"}),p.jsx("span",{className:"font-medium text-sm text-foreground truncate",children:a.displayName||a.email})]}),p.jsx(_a,{className:"w-5 h-5 text-amber-500 flex-shrink-0"})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto",children:[p.jsx("nav",{className:"flex flex-col gap-1 px-2 py-2",children:p.jsxs("button",{className:"flex items-center gap-2 text-left py-2 px-3 rounded-lg hover:bg-primary/10 font-medium transition group text-sm",onClick:()=>j(),children:[p.jsx(L8,{className:"w-4 h-4 text-primary group-hover:scale-110 transition"}),"New Chat"]})}),p.jsx("div",{className:"px-2",children:p.jsx("div",{className:"my-1 border-t border-border/60"})}),p.jsxs("div",{className:"px-2 pb-2",children:[p.jsx("div",{className:"text-xs text-muted-foreground font-semibold mb-1 mt-1 px-1",children:"Previous Chats"}),p.jsx("div",{className:"flex flex-col gap-0.5",children:x.length===0?p.jsx("span",{className:"text-sm text-muted-foreground px-2 py-2",children:"No previous chats."}):x.map(V=>p.jsxs("button",{onClick:()=>P(V.id),className:`flex items-start gap-2 px-2 py-2 rounded-lg transition text-left w-full border-l-4 group text-sm ${S===V.id?"bg-primary/10 border-primary shadow-sm":"bg-transparent border-transparent hover:bg-accent/20 hover:border-primary/60"}`,children:[p.jsx(Pu,{className:"w-4 h-4 mt-0.5 text-muted-foreground group-hover:text-amber-500 transition flex-shrink-0"}),p.jsx("span",{className:"truncate text-sm text-foreground group-hover:text-primary min-w-0",children:V.title})]},V.id))})]})]})]}),!y&&p.jsx("button",{className:"p-2 rounded-lg hover:bg-accent/50",onClick:()=>g(!0),"aria-label":"Open sidebar",children:p.jsx(Ub,{className:"w-6 h-6 text-primary"})})]}),p.jsxs("div",{className:"flex-1 flex flex-col h-full w-full min-h-0 px-0 md:px-8 py-2 md:py-6",children:[p.jsxs("div",{className:"relative flex flex-col items-center justify-center gap-1 py-2 px-4 border-b border-border/20",children:[p.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center shadow-lg",children:p.jsx(_a,{className:"w-6 h-6 text-white"})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h3",{className:"font-bold text-lg text-foreground",children:"FinSight AI"}),p.jsx(Ul,{className:"bg-amber-500 text-white border-amber-600 text-xs",children:"PRO"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),p.jsx("span",{className:"text-xs text-green-500 font-medium",children:"Online"})]})]}),p.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[p.jsx("div",{className:"flex-1 flex flex-col gap-1 px-2 md:px-6 py-1 overflow-y-auto w-full min-h-[50px]",tabIndex:0,"aria-label":"Chat messages area",ref:c,style:{scrollBehavior:"smooth"},onScroll:F,children:p.jsxs("div",{className:"w-full",children:[e.length===0&&!s?p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-muted-foreground",children:[p.jsx(sS,{className:"w-12 h-12 mb-4 text-amber-500/50"}),p.jsx("p",{className:"text-lg font-semibold",children:"Start a Pro Conversation"}),p.jsx("p",{className:"text-sm",children:"Ask for advanced analytics or real-time data."})]}):e.map((V,U)=>p.jsxs("div",{className:`flex ${V.type==="user"?"justify-end":"justify-start"} items-end animate-fade-in mb-1 group`,style:{animationDelay:`${U*.05}s`},tabIndex:0,"aria-label":V.type==="user"?"Your message":"AI message",children:[V.type==="ai"&&p.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center mr-2 flex-shrink-0 shadow-md",children:p.jsx(Pu,{className:"w-4 h-4 text-white"})}),p.jsxs("div",{className:`rounded-2xl px-4 py-2 text-sm shadow-lg break-words relative transition-all duration-200 ${V.type==="ai"?"bg-gradient-to-br from-background/90 to-zinc-800/20 text-foreground border border-border/30":"bg-primary text-primary-foreground"}`,style:{width:"fit-content",maxWidth:"90%"},children:[V.content,p.jsx("span",{className:"block text-[10px] text-muted-foreground mt-1 text-right opacity-80 select-none",children:V.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),V.type==="ai"&&V.suggestions&&V.suggestions.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2 mt-2 pt-2 border-t border-border/50",children:V.suggestions.map((K,Q)=>p.jsx(Ul,{variant:"secondary",className:"cursor-pointer hover:bg-amber-400/20 hover:text-amber-300 transition-colors text-xs py-1 px-2 rounded-full",onClick:()=>z(K),children:K},Q))}),V.type==="ai"&&V.showChart&&p.jsx("div",{className:"mt-4 border-t border-border/50 pt-3",children:p.jsx(qL,{config:{},className:"aspect-auto h-[250px] w-full",children:p.jsxs("div",{className:"flex items-center justify-center h-full border border-dashed border-amber-500/50 rounded-lg bg-background/50 text-amber-400",children:[p.jsx(M8,{className:"w-8 h-8 mr-2"}),p.jsx("span",{children:"Pro Chart Placeholder (Real-time Data)"})]})})})]}),V.type==="user"&&p.jsx("div",{className:"w-7 h-7 rounded-full bg-muted flex items-center justify-center ml-2 flex-shrink-0 shadow-md border-2 border-amber-500",children:a&&a.photoURL?p.jsx("img",{src:a.photoURL,alt:"User avatar",className:"w-full h-full rounded-full"}):p.jsx(Vl,{className:"w-4 h-4 text-muted-foreground"})})]},V.id)),s&&p.jsxs("div",{className:"flex gap-2 items-center animate-fade-in mb-1",children:[p.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center flex-shrink-0 shadow-md",children:p.jsx(Pu,{className:"w-4 h-4 text-white"})}),p.jsxs("div",{className:"bg-background/90 border border-border/50 px-3 py-2 rounded-2xl flex items-center gap-1 shadow-md",children:[p.jsx("div",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full animate-bounce"}),p.jsx("div",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),p.jsx("div",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})]})}),p.jsx("div",{className:"border-t border-border/20 bg-background/95 sticky bottom-0 z-10 shadow-2xl",children:p.jsxs("form",{className:"flex items-center gap-3 w-full px-3 md:px-6 py-3 rounded-xl bg-background/95 shadow-lg mt-2",onSubmit:V=>{V.preventDefault(),q(r)},"aria-label":"Send a message",children:[p.jsx(qr,{ref:N,value:r,onChange:V=>i(V.target.value),placeholder:"Ask FinSight AI anything...",className:"flex-1 min-h-[44px] pr-12 text-base shadow-sm focus-visible:ring-offset-0 focus-visible:ring-amber-500/50",disabled:W,autoFocus:!0}),p.jsx(Ze,{type:"submit",size:"icon",className:"w-10 h-10 rounded-full bg-amber-500 hover:bg-amber-600 absolute right-6 md:right-9",disabled:W,children:p.jsx(j8,{className:"w-5 h-5"})})]})})]})]})]})})},bZ=({forcePro:n=!1})=>{const{user:e,isPro:t,loadingUser:r}=Oo(),i=cc();return A.useEffect(()=>{r||(e&&(t||n)?window.location.pathname!=="/pro-ai-chat"&&i("/pro-ai-chat",{replace:!0}):e&&!t&&window.location.pathname==="/pro-ai-chat"&&i("/chat",{replace:!0}))},[e,t,r,i,n]),r?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),p.jsx("p",{className:"text-muted-foreground",children:"Loading chat..."})]})}):e&&(t||n)?p.jsx(vZ,{}):p.jsx(aVe,{})},wZ=({onClose:n})=>{const[e,t]=A.useState("email"),[r,i]=A.useState("signIn"),[s,o]=A.useState(""),[a,l]=A.useState(""),[c,u]=A.useState(""),[d,h]=A.useState(!1),[m,y]=A.useState(!0),[g,b]=A.useState(!1),[w,x]=A.useState(null),[_,S]=A.useState(null),[P,N]=A.useState(!1),[T,C]=A.useState(""),[k,M]=A.useState(""),[L,F]=A.useState(!1),[j,q]=A.useState(null),H=()=>nr?(window.recaptchaVerifier||(console.log("Initializing reCAPTCHA..."),window.recaptchaVerifier=new jde("recaptcha-container",{size:"normal",callback:B=>{console.log("reCAPTCHA solved",B)},"expired-callback":()=>{console.log("reCAPTCHA expired")}},nr),window.recaptchaVerifier.render().then(B=>{console.log("reCAPTCHA rendered with widgetId:",B)})),console.log("reCAPTCHA verifier:",window.recaptchaVerifier),window.recaptchaVerifier):(x("Firebase Auth is not initialized."),b(!1),null),z=B=>/^\+[1-9]\d{1,14}$/.test(B),W=async()=>{if(console.log("handleSendOtp called with",T),x(null),S(null),b(!0),!z(T)){x("Please enter a valid phone number with country code (e.g. +919876543210)"),b(!1);return}try{console.log("Setting up reCAPTCHA...");const B=H();if(!B)return;console.log("reCAPTCHA setup complete:",B),console.log("Calling signInWithPhoneNumber...");const Y=await Vde(nr,T,B);console.log("signInWithPhoneNumber success:",Y),q(Y),F(!0),S("OTP sent to your phone number.")}catch(B){console.error("Error sending OTP:",B),x(B.message||"Failed to send OTP")}finally{b(!1)}},V=async()=>{x(null),S(null),b(!0);try{if(!j)throw new Error("No OTP confirmation found");const B=await j.confirm(k),Y=tn(tt,"users",B.user.uid);(await Lf(Y)).exists()?await Nt(Y,{lastSignIn:new Date},{merge:!0}):await Nt(Y,{phoneNumber:B.user.phoneNumber,displayName:s,createdAt:new Date}),S("Signed in successfully!"),n&&n()}catch(B){x(B.message||"OTP verification failed")}finally{b(!1)}},U=async()=>{x(null),S(null),b(!0);try{await p$(nr,m?pk:_S);const B=new vo,Y=await $M(nr,B),re=tn(tt,"users",Y.user.uid);(await Lf(re)).exists()?(await Nt(re,{lastSignIn:new Date},{merge:!0}),S("Welcome back! Signed in successfully.")):(await Nt(re,{email:Y.user.email,displayName:Y.user.displayName,photoURL:Y.user.photoURL,lastSignIn:new Date,createdAt:new Date}),S("Welcome! Your account has been created successfully.")),n&&n()}catch(B){x(B.message||"Google sign-in failed")}finally{b(!1)}},K=async B=>{if(B.preventDefault(),e!=="phone"){x(null),S(null),b(!0);try{if(await p$(nr,m?pk:_S),r==="signIn")await hde(nr,a,c),S("Signed in successfully!"),n&&n();else{const Y=await dde(nr,a,c);s.trim()&&await LH(Y.user,{displayName:s}),await Nt(tn(tt,"users",Y.user.uid),{email:a,displayName:s,phoneNumber:T}),S("Account created and signed in!"),n&&n()}}catch(Y){x(Y.message||"Authentication failed")}finally{b(!1)}}},Q=async()=>{x(null),S(null),b(!0);try{await ude(nr,a),N(!0),S("Password reset email sent!")}catch(B){x(B.message||"Failed to send reset email")}finally{b(!1)}};return p.jsxs("div",{className:"w-full max-w-[720px] bg-card rounded-2xl shadow-2xl border border-border/40 p-8 flex flex-col gap-6",children:[p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center",children:p.jsx(Vl,{className:"w-8 h-8 text-white"})}),p.jsx("h2",{className:"text-2xl font-bold tracking-tight text-foreground mt-3",children:r==="signIn"?"Sign In to FinSight":"Create Account"}),p.jsx("p",{className:"text-muted-foreground text-center text-base",children:r==="signIn"?"Welcome back! Sign in to continue.":"Register to get started."})]}),p.jsxs("div",{className:"flex justify-center gap-4 mb-2",children:[p.jsx("button",{className:`px-4 py-2 rounded-lg text-base font-semibold transition ${e==="email"?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,onClick:()=>{t("email"),F(!1),x(null),S(null)},type:"button",children:"Email"}),p.jsx("button",{className:`px-4 py-2 rounded-lg text-base font-semibold transition ${e==="phone"?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,onClick:()=>{t("phone"),x(null),S(null)},type:"button",children:"Phone"})]}),p.jsxs("form",{className:"flex flex-col gap-4",onSubmit:K,children:[e==="phone"&&p.jsxs(p.Fragment,{children:[r==="signUp"&&p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-neutral-200 mb-2",children:"Name"}),p.jsxs("div",{className:"relative",children:[p.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500 pointer-events-none",children:p.jsxs("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[p.jsx("circle",{cx:"12",cy:"8",r:"4"}),p.jsx("path",{d:"M2 20c0-4 8-6 10-6s10 2 10 6"})]})}),p.jsx("input",{id:"name",type:"text",autoComplete:"name",required:!0,disabled:g,className:"w-full pl-12 pr-4 py-3 rounded-lg bg-neutral-900 border border-neutral-700 text-neutral-100 placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-primary/50 transition text-base h-12",placeholder:"Your name",value:s,onChange:B=>o(B.target.value)})]})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-neutral-200 mb-2",children:"Phone Number"}),p.jsxs("div",{className:"relative",children:[p.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500 pointer-events-none",children:p.jsx("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M22 16.92V19a2 2 0 0 1-2.18 2A19.72 19.72 0 0 1 3 5.18 2 2 0 0 1 5 3h2.09a2 2 0 0 1 2 1.72c.13.81.36 1.6.68 2.34a2 2 0 0 1-.45 2.11l-.27.27a16 16 0 0 0 6.29 6.29l.27-.27a2 2 0 0 1 2.11-.45c.74.32 1.53.55 2.34.68A2 2 0 0 1 22 16.92z"})})}),p.jsx("input",{id:"phone",type:"tel",autoComplete:"tel",required:!0,disabled:g||L,className:"w-full pl-12 pr-4 py-3 rounded-lg bg-neutral-900 border border-neutral-700 text-neutral-100 placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-primary/50 transition text-base h-12",placeholder:"+91XXXXXXXXXX",value:T,onChange:B=>C(B.target.value)})]})]}),!L&&p.jsx(Ze,{type:"button",disabled:g||!T,className:"w-full font-semibold py-3 text-base h-12",onClick:W,children:g?"Sending...":"Send OTP"}),L&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-neutral-200 mb-2",children:"Enter OTP"}),p.jsx("input",{id:"otp",type:"text",required:!0,disabled:g,className:"w-full px-4 py-3 rounded-lg bg-neutral-900 border border-neutral-700 text-neutral-100 placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-primary/50 transition text-base h-12",placeholder:"Enter OTP",value:k,onChange:B=>M(B.target.value)})]}),p.jsx(Ze,{type:"button",disabled:g||!k,className:"w-full font-semibold py-3 text-base h-12",onClick:V,children:g?"Verifying...":"Verify OTP"})]}),p.jsx("div",{id:"recaptcha-container"})]}),e==="email"&&p.jsxs(p.Fragment,{children:[r==="signUp"&&p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-neutral-200 mb-2",children:"Name"}),p.jsxs("div",{className:"relative",children:[p.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500 pointer-events-none",children:p.jsxs("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[p.jsx("circle",{cx:"12",cy:"8",r:"4"}),p.jsx("path",{d:"M2 20c0-4 8-6 10-6s10 2 10 6"})]})}),p.jsx("input",{id:"name",type:"text",autoComplete:"name",required:!0,disabled:g,className:"w-full pl-12 pr-4 py-3 rounded-lg bg-neutral-900 border border-neutral-700 text-neutral-100 placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-primary/50 transition text-base h-12",placeholder:"Your name",value:s,onChange:B=>o(B.target.value)})]})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-200 mb-2",children:"Email"}),p.jsxs("div",{className:"relative",children:[p.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500 pointer-events-none",children:p.jsxs("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[p.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2"}),p.jsx("polyline",{points:"3 7 12 13 21 7"})]})}),p.jsx("input",{id:"email",type:"email",autoComplete:"email",required:!0,disabled:g,className:"w-full pl-12 pr-4 py-3 rounded-lg bg-neutral-900 border border-neutral-700 text-neutral-100 placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-primary/50 transition text-base h-12",placeholder:"you@email.com",value:a,onChange:B=>l(B.target.value)})]})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-200 mb-2",children:"Password"}),p.jsxs("div",{className:"relative",children:[p.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500 pointer-events-none",children:p.jsxs("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[p.jsx("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2"}),p.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),p.jsx("input",{id:"password",type:d?"text":"password",autoComplete:r==="signUp"?"new-password":"current-password",required:!0,disabled:g,className:"w-full pl-12 pr-12 py-3 rounded-lg bg-neutral-900 border border-neutral-700 text-neutral-100 placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-primary/50 transition text-base h-12",placeholder:"Password",value:c,onChange:B=>u(B.target.value)}),p.jsx("button",{type:"button",tabIndex:-1,onClick:()=>h(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 hover:text-neutral-300 transition",children:d?p.jsx(qre,{size:18}):p.jsx(Kre,{size:18})})]})]}),r==="signIn"&&p.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[p.jsxs("label",{className:"flex items-center gap-2 text-neutral-400 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:m,onChange:B=>y(B.target.checked),className:"h-5 w-5 rounded border-neutral-600 bg-neutral-800 text-primary focus:ring-primary/50"}),"Remember me"]}),p.jsx("button",{type:"button",onClick:Q,disabled:g||!a,className:"font-medium text-primary/80 hover:text-primary disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Forgot password?"})]}),w&&p.jsxs("div",{className:"flex items-center gap-3 text-red-400 bg-red-900/20 border border-red-500/30 rounded-md p-3 text-base",children:[p.jsx(D8,{size:18}),p.jsx("span",{children:w})]}),_&&p.jsxs("div",{className:"flex items-center gap-3 text-green-400 bg-green-900/20 border border-green-500/30 rounded-md p-3 text-base",children:[p.jsx(Hre,{size:18}),p.jsx("span",{children:_})]}),p.jsx(Ze,{type:"submit",disabled:g,className:"w-full font-semibold py-3 text-base h-12",children:g?"Processing...":r==="signIn"?"Sign In":"Create Account"})]})]}),p.jsxs("div",{className:"relative my-2",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t border-neutral-700"})}),p.jsx("div",{className:"relative flex justify-center text-base uppercase",children:p.jsx("span",{className:"bg-card px-3 text-neutral-500",children:"Or"})})]}),p.jsxs(Ze,{variant:"outline",onClick:U,disabled:g,className:"w-full flex items-center justify-center gap-3 h-12 text-base font-semibold",children:[p.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 48 48",children:[p.jsx("path",{fill:"#FFC107",d:"M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 12.955 4 4 12.955 4 24s8.955 20 20 20 20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"}),p.jsx("path",{fill:"#FF3D00",d:"m6.306 14.691 6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 16.318 4 9.656 8.337 6.306 14.691z"}),p.jsx("path",{fill:"#4CAF50",d:"M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238A11.91 11.91 0 0 1 24 36c-5.222 0-9.618-3.67-11.283-8.591l-6.522 5.025C9.505 39.556 16.227 44 24 44z"}),p.jsx("path",{fill:"#1976D2",d:"M43.611 20.083H24v8h11.303a12.04 12.04 0 0 1-4.087 7.581l6.19 5.238C42.012 35.245 44 30.028 44 24c0-1.341-.138-2.65-.389-3.917z"})]}),"Sign in with Google"]}),p.jsxs("p",{className:"text-center text-base text-neutral-400",children:[r==="signIn"?"Don't have an account?":"Already have an account?"," ",p.jsx("button",{onClick:()=>i(r==="signIn"?"signUp":"signIn"),className:"font-semibold text-primary/80 hover:text-primary transition",children:r==="signIn"?"Sign Up":"Sign In"})]})]})};var KL="Collapsible",[lVe,xZ]=ac(KL),[cVe,YL]=lVe(KL),_Z=A.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...a}=n,[l=!1,c]=lc({prop:r,defaultProp:i,onChange:o});return p.jsx(cVe,{scope:t,disabled:s,contentId:Aa(),open:l,onOpenToggle:A.useCallback(()=>c(u=>!u),[c]),children:p.jsx(Re.div,{"data-state":QL(l),"data-disabled":s?"":void 0,...a,ref:e})})});_Z.displayName=KL;var AZ="CollapsibleTrigger",SZ=A.forwardRef((n,e)=>{const{__scopeCollapsible:t,...r}=n,i=YL(AZ,t);return p.jsx(Re.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":QL(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:ve(n.onClick,i.onOpenToggle)})});SZ.displayName=AZ;var XL="CollapsibleContent",EZ=A.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=YL(XL,n.__scopeCollapsible);return p.jsx(Us,{present:t||i.open,children:({present:s})=>p.jsx(uVe,{...r,ref:e,present:s})})});EZ.displayName=XL;var uVe=A.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:r,children:i,...s}=n,o=YL(XL,t),[a,l]=A.useState(r),c=A.useRef(null),u=qt(e,c),d=A.useRef(0),h=d.current,m=A.useRef(0),y=m.current,g=o.open||a,b=A.useRef(g),w=A.useRef();return A.useEffect(()=>{const x=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(x)},[]),To(()=>{const x=c.current;if(x){w.current=w.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const _=x.getBoundingClientRect();d.current=_.height,m.current=_.width,b.current||(x.style.transitionDuration=w.current.transitionDuration,x.style.animationName=w.current.animationName),l(r)}},[o.open,r]),p.jsx(Re.div,{"data-state":QL(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...s,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...n.style},children:g&&i})});function QL(n){return n?"open":"closed"}var dVe=_Z,hVe=SZ,fVe=EZ,hc="Accordion",pVe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[JL,mVe,gVe]=hT(hc),[$C,l6e]=ac(hc,[gVe,xZ]),ZL=xZ(),TZ=G.forwardRef((n,e)=>{const{type:t,...r}=n,i=r,s=r;return p.jsx(JL.Provider,{scope:n.__scopeAccordion,children:t==="multiple"?p.jsx(wVe,{...s,ref:e}):p.jsx(bVe,{...i,ref:e})})});TZ.displayName=hc;var[CZ,yVe]=$C(hc),[PZ,vVe]=$C(hc,{collapsible:!1}),bVe=G.forwardRef((n,e)=>{const{value:t,defaultValue:r,onValueChange:i=()=>{},collapsible:s=!1,...o}=n,[a,l]=lc({prop:t,defaultProp:r,onChange:i});return p.jsx(CZ,{scope:n.__scopeAccordion,value:a?[a]:[],onItemOpen:l,onItemClose:G.useCallback(()=>s&&l(""),[s,l]),children:p.jsx(PZ,{scope:n.__scopeAccordion,collapsible:s,children:p.jsx(IZ,{...o,ref:e})})})}),wVe=G.forwardRef((n,e)=>{const{value:t,defaultValue:r,onValueChange:i=()=>{},...s}=n,[o=[],a]=lc({prop:t,defaultProp:r,onChange:i}),l=G.useCallback(u=>a((d=[])=>[...d,u]),[a]),c=G.useCallback(u=>a((d=[])=>d.filter(h=>h!==u)),[a]);return p.jsx(CZ,{scope:n.__scopeAccordion,value:o,onItemOpen:l,onItemClose:c,children:p.jsx(PZ,{scope:n.__scopeAccordion,collapsible:!0,children:p.jsx(IZ,{...s,ref:e})})})}),[xVe,VC]=$C(hc),IZ=G.forwardRef((n,e)=>{const{__scopeAccordion:t,disabled:r,dir:i,orientation:s="vertical",...o}=n,a=G.useRef(null),l=qt(a,e),c=mVe(t),d=ZT(i)==="ltr",h=ve(n.onKeyDown,m=>{var C;if(!pVe.includes(m.key))return;const y=m.target,g=c().filter(k=>{var M;return!((M=k.ref.current)!=null&&M.disabled)}),b=g.findIndex(k=>k.ref.current===y),w=g.length;if(b===-1)return;m.preventDefault();let x=b;const _=0,S=w-1,P=()=>{x=b+1,x>S&&(x=_)},N=()=>{x=b-1,x<_&&(x=S)};switch(m.key){case"Home":x=_;break;case"End":x=S;break;case"ArrowRight":s==="horizontal"&&(d?P():N());break;case"ArrowDown":s==="vertical"&&P();break;case"ArrowLeft":s==="horizontal"&&(d?N():P());break;case"ArrowUp":s==="vertical"&&N();break}const T=x%w;(C=g[T].ref.current)==null||C.focus()});return p.jsx(xVe,{scope:t,disabled:r,direction:i,orientation:s,children:p.jsx(JL.Slot,{scope:t,children:p.jsx(Re.div,{...o,"data-orientation":s,ref:l,onKeyDown:r?void 0:h})})})}),IE="AccordionItem",[_Ve,ej]=$C(IE),kZ=G.forwardRef((n,e)=>{const{__scopeAccordion:t,value:r,...i}=n,s=VC(IE,t),o=yVe(IE,t),a=ZL(t),l=Aa(),c=r&&o.value.includes(r)||!1,u=s.disabled||n.disabled;return p.jsx(_Ve,{scope:t,open:c,disabled:u,triggerId:l,children:p.jsx(dVe,{"data-orientation":s.orientation,"data-state":LZ(c),...a,...i,ref:e,disabled:u,open:c,onOpenChange:d=>{d?o.onItemOpen(r):o.onItemClose(r)}})})});kZ.displayName=IE;var RZ="AccordionHeader",NZ=G.forwardRef((n,e)=>{const{__scopeAccordion:t,...r}=n,i=VC(hc,t),s=ej(RZ,t);return p.jsx(Re.h3,{"data-orientation":i.orientation,"data-state":LZ(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:e})});NZ.displayName=RZ;var lO="AccordionTrigger",OZ=G.forwardRef((n,e)=>{const{__scopeAccordion:t,...r}=n,i=VC(hc,t),s=ej(lO,t),o=vVe(lO,t),a=ZL(t);return p.jsx(JL.ItemSlot,{scope:t,children:p.jsx(hVe,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:s.triggerId,...a,...r,ref:e})})});OZ.displayName=lO;var MZ="AccordionContent",DZ=G.forwardRef((n,e)=>{const{__scopeAccordion:t,...r}=n,i=VC(hc,t),s=ej(MZ,t),o=ZL(t);return p.jsx(fVe,{role:"region","aria-labelledby":s.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});DZ.displayName=MZ;function LZ(n){return n?"open":"closed"}var AVe=TZ,SVe=kZ,EVe=NZ,jZ=OZ,FZ=DZ;const TVe=AVe,cO=A.forwardRef(({className:n,...e},t)=>p.jsx(SVe,{ref:t,className:ce("border-b",n),...e}));cO.displayName="AccordionItem";const uO=A.forwardRef(({className:n,children:e,...t},r)=>p.jsx(EVe,{className:"flex",children:p.jsxs(jZ,{ref:r,className:ce("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...t,children:[e,p.jsx(zre,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));uO.displayName=jZ.displayName;const dO=A.forwardRef(({className:n,children:e,...t},r)=>p.jsx(FZ,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...t,children:p.jsx("div",{className:ce("pb-4 pt-0",n),children:e})}));dO.displayName=FZ.displayName;const $Z=()=>{const n=qH(),{toast:e}=qf(),[t,r]=A.useState(n.currentUser),[i,s]=A.useState(""),[o,a]=A.useState(""),[l,c]=A.useState(""),[u,d]=A.useState("");A.useEffect(()=>{const g=Ox(n,async b=>{if(r(b),b){s(b.displayName||"");const w=tn(tt,"users",b.uid),x=await Lf(w);x.exists()&&a(x.data().phoneNumber||"")}});return()=>g()},[n]);const h=async()=>{if(t)try{await LH(t,{displayName:i});const g=tn(tt,"users",t.uid);await Nt(g,{phoneNumber:o},{merge:!0}),e({title:"Success",description:"Profile updated successfully."})}catch(g){e({title:"Error",description:g.message,variant:"destructive"})}},m=async()=>{if(t&&t.email&&l&&u){const g=Xf.credential(t.email,l);try{await cde(t,g),await pde(t,u),e({title:"Success",description:"Password changed successfully."}),c(""),d("")}catch{e({title:"Error",description:"Failed to change password. Please check your current password.",variant:"destructive"})}}},y=()=>{jH(n).then(()=>{e({title:"Logged Out",description:"You have been successfully logged out."})})};return t?p.jsx("div",{className:"min-h-[80vh] flex items-center justify-center bg-background",children:p.jsxs("div",{className:"w-full max-w-xl flex flex-col gap-8 p-4",children:[p.jsxs(TVe,{type:"single",collapsible:!0,className:"flex flex-col gap-8 w-full",children:[p.jsx(cO,{value:"profile",className:"!border-none",children:p.jsxs(wi,{className:"p-0 rounded-2xl !border-none !shadow-none",children:[p.jsx(uO,{className:"px-8 py-6 text-xl font-bold rounded-2xl !border-none !shadow-none !no-underline hover:!no-underline focus:!no-underline",children:"Profile Settings"}),p.jsx(dO,{children:p.jsxs(Ru,{className:"space-y-6 pt-2 px-8 pb-8",children:[p.jsx(Bk,{className:"mb-4",children:"Update your name and phone number."}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium",children:"Name"}),p.jsx(qr,{id:"displayName",value:i,onChange:g=>s(g.target.value),className:"h-11 text-base"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium",children:"Phone Number"}),p.jsx(qr,{id:"phoneNumber",type:"tel",value:o,onChange:g=>a(g.target.value),className:"h-11 text-base"})]}),p.jsx(Ze,{onClick:h,className:"w-full h-11 text-base mt-4",children:"Save Changes"})]})})]})}),p.jsx(cO,{value:"password",className:"!border-none",children:p.jsxs(wi,{className:"p-0 rounded-2xl !border-none !shadow-none",children:[p.jsx(uO,{className:"px-8 py-6 text-xl font-bold rounded-2xl !border-none !shadow-none !no-underline hover:!no-underline focus:!no-underline",children:"Change Password"}),p.jsx(dO,{children:p.jsxs(Ru,{className:"space-y-6 pt-2 px-8 pb-8",children:[p.jsx(Bk,{className:"mb-4",children:"Update your password here."}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium",children:"Current Password"}),p.jsx(qr,{id:"currentPassword",type:"password",value:l,onChange:g=>c(g.target.value),className:"h-11 text-base"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium",children:"New Password"}),p.jsx(qr,{id:"newPassword",type:"password",value:u,onChange:g=>d(g.target.value),className:"h-11 text-base"})]}),p.jsx(Ze,{onClick:m,className:"w-full h-11 text-base mt-4",children:"Change Password"})]})})]})})]}),p.jsx("div",{className:"flex justify-center pt-6",children:p.jsx(Ze,{variant:"destructive",onClick:y,className:"w-40 h-11 text-base",children:"Logout"})})]})}):p.jsx("div",{children:"Please sign in to view settings."})},FB="http://localhost:8000",VZ=()=>{const[n,e]=A.useState(null),[t,r]=A.useState(null),[i,s]=A.useState(!0),[o,a]=A.useState(null),[l,c]=A.useState(null),u=g=>{const b=["Jan","Feb","Mar","Apr","May","Jun"],w=g>0?g:1e5;return b.map((x,_)=>{const S=(Math.random()-.5)*.1;return{month:x,value:Math.round(w*(1+S-_*.02))}})};A.useCallback(g=>{var b,w,x,_,S,P,N,T;try{let C=null;if((x=(w=(b=g==null?void 0:g.result)==null?void 0:b.content)==null?void 0:w[0])!=null&&x.text?C=JSON.parse(g.result.content[0].text):g!=null&&g.fetch_net_worth&&(C=g),!C)throw new Error("No financial data found in response");const k=((_=C.fetch_net_worth)==null?void 0:_.netWorthResponse)||{},M=k.totalNetWorthValue||{},L=parseInt(String(M.units||0)),F=Array.isArray(k.assetValues)?k.assetValues:[],j={stocks:0,mutualFunds:0,savings:0,epf:0,nps:0,others:0};F.forEach(W=>{var K;if(!W)return;const V=String(W.netWorthAttribute||""),U=parseInt(String(((K=W.value)==null?void 0:K.units)||0));V.includes("EQUITY")||V.includes("STOCK")?j.stocks+=U:V.includes("MUTUAL_FUND")?j.mutualFunds+=U:V.includes("BANK")||V.includes("SAVINGS")?j.savings+=U:V.includes("EPF")?j.epf+=U:V.includes("NPS")?j.nps+=U:j.others+=U});const q=[],H=((P=(S=C.fetch_net_worth)==null?void 0:S.accountDetailsBulkResponse)==null?void 0:P.accountDetailsMap)||{},z=((T=(N=C.fetch_net_worth)==null?void 0:N.mfSchemeAnalytics)==null?void 0:T.schemeAnalytics)||[];return Array.isArray(z)&&z.forEach(W=>{var K,Q,B,Y,re;if(!W)return;const V=((Q=(K=W.enrichedAnalytics)==null?void 0:K.analytics)==null?void 0:Q.schemeDetails)||{},U=W.schemeDetail||{};q.push({id:String(U.schemeCode||Math.random().toString()),name:String(((B=U.nameData)==null?void 0:B.longName)||"Unknown MF"),type:"Mutual Fund",value:parseInt(String(((Y=V.currentValue)==null?void 0:Y.units)||0)),gain:parseInt(String(((re=V.totalGainValue)==null?void 0:re.units)||0)),symbol:String(U.schemeCode||"N/A")})}),typeof H=="object"&&H!==null&&Object.values(H).forEach(W=>{var Q,B,Y,re;if(!W||typeof W!="object")return;const V=W,U=V.accountDetails||{},K=String(U.accInstrumentType||"");if(K==="ACC_INSTRUMENT_TYPE_EQUITIES"){const te=((Q=V.equitySummary)==null?void 0:Q.holdingsInfo)||[];Array.isArray(te)&&te.forEach(ie=>{var Le,nn;if(!ie)return;const ae=parseInt(String(ie.units||0)),Ne=parseFloat(String(((Le=ie.lastTradedPrice)==null?void 0:Le.units)||0));q.push({id:String(ie.isin||Math.random().toString()),name:String(ie.issuerName||"Unknown Stock"),type:"Equity",symbol:String(ie.symbol||"N/A"),value:Math.round(ae*Ne),gain:parseInt(String(((nn=ie.totalGainValue)==null?void 0:nn.units)||0))})})}else if(K==="ACC_INSTRUMENT_TYPE_EPF"){const te=V.epfSummary||{};q.push({id:"epf-"+Math.random().toString(),name:"EPF Account",type:"EPF",symbol:"EPF",value:parseInt(String(((B=te.currentBalance)==null?void 0:B.units)||0)),gain:0})}else if(K==="ACC_INSTRUMENT_TYPE_NPS"){const te=V.npsSummary||{};q.push({id:"nps-"+Math.random().toString(),name:"NPS Account",type:"NPS",symbol:"NPS",value:parseInt(String(((Y=te.currentValue)==null?void 0:Y.units)||0)),gain:parseInt(String(((re=te.totalGainValue)==null?void 0:re.units)||0))})}}),{totalValue:L,processedAssets:j,holdings:q,performanceData:u(L)}}catch(C){throw console.error("Error processing MCP data:",C),C}},[]);const d=A.useCallback(async()=>{s(!0),a(null);try{console.log("Fetching portfolio data from MCP server...");const g=await fetch(`${FB}/portfolio`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:"demo_user",action:"summary"})});if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);const b=await g.json();if(console.log("Portfolio endpoint response:",b),!b.success)throw new Error(b.message||"Failed to fetch portfolio data");const w=b.data,x=w.total_value||0,_=w.holdings||[],S=w.asset_allocation||{},P={stocks:S.get("Equity",0)||0,mutualFunds:S.get("Mutual Fund",0)||0,savings:S.get("Savings",0)||0,epf:S.get("EPF",0)||0,nps:S.get("NPS",0)||0,others:S.get("Others",0)||0},N=_.map((C,k)=>({id:String(k+1),name:C.name||"Unknown",type:C.type||"Other",symbol:C.symbol||"N/A",value:C.value||0,gain:C.gain||0}));e({totalValue:x,assets:P,holdings:N});const T=u(x);r(T),c(new Date)}catch(g){console.error("Error fetching portfolio data:",g),a(g.message),console.log("Loading mock data for development..."),e({totalValue:5e5,assets:{stocks:2e5,mutualFunds:15e4,savings:1e5,epf:3e4,nps:2e4,others:0},holdings:[{id:"1",name:"Mock Stock 1",type:"Equity",symbol:"MOCK1",value:1e5,gain:5e3},{id:"2",name:"Mock Mutual Fund",type:"Mutual Fund",symbol:"MOCKMF",value:15e4,gain:-2e3}]}),r([{month:"Jan",value:45e4},{month:"Feb",value:47e4},{month:"Mar",value:48e4},{month:"Apr",value:49e4},{month:"May",value:485e3},{month:"Jun",value:5e5}]),c(new Date),a(null)}finally{s(!1)}},[]);if(A.useEffect(()=>{d()},[d]),A.useEffect(()=>{const g=setInterval(d,3e5);return()=>clearInterval(g)},[d]),i)return p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-zinc-950",children:p.jsxs("div",{className:"text-center",children:[p.jsx(Y2,{className:"animate-spin text-4xl text-blue-400 mx-auto mb-4"}),p.jsx("div",{className:"text-xl text-zinc-200",children:"Loading Portfolio Data..."}),p.jsx("div",{className:"text-sm text-zinc-400 mt-2",children:"Fetching data from MCP server"})]})});if(o)return p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-zinc-950",children:p.jsxs("div",{className:"text-center max-w-md",children:[p.jsx(D8,{className:"text-4xl text-red-400 mx-auto mb-4"}),p.jsx("div",{className:"text-xl text-zinc-200 mb-2",children:"Unable to Load Portfolio"}),p.jsx("div",{className:"text-sm text-zinc-400 mb-4",children:o}),p.jsxs("button",{onClick:d,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg flex items-center gap-2 mx-auto",children:[p.jsx(h4,{className:"w-4 h-4"})," Retry"]})]})});if(!n||!t)return p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-zinc-950",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-xl text-zinc-200",children:"No Portfolio Data Available"}),p.jsx("button",{onClick:d,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg mt-4",children:"Load Data"})]})});const h=[{name:"Stocks",value:n.assets.stocks,fill:"#6366f1"},{name:"Mutual Funds",value:n.assets.mutualFunds,fill:"#10b981"},{name:"Savings",value:n.assets.savings,fill:"#f59e42"},{name:"EPF",value:n.assets.epf,fill:"#8b5cf6"},{name:"NPS",value:n.assets.nps,fill:"#ef4444"},{name:"Others",value:n.assets.others,fill:"#64748b"}].filter(g=>g.value>0),m=n.holdings.reduce((g,b)=>{const w=typeof b.gain=="number"?b.gain:0;return g+w},0),y=n.totalValue>0?(m/n.totalValue*100).toFixed(2):"0.00";return p.jsx("div",{className:"min-h-screen bg-zinc-950 text-white",children:p.jsxs("div",{className:"space-y-10 px-2 md:px-0 pt-6 pb-6 md:pt-10 md:pb-10 max-w-7xl mx-auto",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold text-white",children:"Portfolio Overview"}),l&&p.jsxs("p",{className:"text-sm text-zinc-400",children:["Last updated: ",l.toLocaleTimeString()]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>{fetch(`${FB}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"test",user_id:"demo_user"})}).then(g=>(console.log("API test response status:",g.status),g.json())).then(g=>console.log("API test response:",g)).catch(g=>console.error("API test error:",g))},className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-2 rounded-lg text-sm",children:"Test API"}),p.jsxs("button",{onClick:d,disabled:i,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[p.jsx(h4,{className:`w-4 h-4 ${i?"animate-spin":""}`}),i?"Updating...":"Refresh"]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[p.jsxs("div",{className:"bg-zinc-900 rounded-2xl shadow-md p-6 flex items-center border border-zinc-800 min-h-[140px]",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-base font-medium text-zinc-200 mb-1",children:"Portfolio Value"}),p.jsxs("div",{className:"text-3xl font-extrabold text-white mb-1",children:["₹",n.totalValue.toLocaleString()]}),p.jsxs("div",{className:`text-base font-semibold ${m>=0?"text-green-400":"text-red-400"}`,children:[m>=0?"+":"","₹",m.toLocaleString()]})]}),p.jsx(nie,{className:"w-8 h-8 text-blue-400 ml-4"})]}),p.jsxs("div",{className:"bg-zinc-900 rounded-2xl shadow-md p-6 flex items-center border border-zinc-800 min-h-[140px]",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-base font-medium text-zinc-200 mb-1",children:"Performance"}),p.jsxs("div",{className:"text-3xl font-extrabold text-white mb-1",children:[y,"%"]}),p.jsx("div",{className:"text-base font-semibold text-zinc-400",children:"Overall Gain"})]}),p.jsx(F8,{className:"w-8 h-8 text-green-400 ml-4"})]}),p.jsxs("div",{className:"bg-zinc-900 rounded-2xl shadow-md p-6 flex items-center border border-zinc-800 min-h-[140px]",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-base font-medium text-zinc-200 mb-1",children:"Holdings"}),p.jsx("div",{className:"text-3xl font-extrabold text-white mb-1",children:n.holdings.length}),p.jsx("div",{className:"text-base font-semibold text-zinc-400",children:"Assets"})]}),p.jsx($re,{className:"w-8 h-8 text-purple-400 ml-4"})]}),p.jsxs("div",{className:"bg-zinc-900 rounded-2xl shadow-md p-6 flex items-center border border-zinc-800 min-h-[140px]",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-base font-medium text-zinc-200 mb-1",children:"Largest Asset"}),p.jsx("div",{className:"text-lg font-extrabold text-white mb-1",children:Object.entries(n.assets).filter(([,b])=>typeof b=="number"&&b>0).reduce((b,w)=>b[1]>w[1]?b:w,["others",0])[0].replace(/([A-Z])/g," $1").trim()}),p.jsxs("div",{className:"text-base font-semibold text-zinc-400",children:["₹",Math.max(...Object.values(n.assets).filter(g=>typeof g=="number")).toLocaleString()]})]}),p.jsx(Yre,{className:"w-8 h-8 text-yellow-400 ml-4"})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10",children:[p.jsxs("div",{className:"bg-zinc-900 rounded-2xl shadow-md p-6 border border-zinc-800 flex flex-col items-center relative",children:[p.jsx("div",{className:"text-lg font-semibold text-zinc-200 mb-4 w-full text-center border-b border-zinc-800 pb-2",children:"Asset Allocation"}),p.jsxs("div",{className:"relative w-64 h-64",children:[p.jsx(Ad,{data:h,cx:"50%",cy:"50%",innerRadius:90,outerRadius:120,paddingAngle:2,dataKey:"value"}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsxs("div",{className:"text-2xl font-bold text-white",children:["₹",(n.totalValue/1e5).toFixed(1),"L"]}),p.jsx("div",{className:"text-sm text-zinc-400",children:"Total"})]})})]}),p.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4 w-full",children:h.map((g,b)=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:g.fill}}),p.jsx("span",{className:"text-xs text-zinc-300",children:g.name})]},g.name))})]}),p.jsxs("div",{className:"bg-zinc-900 rounded-2xl shadow-md p-6 border border-zinc-800 flex flex-col",children:[p.jsx("div",{className:"text-lg font-semibold text-zinc-200 mb-4 w-full border-b border-zinc-800 pb-2",children:"Portfolio Performance"}),p.jsx("div",{className:"w-full h-64",children:p.jsx(wJ,{width:"100%",height:"100%",children:p.jsxs(U0,{data:t,children:[p.jsx(WL,{dataKey:"month",tick:{fill:"#a1a1aa"}}),p.jsx(GL,{tick:{fill:"#a1a1aa"},tickFormatter:g=>`₹${g>=1e5?(g/1e5).toFixed(1)+"L":g>=1e3?(g/1e3).toFixed(0)+"k":g}`}),p.jsx(U0,{type:"monotone",dataKey:"value",stroke:"#6366f1",strokeWidth:2,dot:!1,fill:"rgba(99, 102, 241, 0.15)"})]})})})]})]}),p.jsxs("div",{className:"bg-zinc-900 rounded-2xl shadow-md p-6 border border-zinc-800 mb-8",children:[p.jsx("div",{className:"text-lg font-semibold text-zinc-200 mb-4",children:"All Holdings"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-sm",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"border-b border-zinc-800",children:[p.jsx("th",{className:"text-left py-3 px-4 text-zinc-300",children:"Symbol"}),p.jsx("th",{className:"text-left py-3 px-4 text-zinc-300",children:"Name"}),p.jsx("th",{className:"text-left py-3 px-4 text-zinc-300",children:"Type"}),p.jsx("th",{className:"text-right py-3 px-4 text-zinc-300",children:"Value"}),p.jsx("th",{className:"text-right py-3 px-4 text-zinc-300",children:"Gain/Loss"})]})}),p.jsx("tbody",{children:n.holdings.sort((g,b)=>b.value-g.value).map((g,b)=>p.jsxs("tr",{className:b%2===0?"bg-zinc-800 hover:bg-zinc-700":"hover:bg-zinc-700",children:[p.jsx("td",{className:"py-3 px-4 font-mono text-blue-300",children:g.symbol}),p.jsx("td",{className:"py-3 px-4",children:g.name}),p.jsx("td",{className:"py-3 px-4",children:p.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-zinc-700 text-zinc-300",children:g.type})}),p.jsxs("td",{className:"py-3 px-4 text-right font-semibold",children:["₹",(typeof g.value=="number"?g.value:0).toLocaleString()]}),p.jsx("td",{className:"py-3 px-4 text-right",children:p.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${(g.gain||0)>=0?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:[(g.gain||0)>=0?"+":"","₹",(typeof g.gain=="number"?g.gain:0).toLocaleString()]})})]},g.id))})]})})]})]})})},CVe=()=>{const[n,e]=A.useState("home"),[t,r]=A.useState(!1),[i,s]=A.useState(!1),[o,a]=A.useState("home"),[l,c]=A.useState([]);A.useEffect(()=>{let h=null;const m=Ox(nr,y=>{if(s(!!y),y){t&&(r(!1),e(o));const g=Wr(tt,"users",y.uid,"alerts");h=jf(g,b=>{c(b.docs.map(w=>({id:w.id,...w.data()})))})}else c([]),h&&h()});return()=>{m(),h&&h()}},[t,o]);const u=h=>{!i&&["dashboard","notifications","settings","about"].includes(h)?(a(n),r(!0)):e(h)},d=()=>{if(!i&&["dashboard","notifications","settings","about"].includes(n))return p.jsx(hI,{});switch(n){case"home":return p.jsx(hI,{});case"dashboard":return p.jsx(YX,{});case"portfolio":return p.jsx(VZ,{});case"chat":return p.jsx("div",{className:"min-h-screen bg-background px-0 md:px-4",children:p.jsx(bZ,{})});case"notifications":return p.jsx("div",{className:"min-h-screen bg-background p-6",children:p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Smart Alerts"}),p.jsx("div",{className:"space-y-4",children:l.length===0?p.jsx("div",{className:"text-muted-foreground",children:"No new alerts."}):l.map(h=>p.jsxs("div",{className:"p-4 bg-gradient-card border border-border/50 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:h.title}),p.jsx("p",{className:"text-sm text-muted-foreground",children:h.body})]},h.id))})]})});case"settings":return p.jsx("div",{className:"min-h-screen bg-background p-6",children:p.jsx("div",{className:"max-w-4xl mx-auto",children:p.jsx($Z,{})})});case"about":return p.jsx("div",{className:"min-h-screen bg-background p-6 flex items-center justify-center",children:p.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[p.jsx("h1",{className:"text-3xl font-bold mb-4",children:"About Us"}),p.jsx("p",{className:"text-lg text-muted-foreground mb-2",children:"FinSight is dedicated to providing AI-powered investment and tax optimization solutions for everyone. Our mission is to empower users with smart, secure, and personalized financial advice."}),p.jsx("p",{className:"text-md text-muted-foreground",children:"Built by a passionate team of engineers and finance experts, FinSight leverages cutting-edge technology to help you grow and protect your wealth."})]})});default:return p.jsx(hI,{})}};return p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsx(Rq,{activeTab:n,onTabChange:u,onShowAuth:()=>r(!0)}),p.jsx("div",{className:`transition-filter duration-300 ${t?"blur-sm":""}`,children:d()}),t&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-40 flex items-center justify-center backdrop-blur-sm",onClick:()=>r(!1),children:p.jsx("div",{onClick:h=>h.stopPropagation(),children:p.jsx(wZ,{onClose:()=>r(!1)})})}),p.jsx("div",{className:"pb-20 md:pb-0"}),p.jsx(Nq,{onTabChange:u})]})},PVe=()=>{const n=ly();return A.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),p.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),p.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},IVe=({title:n,price:e,features:t,planId:r,isHighlighted:i})=>{const s=cc(),o=()=>{console.log(`User selected plan: ${n} (${r})`),s(`/payment?plan=${r}`)};return p.jsxs("div",{className:`relative border rounded-xl p-8 flex flex-col items-center text-center transition-transform shadow-lg duration-300 ease-out group
      ${i?"bg-gradient-to-br from-amber-400 to-amber-600 text-white transform scale-105 border-amber-500 ring-4 ring-amber-300/50 z-20":"bg-card border-border hover:shadow-2xl hover:scale-[1.05] group-hover:-translate-y-2 group-hover:z-20"}
    `,children:[i&&p.jsx(Ul,{className:"mb-4 bg-white text-amber-600 font-semibold px-4 py-1 rounded-full text-xs shadow-inner",children:"Most Popular"}),p.jsx("h3",{className:`text-3xl font-bold mb-4 ${i?"text-white":"text-primary"}`,children:n}),p.jsx("p",{className:`text-5xl font-extrabold mb-6 ${i?"text-white":"text-foreground"}`,children:e==="Custom"?"Custom":`$${e}`}),e!=="Custom"&&p.jsx("p",{className:`text-sm mb-6 ${i?"text-amber-100":"text-muted-foreground"}`,children:"per month"}),p.jsx("ul",{className:`mb-8 flex-grow space-y-3 ${i?"text-amber-50":"text-muted-foreground"}`,children:t.map((a,l)=>p.jsxs("li",{className:"flex items-center gap-3",children:[p.jsx("span",{className:`${i?"text-white":"text-green-500"}`,children:p.jsx(_a,{className:"w-5 h-5 fill-current"})}),p.jsx("span",{className:`${i?"font-medium":""}`,children:a})]},l))}),p.jsxs(Ze,{onClick:o,className:`w-full py-3 text-lg font-semibold rounded-lg transition-all duration-200
          ${i?"bg-white text-amber-600 hover:bg-amber-100":"bg-primary hover:bg-primary/90"}
        `,children:["Select ",n," Plan"]})]})},kVe=()=>{const n=[{title:"Personal",price:"19",features:["Unlimited Chats","Basic Analytics","Email Support","Single User Access"],planId:"personal_monthly",isHighlighted:!1},{title:"Family",price:"49",features:["All Personal features","Advanced Analytics","Priority Email Support","Up to 5 Users","Personalized Guidance"],planId:"family_monthly",isHighlighted:!0},{title:"Enterprise",price:"Custom",features:["All Family features","Unlimited Users","Dedicated Account Manager","Custom Integrations","On-demand Training & API Access"],planId:"enterprise_custom",isHighlighted:!1}];return p.jsxs(Es,{children:[" ",p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-theme(spacing.16)-theme(spacing.16))] py-12 px-4",children:[p.jsx("h2",{className:"text-5xl font-extrabold text-center mb-6 mt-0 bg-clip-text text-transparent bg-gradient-to-r from-primary to-amber-400",children:"Unlock FinSight AI Premium Features"}),p.jsx("p",{className:"text-xl text-muted-foreground text-center max-w-2xl mb-12",children:"Choose the plan that best fits your financial advisory needs and gain access to premium features."}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl w-full",children:n.map(e=>p.jsx(IVe,{...e},e.planId))})]})]})};var RVe="Label",BZ=A.forwardRef((n,e)=>p.jsx(Re.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));BZ.displayName=RVe;var zZ=BZ;const NVe=Kf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Rp=A.forwardRef(({className:n,...e},t)=>p.jsx(zZ,{ref:t,className:ce(NVe(),n),...e}));Rp.displayName=zZ.displayName;const OVe=()=>{const n=ly(),e=cc(),{toast:t}=qf(),[r,i]=A.useState(null),[s,o]=A.useState(!1),[a,l]=A.useState(null),[c,u]=A.useState(""),[d,h]=A.useState(""),[m,y]=A.useState(""),[g,b]=A.useState(""),[w,x]=A.useState("");A.useEffect(()=>{const P=new URLSearchParams(n.search).get("plan");P?i(P):(t({title:"Error",description:"No plan selected. Redirecting to plans page...",variant:"destructive"}),setTimeout(()=>e("/pro-subscription"),1500))},[n.search,e,t]);const _=async()=>{if(!r){t({title:"Error",description:"No plan selected.",variant:"destructive"});return}if(!a){t({title:"Error",description:"Please select a payment method.",variant:"destructive"});return}o(!0),t({title:"Processing Payment...",description:`Processing ${a.toUpperCase()} payment for ${r.replace("_"," ").toUpperCase()} plan.`});try{await new Promise(P=>setTimeout(P,2e3)),t({title:"Payment Successful!",description:"Your subscription is now active.",variant:"default"});const S=nr.currentUser;if(S)try{const P=tn(tt,"users",S.uid);await Nt(P,{isPro:!0,proPlanId:r,proSubscriptionDate:new Date,lastUpdated:new Date},{merge:!0}),t({title:"Subscription Activated!",description:"You now have access to FinSight AI Pro features.",variant:"default"})}catch(P){console.error("Error updating user subscription:",P)}console.log("Payment successful, redirecting to Pro AI Chat..."),e("/pro-ai-chat")}catch(S){console.error("Error during payment:",S),t({title:"Payment Error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{o(!1)}};return p.jsx(Es,{children:p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-theme(spacing.16)-theme(spacing.16))] py-12 px-4",children:[p.jsx("h2",{className:"text-4xl font-bold mb-8 text-center text-primary",children:"Complete Your Subscription"}),r?p.jsxs("div",{className:"bg-card p-8 rounded-lg shadow-xl max-w-lg w-full",children:[p.jsx("p",{className:"text-xl mb-4 text-center",children:"You are subscribing to the:"}),p.jsxs("p",{className:"text-3xl font-semibold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-primary to-amber-400",children:[r.replace("_"," ").toUpperCase()," Plan"]}),p.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[p.jsxs(Ze,{variant:a==="upi"?"default":"outline",className:`flex items-center gap-2 px-6 py-3 rounded-full ${a==="upi"?"bg-primary text-primary-foreground":"border border-border/50 text-foreground hover:bg-accent"}`,onClick:()=>l("upi"),disabled:s,children:[p.jsx(Zre,{className:"w-5 h-5"})," Pay with UPI"]}),p.jsxs(Ze,{variant:a==="card"?"default":"outline",className:`flex items-center gap-2 px-6 py-3 rounded-full ${a==="card"?"bg-primary text-primary-foreground":"border border-border/50 text-foreground hover:bg-accent"}`,onClick:()=>l("card"),disabled:s,children:[p.jsx(Gre,{className:"w-5 h-5"})," Credit/Debit Card"]})]}),a&&p.jsx(pL,{className:"my-6 bg-border/50"}),a==="upi"&&p.jsxs("div",{className:"space-y-4 animate-fade-in",children:[p.jsx("h3",{className:"text-2xl font-semibold text-center mb-4 text-secondary-foreground",children:"Pay with UPI"}),p.jsx("p",{className:"text-center text-muted-foreground text-sm mb-6",children:"Enter your UPI ID and approve the payment request on your UPI app."}),p.jsxs("div",{children:[p.jsx(Rp,{htmlFor:"upi-id",className:"text-sm font-medium mb-1 block",children:"Your UPI ID"}),p.jsx(qr,{id:"upi-id",placeholder:"e.g., yourname@bankname",value:w,onChange:S=>x(S.target.value),className:"bg-background/80 border-border/50",disabled:s})]}),p.jsx("p",{className:"text-center text-xs text-muted-foreground mt-4",children:"(A payment request will be sent to your UPI app)"})]}),a==="card"&&p.jsxs("div",{className:"space-y-4 animate-fade-in",children:[p.jsx("h3",{className:"text-2xl font-semibold text-center mb-4 text-secondary-foreground",children:"Credit/Debit Card Details"}),p.jsxs("div",{children:[p.jsx(Rp,{htmlFor:"card-number",className:"text-sm font-medium mb-1 block",children:"Card Number"}),p.jsx(qr,{id:"card-number",placeholder:"XXXX XXXX XXXX XXXX",value:c,onChange:S=>u(S.target.value),maxLength:19,className:"bg-background/80 border-border/50",disabled:s})]}),p.jsxs("div",{children:[p.jsx(Rp,{htmlFor:"card-holder-name",className:"text-sm font-medium mb-1 block",children:"Cardholder Name"}),p.jsx(qr,{id:"card-holder-name",placeholder:"JOHN DOE",value:g,onChange:S=>b(S.target.value),className:"bg-background/80 border-border/50",disabled:s})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx(Rp,{htmlFor:"expiry-date",className:"text-sm font-medium mb-1 block",children:"Expiry Date (MM/YY)"}),p.jsx(qr,{id:"expiry-date",placeholder:"MM/YY",value:d,onChange:S=>h(S.target.value),maxLength:5,className:"bg-background/80 border-border/50",disabled:s})]}),p.jsxs("div",{children:[p.jsx(Rp,{htmlFor:"cvv",className:"text-sm font-medium mb-1 block",children:"CVV"}),p.jsx(qr,{id:"cvv",placeholder:"XXX",value:m,onChange:S=>y(S.target.value),maxLength:4,type:"password",className:"bg-background/80 border-border/50",disabled:s})]})]})]}),a&&p.jsx(Ze,{onClick:_,className:"w-full h-12 text-lg font-bold mt-8 bg-green-600 hover:bg-green-700 transition-colors",disabled:s||!r||!a,children:s?p.jsxs(p.Fragment,{children:[p.jsx(Y2,{className:"mr-2 h-5 w-5 animate-spin"}),"Processing..."]}):"Complete Payment"})]}):p.jsxs("div",{className:"flex flex-col items-center gap-4 text-muted-foreground",children:[p.jsx(Y2,{className:"h-8 w-8 animate-spin text-primary"}),p.jsx("p",{children:"Loading plan details..."})]})]})})},MVe=()=>{const{user:n,isPro:e,loadingUser:t}=Oo(),r=async()=>{n&&(e?await oG(n.uid):await sG(n.uid))};return t||!n?null:p.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:p.jsx(Ze,{onClick:r,variant:e?"destructive":"default",className:`flex items-center gap-2 ${e?"bg-amber-500 hover:bg-amber-600 text-white":"bg-primary hover:bg-primary/90"}`,size:"sm",children:e?p.jsxs(p.Fragment,{children:[p.jsx(_a,{className:"w-4 h-4"}),"Remove Pro"]}):p.jsxs(p.Fragment,{children:[p.jsx(Vl,{className:"w-4 h-4"}),"Make Pro"]})})})},DVe=()=>{const{user:n,isPro:e,loadingUser:t}=Oo(),r=cc(),i=async()=>{n&&(e?await oG(n.uid):await sG(n.uid))},s=()=>{r("/chat")};return t?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),p.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):n?p.jsx("div",{className:"min-h-screen bg-background p-8",children:p.jsxs("div",{className:"max-w-2xl mx-auto",children:[p.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Pro Status Test Page"}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-card p-6 rounded-lg border",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Current Status"}),p.jsx("div",{className:"flex items-center gap-3 mb-4",children:e?p.jsxs(p.Fragment,{children:[p.jsx(_a,{className:"w-6 h-6 text-amber-500"}),p.jsx("span",{className:"text-lg font-medium",children:"Pro User"}),p.jsx("span",{className:"bg-amber-500 text-white px-2 py-1 rounded text-sm",children:"ACTIVE"})]}):p.jsxs(p.Fragment,{children:[p.jsx(Vl,{className:"w-6 h-6 text-muted-foreground"}),p.jsx("span",{className:"text-lg font-medium",children:"Regular User"}),p.jsx("span",{className:"bg-muted text-muted-foreground px-2 py-1 rounded text-sm",children:"FREE"})]})}),p.jsxs("p",{className:"text-sm text-muted-foreground",children:["User ID: ",n.uid]})]}),p.jsxs("div",{className:"bg-card p-6 rounded-lg border",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Test Actions"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(Ze,{onClick:i,variant:e?"destructive":"default",className:`w-full ${e?"bg-amber-500 hover:bg-amber-600 text-white":"bg-primary hover:bg-primary/90"}`,children:e?p.jsxs(p.Fragment,{children:[p.jsx(_a,{className:"w-4 h-4 mr-2"}),"Remove Pro Status"]}):p.jsxs(p.Fragment,{children:[p.jsx(Vl,{className:"w-4 h-4 mr-2"}),"Make Pro User"]})}),p.jsxs(Ze,{onClick:s,variant:"outline",className:"w-full",children:[p.jsx(jre,{className:"w-4 h-4 mr-2"}),"Go to Chat (Auto-routing)"]})]})]}),p.jsxs("div",{className:"bg-card p-6 rounded-lg border",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Expected Behavior"}),p.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[p.jsx("li",{children:"• Pro users should automatically be redirected to /pro-ai-chat"}),p.jsx("li",{children:"• Regular users should see the standard chat at /chat"}),p.jsx("li",{children:"• Pro users cannot access regular chat (redirected)"}),p.jsx("li",{children:"• Regular users cannot access Pro chat (redirected)"}),p.jsx("li",{children:"• Status changes are reflected immediately"})]})]})]})]})}):p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please Sign In"}),p.jsx("p",{className:"text-muted-foreground",children:"You need to be signed in to test Pro functionality."})]})})};function LVe(){const[n,e]=A.useState([]);return A.useEffect(()=>{const t=a0(Wr(tt,"alerts"),l0("createdAt","desc")),r=jf(t,i=>{e(i.docs.map(s=>({id:s.id,...s.data()})))});return()=>r()},[]),p.jsxs("div",{children:[n.length===0&&p.jsx("div",{children:"No alerts yet."}),n.map(t=>p.jsxs("div",{style:{marginBottom:"1rem"},children:[p.jsx("strong",{children:t.title}),p.jsx("div",{children:t.body}),p.jsx("small",{children:t.createdAt&&typeof t.createdAt=="object"&&"seconds"in t.createdAt?new Date(t.createdAt.seconds*1e3).toLocaleString():""})]},t.id))]})}function jVe(){return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-950 to-indigo-950 p-0 md:p-8 flex flex-col items-center font-sans pb-32 md:pb-16",children:p.jsxs("div",{className:"w-full max-w-7xl rounded-none md:rounded-2xl shadow-2xl bg-white/10 backdrop-blur-md border border-zinc-800 p-0 md:p-8 mt-0 md:mt-8 min-h-screen md:min-h-0",children:[p.jsxs("div",{className:"w-full flex flex-col items-center mb-6 mt-2",children:[p.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-1 drop-shadow-lg",children:"Smart Alerts"}),p.jsx("p",{className:"text-zinc-300 text-base md:text-lg",children:"Stay informed about your investments."})]}),p.jsx("div",{className:"space-y-6 md:space-y-8 p-4 md:p-0 mb-8 md:mb-12",children:p.jsx(LVe,{})})]})})}const FVe=()=>p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-950 to-indigo-950 p-0 md:p-8 flex flex-col items-center font-sans pb-32 md:pb-16",children:p.jsxs("div",{className:"w-full max-w-7xl rounded-none md:rounded-2xl shadow-2xl bg-white/10 backdrop-blur-md border border-zinc-800 p-0 md:p-8 mt-0 md:mt-8 min-h-screen md:min-h-0",children:[p.jsxs("div",{className:"w-full flex flex-col items-center mb-6 mt-2",children:[p.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-1 drop-shadow-lg",children:"About FinSight"}),p.jsx("p",{className:"text-zinc-300 text-base md:text-lg",children:"Your AI-powered investment advisor."})]}),p.jsxs("div",{className:"space-y-6 md:space-y-8 p-4 md:p-0 mb-8 md:mb-12",children:[p.jsxs("div",{className:"bg-zinc-900 rounded-2xl shadow-md p-6 border border-zinc-800",children:[p.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Our Mission"}),p.jsx("p",{className:"text-zinc-300 mb-4",children:"FinSight is an AI-powered investment platform designed to help you make informed financial decisions. We combine advanced analytics, real-time market data, and personalized insights to guide your investment journey."}),p.jsx("p",{className:"text-zinc-300 mb-4",children:"Whether you're a seasoned investor or just starting out, our intelligent assistant provides comprehensive analysis, portfolio optimization, and tax-efficient strategies tailored to your goals."})]}),"``",p.jsxs("div",{className:"bg-zinc-900 rounded-2xl shadow-md p-6 border border-zinc-800",children:[p.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Key Features"}),p.jsxs("ul",{className:"text-zinc-300 space-y-2",children:[p.jsx("li",{children:"• AI-powered investment recommendations"}),p.jsx("li",{children:"• Real-time portfolio tracking and analytics"}),p.jsx("li",{children:"• Tax optimization strategies"}),p.jsx("li",{children:"• Advanced charting and technical analysis"}),p.jsx("li",{children:"• Personalized alerts and notifications"}),p.jsx("li",{children:"• Comprehensive financial insights"})]})]})]})]})}),$Ve=new dae,VVe=({children:n})=>{const{user:e,loadingUser:t}=Oo();return t?p.jsx(Es,{children:p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),p.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})})}):e?p.jsx(p.Fragment,{children:n}):p.jsx(Es,{children:p.jsx(wZ,{})})},BVe=({children:n})=>{const{user:e,isPro:t,loadingUser:r}=Oo();return r?p.jsx(Es,{children:p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),p.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})})}):e?t?p.jsx(p.Fragment,{children:n}):p.jsx(j4,{to:"/chat",replace:!0}):p.jsx(j4,{to:"/",replace:!0})},zVe=()=>p.jsx(VVe,{children:p.jsx(Es,{children:p.jsx(VZ,{})})}),UVe=()=>p.jsx(fae,{client:$Ve,children:p.jsxs(E9,{children:[p.jsx(Fie,{}),p.jsx(fse,{}),p.jsx(ive,{children:p.jsx(J1e,{children:p.jsxs(rle,{children:[p.jsxs(ele,{children:[p.jsx(ki,{path:"/",element:p.jsx(CVe,{})}),p.jsx(ki,{path:"/dashboard",element:p.jsx(Es,{children:p.jsx(YX,{})})}),p.jsx(ki,{path:"/chat",element:p.jsx(Es,{children:p.jsx(bZ,{})})}),p.jsx(ki,{path:"/pro-ai-chat",element:p.jsx(BVe,{children:p.jsx(Es,{children:p.jsx(vZ,{})})})}),p.jsx(ki,{path:"/portfolio",element:p.jsx(zVe,{})}),p.jsx(ki,{path:"/alerts",element:p.jsx(Es,{children:p.jsx(jVe,{})})}),p.jsx(ki,{path:"/settings",element:p.jsx(Es,{children:p.jsx($Z,{})})}),p.jsx(ki,{path:"/about",element:p.jsx(Es,{children:p.jsx(FVe,{})})}),p.jsx(ki,{path:"/pro-subscription",element:p.jsx(kVe,{})}),p.jsx(ki,{path:"/payment",element:p.jsx(OVe,{})}),p.jsx(ki,{path:"/test-pro",element:p.jsx(DVe,{})}),p.jsx(ki,{path:"*",element:p.jsx(PVe,{})})]}),p.jsx(MVe,{})]})})})]})});l8(document.getElementById("root")).render(p.jsx(UVe,{}));
